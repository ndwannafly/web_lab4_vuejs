(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00b4":function(t,e,i){"use strict";i("ac1f");var r=i("23e7"),s=i("da84"),n=i("c65b"),o=i("e330"),a=i("1626"),l=i("861d"),c=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),h=s.Error,u=o(/./.test);r({target:"RegExp",proto:!0,forced:!c},{test:function(t){var e=this.exec;if(!a(e))return u(this,t);var i=n(e,this,t);if(null!==i&&!l(i))throw new h("RegExp exec method returned something other than an Object or null");return!!i}})},"00ee":function(t,e,i){var r=i("b622"),s=r("toStringTag"),n={};n[s]="z",t.exports="[object z]"===String(n)},"0366":function(t,e,i){var r=i("e330"),s=i("59ed"),n=r(r.bind);t.exports=function(t,e){return s(t),void 0===e?t:n?n(t,e):function(){return t.apply(e,arguments)}}},"06cf":function(t,e,i){var r=i("83ab"),s=i("c65b"),n=i("d1e7"),o=i("5c6c"),a=i("fc6a"),l=i("a04b"),c=i("1a2d"),h=i("0cfb"),u=Object.getOwnPropertyDescriptor;e.f=r?u:function(t,e){if(t=a(t),e=l(e),h)try{return u(t,e)}catch(i){}if(c(t,e))return o(!s(n.f,t,e),t[e])}},"07ac":function(t,e,i){var r=i("23e7"),s=i("6f53").values;r({target:"Object",stat:!0},{values:function(t){return s(t)}})},"07fa":function(t,e,i){var r=i("50c4");t.exports=function(t){return r(t.length)}},"0b42":function(t,e,i){var r=i("da84"),s=i("e8b5"),n=i("68ee"),o=i("861d"),a=i("b622"),l=a("species"),c=r.Array;t.exports=function(t){var e;return s(t)&&(e=t.constructor,n(e)&&(e===c||s(e.prototype))?e=void 0:o(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?c:e}},"0cb2":function(t,e,i){var r=i("e330"),s=i("7b0b"),n=Math.floor,o=r("".charAt),a=r("".replace),l=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,i,r,u,d){var p=i+t.length,f=r.length,m=h;return void 0!==u&&(u=s(u),m=c),a(d,m,(function(s,a){var c;switch(o(a,0)){case"$":return"$";case"&":return t;case"`":return l(e,0,i);case"'":return l(e,p);case"<":c=u[l(a,1,-1)];break;default:var h=+a;if(0===h)return s;if(h>f){var d=n(h/10);return 0===d?s:d<=f?void 0===r[d-1]?o(a,1):r[d-1]+o(a,1):s}c=r[h-1]}return void 0===c?"":c}))}},"0cfb":function(t,e,i){var r=i("83ab"),s=i("d039"),n=i("cc12");t.exports=!r&&!s((function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},"0d51":function(t,e,i){var r=i("da84"),s=r.String;t.exports=function(t){try{return s(t)}catch(e){return"Object"}}},"107c":function(t,e,i){var r=i("d039"),s=i("da84"),n=s.RegExp;t.exports=r((function(){var t=n("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},1148:function(t,e,i){"use strict";var r=i("da84"),s=i("5926"),n=i("577e"),o=i("1d80"),a=r.RangeError;t.exports=function(t){var e=n(o(this)),i="",r=s(t);if(r<0||r==1/0)throw a("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},"14c3":function(t,e,i){var r=i("da84"),s=i("c65b"),n=i("825a"),o=i("1626"),a=i("c6b6"),l=i("9263"),c=r.TypeError;t.exports=function(t,e){var i=t.exec;if(o(i)){var r=s(i,t,e);return null!==r&&n(r),r}if("RegExp"===a(t))return s(l,t,e);throw c("RegExp#exec called on incompatible receiver")}},1626:function(t,e){t.exports=function(t){return"function"==typeof t}},"19aa":function(t,e,i){var r=i("da84"),s=i("3a9b"),n=r.TypeError;t.exports=function(t,e){if(s(e,t))return t;throw n("Incorrect invocation")}},"1a2d":function(t,e,i){var r=i("e330"),s=i("7b0b"),n=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return n(s(t),e)}},"1be4":function(t,e,i){var r=i("d066");t.exports=r("document","documentElement")},"1c7e":function(t,e,i){var r=i("b622"),s=r("iterator"),n=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){n=!0}};a[s]=function(){return this},Array.from(a,(function(){throw 2}))}catch(l){}t.exports=function(t,e){if(!e&&!n)return!1;var i=!1;try{var r={};r[s]=function(){return{next:function(){return{done:i=!0}}}},t(r)}catch(l){}return i}},"1cdc":function(t,e,i){var r=i("342f");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},"1d80":function(t,e,i){var r=i("da84"),s=r.TypeError;t.exports=function(t){if(void 0==t)throw s("Can't call method on "+t);return t}},"1da1":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));i("d3b7");function r(t,e,i,r,s,n,o){try{var a=t[n](o),l=a.value}catch(c){return void i(c)}a.done?e(l):Promise.resolve(l).then(r,s)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(s,n){var o=t.apply(e,i);function a(t){r(o,s,n,a,l,"next",t)}function l(t){r(o,s,n,a,l,"throw",t)}a(void 0)}))}}},"1dde":function(t,e,i){var r=i("d039"),s=i("b622"),n=i("2d00"),o=s("species");t.exports=function(t){return n>=51||!r((function(){var e=[],i=e.constructor={};return i[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2266:function(t,e,i){var r=i("da84"),s=i("0366"),n=i("c65b"),o=i("825a"),a=i("0d51"),l=i("e95a"),c=i("07fa"),h=i("3a9b"),u=i("9a1f"),d=i("35a1"),p=i("2a62"),f=r.TypeError,m=function(t,e){this.stopped=t,this.result=e},b=m.prototype;t.exports=function(t,e,i){var r,v,g,y,_,C,P,O=i&&i.that,x=!(!i||!i.AS_ENTRIES),E=!(!i||!i.IS_ITERATOR),w=!(!i||!i.INTERRUPTED),S=s(e,O),T=function(t){return r&&p(r,"normal",t),new m(!0,t)},N=function(t){return x?(o(t),w?S(t[0],t[1],T):S(t[0],t[1])):w?S(t,T):S(t)};if(E)r=t;else{if(v=d(t),!v)throw f(a(t)+" is not iterable");if(l(v)){for(g=0,y=c(t);y>g;g++)if(_=N(t[g]),_&&h(b,_))return _;return new m(!1)}r=u(t,v)}C=r.next;while(!(P=n(C,r)).done){try{_=N(P.value)}catch(M){p(r,"throw",M)}if("object"==typeof _&&_&&h(b,_))return _}return new m(!1)}},"23cb":function(t,e,i){var r=i("5926"),s=Math.max,n=Math.min;t.exports=function(t,e){var i=r(t);return i<0?s(i+e,0):n(i,e)}},"23e7":function(t,e,i){var r=i("da84"),s=i("06cf").f,n=i("9112"),o=i("6eeb"),a=i("ce4e"),l=i("e893"),c=i("94ca");t.exports=function(t,e){var i,h,u,d,p,f,m=t.target,b=t.global,v=t.stat;if(h=b?r:v?r[m]||a(m,{}):(r[m]||{}).prototype,h)for(u in e){if(p=e[u],t.noTargetGet?(f=s(h,u),d=f&&f.value):d=h[u],i=c(b?u:m+(v?".":"#")+u,t.forced),!i&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(t.sham||d&&d.sham)&&n(p,"sham",!0),o(h,u,p,t)}}},"241c":function(t,e,i){var r=i("ca84"),s=i("7839"),n=s.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},2626:function(t,e,i){"use strict";var r=i("d066"),s=i("9bf2"),n=i("b622"),o=i("83ab"),a=n("species");t.exports=function(t){var e=r(t),i=s.f;o&&e&&!e[a]&&i(e,a,{configurable:!0,get:function(){return this}})}},"2a62":function(t,e,i){var r=i("c65b"),s=i("825a"),n=i("dc4a");t.exports=function(t,e,i){var o,a;s(t);try{if(o=n(t,"return"),!o){if("throw"===e)throw i;return i}o=r(o,t)}catch(l){a=!0,o=l}if("throw"===e)throw i;if(a)throw o;return s(o),i}},"2ba4":function(t,e){var i=Function.prototype,r=i.apply,s=i.bind,n=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(s?n.bind(r):function(){return n.apply(r,arguments)})},"2cf4":function(t,e,i){var r,s,n,o,a=i("da84"),l=i("2ba4"),c=i("0366"),h=i("1626"),u=i("1a2d"),d=i("d039"),p=i("1be4"),f=i("f36a"),m=i("cc12"),b=i("1cdc"),v=i("605d"),g=a.setImmediate,y=a.clearImmediate,_=a.process,C=a.Dispatch,P=a.Function,O=a.MessageChannel,x=a.String,E=0,w={},S="onreadystatechange";try{r=a.location}catch(R){}var T=function(t){if(u(w,t)){var e=w[t];delete w[t],e()}},N=function(t){return function(){T(t)}},M=function(t){T(t.data)},A=function(t){a.postMessage(x(t),r.protocol+"//"+r.host)};g&&y||(g=function(t){var e=f(arguments,1);return w[++E]=function(){l(h(t)?t:P(t),void 0,e)},s(E),E},y=function(t){delete w[t]},v?s=function(t){_.nextTick(N(t))}:C&&C.now?s=function(t){C.now(N(t))}:O&&!b?(n=new O,o=n.port2,n.port1.onmessage=M,s=c(o.postMessage,o)):a.addEventListener&&h(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!d(A)?(s=A,a.addEventListener("message",M,!1)):s=S in m("script")?function(t){p.appendChild(m("script"))[S]=function(){p.removeChild(this),T(t)}}:function(t){setTimeout(N(t),0)}),t.exports={set:g,clear:y}},"2d00":function(t,e,i){var r,s,n=i("da84"),o=i("342f"),a=n.process,l=n.Deno,c=a&&a.versions||l&&l.version,h=c&&c.v8;h&&(r=h.split("."),s=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!s&&o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(s=+r[1]))),t.exports=s},"342f":function(t,e,i){var r=i("d066");t.exports=r("navigator","userAgent")||""},"35a1":function(t,e,i){var r=i("f5df"),s=i("dc4a"),n=i("3f8c"),o=i("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return s(t,a)||s(t,"@@iterator")||n[r(t)]}},"37e8":function(t,e,i){var r=i("83ab"),s=i("9bf2"),n=i("825a"),o=i("fc6a"),a=i("df75");t.exports=r?Object.defineProperties:function(t,e){n(t);var i,r=o(e),l=a(e),c=l.length,h=0;while(c>h)s.f(t,i=l[h++],r[i]);return t}},"3a9b":function(t,e,i){var r=i("e330");t.exports=r({}.isPrototypeOf)},"3bbe":function(t,e,i){var r=i("da84"),s=i("1626"),n=r.String,o=r.TypeError;t.exports=function(t){if("object"==typeof t||s(t))return t;throw o("Can't set "+n(t)+" as a prototype")}},"3f8c":function(t,e){t.exports={}},"408a":function(t,e,i){var r=i("e330");t.exports=r(1..valueOf)},4362:function(t,e,i){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=i("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"44ad":function(t,e,i){var r=i("da84"),s=i("e330"),n=i("d039"),o=i("c6b6"),a=r.Object,l=s("".split);t.exports=n((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?l(t,""):a(t)}:a},"44d2":function(t,e,i){var r=i("b622"),s=i("7c73"),n=i("9bf2"),o=r("unscopables"),a=Array.prototype;void 0==a[o]&&n.f(a,o,{configurable:!0,value:s(null)}),t.exports=function(t){a[o][t]=!0}},"44de":function(t,e,i){var r=i("da84");t.exports=function(t,e){var i=r.console;i&&i.error&&(1==arguments.length?i.error(t):i.error(t,e))}},4840:function(t,e,i){var r=i("825a"),s=i("5087"),n=i("b622"),o=n("species");t.exports=function(t,e){var i,n=r(t).constructor;return void 0===n||void 0==(i=r(n)[o])?e:s(i)}},"485a":function(t,e,i){var r=i("da84"),s=i("c65b"),n=i("1626"),o=i("861d"),a=r.TypeError;t.exports=function(t,e){var i,r;if("string"===e&&n(i=t.toString)&&!o(r=s(i,t)))return r;if(n(i=t.valueOf)&&!o(r=s(i,t)))return r;if("string"!==e&&n(i=t.toString)&&!o(r=s(i,t)))return r;throw a("Can't convert object to primitive value")}},4930:function(t,e,i){var r=i("2d00"),s=i("d039");t.exports=!!Object.getOwnPropertySymbols&&!s((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"4d64":function(t,e,i){var r=i("fc6a"),s=i("23cb"),n=i("07fa"),o=function(t){return function(e,i,o){var a,l=r(e),c=n(l),h=s(o,c);if(t&&i!=i){while(c>h)if(a=l[h++],a!=a)return!0}else for(;c>h;h++)if((t||h in l)&&l[h]===i)return t||h||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},5087:function(t,e,i){var r=i("da84"),s=i("68ee"),n=i("0d51"),o=r.TypeError;t.exports=function(t){if(s(t))return t;throw o(n(t)+" is not a constructor")}},"50c4":function(t,e,i){var r=i("5926"),s=Math.min;t.exports=function(t){return t>0?s(r(t),9007199254740991):0}},5319:function(t,e,i){"use strict";var r=i("2ba4"),s=i("c65b"),n=i("e330"),o=i("d784"),a=i("d039"),l=i("825a"),c=i("1626"),h=i("5926"),u=i("50c4"),d=i("577e"),p=i("1d80"),f=i("8aa5"),m=i("dc4a"),b=i("0cb2"),v=i("14c3"),g=i("b622"),y=g("replace"),_=Math.max,C=Math.min,P=n([].concat),O=n([].push),x=n("".indexOf),E=n("".slice),w=function(t){return void 0===t?t:String(t)},S=function(){return"$0"==="a".replace(/./,"$0")}(),T=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),N=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));o("replace",(function(t,e,i){var n=T?"$":"$0";return[function(t,i){var r=p(this),n=void 0==t?void 0:m(t,y);return n?s(n,t,r,i):s(e,d(r),t,i)},function(t,s){var o=l(this),a=d(t);if("string"==typeof s&&-1===x(s,n)&&-1===x(s,"$<")){var p=i(e,o,a,s);if(p.done)return p.value}var m=c(s);m||(s=d(s));var g=o.global;if(g){var y=o.unicode;o.lastIndex=0}var S=[];while(1){var T=v(o,a);if(null===T)break;if(O(S,T),!g)break;var N=d(T[0]);""===N&&(o.lastIndex=f(a,u(o.lastIndex),y))}for(var M="",A=0,R=0;R<S.length;R++){T=S[R];for(var k=d(T[0]),L=_(C(h(T.index),a.length),0),j=[],I=1;I<T.length;I++)O(j,w(T[I]));var B=T.groups;if(m){var D=P([k],j,L,a);void 0!==B&&O(D,B);var Y=d(r(s,void 0,D))}else Y=b(k,a,L,j,B,s);L>=A&&(M+=E(a,A,L)+Y,A=L+k.length)}return M+E(a,A)}]}),!N||!S||T)},5692:function(t,e,i){var r=i("c430"),s=i("c6cd");(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,i){var r=i("d066"),s=i("e330"),n=i("241c"),o=i("7418"),a=i("825a"),l=s([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=n.f(a(t)),i=o.f;return i?l(e,i(t)):e}},"577e":function(t,e,i){var r=i("da84"),s=i("f5df"),n=r.String;t.exports=function(t){if("Symbol"===s(t))throw TypeError("Cannot convert a Symbol value to a string");return n(t)}},5926:function(t,e){var i=Math.ceil,r=Math.floor;t.exports=function(t){var e=+t;return e!==e||0===e?0:(e>0?r:i)(e)}},"59ed":function(t,e,i){var r=i("da84"),s=i("1626"),n=i("0d51"),o=r.TypeError;t.exports=function(t){if(s(t))return t;throw o(n(t)+" is not a function")}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5e77":function(t,e,i){var r=i("83ab"),s=i("1a2d"),n=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=s(n,"name"),l=a&&"something"===function(){}.name,c=a&&(!r||r&&o(n,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},"605d":function(t,e,i){var r=i("c6b6"),s=i("da84");t.exports="process"==r(s.process)},6069:function(t,e){t.exports="object"==typeof window},"60da":function(t,e,i){"use strict";var r=i("83ab"),s=i("e330"),n=i("c65b"),o=i("d039"),a=i("df75"),l=i("7418"),c=i("d1e7"),h=i("7b0b"),u=i("44ad"),d=Object.assign,p=Object.defineProperty,f=s([].concat);t.exports=!d||o((function(){if(r&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol(),s="abcdefghijklmnopqrst";return t[i]=7,s.split("").forEach((function(t){e[t]=t})),7!=d({},t)[i]||a(d({},e)).join("")!=s}))?function(t,e){var i=h(t),s=arguments.length,o=1,d=l.f,p=c.f;while(s>o){var m,b=u(arguments[o++]),v=d?f(a(b),d(b)):a(b),g=v.length,y=0;while(g>y)m=v[y++],r&&!n(p,b,m)||(i[m]=b[m])}return i}:d},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},6547:function(t,e,i){var r=i("e330"),s=i("5926"),n=i("577e"),o=i("1d80"),a=r("".charAt),l=r("".charCodeAt),c=r("".slice),h=function(t){return function(e,i){var r,h,u=n(o(e)),d=s(i),p=u.length;return d<0||d>=p?t?"":void 0:(r=l(u,d),r<55296||r>56319||d+1===p||(h=l(u,d+1))<56320||h>57343?t?a(u,d):r:t?c(u,d,d+2):h-56320+(r-55296<<10)+65536)}};t.exports={codeAt:h(!1),charAt:h(!0)}},"65f0":function(t,e,i){var r=i("0b42");t.exports=function(t,e){return new(r(t))(0===e?0:e)}},"68ee":function(t,e,i){var r=i("e330"),s=i("d039"),n=i("1626"),o=i("f5df"),a=i("d066"),l=i("8925"),c=function(){},h=[],u=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=r(d.exec),f=!d.exec(c),m=function(t){if(!n(t))return!1;try{return u(c,h,t),!0}catch(e){return!1}},b=function(t){if(!n(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(d,l(t))}catch(e){return!0}};b.sham=!0,t.exports=!u||s((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?b:m},"69f3":function(t,e,i){var r,s,n,o=i("7f9a"),a=i("da84"),l=i("e330"),c=i("861d"),h=i("9112"),u=i("1a2d"),d=i("c6cd"),p=i("f772"),f=i("d012"),m="Object already initialized",b=a.TypeError,v=a.WeakMap,g=function(t){return n(t)?s(t):r(t,{})},y=function(t){return function(e){var i;if(!c(e)||(i=s(e)).type!==t)throw b("Incompatible receiver, "+t+" required");return i}};if(o||d.state){var _=d.state||(d.state=new v),C=l(_.get),P=l(_.has),O=l(_.set);r=function(t,e){if(P(_,t))throw new b(m);return e.facade=t,O(_,t,e),e},s=function(t){return C(_,t)||{}},n=function(t){return P(_,t)}}else{var x=p("state");f[x]=!0,r=function(t,e){if(u(t,x))throw new b(m);return e.facade=t,h(t,x,e),e},s=function(t){return u(t,x)?t[x]:{}},n=function(t){return u(t,x)}}t.exports={set:r,get:s,has:n,enforce:g,getterFor:y}},"6b0d":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(t,e)=>{const i=t.__vccOpts||t;for(const[r,s]of e)i[r]=s;return i}},"6c02":function(t,e,i){"use strict";i.d(e,"a",(function(){return Kt})),i.d(e,"b",(function(){return J}));var r=i("7a23");i("abc5");
/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const s="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,n=t=>s?Symbol(t):"_vr_"+t,o=n("rvlm"),a=n("rvd"),l=n("r"),c=n("rl"),h=n("rvl"),u="undefined"!==typeof window;function d(t){return t.__esModule||s&&"Module"===t[Symbol.toStringTag]}const p=Object.assign;function f(t,e){const i={};for(const r in e){const s=e[r];i[r]=Array.isArray(s)?s.map(t):t(s)}return i}const m=()=>{};const b=/\/$/,v=t=>t.replace(b,"");function g(t,e,i="/"){let r,s={},n="",o="";const a=e.indexOf("?"),l=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),n=e.slice(a+1,l>-1?l:e.length),s=t(n)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=w(null!=r?r:e,i),{fullPath:r+(n&&"?")+n+o,path:r,query:s,hash:o}}function y(t,e){const i=e.query?t(e.query):"";return e.path+(i&&"?")+i+(e.hash||"")}function _(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function C(t,e,i){const r=e.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&P(e.matched[r],i.matched[s])&&O(e.params,i.params)&&t(e.query)===t(i.query)&&e.hash===i.hash}function P(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function O(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!x(t[i],e[i]))return!1;return!0}function x(t,e){return Array.isArray(t)?E(t,e):Array.isArray(e)?E(e,t):t===e}function E(t,e){return Array.isArray(e)?t.length===e.length&&t.every((t,i)=>t===e[i]):1===t.length&&t[0]===e}function w(t,e){if(t.startsWith("/"))return t;if(!t)return e;const i=e.split("/"),r=t.split("/");let s,n,o=i.length-1;for(s=0;s<r.length;s++)if(n=r[s],1!==o&&"."!==n){if(".."!==n)break;o--}return i.slice(0,o).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}var S,T;(function(t){t["pop"]="pop",t["push"]="push"})(S||(S={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(T||(T={}));function N(t){if(!t)if(u){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),v(t)}const M=/^[^#]+#/;function A(t,e){return t.replace(M,"#")+e}function R(t,e){const i=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-i.left-(e.left||0),top:r.top-i.top-(e.top||0)}}const k=()=>({left:window.pageXOffset,top:window.pageYOffset});function L(t){let e;if("el"in t){const i=t.el,r="string"===typeof i&&i.startsWith("#");0;const s="string"===typeof i?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;e=R(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function j(t,e){const i=history.state?history.state.position-e:-1;return i+t}const I=new Map;function B(t,e){I.set(t,e)}function D(t){const e=I.get(t);return I.delete(t),e}let Y=()=>location.protocol+"//"+location.host;function X(t,e){const{pathname:i,search:r,hash:s}=e,n=t.indexOf("#");if(n>-1){let e=s.includes(t.slice(n))?t.slice(n).length:1,i=s.slice(e);return"/"!==i[0]&&(i="/"+i),_(i,"")}const o=_(i,t);return o+r+s}function F(t,e,i,r){let s=[],n=[],o=null;const a=({state:n})=>{const a=X(t,location),l=i.value,c=e.value;let h=0;if(n){if(i.value=a,e.value=n,o&&o===l)return void(o=null);h=c?n.position-c.position:0}else r(a);s.forEach(t=>{t(i.value,l,{delta:h,type:S.pop,direction:h?h>0?T.forward:T.back:T.unknown})})};function l(){o=i.value}function c(t){s.push(t);const e=()=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)};return n.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(p({},t.state,{scroll:k()}),"")}function u(){for(const t of n)t();n=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h),{pauseListeners:l,listen:c,destroy:u}}function U(t,e,i,r=!1,s=!1){return{back:t,current:e,forward:i,replaced:r,position:window.history.length,scroll:s?k():null}}function G(t){const{history:e,location:i}=window,r={value:X(t,i)},s={value:e.state};function n(r,n,o){const a=t.indexOf("#"),l=a>-1?(i.host&&document.querySelector("base")?t:t.slice(a))+r:Y()+t+r;try{e[o?"replaceState":"pushState"](n,"",l),s.value=n}catch(c){console.error(c),i[o?"replace":"assign"](l)}}function o(t,i){const o=p({},e.state,U(s.value.back,t,s.value.forward,!0),i,{position:s.value.position});n(t,o,!0),r.value=t}function a(t,i){const o=p({},s.value,e.state,{forward:t,scroll:k()});n(o.current,o,!0);const a=p({},U(r.value,t,null),{position:o.position+1},i);n(t,a,!1),r.value=t}return s.value||n(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:s,push:a,replace:o}}function J(t){t=N(t);const e=G(t),i=F(t,e.state,e.location,e.replace);function r(t,e=!0){e||i.pauseListeners(),history.go(t)}const s=p({location:"",base:t,go:r,createHref:A.bind(null,t)},e,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function z(t){return"string"===typeof t||t&&"object"===typeof t}function H(t){return"string"===typeof t||"symbol"===typeof t}const V={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},$=n("nf");var q;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(q||(q={}));function W(t,e){return p(new Error,{type:t,[$]:!0},e)}function Q(t,e){return t instanceof Error&&$ in t&&(null==e||!!(t.type&e))}const Z="[^/]+?",K={sensitive:!1,strict:!1,start:!0,end:!0},tt=/[.+*?^${}()[\]/\\]/g;function et(t,e){const i=p({},K,e),r=[];let s=i.start?"^":"";const n=[];for(const h of t){const t=h.length?[]:[90];i.strict&&!h.length&&(s+="/");for(let e=0;e<h.length;e++){const r=h[e];let o=40+(i.sensitive?.25:0);if(0===r.type)e||(s+="/"),s+=r.value.replace(tt,"\\$&"),o+=40;else if(1===r.type){const{value:t,repeatable:i,optional:a,regexp:l}=r;n.push({name:t,repeatable:i,optional:a});const u=l||Z;if(u!==Z){o+=10;try{new RegExp(`(${u})`)}catch(c){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+c.message)}}let d=i?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(d=a&&h.length<2?`(?:/${d})`:"/"+d),a&&(d+="?"),s+=d,o+=20,a&&(o+=-8),i&&(o+=-20),".*"===u&&(o+=-50)}t.push(o)}r.push(t)}if(i.strict&&i.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}i.strict||(s+="/?"),i.end?s+="$":i.strict&&(s+="(?:/|$)");const o=new RegExp(s,i.sensitive?"":"i");function a(t){const e=t.match(o),i={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",s=n[r-1];i[s.name]=t&&s.repeatable?t.split("/"):t}return i}function l(e){let i="",r=!1;for(const s of t){r&&i.endsWith("/")||(i+="/"),r=!1;for(const t of s)if(0===t.type)i+=t.value;else if(1===t.type){const{value:n,repeatable:o,optional:a}=t,l=n in e?e[n]:"";if(Array.isArray(l)&&!o)throw new Error(`Provided param "${n}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${n}"`);s.length<2&&(i.endsWith("/")?i=i.slice(0,-1):r=!0)}i+=c}}return i}return{re:o,score:r,keys:n,parse:a,stringify:l}}function it(t,e){let i=0;while(i<t.length&&i<e.length){const r=e[i]-t[i];if(r)return r;i++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function rt(t,e){let i=0;const r=t.score,s=e.score;while(i<r.length&&i<s.length){const t=it(r[i],s[i]);if(t)return t;i++}return s.length-r.length}const st={type:0,value:""},nt=/[a-zA-Z0-9_]/;function ot(t){if(!t)return[[]];if("/"===t)return[[st]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${i})/"${c}": ${t}`)}let i=0,r=i;const s=[];let n;function o(){n&&s.push(n),n=[]}let a,l=0,c="",h="";function u(){c&&(0===i?n.push({type:0,value:c}):1===i||2===i||3===i?(n.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),n.push({type:1,value:c,regexp:h,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function d(){c+=a}while(l<t.length)if(a=t[l++],"\\"!==a||2===i)switch(i){case 0:"/"===a?(c&&u(),o()):":"===a?(u(),i=1):d();break;case 4:d(),i=r;break;case 1:"("===a?i=2:nt.test(a)?d():(u(),i=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==h[h.length-1]?h=h.slice(0,-1)+a:i=3:h+=a;break;case 3:u(),i=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,h="";break;default:e("Unknown state");break}else r=i,i=4;return 2===i&&e(`Unfinished custom RegExp for param "${c}"`),u(),o(),s}function at(t,e,i){const r=et(ot(t.path),i);const s=p(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf===!e.record.aliasOf&&e.children.push(s),s}function lt(t,e){const i=[],r=new Map;function s(t){return r.get(t)}function n(t,i,r){const s=!r,a=ht(t);a.aliasOf=r&&r.record;const c=ft(e,t),h=[a];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)h.push(p({},a,{components:r?r.record.components:a.components,path:t,aliasOf:r?r.record:a}))}let u,d;for(const e of h){const{path:h}=e;if(i&&"/"!==h[0]){const t=i.record.path,r="/"===t[t.length-1]?"":"/";e.path=i.record.path+(h&&r+h)}if(u=at(e,i,c),r?r.alias.push(u):(d=d||u,d!==u&&d.alias.push(u),s&&t.name&&!dt(u)&&o(t.name)),"children"in a){const t=a.children;for(let e=0;e<t.length;e++)n(t[e],u,r&&r.children[e])}r=r||u,l(u)}return d?()=>{o(d)}:m}function o(t){if(H(t)){const e=r.get(t);e&&(r.delete(t),i.splice(i.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=i.indexOf(t);e>-1&&(i.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function a(){return i}function l(t){let e=0;while(e<i.length&&rt(t,i[e])>=0)e++;i.splice(e,0,t),t.record.name&&!dt(t)&&r.set(t.record.name,t)}function c(t,e){let s,n,o,a={};if("name"in t&&t.name){if(s=r.get(t.name),!s)throw W(1,{location:t});o=s.record.name,a=p(ct(e.params,s.keys.filter(t=>!t.optional).map(t=>t.name)),t.params),n=s.stringify(a)}else if("path"in t)n=t.path,s=i.find(t=>t.re.test(n)),s&&(a=s.parse(n),o=s.record.name);else{if(s=e.name?r.get(e.name):i.find(t=>t.re.test(e.path)),!s)throw W(1,{location:t,currentLocation:e});o=s.record.name,a=p({},e.params,t.params),n=s.stringify(a)}const l=[];let c=s;while(c)l.unshift(c.record),c=c.parent;return{name:o,path:n,params:a,matched:l,meta:pt(l)}}return e=ft({strict:!1,end:!0,sensitive:!1},e),t.forEach(t=>n(t)),{addRoute:n,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function ct(t,e){const i={};for(const r of e)r in t&&(i[r]=t[r]);return i}function ht(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ut(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function ut(t){const e={},i=t.props||!1;if("component"in t)e.default=i;else for(const r in t.components)e[r]="boolean"===typeof i?i:i[r];return e}function dt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function pt(t){return t.reduce((t,e)=>p(t,e.meta),{})}function ft(t,e){const i={};for(const r in t)i[r]=r in e?e[r]:t[r];return i}const mt=/#/g,bt=/&/g,vt=/\//g,gt=/=/g,yt=/\?/g,_t=/\+/g,Ct=/%5B/g,Pt=/%5D/g,Ot=/%5E/g,xt=/%60/g,Et=/%7B/g,wt=/%7C/g,St=/%7D/g,Tt=/%20/g;function Nt(t){return encodeURI(""+t).replace(wt,"|").replace(Ct,"[").replace(Pt,"]")}function Mt(t){return Nt(t).replace(Et,"{").replace(St,"}").replace(Ot,"^")}function At(t){return Nt(t).replace(_t,"%2B").replace(Tt,"+").replace(mt,"%23").replace(bt,"%26").replace(xt,"`").replace(Et,"{").replace(St,"}").replace(Ot,"^")}function Rt(t){return At(t).replace(gt,"%3D")}function kt(t){return Nt(t).replace(mt,"%23").replace(yt,"%3F")}function Lt(t){return null==t?"":kt(t).replace(vt,"%2F")}function jt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function It(t){const e={};if(""===t||"?"===t)return e;const i="?"===t[0],r=(i?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const t=r[s].replace(_t," "),i=t.indexOf("="),n=jt(i<0?t:t.slice(0,i)),o=i<0?null:jt(t.slice(i+1));if(n in e){let t=e[n];Array.isArray(t)||(t=e[n]=[t]),t.push(o)}else e[n]=o}return e}function Bt(t){let e="";for(let i in t){const r=t[i];if(i=Rt(i),null==r){void 0!==r&&(e+=(e.length?"&":"")+i);continue}const s=Array.isArray(r)?r.map(t=>t&&At(t)):[r&&At(r)];s.forEach(t=>{void 0!==t&&(e+=(e.length?"&":"")+i,null!=t&&(e+="="+t))})}return e}function Dt(t){const e={};for(const i in t){const r=t[i];void 0!==r&&(e[i]=Array.isArray(r)?r.map(t=>null==t?null:""+t):null==r?r:""+r)}return e}function Yt(){let t=[];function e(e){return t.push(e),()=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)}}function i(){t=[]}return{add:e,list:()=>t,reset:i}}function Xt(t,e,i,r,s){const n=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=t=>{!1===t?a(W(4,{from:i,to:e})):t instanceof Error?a(t):z(t)?a(W(2,{from:e,to:t})):(n&&r.enterCallbacks[s]===n&&"function"===typeof t&&n.push(t),o())},c=t.call(r&&r.instances[s],e,i,l);let h=Promise.resolve(c);t.length<3&&(h=h.then(l)),h.catch(t=>a(t))})}function Ft(t,e,i,r){const s=[];for(const n of t)for(const t in n.components){let o=n.components[t];if("beforeRouteEnter"===e||n.instances[t])if(Ut(o)){const a=o.__vccOpts||o,l=a[e];l&&s.push(Xt(l,i,r,n,t))}else{let a=o();0,s.push(()=>a.then(s=>{if(!s)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${n.path}"`));const o=d(s)?s.default:s;n.components[t]=o;const a=o.__vccOpts||o,l=a[e];return l&&Xt(l,i,r,n,t)()}))}}return s}function Ut(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Gt(t){const e=Object(r["n"])(l),i=Object(r["n"])(c),s=Object(r["c"])(()=>e.resolve(Object(r["B"])(t.to))),n=Object(r["c"])(()=>{const{matched:t}=s.value,{length:e}=t,r=t[e-1],n=i.matched;if(!r||!n.length)return-1;const o=n.findIndex(P.bind(null,r));if(o>-1)return o;const a=$t(t[e-2]);return e>1&&$t(r)===a&&n[n.length-1].path!==a?n.findIndex(P.bind(null,t[e-2])):o}),o=Object(r["c"])(()=>n.value>-1&&Vt(i.params,s.value.params)),a=Object(r["c"])(()=>n.value>-1&&n.value===i.matched.length-1&&O(i.params,s.value.params));function h(i={}){return Ht(i)?e[Object(r["B"])(t.replace)?"replace":"push"](Object(r["B"])(t.to)).catch(m):Promise.resolve()}return{route:s,href:Object(r["c"])(()=>s.value.href),isActive:o,isExactActive:a,navigate:h}}const Jt=Object(r["k"])({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Gt,setup(t,{slots:e}){const i=Object(r["u"])(Gt(t)),{options:s}=Object(r["n"])(l),n=Object(r["c"])(()=>({[qt(t.activeClass,s.linkActiveClass,"router-link-active")]:i.isActive,[qt(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const s=e.default&&e.default(i);return t.custom?s:Object(r["m"])("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:n.value},s)}}}),zt=Jt;function Ht(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Vt(t,e){for(const i in e){const r=e[i],s=t[i];if("string"===typeof r){if(r!==s)return!1}else if(!Array.isArray(s)||s.length!==r.length||r.some((t,e)=>t!==s[e]))return!1}return!0}function $t(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const qt=(t,e,i)=>null!=t?t:null!=e?e:i,Wt=Object(r["k"])({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:i}){const s=Object(r["n"])(h),n=Object(r["c"])(()=>t.route||s.value),l=Object(r["n"])(a,0),c=Object(r["c"])(()=>n.value.matched[l]);Object(r["t"])(a,l+1),Object(r["t"])(o,c),Object(r["t"])(h,n);const u=Object(r["v"])();return Object(r["E"])(()=>[u.value,c.value,t.name],([t,e,i],[r,s,n])=>{e&&(e.instances[i]=t,s&&s!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=s.leaveGuards),e.updateGuards.size||(e.updateGuards=s.updateGuards))),!t||!e||s&&P(e,s)&&r||(e.enterCallbacks[i]||[]).forEach(e=>e(t))},{flush:"post"}),()=>{const s=n.value,o=c.value,a=o&&o.components[t.name],l=t.name;if(!a)return Qt(i.default,{Component:a,route:s});const h=o.props[t.name],d=h?!0===h?s.params:"function"===typeof h?h(s):h:null,f=t=>{t.component.isUnmounted&&(o.instances[l]=null)},m=Object(r["m"])(a,p({},d,e,{onVnodeUnmounted:f,ref:u}));return Qt(i.default,{Component:m,route:s})||m}}});function Qt(t,e){if(!t)return null;const i=t(e);return 1===i.length?i[0]:i}const Zt=Wt;function Kt(t){const e=lt(t.routes,t),i=t.parseQuery||It,s=t.stringifyQuery||Bt,n=t.history;const o=Yt(),a=Yt(),d=Yt(),b=Object(r["A"])(V);let v=V;u&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=f.bind(null,t=>""+t),P=f.bind(null,Lt),O=f.bind(null,jt);function x(t,i){let r,s;return H(t)?(r=e.getRecordMatcher(t),s=i):s=t,e.addRoute(s,r)}function E(t){const i=e.getRecordMatcher(t);i&&e.removeRoute(i)}function w(){return e.getRoutes().map(t=>t.record)}function T(t){return!!e.getRecordMatcher(t)}function N(t,r){if(r=p({},r||b.value),"string"===typeof t){const s=g(i,t,r.path),o=e.resolve({path:s.path},r),a=n.createHref(s.fullPath);return p(s,o,{params:O(o.params),hash:jt(s.hash),redirectedFrom:void 0,href:a})}let o;if("path"in t)o=p({},t,{path:g(i,t.path,r.path).path});else{const e=p({},t.params);for(const t in e)null==e[t]&&delete e[t];o=p({},t,{params:P(t.params)}),r.params=P(r.params)}const a=e.resolve(o,r),l=t.hash||"";a.params=_(O(a.params));const c=y(s,p({},t,{hash:Mt(l),path:a.path})),h=n.createHref(c);return p({fullPath:c,hash:l,query:s===Bt?Dt(t.query):t.query||{}},a,{redirectedFrom:void 0,href:h})}function M(t){return"string"===typeof t?g(i,t,b.value.path):p({},t)}function A(t,e){if(v!==t)return W(8,{from:e,to:t})}function R(t){return X(t)}function I(t){return R(p(M(t),{replace:!0}))}function Y(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:i}=e;let r="function"===typeof i?i(t):i;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=M(r):{path:r},r.params={}),p({query:t.query,hash:t.hash,params:t.params},r)}}function X(t,e){const i=v=N(t),r=b.value,n=t.state,o=t.force,a=!0===t.replace,l=Y(i);if(l)return X(p(M(l),{state:n,force:o,replace:a}),e||i);const c=i;let h;return c.redirectedFrom=e,!o&&C(s,r,i)&&(h=W(16,{to:c,from:r}),rt(r,r,!0,!1)),(h?Promise.resolve(h):U(c,r)).catch(t=>Q(t)?t:tt(t,c,r)).then(t=>{if(t){if(Q(t,2))return X(p(M(t.to),{state:n,force:o,replace:a}),e||c)}else t=J(c,r,!0,a,n);return G(c,r,t),t})}function F(t,e){const i=A(t,e);return i?Promise.reject(i):Promise.resolve()}function U(t,e){let i;const[r,s,n]=ee(t,e);i=Ft(r.reverse(),"beforeRouteLeave",t,e);for(const o of r)o.leaveGuards.forEach(r=>{i.push(Xt(r,t,e))});const l=F.bind(null,t,e);return i.push(l),te(i).then(()=>{i=[];for(const r of o.list())i.push(Xt(r,t,e));return i.push(l),te(i)}).then(()=>{i=Ft(s,"beforeRouteUpdate",t,e);for(const r of s)r.updateGuards.forEach(r=>{i.push(Xt(r,t,e))});return i.push(l),te(i)}).then(()=>{i=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const s of r.beforeEnter)i.push(Xt(s,t,e));else i.push(Xt(r.beforeEnter,t,e));return i.push(l),te(i)}).then(()=>(t.matched.forEach(t=>t.enterCallbacks={}),i=Ft(n,"beforeRouteEnter",t,e),i.push(l),te(i))).then(()=>{i=[];for(const r of a.list())i.push(Xt(r,t,e));return i.push(l),te(i)}).catch(t=>Q(t,8)?t:Promise.reject(t))}function G(t,e,i){for(const r of d.list())r(t,e,i)}function J(t,e,i,r,s){const o=A(t,e);if(o)return o;const a=e===V,l=u?history.state:{};i&&(r||a?n.replace(t.fullPath,p({scroll:a&&l&&l.scroll},s)):n.push(t.fullPath,s)),b.value=t,rt(t,e,i,a),it()}let z;function $(){z=n.listen((t,e,i)=>{const r=N(t),s=Y(r);if(s)return void X(p(s,{replace:!0}),r).catch(m);v=r;const o=b.value;u&&B(j(o.fullPath,i.delta),k()),U(r,o).catch(t=>Q(t,12)?t:Q(t,2)?(X(t.to,r).then(t=>{Q(t,20)&&!i.delta&&i.type===S.pop&&n.go(-1,!1)}).catch(m),Promise.reject()):(i.delta&&n.go(-i.delta,!1),tt(t,r,o))).then(t=>{t=t||J(r,o,!1),t&&(i.delta?n.go(-i.delta,!1):i.type===S.pop&&Q(t,20)&&n.go(-1,!1)),G(r,o,t)}).catch(m)})}let q,Z=Yt(),K=Yt();function tt(t,e,i){it(t);const r=K.list();return r.length?r.forEach(r=>r(t,e,i)):console.error(t),Promise.reject(t)}function et(){return q&&b.value!==V?Promise.resolve():new Promise((t,e)=>{Z.add([t,e])})}function it(t){q||(q=!0,$(),Z.list().forEach(([e,i])=>t?i(t):e()),Z.reset())}function rt(e,i,s,n){const{scrollBehavior:o}=t;if(!u||!o)return Promise.resolve();const a=!s&&D(j(e.fullPath,0))||(n||!s)&&history.state&&history.state.scroll||null;return Object(r["o"])().then(()=>o(e,i,a)).then(t=>t&&L(t)).catch(t=>tt(t,e,i))}const st=t=>n.go(t);let nt;const ot=new Set,at={currentRoute:b,addRoute:x,removeRoute:E,hasRoute:T,getRoutes:w,resolve:N,options:t,push:R,replace:I,go:st,back:()=>st(-1),forward:()=>st(1),beforeEach:o.add,beforeResolve:a.add,afterEach:d.add,onError:K.add,isReady:et,install(t){const e=this;t.component("RouterLink",zt),t.component("RouterView",Zt),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>Object(r["B"])(b)}),u&&!nt&&b.value===V&&(nt=!0,R(n.location).catch(t=>{0}));const i={};for(const n in V)i[n]=Object(r["c"])(()=>b.value[n]);t.provide(l,e),t.provide(c,Object(r["u"])(i)),t.provide(h,b);const s=t.unmount;ot.add(t),t.unmount=function(){ot.delete(t),ot.size<1&&(v=V,z&&z(),b.value=V,nt=!1,q=!1),s()}}};return at}function te(t){return t.reduce((t,e)=>t.then(()=>e()),Promise.resolve())}function ee(t,e){const i=[],r=[],s=[],n=Math.max(e.matched.length,t.matched.length);for(let o=0;o<n;o++){const n=e.matched[o];n&&(t.matched.find(t=>P(t,n))?r.push(n):i.push(n));const a=t.matched[o];a&&(e.matched.find(t=>P(t,a))||s.push(a))}return[i,r,s]}},"6eeb":function(t,e,i){var r=i("da84"),s=i("1626"),n=i("1a2d"),o=i("9112"),a=i("ce4e"),l=i("8925"),c=i("69f3"),h=i("5e77").CONFIGURABLE,u=c.get,d=c.enforce,p=String(String).split("String");(t.exports=function(t,e,i,l){var c,u=!!l&&!!l.unsafe,f=!!l&&!!l.enumerable,m=!!l&&!!l.noTargetGet,b=l&&void 0!==l.name?l.name:e;s(i)&&("Symbol("===String(b).slice(0,7)&&(b="["+String(b).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!n(i,"name")||h&&i.name!==b)&&o(i,"name",b),c=d(i),c.source||(c.source=p.join("string"==typeof b?b:""))),t!==r?(u?!m&&t[e]&&(f=!0):delete t[e],f?t[e]=i:o(t,e,i)):f?t[e]=i:a(e,i)})(Function.prototype,"toString",(function(){return s(this)&&u(this).source||l(this)}))},"6f53":function(t,e,i){var r=i("83ab"),s=i("e330"),n=i("df75"),o=i("fc6a"),a=i("d1e7").f,l=s(a),c=s([].push),h=function(t){return function(e){var i,s=o(e),a=n(s),h=a.length,u=0,d=[];while(h>u)i=a[u++],r&&!l(s,i)||c(d,t?[i,s[i]]:s[i]);return d}};t.exports={entries:h(!0),values:h(!1)}},7418:function(t,e){e.f=Object.getOwnPropertySymbols},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a23":function(t,e,i){"use strict";i.d(e,"c",(function(){return zt})),i.d(e,"u",(function(){return Ot})),i.d(e,"v",(function(){return Bt})),i.d(e,"A",(function(){return Dt})),i.d(e,"B",(function(){return Ft})),i.d(e,"a",(function(){return Bi})),i.d(e,"e",(function(){return qi})),i.d(e,"f",(function(){return lr})),i.d(e,"g",(function(){return $i})),i.d(e,"h",(function(){return er})),i.d(e,"i",(function(){return ar})),i.d(e,"j",(function(){return ir})),i.d(e,"k",(function(){return ye})),i.d(e,"l",(function(){return xr})),i.d(e,"m",(function(){return Cs})),i.d(e,"n",(function(){return le})),i.d(e,"o",(function(){return rs})),i.d(e,"p",(function(){return Oe})),i.d(e,"q",(function(){return xe})),i.d(e,"r",(function(){return Ie})),i.d(e,"s",(function(){return Gi})),i.d(e,"t",(function(){return ae})),i.d(e,"w",(function(){return fr})),i.d(e,"x",(function(){return mr})),i.d(e,"y",(function(){return Ri})),i.d(e,"z",(function(){return Li})),i.d(e,"E",(function(){return bs})),i.d(e,"F",(function(){return Zt})),i.d(e,"G",(function(){return vi})),i.d(e,"b",(function(){return Pn})),i.d(e,"d",(function(){return Bn})),i.d(e,"C",(function(){return Rn})),i.d(e,"D",(function(){return An}));var r=i("9ff4");let s;const n=[];class o{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&s&&(this.parent=s,this.index=(s.scopes||(s.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}else 0}on(){this.active&&(n.push(this),s=this)}off(){this.active&&(n.pop(),s=n[n.length-1])}stop(t){if(this.active){if(this.effects.forEach(t=>t.stop()),this.cleanups.forEach(t=>t()),this.scopes&&this.scopes.forEach(t=>t.stop(!0)),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}function a(t,e){e=e||s,e&&e.active&&e.effects.push(t)}const l=t=>{const e=new Set(t);return e.w=0,e.n=0,e},c=t=>(t.w&m)>0,h=t=>(t.n&m)>0,u=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=m},d=t=>{const{deps:e}=t;if(e.length){let i=0;for(let r=0;r<e.length;r++){const s=e[r];c(s)&&!h(s)?s.delete(t):e[i++]=s,s.w&=~m,s.n&=~m}e.length=i}},p=new WeakMap;let f=0,m=1;const b=30,v=[];let g;const y=Symbol(""),_=Symbol("");class C{constructor(t,e=null,i){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],a(this,i)}run(){if(!this.active)return this.fn();if(!v.includes(this))try{return v.push(g=this),w(),m=1<<++f,f<=b?u(this):P(this),this.fn()}finally{f<=b&&d(this),m=1<<--f,S(),v.pop();const t=v.length;g=t>0?v[t-1]:void 0}}stop(){this.active&&(P(this),this.onStop&&this.onStop(),this.active=!1)}}function P(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let O=!0;const x=[];function E(){x.push(O),O=!1}function w(){x.push(O),O=!0}function S(){const t=x.pop();O=void 0===t||t}function T(t,e,i){if(!N())return;let r=p.get(t);r||p.set(t,r=new Map);let s=r.get(i);s||r.set(i,s=l());const n=void 0;M(s,n)}function N(){return O&&void 0!==g}function M(t,e){let i=!1;f<=b?h(t)||(t.n|=m,i=!c(t)):i=!t.has(g),i&&(t.add(g),g.deps.push(t))}function A(t,e,i,s,n,o){const a=p.get(t);if(!a)return;let c=[];if("clear"===e)c=[...a.values()];else if("length"===i&&Object(r["o"])(t))a.forEach((t,e)=>{("length"===e||e>=s)&&c.push(t)});else switch(void 0!==i&&c.push(a.get(i)),e){case"add":Object(r["o"])(t)?Object(r["s"])(i)&&c.push(a.get("length")):(c.push(a.get(y)),Object(r["t"])(t)&&c.push(a.get(_)));break;case"delete":Object(r["o"])(t)||(c.push(a.get(y)),Object(r["t"])(t)&&c.push(a.get(_)));break;case"set":Object(r["t"])(t)&&c.push(a.get(y));break}if(1===c.length)c[0]&&R(c[0]);else{const t=[];for(const e of c)e&&t.push(...e);R(l(t))}}function R(t,e){for(const i of Object(r["o"])(t)?t:[...t])(i!==g||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}const k=Object(r["H"])("__proto__,__v_isRef,__isVue"),L=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(r["E"])),j=X(),I=X(!1,!0),B=X(!0),D=Y();function Y(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...t){const i=Mt(this);for(let e=0,s=this.length;e<s;e++)T(i,"get",e+"");const r=i[e](...t);return-1===r||!1===r?i[e](...t.map(Mt)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...t){E();const i=Mt(this)[e].apply(this,t);return S(),i}}),t}function X(t=!1,e=!1){return function(i,s,n){if("__v_isReactive"===s)return!t;if("__v_isReadonly"===s)return t;if("__v_raw"===s&&n===(t?e?_t:yt:e?gt:vt).get(i))return i;const o=Object(r["o"])(i);if(!t&&o&&Object(r["k"])(D,s))return Reflect.get(D,s,n);const a=Reflect.get(i,s,n);if(Object(r["E"])(s)?L.has(s):k(s))return a;if(t||T(i,"get",s),e)return a;if(It(a)){const t=!o||!Object(r["s"])(s);return t?a.value:a}return Object(r["v"])(a)?t?Et(a):Ot(a):a}}const F=G(),U=G(!0);function G(t=!1){return function(e,i,s,n){let o=e[i];if(!t&&!Tt(s)&&(s=Mt(s),o=Mt(o),!Object(r["o"])(e)&&It(o)&&!It(s)))return o.value=s,!0;const a=Object(r["o"])(e)&&Object(r["s"])(i)?Number(i)<e.length:Object(r["k"])(e,i),l=Reflect.set(e,i,s,n);return e===Mt(n)&&(a?Object(r["j"])(s,o)&&A(e,"set",i,s,o):A(e,"add",i,s)),l}}function J(t,e){const i=Object(r["k"])(t,e),s=t[e],n=Reflect.deleteProperty(t,e);return n&&i&&A(t,"delete",e,void 0,s),n}function z(t,e){const i=Reflect.has(t,e);return Object(r["E"])(e)&&L.has(e)||T(t,"has",e),i}function H(t){return T(t,"iterate",Object(r["o"])(t)?"length":y),Reflect.ownKeys(t)}const V={get:j,set:F,deleteProperty:J,has:z,ownKeys:H},$={get:B,set(t,e){return!0},deleteProperty(t,e){return!0}},q=Object(r["h"])({},V,{get:I,set:U}),W=t=>t,Q=t=>Reflect.getPrototypeOf(t);function Z(t,e,i=!1,r=!1){t=t["__v_raw"];const s=Mt(t),n=Mt(e);e!==n&&!i&&T(s,"get",e),!i&&T(s,"get",n);const{has:o}=Q(s),a=r?W:i?kt:Rt;return o.call(s,e)?a(t.get(e)):o.call(s,n)?a(t.get(n)):void(t!==s&&t.get(e))}function K(t,e=!1){const i=this["__v_raw"],r=Mt(i),s=Mt(t);return t!==s&&!e&&T(r,"has",t),!e&&T(r,"has",s),t===s?i.has(t):i.has(t)||i.has(s)}function tt(t,e=!1){return t=t["__v_raw"],!e&&T(Mt(t),"iterate",y),Reflect.get(t,"size",t)}function et(t){t=Mt(t);const e=Mt(this),i=Q(e),r=i.has.call(e,t);return r||(e.add(t),A(e,"add",t,t)),this}function it(t,e){e=Mt(e);const i=Mt(this),{has:s,get:n}=Q(i);let o=s.call(i,t);o||(t=Mt(t),o=s.call(i,t));const a=n.call(i,t);return i.set(t,e),o?Object(r["j"])(e,a)&&A(i,"set",t,e,a):A(i,"add",t,e),this}function rt(t){const e=Mt(this),{has:i,get:r}=Q(e);let s=i.call(e,t);s||(t=Mt(t),s=i.call(e,t));const n=r?r.call(e,t):void 0,o=e.delete(t);return s&&A(e,"delete",t,void 0,n),o}function st(){const t=Mt(this),e=0!==t.size,i=void 0,r=t.clear();return e&&A(t,"clear",void 0,void 0,i),r}function nt(t,e){return function(i,r){const s=this,n=s["__v_raw"],o=Mt(n),a=e?W:t?kt:Rt;return!t&&T(o,"iterate",y),n.forEach((t,e)=>i.call(r,a(t),a(e),s))}}function ot(t,e,i){return function(...s){const n=this["__v_raw"],o=Mt(n),a=Object(r["t"])(o),l="entries"===t||t===Symbol.iterator&&a,c="keys"===t&&a,h=n[t](...s),u=i?W:e?kt:Rt;return!e&&T(o,"iterate",c?_:y),{next(){const{value:t,done:e}=h.next();return e?{value:t,done:e}:{value:l?[u(t[0]),u(t[1])]:u(t),done:e}},[Symbol.iterator](){return this}}}}function at(t){return function(...e){return"delete"!==t&&this}}function lt(){const t={get(t){return Z(this,t)},get size(){return tt(this)},has:K,add:et,set:it,delete:rt,clear:st,forEach:nt(!1,!1)},e={get(t){return Z(this,t,!1,!0)},get size(){return tt(this)},has:K,add:et,set:it,delete:rt,clear:st,forEach:nt(!1,!0)},i={get(t){return Z(this,t,!0)},get size(){return tt(this,!0)},has(t){return K.call(this,t,!0)},add:at("add"),set:at("set"),delete:at("delete"),clear:at("clear"),forEach:nt(!0,!1)},r={get(t){return Z(this,t,!0,!0)},get size(){return tt(this,!0)},has(t){return K.call(this,t,!0)},add:at("add"),set:at("set"),delete:at("delete"),clear:at("clear"),forEach:nt(!0,!0)},s=["keys","values","entries",Symbol.iterator];return s.forEach(s=>{t[s]=ot(s,!1,!1),i[s]=ot(s,!0,!1),e[s]=ot(s,!1,!0),r[s]=ot(s,!0,!0)}),[t,i,e,r]}const[ct,ht,ut,dt]=lt();function pt(t,e){const i=e?t?dt:ut:t?ht:ct;return(e,s,n)=>"__v_isReactive"===s?!t:"__v_isReadonly"===s?t:"__v_raw"===s?e:Reflect.get(Object(r["k"])(i,s)&&s in e?i:e,s,n)}const ft={get:pt(!1,!1)},mt={get:pt(!1,!0)},bt={get:pt(!0,!1)};const vt=new WeakMap,gt=new WeakMap,yt=new WeakMap,_t=new WeakMap;function Ct(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:Ct(Object(r["N"])(t))}function Ot(t){return t&&t["__v_isReadonly"]?t:wt(t,!1,V,ft,vt)}function xt(t){return wt(t,!1,q,mt,gt)}function Et(t){return wt(t,!0,$,bt,yt)}function wt(t,e,i,s,n){if(!Object(r["v"])(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=n.get(t);if(o)return o;const a=Pt(t);if(0===a)return t;const l=new Proxy(t,2===a?s:i);return n.set(t,l),l}function St(t){return Tt(t)?St(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Tt(t){return!(!t||!t["__v_isReadonly"])}function Nt(t){return St(t)||Tt(t)}function Mt(t){const e=t&&t["__v_raw"];return e?Mt(e):t}function At(t){return Object(r["g"])(t,"__v_skip",!0),t}const Rt=t=>Object(r["v"])(t)?Ot(t):t,kt=t=>Object(r["v"])(t)?Et(t):t;function Lt(t){N()&&(t=Mt(t),t.dep||(t.dep=l()),M(t.dep))}function jt(t,e){t=Mt(t),t.dep&&R(t.dep)}function It(t){return Boolean(t&&!0===t.__v_isRef)}function Bt(t){return Yt(t,!1)}function Dt(t){return Yt(t,!0)}function Yt(t,e){return It(t)?t:new Xt(t,e)}class Xt{constructor(t,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Mt(t),this._value=e?t:Rt(t)}get value(){return Lt(this),this._value}set value(t){t=this._shallow?t:Mt(t),Object(r["j"])(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:Rt(t),jt(this,t))}}function Ft(t){return It(t)?t.value:t}const Ut={get:(t,e,i)=>Ft(Reflect.get(t,e,i)),set:(t,e,i,r)=>{const s=t[e];return It(s)&&!It(i)?(s.value=i,!0):Reflect.set(t,e,i,r)}};function Gt(t){return St(t)?t:new Proxy(t,Ut)}class Jt{constructor(t,e,i){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new C(t,()=>{this._dirty||(this._dirty=!0,jt(this))}),this["__v_isReadonly"]=i}get value(){const t=Mt(this);return Lt(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function zt(t,e){let i,s;const n=Object(r["p"])(t);n?(i=t,s=r["d"]):(i=t.get,s=t.set);const o=new Jt(i,s,n||!s);return o}Promise.resolve();new Set;new Map;function Ht(t,e,...i){const s=t.vnode.props||r["b"];let n=i;const o=e.startsWith("update:"),a=o&&e.slice(7);if(a&&a in s){const t=("modelValue"===a?"model":a)+"Modifiers",{number:e,trim:o}=s[t]||r["b"];o?n=i.map(t=>t.trim()):e&&(n=i.map(r["M"]))}let l;let c=s[l=Object(r["L"])(e)]||s[l=Object(r["L"])(Object(r["e"])(e))];!c&&o&&(c=s[l=Object(r["L"])(Object(r["l"])(e))]),c&&Fr(c,t,6,n);const h=s[l+"Once"];if(h){if(t.emitted){if(t.emitted[l])return}else t.emitted={};t.emitted[l]=!0,Fr(h,t,6,n)}}function Vt(t,e,i=!1){const s=e.emitsCache,n=s.get(t);if(void 0!==n)return n;const o=t.emits;let a={},l=!1;if(!Object(r["p"])(t)){const s=t=>{const i=Vt(t,e,!0);i&&(l=!0,Object(r["h"])(a,i))};!i&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}return o||l?(Object(r["o"])(o)?o.forEach(t=>a[t]=null):Object(r["h"])(a,o),s.set(t,a),a):(s.set(t,null),null)}function $t(t,e){return!(!t||!Object(r["w"])(e))&&(e=e.slice(2).replace(/Once$/,""),Object(r["k"])(t,e[0].toLowerCase()+e.slice(1))||Object(r["k"])(t,Object(r["l"])(e))||Object(r["k"])(t,e))}let qt=null,Wt=null;function Qt(t){const e=qt;return qt=t,Wt=t&&t.type.__scopeId||null,e}function Zt(t,e=qt,i){if(!e)return t;if(t._n)return t;const r=(...i)=>{r._d&&Hi(-1);const s=Qt(e),n=t(...i);return Qt(s),r._d&&Hi(1),n};return r._n=!0,r._c=!0,r._d=!0,r}function Kt(t){const{type:e,vnode:i,proxy:s,withProxy:n,props:o,propsOptions:[a],slots:l,attrs:c,emit:h,render:u,renderCache:d,data:p,setupState:f,ctx:m,inheritAttrs:b}=t;let v,g;const y=Qt(t);try{if(4&i.shapeFlag){const t=n||s;v=cr(u.call(t,t,d,o,f,p,m)),g=c}else{const t=e;0,v=cr(t.length>1?t(o,{attrs:c,slots:l,emit:h}):t(o,null)),g=e.props?c:te(c)}}catch(C){Fi.length=0,Ur(C,t,1),v=ir(Yi)}let _=v;if(g&&!1!==b){const t=Object.keys(g),{shapeFlag:e}=_;t.length&&7&e&&(a&&t.some(r["u"])&&(g=ee(g,a)),_=nr(_,g))}return i.dirs&&(_.dirs=_.dirs?_.dirs.concat(i.dirs):i.dirs),i.transition&&(_.transition=i.transition),v=_,Qt(y),v}const te=t=>{let e;for(const i in t)("class"===i||"style"===i||Object(r["w"])(i))&&((e||(e={}))[i]=t[i]);return e},ee=(t,e)=>{const i={};for(const s in t)Object(r["u"])(s)&&s.slice(9)in e||(i[s]=t[s]);return i};function ie(t,e,i){const{props:r,children:s,component:n}=t,{props:o,children:a,patchFlag:l}=e,c=n.emitsOptions;if(e.dirs||e.transition)return!0;if(!(i&&l>=0))return!(!s&&!a||a&&a.$stable)||r!==o&&(r?!o||re(r,o,c):!!o);if(1024&l)return!0;if(16&l)return r?re(r,o,c):!!o;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const i=t[e];if(o[i]!==r[i]&&!$t(c,i))return!0}}return!1}function re(t,e,i){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const n=r[s];if(e[n]!==t[n]&&!$t(i,n))return!0}return!1}function se({vnode:t,parent:e},i){while(e&&e.subTree===t)(t=e.vnode).el=i,e=e.parent}const ne=t=>t.__isSuspense;function oe(t,e){e&&e.pendingBranch?Object(r["o"])(t)?e.effects.push(...t):e.effects.push(t):hs(t)}function ae(t,e){if(Or){let i=Or.provides;const r=Or.parent&&Or.parent.provides;r===i&&(i=Or.provides=Object.create(r)),i[t]=e}else 0}function le(t,e,i=!1){const s=Or||qt;if(s){const n=null==s.parent?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(n&&t in n)return n[t];if(arguments.length>1)return i&&Object(r["p"])(e)?e.call(s.proxy):e}else 0}function ce(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Re(()=>{t.isMounted=!0}),je(()=>{t.isUnmounting=!0}),t}const he=[Function,Array],ue={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:he,onEnter:he,onAfterEnter:he,onEnterCancelled:he,onBeforeLeave:he,onLeave:he,onAfterLeave:he,onLeaveCancelled:he,onBeforeAppear:he,onAppear:he,onAfterAppear:he,onAppearCancelled:he},setup(t,{slots:e}){const i=xr(),r=ce();let s;return()=>{const n=e.default&&ge(e.default(),!0);if(!n||!n.length)return;const o=Mt(t),{mode:a}=o;const l=n[0];if(r.isLeaving)return me(l);const c=be(l);if(!c)return me(l);const h=fe(c,o,r,i);ve(c,h);const u=i.subTree,d=u&&be(u);let p=!1;const{getTransitionKey:f}=c.type;if(f){const t=f();void 0===s?s=t:t!==s&&(s=t,p=!0)}if(d&&d.type!==Yi&&(!Qi(c,d)||p)){const t=fe(d,o,r,i);if(ve(d,t),"out-in"===a)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,i.update()},me(l);"in-out"===a&&c.type!==Yi&&(t.delayLeave=(t,e,i)=>{const s=pe(r,d);s[String(d.key)]=d,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=i})}return l}}},de=ue;function pe(t,e){const{leavingVNodes:i}=t;let r=i.get(e.type);return r||(r=Object.create(null),i.set(e.type,r)),r}function fe(t,e,i,r){const{appear:s,mode:n,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:u,onLeave:d,onAfterLeave:p,onLeaveCancelled:f,onBeforeAppear:m,onAppear:b,onAfterAppear:v,onAppearCancelled:g}=e,y=String(t.key),_=pe(i,t),C=(t,e)=>{t&&Fr(t,r,9,e)},P={mode:n,persisted:o,beforeEnter(e){let r=a;if(!i.isMounted){if(!s)return;r=m||a}e._leaveCb&&e._leaveCb(!0);const n=_[y];n&&Qi(t,n)&&n.el._leaveCb&&n.el._leaveCb(),C(r,[e])},enter(t){let e=l,r=c,n=h;if(!i.isMounted){if(!s)return;e=b||l,r=v||c,n=g||h}let o=!1;const a=t._enterCb=e=>{o||(o=!0,C(e?n:r,[t]),P.delayedLeave&&P.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,r){const s=String(t.key);if(e._enterCb&&e._enterCb(!0),i.isUnmounting)return r();C(u,[e]);let n=!1;const o=e._leaveCb=i=>{n||(n=!0,r(),C(i?f:p,[e]),e._leaveCb=void 0,_[s]===t&&delete _[s])};_[s]=t,d?(d(e,o),d.length<=1&&o()):o()},clone(t){return fe(t,e,i,r)}};return P}function me(t){if(Ce(t))return t=nr(t),t.children=null,t}function be(t){return Ce(t)?t.children?t.children[0]:void 0:t}function ve(t,e){6&t.shapeFlag&&t.component?ve(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ge(t,e=!1){let i=[],r=0;for(let s=0;s<t.length;s++){const n=t[s];n.type===Bi?(128&n.patchFlag&&r++,i=i.concat(ge(n.children,e))):(e||n.type!==Yi)&&i.push(n)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function ye(t){return Object(r["p"])(t)?{setup:t,name:t.name}:t}const _e=t=>!!t.type.__asyncLoader;const Ce=t=>t.type.__isKeepAlive;RegExp,RegExp;function Pe(t,e){return Object(r["o"])(t)?t.some(t=>Pe(t,e)):Object(r["D"])(t)?t.split(",").indexOf(e)>-1:!!t.test&&t.test(e)}function Oe(t,e){Ee(t,"a",e)}function xe(t,e){Ee(t,"da",e)}function Ee(t,e,i=Or){const r=t.__wdc||(t.__wdc=()=>{let e=i;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Ne(e,r,i),i){let t=i.parent;while(t&&t.parent)Ce(t.parent.vnode)&&we(r,e,i,t),t=t.parent}}function we(t,e,i,s){const n=Ne(e,t,s,!0);Ie(()=>{Object(r["K"])(s[e],n)},i)}function Se(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function Te(t){return 128&t.shapeFlag?t.ssContent:t}function Ne(t,e,i=Or,r=!1){if(i){const s=i[t]||(i[t]=[]),n=e.__weh||(e.__weh=(...r)=>{if(i.isUnmounted)return;E(),Er(i);const s=Fr(e,i,t,r);return wr(),S(),s});return r?s.unshift(n):s.push(n),n}}const Me=t=>(e,i=Or)=>(!Mr||"sp"===t)&&Ne(t,e,i),Ae=Me("bm"),Re=Me("m"),ke=Me("bu"),Le=Me("u"),je=Me("bum"),Ie=Me("um"),Be=Me("sp"),De=Me("rtg"),Ye=Me("rtc");function Xe(t,e=Or){Ne("ec",t,e)}let Fe=!0;function Ue(t){const e=He(t),i=t.proxy,s=t.ctx;Fe=!1,e.beforeCreate&&Je(e.beforeCreate,t,"bc");const{data:n,computed:o,methods:a,watch:l,provide:c,inject:h,created:u,beforeMount:d,mounted:p,beforeUpdate:f,updated:m,activated:b,deactivated:v,beforeDestroy:g,beforeUnmount:y,destroyed:_,unmounted:C,render:P,renderTracked:O,renderTriggered:x,errorCaptured:E,serverPrefetch:w,expose:S,inheritAttrs:T,components:N,directives:M,filters:A}=e,R=null;if(h&&Ge(h,s,R,t.appContext.config.unwrapInjectedRef),a)for(const L in a){const t=a[L];Object(r["p"])(t)&&(s[L]=t.bind(i))}if(n){0;const e=n.call(i,i);0,Object(r["v"])(e)&&(t.data=Ot(e))}if(Fe=!0,o)for(const L in o){const t=o[L],e=Object(r["p"])(t)?t.bind(i,i):Object(r["p"])(t.get)?t.get.bind(i,i):r["d"];0;const n=!Object(r["p"])(t)&&Object(r["p"])(t.set)?t.set.bind(i):r["d"],a=zt({get:e,set:n});Object.defineProperty(s,L,{enumerable:!0,configurable:!0,get:()=>a.value,set:t=>a.value=t})}if(l)for(const r in l)ze(l[r],s,i,r);if(c){const t=Object(r["p"])(c)?c.call(i):c;Reflect.ownKeys(t).forEach(e=>{ae(e,t[e])})}function k(t,e){Object(r["o"])(e)?e.forEach(e=>t(e.bind(i))):e&&t(e.bind(i))}if(u&&Je(u,t,"c"),k(Ae,d),k(Re,p),k(ke,f),k(Le,m),k(Oe,b),k(xe,v),k(Xe,E),k(Ye,O),k(De,x),k(je,y),k(Ie,C),k(Be,w),Object(r["o"])(S))if(S.length){const e=t.exposed||(t.exposed={});S.forEach(t=>{Object.defineProperty(e,t,{get:()=>i[t],set:e=>i[t]=e})})}else t.exposed||(t.exposed={});P&&t.render===r["d"]&&(t.render=P),null!=T&&(t.inheritAttrs=T),N&&(t.components=N),M&&(t.directives=M)}function Ge(t,e,i=r["d"],s=!1){Object(r["o"])(t)&&(t=Qe(t));for(const n in t){const i=t[n];let o;o=Object(r["v"])(i)?"default"in i?le(i.from||n,i.default,!0):le(i.from||n):le(i),It(o)&&s?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[n]=o}}function Je(t,e,i){Fr(Object(r["o"])(t)?t.map(t=>t.bind(e.proxy)):t.bind(e.proxy),e,i)}function ze(t,e,i,s){const n=s.includes(".")?ys(i,s):()=>i[s];if(Object(r["D"])(t)){const i=e[t];Object(r["p"])(i)&&bs(n,i)}else if(Object(r["p"])(t))bs(n,t.bind(i));else if(Object(r["v"])(t))if(Object(r["o"])(t))t.forEach(t=>ze(t,e,i,s));else{const s=Object(r["p"])(t.handler)?t.handler.bind(i):e[t.handler];Object(r["p"])(s)&&bs(n,s,t)}else 0}function He(t){const e=t.type,{mixins:i,extends:r}=e,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=t.appContext,a=n.get(e);let l;return a?l=a:s.length||i||r?(l={},s.length&&s.forEach(t=>Ve(l,t,o,!0)),Ve(l,e,o)):l=e,n.set(e,l),l}function Ve(t,e,i,r=!1){const{mixins:s,extends:n}=e;n&&Ve(t,n,i,!0),s&&s.forEach(e=>Ve(t,e,i,!0));for(const o in e)if(r&&"expose"===o);else{const r=$e[o]||i&&i[o];t[o]=r?r(t[o],e[o]):e[o]}return t}const $e={data:qe,props:Ke,emits:Ke,methods:Ke,computed:Ke,beforeCreate:Ze,created:Ze,beforeMount:Ze,mounted:Ze,beforeUpdate:Ze,updated:Ze,beforeDestroy:Ze,beforeUnmount:Ze,destroyed:Ze,unmounted:Ze,activated:Ze,deactivated:Ze,errorCaptured:Ze,serverPrefetch:Ze,components:Ke,directives:Ke,watch:ti,provide:qe,inject:We};function qe(t,e){return e?t?function(){return Object(r["h"])(Object(r["p"])(t)?t.call(this,this):t,Object(r["p"])(e)?e.call(this,this):e)}:e:t}function We(t,e){return Ke(Qe(t),Qe(e))}function Qe(t){if(Object(r["o"])(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Ze(t,e){return t?[...new Set([].concat(t,e))]:e}function Ke(t,e){return t?Object(r["h"])(Object(r["h"])(Object.create(null),t),e):e}function ti(t,e){if(!t)return e;if(!e)return t;const i=Object(r["h"])(Object.create(null),t);for(const r in e)i[r]=Ze(t[r],e[r]);return i}function ei(t,e,i,s=!1){const n={},o={};Object(r["g"])(o,Zi,1),t.propsDefaults=Object.create(null),ri(t,e,n,o);for(const r in t.propsOptions[0])r in n||(n[r]=void 0);i?t.props=s?n:xt(n):t.type.props?t.props=n:t.props=o,t.attrs=o}function ii(t,e,i,s){const{props:n,attrs:o,vnode:{patchFlag:a}}=t,l=Mt(n),[c]=t.propsOptions;let h=!1;if(!(s||a>0)||16&a){let s;ri(t,e,n,o)&&(h=!0);for(const o in l)e&&(Object(r["k"])(e,o)||(s=Object(r["l"])(o))!==o&&Object(r["k"])(e,s))||(c?!i||void 0===i[o]&&void 0===i[s]||(n[o]=si(c,l,o,void 0,t,!0)):delete n[o]);if(o!==l)for(const t in o)e&&Object(r["k"])(e,t)||(delete o[t],h=!0)}else if(8&a){const i=t.vnode.dynamicProps;for(let s=0;s<i.length;s++){let a=i[s];const u=e[a];if(c)if(Object(r["k"])(o,a))u!==o[a]&&(o[a]=u,h=!0);else{const e=Object(r["e"])(a);n[e]=si(c,l,e,u,t,!1)}else u!==o[a]&&(o[a]=u,h=!0)}}h&&A(t,"set","$attrs")}function ri(t,e,i,s){const[n,o]=t.propsOptions;let a,l=!1;if(e)for(let c in e){if(Object(r["z"])(c))continue;const h=e[c];let u;n&&Object(r["k"])(n,u=Object(r["e"])(c))?o&&o.includes(u)?(a||(a={}))[u]=h:i[u]=h:$t(t.emitsOptions,c)||c in s&&h===s[c]||(s[c]=h,l=!0)}if(o){const e=Mt(i),s=a||r["b"];for(let a=0;a<o.length;a++){const l=o[a];i[l]=si(n,e,l,s[l],t,!Object(r["k"])(s,l))}}return l}function si(t,e,i,s,n,o){const a=t[i];if(null!=a){const t=Object(r["k"])(a,"default");if(t&&void 0===s){const t=a.default;if(a.type!==Function&&Object(r["p"])(t)){const{propsDefaults:r}=n;i in r?s=r[i]:(Er(n),s=r[i]=t.call(null,e),wr())}else s=t}a[0]&&(o&&!t?s=!1:!a[1]||""!==s&&s!==Object(r["l"])(i)||(s=!0))}return s}function ni(t,e,i=!1){const s=e.propsCache,n=s.get(t);if(n)return n;const o=t.props,a={},l=[];let c=!1;if(!Object(r["p"])(t)){const s=t=>{c=!0;const[i,s]=ni(t,e,!0);Object(r["h"])(a,i),s&&l.push(...s)};!i&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}if(!o&&!c)return s.set(t,r["a"]),r["a"];if(Object(r["o"])(o))for(let u=0;u<o.length;u++){0;const t=Object(r["e"])(o[u]);oi(t)&&(a[t]=r["b"])}else if(o){0;for(const t in o){const e=Object(r["e"])(t);if(oi(e)){const i=o[t],s=a[e]=Object(r["o"])(i)||Object(r["p"])(i)?{type:i}:i;if(s){const t=ci(Boolean,s.type),i=ci(String,s.type);s[0]=t>-1,s[1]=i<0||t<i,(t>-1||Object(r["k"])(s,"default"))&&l.push(e)}}}}const h=[a,l];return s.set(t,h),h}function oi(t){return"$"!==t[0]}function ai(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function li(t,e){return ai(t)===ai(e)}function ci(t,e){return Object(r["o"])(e)?e.findIndex(e=>li(e,t)):Object(r["p"])(e)&&li(e,t)?0:-1}const hi=t=>"_"===t[0]||"$stable"===t,ui=t=>Object(r["o"])(t)?t.map(cr):[cr(t)],di=(t,e,i)=>{const r=Zt((...t)=>ui(e(...t)),i);return r._c=!1,r},pi=(t,e,i)=>{const s=t._ctx;for(const n in t){if(hi(n))continue;const i=t[n];if(Object(r["p"])(i))e[n]=di(n,i,s);else if(null!=i){0;const t=ui(i);e[n]=()=>t}}},fi=(t,e)=>{const i=ui(e);t.slots.default=()=>i},mi=(t,e)=>{if(32&t.vnode.shapeFlag){const i=e._;i?(t.slots=Mt(e),Object(r["g"])(e,"_",i)):pi(e,t.slots={})}else t.slots={},e&&fi(t,e);Object(r["g"])(t.slots,Zi,1)},bi=(t,e,i)=>{const{vnode:s,slots:n}=t;let o=!0,a=r["b"];if(32&s.shapeFlag){const t=e._;t?i&&1===t?o=!1:(Object(r["h"])(n,e),i||1!==t||delete n._):(o=!e.$stable,pi(e,n)),a=e}else e&&(fi(t,e),a={default:1});if(o)for(const r in n)hi(r)||r in a||delete n[r]};function vi(t,e){const i=qt;if(null===i)return t;const s=i.proxy,n=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[t,i,a,l=r["b"]]=e[o];Object(r["p"])(t)&&(t={mounted:t,updated:t}),t.deep&&_s(i),n.push({dir:t,instance:s,value:i,oldValue:void 0,arg:a,modifiers:l})}return t}function gi(t,e,i,r){const s=t.dirs,n=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];n&&(a.oldValue=n[o].value);let l=a.dir[r];l&&(E(),Fr(l,i,8,[t.el,a,t,e]),S())}}function yi(){return{app:null,config:{isNativeTag:r["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _i=0;function Ci(t,e){return function(i,s=null){null==s||Object(r["v"])(s)||(s=null);const n=yi(),o=new Set;let a=!1;const l=n.app={_uid:_i++,_component:i,_props:s,_container:null,_context:n,_instance:null,version:Ps,get config(){return n.config},set config(t){0},use(t,...e){return o.has(t)||(t&&Object(r["p"])(t.install)?(o.add(t),t.install(l,...e)):Object(r["p"])(t)&&(o.add(t),t(l,...e))),l},mixin(t){return n.mixins.includes(t)||n.mixins.push(t),l},component(t,e){return e?(n.components[t]=e,l):n.components[t]},directive(t,e){return e?(n.directives[t]=e,l):n.directives[t]},mount(r,o,c){if(!a){const h=ir(i,s);return h.appContext=n,o&&e?e(h,r):t(h,r,c),a=!0,l._container=r,r.__vue_app__=l,Br(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return n.provides[t]=e,l}};return l}}function Pi(t,e,i,s,n=!1){if(Object(r["o"])(t))return void t.forEach((t,o)=>Pi(t,e&&(Object(r["o"])(e)?e[o]:e),i,s,n));if(_e(s)&&!n)return;const o=4&s.shapeFlag?Br(s.component)||s.component.proxy:s.el,a=n?null:o,{i:l,r:c}=t;const h=e&&e.r,u=l.refs===r["b"]?l.refs={}:l.refs,d=l.setupState;if(null!=h&&h!==c&&(Object(r["D"])(h)?(u[h]=null,Object(r["k"])(d,h)&&(d[h]=null)):It(h)&&(h.value=null)),Object(r["p"])(c))Xr(c,l,12,[a,u]);else{const e=Object(r["D"])(c),s=It(c);if(e||s){const s=()=>{if(t.f){const i=e?u[c]:c.value;n?Object(r["o"])(i)&&Object(r["K"])(i,o):Object(r["o"])(i)?i.includes(o)||i.push(o):e?u[c]=[o]:(c.value=[o],t.k&&(u[t.k]=c.value))}else e?(u[c]=a,Object(r["k"])(d,c)&&(d[c]=a)):It(c)&&(c.value=a,t.k&&(u[t.k]=a))};a?(s.id=-1,xi(s,i)):s()}else 0}}function Oi(){}const xi=oe;function Ei(t){return wi(t)}function wi(t,e){Oi();const i=Object(r["i"])();i.__VUE__=!0;const{insert:s,remove:n,patchProp:o,createElement:a,createText:l,createComment:c,setText:h,setElementText:u,parentNode:d,nextSibling:p,setScopeId:f=r["d"],cloneNode:m,insertStaticContent:b}=t,v=(t,e,i,r=null,s=null,n=null,o=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!Qi(t,e)&&(r=$(t),G(t,s,n,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:h,shapeFlag:u}=e;switch(c){case Di:g(t,e,i,r);break;case Yi:y(t,e,i,r);break;case Xi:null==t&&_(e,i,r,o);break;case Bi:k(t,e,i,r,s,n,o,a,l);break;default:1&u?x(t,e,i,r,s,n,o,a,l):6&u?L(t,e,i,r,s,n,o,a,l):(64&u||128&u)&&c.process(t,e,i,r,s,n,o,a,l,W)}null!=h&&s&&Pi(h,t&&t.ref,n,e||t,!e)},g=(t,e,i,r)=>{if(null==t)s(e.el=l(e.children),i,r);else{const i=e.el=t.el;e.children!==t.children&&h(i,e.children)}},y=(t,e,i,r)=>{null==t?s(e.el=c(e.children||""),i,r):e.el=t.el},_=(t,e,i,r)=>{[t.el,t.anchor]=b(t.children,e,i,r)},P=({el:t,anchor:e},i,r)=>{let n;while(t&&t!==e)n=p(t),s(t,i,r),t=n;s(e,i,r)},O=({el:t,anchor:e})=>{let i;while(t&&t!==e)i=p(t),n(t),t=i;n(e)},x=(t,e,i,r,s,n,o,a,l)=>{o=o||"svg"===e.type,null==t?w(e,i,r,s,n,o,a,l):M(t,e,s,n,o,a,l)},w=(t,e,i,n,l,c,h,d)=>{let p,f;const{type:b,props:v,shapeFlag:g,transition:y,patchFlag:_,dirs:C}=t;if(t.el&&void 0!==m&&-1===_)p=t.el=m(t.el);else{if(p=t.el=a(t.type,c,v&&v.is,v),8&g?u(p,t.children):16&g&&N(t.children,p,null,n,l,c&&"foreignObject"!==b,h,d),C&&gi(t,null,n,"created"),v){for(const e in v)"value"===e||Object(r["z"])(e)||o(p,e,null,v[e],c,t.children,n,l,V);"value"in v&&o(p,"value",null,v.value),(f=v.onVnodeBeforeMount)&&pr(f,n,t)}T(p,t,t.scopeId,h,n)}C&&gi(t,null,n,"beforeMount");const P=(!l||l&&!l.pendingBranch)&&y&&!y.persisted;P&&y.beforeEnter(p),s(p,e,i),((f=v&&v.onVnodeMounted)||P||C)&&xi(()=>{f&&pr(f,n,t),P&&y.enter(p),C&&gi(t,null,n,"mounted")},l)},T=(t,e,i,r,s)=>{if(i&&f(t,i),r)for(let n=0;n<r.length;n++)f(t,r[n]);if(s){let i=s.subTree;if(e===i){const e=s.vnode;T(t,e,e.scopeId,e.slotScopeIds,s.parent)}}},N=(t,e,i,r,s,n,o,a,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=a?hr(t[c]):cr(t[c]);v(null,l,e,i,r,s,n,o,a)}},M=(t,e,i,s,n,a,l)=>{const c=e.el=t.el;let{patchFlag:h,dynamicChildren:d,dirs:p}=e;h|=16&t.patchFlag;const f=t.props||r["b"],m=e.props||r["b"];let b;i&&Si(i,!1),(b=m.onVnodeBeforeUpdate)&&pr(b,i,e,t),p&&gi(e,t,i,"beforeUpdate"),i&&Si(i,!0);const v=n&&"foreignObject"!==e.type;if(d?A(t.dynamicChildren,d,c,i,s,v,a):l||Y(t,e,c,null,i,s,v,a,!1),h>0){if(16&h)R(c,e,f,m,i,s,n);else if(2&h&&f.class!==m.class&&o(c,"class",null,m.class,n),4&h&&o(c,"style",f.style,m.style,n),8&h){const r=e.dynamicProps;for(let e=0;e<r.length;e++){const a=r[e],l=f[a],h=m[a];h===l&&"value"!==a||o(c,a,l,h,n,t.children,i,s,V)}}1&h&&t.children!==e.children&&u(c,e.children)}else l||null!=d||R(c,e,f,m,i,s,n);((b=m.onVnodeUpdated)||p)&&xi(()=>{b&&pr(b,i,e,t),p&&gi(e,t,i,"updated")},s)},A=(t,e,i,r,s,n,o)=>{for(let a=0;a<e.length;a++){const l=t[a],c=e[a],h=l.el&&(l.type===Bi||!Qi(l,c)||70&l.shapeFlag)?d(l.el):i;v(l,c,h,null,r,s,n,o,!0)}},R=(t,e,i,s,n,a,l)=>{if(i!==s){for(const c in s){if(Object(r["z"])(c))continue;const h=s[c],u=i[c];h!==u&&"value"!==c&&o(t,c,u,h,l,e.children,n,a,V)}if(i!==r["b"])for(const c in i)Object(r["z"])(c)||c in s||o(t,c,i[c],null,l,e.children,n,a,V);"value"in s&&o(t,"value",i.value,s.value)}},k=(t,e,i,r,n,o,a,c,h)=>{const u=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=e;m&&(c=c?c.concat(m):m),null==t?(s(u,i,r),s(d,i,r),N(e.children,i,d,n,o,a,c,h)):p>0&&64&p&&f&&t.dynamicChildren?(A(t.dynamicChildren,f,i,n,o,a,c),(null!=e.key||n&&e===n.subTree)&&Ti(t,e,!0)):Y(t,e,i,d,n,o,a,c,h)},L=(t,e,i,r,s,n,o,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?s.ctx.activate(e,i,r,o,l):j(e,i,r,s,n,o,l):I(t,e,l)},j=(t,e,i,r,s,n,o)=>{const a=t.component=Pr(t,r,s);if(Ce(t)&&(a.ctx.renderer=W),Ar(a),a.asyncDep){if(s&&s.registerDep(a,B),!t.el){const t=a.subTree=ir(Yi);y(null,t,e,i)}}else B(a,t,e,i,s,n,o)},I=(t,e,i)=>{const r=e.component=t.component;if(ie(t,e,i)){if(r.asyncDep&&!r.asyncResolved)return void D(r,e,i);r.next=e,as(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},B=(t,e,i,s,n,o,a)=>{const l=()=>{if(t.isMounted){let e,{next:i,bu:s,u:l,parent:c,vnode:h}=t,u=i;0,Si(t,!1),i?(i.el=h.el,D(t,i,a)):i=h,s&&Object(r["n"])(s),(e=i.props&&i.props.onVnodeBeforeUpdate)&&pr(e,c,i,h),Si(t,!0);const p=Kt(t);0;const f=t.subTree;t.subTree=p,v(f,p,d(f.el),$(f),t,n,o),i.el=p.el,null===u&&se(t,p.el),l&&xi(l,n),(e=i.props&&i.props.onVnodeUpdated)&&xi(()=>pr(e,c,i,h),n)}else{let a;const{el:l,props:c}=e,{bm:h,m:u,parent:d}=t,p=_e(e);if(Si(t,!1),h&&Object(r["n"])(h),!p&&(a=c&&c.onVnodeBeforeMount)&&pr(a,d,e),Si(t,!0),l&&Z){const i=()=>{t.subTree=Kt(t),Z(l,t.subTree,t,n,null)};p?e.type.__asyncLoader().then(()=>!t.isUnmounted&&i()):i()}else{0;const r=t.subTree=Kt(t);0,v(null,r,i,s,t,n,o),e.el=r.el}if(u&&xi(u,n),!p&&(a=c&&c.onVnodeMounted)){const t=e;xi(()=>pr(a,d,t),n)}256&e.shapeFlag&&t.a&&xi(t.a,n),t.isMounted=!0,e=i=s=null}},c=t.effect=new C(l,()=>ns(t.update),t.scope),h=t.update=c.run.bind(c);h.id=t.uid,Si(t,!0),h()},D=(t,e,i)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,ii(t,e.props,r,i),bi(t,e.children,i),E(),us(void 0,t.update),S()},Y=(t,e,i,r,s,n,o,a,l=!1)=>{const c=t&&t.children,h=t?t.shapeFlag:0,d=e.children,{patchFlag:p,shapeFlag:f}=e;if(p>0){if(128&p)return void F(c,d,i,r,s,n,o,a,l);if(256&p)return void X(c,d,i,r,s,n,o,a,l)}8&f?(16&h&&V(c,s,n),d!==c&&u(i,d)):16&h?16&f?F(c,d,i,r,s,n,o,a,l):V(c,s,n,!0):(8&h&&u(i,""),16&f&&N(d,i,r,s,n,o,a,l))},X=(t,e,i,s,n,o,a,l,c)=>{t=t||r["a"],e=e||r["a"];const h=t.length,u=e.length,d=Math.min(h,u);let p;for(p=0;p<d;p++){const r=e[p]=c?hr(e[p]):cr(e[p]);v(t[p],r,i,null,n,o,a,l,c)}h>u?V(t,n,o,!0,!1,d):N(e,i,s,n,o,a,l,c,d)},F=(t,e,i,s,n,o,a,l,c)=>{let h=0;const u=e.length;let d=t.length-1,p=u-1;while(h<=d&&h<=p){const r=t[h],s=e[h]=c?hr(e[h]):cr(e[h]);if(!Qi(r,s))break;v(r,s,i,null,n,o,a,l,c),h++}while(h<=d&&h<=p){const r=t[d],s=e[p]=c?hr(e[p]):cr(e[p]);if(!Qi(r,s))break;v(r,s,i,null,n,o,a,l,c),d--,p--}if(h>d){if(h<=p){const t=p+1,r=t<u?e[t].el:s;while(h<=p)v(null,e[h]=c?hr(e[h]):cr(e[h]),i,r,n,o,a,l,c),h++}}else if(h>p)while(h<=d)G(t[h],n,o,!0),h++;else{const f=h,m=h,b=new Map;for(h=m;h<=p;h++){const t=e[h]=c?hr(e[h]):cr(e[h]);null!=t.key&&b.set(t.key,h)}let g,y=0;const _=p-m+1;let C=!1,P=0;const O=new Array(_);for(h=0;h<_;h++)O[h]=0;for(h=f;h<=d;h++){const r=t[h];if(y>=_){G(r,n,o,!0);continue}let s;if(null!=r.key)s=b.get(r.key);else for(g=m;g<=p;g++)if(0===O[g-m]&&Qi(r,e[g])){s=g;break}void 0===s?G(r,n,o,!0):(O[s-m]=h+1,s>=P?P=s:C=!0,v(r,e[s],i,null,n,o,a,l,c),y++)}const x=C?Ni(O):r["a"];for(g=x.length-1,h=_-1;h>=0;h--){const t=m+h,r=e[t],d=t+1<u?e[t+1].el:s;0===O[h]?v(null,r,i,d,n,o,a,l,c):C&&(g<0||h!==x[g]?U(r,i,d,2):g--)}}},U=(t,e,i,r,n=null)=>{const{el:o,type:a,transition:l,children:c,shapeFlag:h}=t;if(6&h)return void U(t.component.subTree,e,i,r);if(128&h)return void t.suspense.move(e,i,r);if(64&h)return void a.move(t,e,i,W);if(a===Bi){s(o,e,i);for(let t=0;t<c.length;t++)U(c[t],e,i,r);return void s(t.anchor,e,i)}if(a===Xi)return void P(t,e,i);const u=2!==r&&1&h&&l;if(u)if(0===r)l.beforeEnter(o),s(o,e,i),xi(()=>l.enter(o),n);else{const{leave:t,delayLeave:r,afterLeave:n}=l,a=()=>s(o,e,i),c=()=>{t(o,()=>{a(),n&&n()})};r?r(o,a,c):c()}else s(o,e,i)},G=(t,e,i,r=!1,s=!1)=>{const{type:n,props:o,ref:a,children:l,dynamicChildren:c,shapeFlag:h,patchFlag:u,dirs:d}=t;if(null!=a&&Pi(a,null,i,t,!0),256&h)return void e.ctx.deactivate(t);const p=1&h&&d,f=!_e(t);let m;if(f&&(m=o&&o.onVnodeBeforeUnmount)&&pr(m,e,t),6&h)H(t.component,i,r);else{if(128&h)return void t.suspense.unmount(i,r);p&&gi(t,null,e,"beforeUnmount"),64&h?t.type.remove(t,e,i,s,W,r):c&&(n!==Bi||u>0&&64&u)?V(c,e,i,!1,!0):(n===Bi&&384&u||!s&&16&h)&&V(l,e,i),r&&J(t)}(f&&(m=o&&o.onVnodeUnmounted)||p)&&xi(()=>{m&&pr(m,e,t),p&&gi(t,null,e,"unmounted")},i)},J=t=>{const{type:e,el:i,anchor:r,transition:s}=t;if(e===Bi)return void z(i,r);if(e===Xi)return void O(t);const o=()=>{n(i),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&t.shapeFlag&&s&&!s.persisted){const{leave:e,delayLeave:r}=s,n=()=>e(i,o);r?r(t.el,o,n):n()}else o()},z=(t,e)=>{let i;while(t!==e)i=p(t),n(t),t=i;n(e)},H=(t,e,i)=>{const{bum:s,scope:n,update:o,subTree:a,um:l}=t;s&&Object(r["n"])(s),n.stop(),o&&(o.active=!1,G(a,t,e,i)),l&&xi(l,e),xi(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},V=(t,e,i,r=!1,s=!1,n=0)=>{for(let o=n;o<t.length;o++)G(t[o],e,i,r,s)},$=t=>6&t.shapeFlag?$(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),q=(t,e,i)=>{null==t?e._vnode&&G(e._vnode,null,null,!0):v(e._vnode||null,t,e,null,null,null,i),ds(),e._vnode=t},W={p:v,um:G,m:U,r:J,mt:j,mc:N,pc:Y,pbc:A,n:$,o:t};let Q,Z;return e&&([Q,Z]=e(W)),{render:q,hydrate:Q,createApp:Ci(q,Q)}}function Si({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function Ti(t,e,i=!1){const s=t.children,n=e.children;if(Object(r["o"])(s)&&Object(r["o"])(n))for(let r=0;r<s.length;r++){const t=s[r];let e=n[r];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=n[r]=hr(n[r]),e.el=t.el),i||Ti(t,e))}}function Ni(t){const e=t.slice(),i=[0];let r,s,n,o,a;const l=t.length;for(r=0;r<l;r++){const l=t[r];if(0!==l){if(s=i[i.length-1],t[s]<l){e[r]=s,i.push(r);continue}n=0,o=i.length-1;while(n<o)a=n+o>>1,t[i[a]]<l?n=a+1:o=a;l<t[i[n]]&&(n>0&&(e[r]=i[n-1]),i[n]=r)}}n=i.length,o=i[n-1];while(n-- >0)i[n]=o,o=e[o];return i}const Mi=t=>t.__isTeleport;const Ai="components";function Ri(t,e){return ji(Ai,t,!0,e)||t}const ki=Symbol();function Li(t){return Object(r["D"])(t)?ji(Ai,t,!1)||t:t||ki}function ji(t,e,i=!0,s=!1){const n=qt||Or;if(n){const i=n.type;if(t===Ai){const t=Dr(i);if(t&&(t===e||t===Object(r["e"])(e)||t===Object(r["f"])(Object(r["e"])(e))))return i}const o=Ii(n[t]||i[t],e)||Ii(n.appContext[t],e);return!o&&s?i:o}}function Ii(t,e){return t&&(t[e]||t[Object(r["e"])(e)]||t[Object(r["f"])(Object(r["e"])(e))])}const Bi=Symbol(void 0),Di=Symbol(void 0),Yi=Symbol(void 0),Xi=Symbol(void 0),Fi=[];let Ui=null;function Gi(t=!1){Fi.push(Ui=t?null:[])}function Ji(){Fi.pop(),Ui=Fi[Fi.length-1]||null}let zi=1;function Hi(t){zi+=t}function Vi(t){return t.dynamicChildren=zi>0?Ui||r["a"]:null,Ji(),zi>0&&Ui&&Ui.push(t),t}function $i(t,e,i,r,s,n){return Vi(er(t,e,i,r,s,n,!0))}function qi(t,e,i,r,s){return Vi(ir(t,e,i,r,s,!0))}function Wi(t){return!!t&&!0===t.__v_isVNode}function Qi(t,e){return t.type===e.type&&t.key===e.key}const Zi="__vInternal",Ki=({key:t})=>null!=t?t:null,tr=({ref:t,ref_key:e,ref_for:i})=>null!=t?Object(r["D"])(t)||It(t)||Object(r["p"])(t)?{i:qt,r:t,k:e,f:!!i}:t:null;function er(t,e=null,i=null,s=0,n=null,o=(t===Bi?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ki(e),ref:e&&tr(e),scopeId:Wt,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null};return l?(ur(c,i),128&o&&t.normalize(c)):i&&(c.shapeFlag|=Object(r["D"])(i)?8:16),zi>0&&!a&&Ui&&(c.patchFlag>0||6&o)&&32!==c.patchFlag&&Ui.push(c),c}const ir=rr;function rr(t,e=null,i=null,s=0,n=null,o=!1){if(t&&t!==ki||(t=Yi),Wi(t)){const r=nr(t,e,!0);return i&&ur(r,i),r}if(Yr(t)&&(t=t.__vccOpts),e){e=sr(e);let{class:t,style:i}=e;t&&!Object(r["D"])(t)&&(e.class=Object(r["I"])(t)),Object(r["v"])(i)&&(Nt(i)&&!Object(r["o"])(i)&&(i=Object(r["h"])({},i)),e.style=Object(r["J"])(i))}const a=Object(r["D"])(t)?1:ne(t)?128:Mi(t)?64:Object(r["v"])(t)?4:Object(r["p"])(t)?2:0;return er(t,e,i,s,n,a,o,!0)}function sr(t){return t?Nt(t)||Zi in t?Object(r["h"])({},t):t:null}function nr(t,e,i=!1){const{props:s,ref:n,patchFlag:o,children:a}=t,l=e?dr(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Ki(l),ref:e&&e.ref?i&&n?Object(r["o"])(n)?n.concat(tr(e)):[n,tr(e)]:tr(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Bi?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&nr(t.ssContent),ssFallback:t.ssFallback&&nr(t.ssFallback),el:t.el,anchor:t.anchor};return c}function or(t=" ",e=0){return ir(Di,null,t,e)}function ar(t,e){const i=ir(Xi,null,t);return i.staticCount=e,i}function lr(t="",e=!1){return e?(Gi(),qi(Yi,null,t)):ir(Yi,null,t)}function cr(t){return null==t||"boolean"===typeof t?ir(Yi):Object(r["o"])(t)?ir(Bi,null,t.slice()):"object"===typeof t?hr(t):ir(Di,null,String(t))}function hr(t){return null===t.el||t.memo?t:nr(t)}function ur(t,e){let i=0;const{shapeFlag:s}=t;if(null==e)e=null;else if(Object(r["o"])(e))i=16;else if("object"===typeof e){if(65&s){const i=e.default;return void(i&&(i._c&&(i._d=!1),ur(t,i()),i._c&&(i._d=!0)))}{i=32;const r=e._;r||Zi in e?3===r&&qt&&(1===qt.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=qt}}else Object(r["p"])(e)?(e={default:e,_ctx:qt},i=32):(e=String(e),64&s?(i=16,e=[or(e)]):i=8);t.children=e,t.shapeFlag|=i}function dr(...t){const e={};for(let i=0;i<t.length;i++){const s=t[i];for(const t in s)if("class"===t)e.class!==s.class&&(e.class=Object(r["I"])([e.class,s.class]));else if("style"===t)e.style=Object(r["J"])([e.style,s.style]);else if(Object(r["w"])(t)){const i=e[t],n=s[t];i===n||Object(r["o"])(i)&&i.includes(n)||(e[t]=i?[].concat(i,n):n)}else""!==t&&(e[t]=s[t])}return e}function pr(t,e,i,r=null){Fr(t,e,7,[i,r])}function fr(t,e,i,s){let n;const o=i&&i[s];if(Object(r["o"])(t)||Object(r["D"])(t)){n=new Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=e(t[i],i,void 0,o&&o[i])}else if("number"===typeof t){0,n=new Array(t);for(let i=0;i<t;i++)n[i]=e(i+1,i,void 0,o&&o[i])}else if(Object(r["v"])(t))if(t[Symbol.iterator])n=Array.from(t,(t,i)=>e(t,i,void 0,o&&o[i]));else{const i=Object.keys(t);n=new Array(i.length);for(let r=0,s=i.length;r<s;r++){const s=i[r];n[r]=e(t[s],s,r,o&&o[r])}}else n=[];return i&&(i[s]=n),n}function mr(t,e,i={},r,s){if(qt.isCE)return ir("slot","default"===e?null:{name:e},r&&r());let n=t[e];n&&n._c&&(n._d=!1),Gi();const o=n&&br(n(i)),a=qi(Bi,{key:i.key||"_"+e},o||(r?r():[]),o&&1===t._?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function br(t){return t.some(t=>!Wi(t)||t.type!==Yi&&!(t.type===Bi&&!br(t.children)))?t:null}const vr=t=>t?Sr(t)?Br(t)||t.proxy:vr(t.parent):null,gr=Object(r["h"])(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vr(t.parent),$root:t=>vr(t.root),$emit:t=>t.emit,$options:t=>He(t),$forceUpdate:t=>()=>ns(t.update),$nextTick:t=>rs.bind(t.proxy),$watch:t=>gs.bind(t)}),yr={get({_:t},e){const{ctx:i,setupState:s,data:n,props:o,accessCache:a,type:l,appContext:c}=t;let h;if("$"!==e[0]){const l=a[e];if(void 0!==l)switch(l){case 1:return s[e];case 2:return n[e];case 4:return i[e];case 3:return o[e]}else{if(s!==r["b"]&&Object(r["k"])(s,e))return a[e]=1,s[e];if(n!==r["b"]&&Object(r["k"])(n,e))return a[e]=2,n[e];if((h=t.propsOptions[0])&&Object(r["k"])(h,e))return a[e]=3,o[e];if(i!==r["b"]&&Object(r["k"])(i,e))return a[e]=4,i[e];Fe&&(a[e]=0)}}const u=gr[e];let d,p;return u?("$attrs"===e&&T(t,"get",e),u(t)):(d=l.__cssModules)&&(d=d[e])?d:i!==r["b"]&&Object(r["k"])(i,e)?(a[e]=4,i[e]):(p=c.config.globalProperties,Object(r["k"])(p,e)?p[e]:void 0)},set({_:t},e,i){const{data:s,setupState:n,ctx:o}=t;if(n!==r["b"]&&Object(r["k"])(n,e))n[e]=i;else if(s!==r["b"]&&Object(r["k"])(s,e))s[e]=i;else if(Object(r["k"])(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:s,appContext:n,propsOptions:o}},a){let l;return!!i[a]||t!==r["b"]&&Object(r["k"])(t,a)||e!==r["b"]&&Object(r["k"])(e,a)||(l=o[0])&&Object(r["k"])(l,a)||Object(r["k"])(s,a)||Object(r["k"])(gr,a)||Object(r["k"])(n.config.globalProperties,a)}};const _r=yi();let Cr=0;function Pr(t,e,i){const s=t.type,n=(e?e.appContext:t.appContext)||_r,a={uid:Cr++,vnode:t,type:s,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new o(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ni(s,n),emitsOptions:Vt(s,n),emit:null,emitted:null,propsDefaults:r["b"],inheritAttrs:s.inheritAttrs,ctx:r["b"],data:r["b"],props:r["b"],attrs:r["b"],slots:r["b"],refs:r["b"],setupState:r["b"],setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Ht.bind(null,a),t.ce&&t.ce(a),a}let Or=null;const xr=()=>Or||qt,Er=t=>{Or=t,t.scope.on()},wr=()=>{Or&&Or.scope.off(),Or=null};function Sr(t){return 4&t.vnode.shapeFlag}let Tr,Nr,Mr=!1;function Ar(t,e=!1){Mr=e;const{props:i,children:r}=t.vnode,s=Sr(t);ei(t,i,s,e),mi(t,r);const n=s?Rr(t,e):void 0;return Mr=!1,n}function Rr(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=At(new Proxy(t.ctx,yr));const{setup:s}=i;if(s){const i=t.setupContext=s.length>1?Ir(t):null;Er(t),E();const n=Xr(s,t,0,[t.props,i]);if(S(),wr(),Object(r["y"])(n)){if(n.then(wr,wr),e)return n.then(i=>{kr(t,i,e)}).catch(e=>{Ur(e,t,0)});t.asyncDep=n}else kr(t,n,e)}else Lr(t,e)}function kr(t,e,i){Object(r["p"])(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Object(r["v"])(e)&&(t.setupState=Gt(e)),Lr(t,i)}function Lr(t,e,i){const s=t.type;if(!t.render){if(!e&&Tr&&!s.render){const e=s.template;if(e){0;const{isCustomElement:i,compilerOptions:n}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,l=Object(r["h"])(Object(r["h"])({isCustomElement:i,delimiters:o},n),a);s.render=Tr(e,l)}}t.render=s.render||r["d"],Nr&&Nr(t)}Er(t),E(),Ue(t),S(),wr()}function jr(t){return new Proxy(t.attrs,{get(e,i){return T(t,"get","$attrs"),e[i]}})}function Ir(t){const e=e=>{t.exposed=e||{}};let i;return{get attrs(){return i||(i=jr(t))},slots:t.slots,emit:t.emit,expose:e}}function Br(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Gt(At(t.exposed)),{get(e,i){return i in e?e[i]:i in gr?gr[i](t):void 0}}))}function Dr(t){return Object(r["p"])(t)&&t.displayName||t.name}function Yr(t){return Object(r["p"])(t)&&"__vccOpts"in t}function Xr(t,e,i,r){let s;try{s=r?t(...r):t()}catch(n){Ur(n,e,i)}return s}function Fr(t,e,i,s){if(Object(r["p"])(t)){const n=Xr(t,e,i,s);return n&&Object(r["y"])(n)&&n.catch(t=>{Ur(t,e,i)}),n}const n=[];for(let r=0;r<t.length;r++)n.push(Fr(t[r],e,i,s));return n}function Ur(t,e,i,r=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const s=e.proxy,n=i;while(r){const e=r.ec;if(e)for(let i=0;i<e.length;i++)if(!1===e[i](t,s,n))return;r=r.parent}const o=e.appContext.config.errorHandler;if(o)return void Xr(o,null,10,[t,s,n])}Gr(t,i,s,r)}function Gr(t,e,i,r=!0){console.error(t)}let Jr=!1,zr=!1;const Hr=[];let Vr=0;const $r=[];let qr=null,Wr=0;const Qr=[];let Zr=null,Kr=0;const ts=Promise.resolve();let es=null,is=null;function rs(t){const e=es||ts;return t?e.then(this?t.bind(this):t):e}function ss(t){let e=Vr+1,i=Hr.length;while(e<i){const r=e+i>>>1,s=ps(Hr[r]);s<t?e=r+1:i=r}return e}function ns(t){Hr.length&&Hr.includes(t,Jr&&t.allowRecurse?Vr+1:Vr)||t===is||(null==t.id?Hr.push(t):Hr.splice(ss(t.id),0,t),os())}function os(){Jr||zr||(zr=!0,es=ts.then(fs))}function as(t){const e=Hr.indexOf(t);e>Vr&&Hr.splice(e,1)}function ls(t,e,i,s){Object(r["o"])(t)?i.push(...t):e&&e.includes(t,t.allowRecurse?s+1:s)||i.push(t),os()}function cs(t){ls(t,qr,$r,Wr)}function hs(t){ls(t,Zr,Qr,Kr)}function us(t,e=null){if($r.length){for(is=e,qr=[...new Set($r)],$r.length=0,Wr=0;Wr<qr.length;Wr++)qr[Wr]();qr=null,Wr=0,is=null,us(t,e)}}function ds(t){if(Qr.length){const t=[...new Set(Qr)];if(Qr.length=0,Zr)return void Zr.push(...t);for(Zr=t,Zr.sort((t,e)=>ps(t)-ps(e)),Kr=0;Kr<Zr.length;Kr++)Zr[Kr]();Zr=null,Kr=0}}const ps=t=>null==t.id?1/0:t.id;function fs(t){zr=!1,Jr=!0,us(t),Hr.sort((t,e)=>ps(t)-ps(e));r["d"];try{for(Vr=0;Vr<Hr.length;Vr++){const t=Hr[Vr];t&&!1!==t.active&&Xr(t,null,14)}}finally{Vr=0,Hr.length=0,ds(t),Jr=!1,es=null,(Hr.length||$r.length||Qr.length)&&fs(t)}}const ms={};function bs(t,e,i){return vs(t,e,i)}function vs(t,e,{immediate:i,deep:s,flush:n,onTrack:o,onTrigger:a}=r["b"]){const l=Or;let c,h,u=!1,d=!1;if(It(t)?(c=()=>t.value,u=!!t._shallow):St(t)?(c=()=>t,s=!0):Object(r["o"])(t)?(d=!0,u=t.some(St),c=()=>t.map(t=>It(t)?t.value:St(t)?_s(t):Object(r["p"])(t)?Xr(t,l,2):void 0)):c=Object(r["p"])(t)?e?()=>Xr(t,l,2):()=>{if(!l||!l.isUnmounted)return h&&h(),Fr(t,l,3,[p])}:r["d"],e&&s){const t=c;c=()=>_s(t())}let p=t=>{h=v.onStop=()=>{Xr(t,l,4)}};if(Mr)return p=r["d"],e?i&&Fr(e,l,3,[c(),d?[]:void 0,p]):c(),r["d"];let f=d?[]:ms;const m=()=>{if(v.active)if(e){const t=v.run();(s||u||(d?t.some((t,e)=>Object(r["j"])(t,f[e])):Object(r["j"])(t,f)))&&(h&&h(),Fr(e,l,3,[t,f===ms?void 0:f,p]),f=t)}else v.run()};let b;m.allowRecurse=!!e,b="sync"===n?m:"post"===n?()=>xi(m,l&&l.suspense):()=>{!l||l.isMounted?cs(m):m()};const v=new C(c,b);return e?i?m():f=v.run():"post"===n?xi(v.run.bind(v),l&&l.suspense):v.run(),()=>{v.stop(),l&&l.scope&&Object(r["K"])(l.scope.effects,v)}}function gs(t,e,i){const s=this.proxy,n=Object(r["D"])(t)?t.includes(".")?ys(s,t):()=>s[t]:t.bind(s,s);let o;Object(r["p"])(e)?o=e:(o=e.handler,i=e);const a=Or;Er(this);const l=vs(n,o.bind(s),i);return a?Er(a):wr(),l}function ys(t,e){const i=e.split(".");return()=>{let e=t;for(let t=0;t<i.length&&e;t++)e=e[i[t]];return e}}function _s(t,e){if(!Object(r["v"])(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),It(t))_s(t.value,e);else if(Object(r["o"])(t))for(let i=0;i<t.length;i++)_s(t[i],e);else if(Object(r["B"])(t)||Object(r["t"])(t))t.forEach(t=>{_s(t,e)});else if(Object(r["x"])(t))for(const i in t)_s(t[i],e);return t}function Cs(t,e,i){const s=arguments.length;return 2===s?Object(r["v"])(e)&&!Object(r["o"])(e)?Wi(e)?ir(t,null,[e]):ir(t,e):ir(t,null,e):(s>3?i=Array.prototype.slice.call(arguments,2):3===s&&Wi(i)&&(i=[i]),ir(t,e,i))}Symbol("");const Ps="3.2.26",Os="http://www.w3.org/2000/svg",xs="undefined"!==typeof document?document:null,Es=new Map,ws={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,r)=>{const s=e?xs.createElementNS(Os,t):xs.createElement(t,i?{is:i}:void 0);return"select"===t&&r&&null!=r.multiple&&s.setAttribute("multiple",r.multiple),s},createText:t=>xs.createTextNode(t),createComment:t=>xs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>xs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,i,r){const s=i?i.previousSibling:e.lastChild;let n=Es.get(t);if(!n){const e=xs.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,n=e.content,r){const t=n.firstChild;while(t.firstChild)n.appendChild(t.firstChild);n.removeChild(t)}Es.set(t,n)}return e.insertBefore(n.cloneNode(!0),i),[s?s.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}};function Ss(t,e,i){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}function Ts(t,e,i){const s=t.style,n=Object(r["D"])(i);if(i&&!n){for(const t in i)Ms(s,t,i[t]);if(e&&!Object(r["D"])(e))for(const t in e)null==i[t]&&Ms(s,t,"")}else{const r=s.display;n?e!==i&&(s.cssText=i):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=r)}}const Ns=/\s*!important$/;function Ms(t,e,i){if(Object(r["o"])(i))i.forEach(i=>Ms(t,e,i));else if(e.startsWith("--"))t.setProperty(e,i);else{const s=ks(t,e);Ns.test(i)?t.setProperty(Object(r["l"])(s),i.replace(Ns,""),"important"):t[s]=i}}const As=["Webkit","Moz","ms"],Rs={};function ks(t,e){const i=Rs[e];if(i)return i;let s=Object(r["e"])(e);if("filter"!==s&&s in t)return Rs[e]=s;s=Object(r["f"])(s);for(let r=0;r<As.length;r++){const i=As[r]+s;if(i in t)return Rs[e]=i}return e}const Ls="http://www.w3.org/1999/xlink";function js(t,e,i,s,n){if(s&&e.startsWith("xlink:"))null==i?t.removeAttributeNS(Ls,e.slice(6,e.length)):t.setAttributeNS(Ls,e,i);else{const s=Object(r["C"])(e);null==i||s&&!Object(r["m"])(i)?t.removeAttribute(e):t.setAttribute(e,s?"":i)}}function Is(t,e,i,s,n,o,a){if("innerHTML"===e||"textContent"===e)return s&&a(s,n,o),void(t[e]=null==i?"":i);if("value"===e&&"PROGRESS"!==t.tagName&&!t.tagName.includes("-")){t._value=i;const r=null==i?"":i;return t.value===r&&"OPTION"!==t.tagName||(t.value=r),void(null==i&&t.removeAttribute(e))}if(""===i||null==i){const s=typeof t[e];if("boolean"===s)return void(t[e]=Object(r["m"])(i));if(null==i&&"string"===s)return t[e]="",void t.removeAttribute(e);if("number"===s){try{t[e]=0}catch(l){}return void t.removeAttribute(e)}}try{t[e]=i}catch(c){0}}let Bs=Date.now,Ds=!1;if("undefined"!==typeof window){Bs()>document.createEvent("Event").timeStamp&&(Bs=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Ds=!!(t&&Number(t[1])<=53)}let Ys=0;const Xs=Promise.resolve(),Fs=()=>{Ys=0},Us=()=>Ys||(Xs.then(Fs),Ys=Bs());function Gs(t,e,i,r){t.addEventListener(e,i,r)}function Js(t,e,i,r){t.removeEventListener(e,i,r)}function zs(t,e,i,r,s=null){const n=t._vei||(t._vei={}),o=n[e];if(r&&o)o.value=r;else{const[i,a]=Vs(e);if(r){const o=n[e]=$s(r,s);Gs(t,i,o,a)}else o&&(Js(t,i,o,a),n[e]=void 0)}}const Hs=/(?:Once|Passive|Capture)$/;function Vs(t){let e;if(Hs.test(t)){let i;e={};while(i=t.match(Hs))t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[Object(r["l"])(t.slice(2)),e]}function $s(t,e){const i=t=>{const r=t.timeStamp||Bs();(Ds||r>=i.attached-1)&&Fr(qs(t,i.value),e,5,[t])};return i.value=t,i.attached=Us(),i}function qs(t,e){if(Object(r["o"])(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t(e))}return e}const Ws=/^on[a-z]/,Qs=(t,e,i,s,n=!1,o,a,l,c)=>{"class"===e?Ss(t,s,n):"style"===e?Ts(t,i,s):Object(r["w"])(e)?Object(r["u"])(e)||zs(t,e,i,s,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):Zs(t,e,s,n))?Is(t,e,s,o,a,l,c):("true-value"===e?t._trueValue=s:"false-value"===e&&(t._falseValue=s),js(t,e,s,n))};function Zs(t,e,i,s){return s?"innerHTML"===e||"textContent"===e||!!(e in t&&Ws.test(e)&&Object(r["p"])(i)):"spellcheck"!==e&&"draggable"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!Ws.test(e)||!Object(r["D"])(i))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const Ks="transition",tn="animation",en=(t,{slots:e})=>Cs(de,an(t),e);en.displayName="Transition";const rn={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},sn=en.props=Object(r["h"])({},de.props,rn),nn=(t,e=[])=>{Object(r["o"])(t)?t.forEach(t=>t(...e)):t&&t(...e)},on=t=>!!t&&(Object(r["o"])(t)?t.some(t=>t.length>1):t.length>1);function an(t){const e={};for(const r in t)r in rn||(e[r]=t[r]);if(!1===t.css)return e;const{name:i="v",type:s,duration:n,enterFromClass:o=i+"-enter-from",enterActiveClass:a=i+"-enter-active",enterToClass:l=i+"-enter-to",appearFromClass:c=o,appearActiveClass:h=a,appearToClass:u=l,leaveFromClass:d=i+"-leave-from",leaveActiveClass:p=i+"-leave-active",leaveToClass:f=i+"-leave-to"}=t,m=ln(n),b=m&&m[0],v=m&&m[1],{onBeforeEnter:g,onEnter:y,onEnterCancelled:_,onLeave:C,onLeaveCancelled:P,onBeforeAppear:O=g,onAppear:x=y,onAppearCancelled:E=_}=e,w=(t,e,i)=>{un(t,e?u:l),un(t,e?h:a),i&&i()},S=(t,e)=>{un(t,f),un(t,p),e&&e()},T=t=>(e,i)=>{const r=t?x:y,n=()=>w(e,t,i);nn(r,[e,n]),dn(()=>{un(e,t?c:o),hn(e,t?u:l),on(r)||fn(e,s,b,n)})};return Object(r["h"])(e,{onBeforeEnter(t){nn(g,[t]),hn(t,o),hn(t,a)},onBeforeAppear(t){nn(O,[t]),hn(t,c),hn(t,h)},onEnter:T(!1),onAppear:T(!0),onLeave(t,e){const i=()=>S(t,e);hn(t,d),gn(),hn(t,p),dn(()=>{un(t,d),hn(t,f),on(C)||fn(t,s,v,i)}),nn(C,[t,i])},onEnterCancelled(t){w(t,!1),nn(_,[t])},onAppearCancelled(t){w(t,!0),nn(E,[t])},onLeaveCancelled(t){S(t),nn(P,[t])}})}function ln(t){if(null==t)return null;if(Object(r["v"])(t))return[cn(t.enter),cn(t.leave)];{const e=cn(t);return[e,e]}}function cn(t){const e=Object(r["M"])(t);return e}function hn(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(e)}function un(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.remove(e));const{_vtc:i}=t;i&&(i.delete(e),i.size||(t._vtc=void 0))}function dn(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let pn=0;function fn(t,e,i,r){const s=t._endId=++pn,n=()=>{s===t._endId&&r()};if(i)return setTimeout(n,i);const{type:o,timeout:a,propCount:l}=mn(t,e);if(!o)return r();const c=o+"end";let h=0;const u=()=>{t.removeEventListener(c,d),n()},d=e=>{e.target===t&&++h>=l&&u()};setTimeout(()=>{h<l&&u()},a+1),t.addEventListener(c,d)}function mn(t,e){const i=window.getComputedStyle(t),r=t=>(i[t]||"").split(", "),s=r(Ks+"Delay"),n=r(Ks+"Duration"),o=bn(s,n),a=r(tn+"Delay"),l=r(tn+"Duration"),c=bn(a,l);let h=null,u=0,d=0;e===Ks?o>0&&(h=Ks,u=o,d=n.length):e===tn?c>0&&(h=tn,u=c,d=l.length):(u=Math.max(o,c),h=u>0?o>c?Ks:tn:null,d=h?h===Ks?n.length:l.length:0);const p=h===Ks&&/\b(transform|all)(,|$)/.test(i[Ks+"Property"]);return{type:h,timeout:u,propCount:d,hasTransform:p}}function bn(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map((e,i)=>vn(e)+vn(t[i])))}function vn(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function gn(){return document.body.offsetHeight}const yn=new WeakMap,_n=new WeakMap,Cn={name:"TransitionGroup",props:Object(r["h"])({},sn,{tag:String,moveClass:String}),setup(t,{slots:e}){const i=xr(),r=ce();let s,n;return Le(()=>{if(!s.length)return;const e=t.moveClass||(t.name||"v")+"-move";if(!wn(s[0].el,i.vnode.el,e))return;s.forEach(On),s.forEach(xn);const r=s.filter(En);gn(),r.forEach(t=>{const i=t.el,r=i.style;hn(i,e),r.transform=r.webkitTransform=r.transitionDuration="";const s=i._moveCb=t=>{t&&t.target!==i||t&&!/transform$/.test(t.propertyName)||(i.removeEventListener("transitionend",s),i._moveCb=null,un(i,e))};i.addEventListener("transitionend",s)})}),()=>{const o=Mt(t),a=an(o);let l=o.tag||Bi;s=n,n=e.default?ge(e.default()):[];for(let t=0;t<n.length;t++){const e=n[t];null!=e.key&&ve(e,fe(e,a,r,i))}if(s)for(let t=0;t<s.length;t++){const e=s[t];ve(e,fe(e,a,r,i)),yn.set(e,e.el.getBoundingClientRect())}return ir(l,null,n)}}},Pn=Cn;function On(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function xn(t){_n.set(t,t.el.getBoundingClientRect())}function En(t){const e=yn.get(t),i=_n.get(t),r=e.left-i.left,s=e.top-i.top;if(r||s){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${s}px)`,e.transitionDuration="0s",t}}function wn(t,e,i){const r=t.cloneNode();t._vtc&&t._vtc.forEach(t=>{t.split(/\s+/).forEach(t=>t&&r.classList.remove(t))}),i.split(/\s+/).forEach(t=>t&&r.classList.add(t)),r.style.display="none";const s=1===e.nodeType?e:e.parentNode;s.appendChild(r);const{hasTransform:n}=mn(r);return s.removeChild(r),n}const Sn=t=>{const e=t.props["onUpdate:modelValue"];return Object(r["o"])(e)?t=>Object(r["n"])(e,t):e};function Tn(t){t.target.composing=!0}function Nn(t){const e=t.target;e.composing&&(e.composing=!1,Mn(e,"input"))}function Mn(t,e){const i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}const An={created(t,{modifiers:{lazy:e,trim:i,number:s}},n){t._assign=Sn(n);const o=s||n.props&&"number"===n.props.type;Gs(t,e?"change":"input",e=>{if(e.target.composing)return;let s=t.value;i?s=s.trim():o&&(s=Object(r["M"])(s)),t._assign(s)}),i&&Gs(t,"change",()=>{t.value=t.value.trim()}),e||(Gs(t,"compositionstart",Tn),Gs(t,"compositionend",Nn),Gs(t,"change",Nn))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:s,number:n}},o){if(t._assign=Sn(o),t.composing)return;if(document.activeElement===t){if(i)return;if(s&&t.value.trim()===e)return;if((n||"number"===t.type)&&Object(r["M"])(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}};const Rn={created(t,{value:e},i){t.checked=Object(r["F"])(e,i.props.value),t._assign=Sn(i),Gs(t,"change",()=>{t._assign(kn(t))})},beforeUpdate(t,{value:e,oldValue:i},s){t._assign=Sn(s),e!==i&&(t.checked=Object(r["F"])(e,s.props.value))}};function kn(t){return"_value"in t?t._value:t.value}const Ln=Object(r["h"])({patchProp:Qs},ws);let jn;function In(){return jn||(jn=Ei(Ln))}const Bn=(...t)=>{const e=In().createApp(...t);const{mount:i}=e;return e.mount=t=>{const s=Dn(t);if(!s)return;const n=e._component;Object(r["p"])(n)||n.render||n.template||(n.template=s.innerHTML),s.innerHTML="";const o=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Dn(t){if(Object(r["D"])(t)){const e=document.querySelector(t);return e}return t}},"7b0b":function(t,e,i){var r=i("da84"),s=i("1d80"),n=r.Object;t.exports=function(t){return n(s(t))}},"7c73":function(t,e,i){var r,s=i("825a"),n=i("37e8"),o=i("7839"),a=i("d012"),l=i("1be4"),c=i("cc12"),h=i("f772"),u=">",d="<",p="prototype",f="script",m=h("IE_PROTO"),b=function(){},v=function(t){return d+f+u+t+d+"/"+f+u},g=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){var t,e=c("iframe"),i="java"+f+":";return e.style.display="none",l.appendChild(e),e.src=String(i),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},_=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}_="undefined"!=typeof document?document.domain&&r?g(r):y():g(r);var t=o.length;while(t--)delete _[p][o[t]];return _()};a[m]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(b[p]=s(t),i=new b,b[p]=null,i[m]=t):i=_(),void 0===e?i:n(i,e)}},"7dd0":function(t,e,i){"use strict";var r=i("23e7"),s=i("c65b"),n=i("c430"),o=i("5e77"),a=i("1626"),l=i("9ed3"),c=i("e163"),h=i("d2bb"),u=i("d44e"),d=i("9112"),p=i("6eeb"),f=i("b622"),m=i("3f8c"),b=i("ae93"),v=o.PROPER,g=o.CONFIGURABLE,y=b.IteratorPrototype,_=b.BUGGY_SAFARI_ITERATORS,C=f("iterator"),P="keys",O="values",x="entries",E=function(){return this};t.exports=function(t,e,i,o,f,b,w){l(i,e,o);var S,T,N,M=function(t){if(t===f&&j)return j;if(!_&&t in k)return k[t];switch(t){case P:return function(){return new i(this,t)};case O:return function(){return new i(this,t)};case x:return function(){return new i(this,t)}}return function(){return new i(this)}},A=e+" Iterator",R=!1,k=t.prototype,L=k[C]||k["@@iterator"]||f&&k[f],j=!_&&L||M(f),I="Array"==e&&k.entries||L;if(I&&(S=c(I.call(new t)),S!==Object.prototype&&S.next&&(n||c(S)===y||(h?h(S,y):a(S[C])||p(S,C,E)),u(S,A,!0,!0),n&&(m[A]=E))),v&&f==O&&L&&L.name!==O&&(!n&&g?d(k,"name",O):(R=!0,j=function(){return s(L,this)})),f)if(T={values:M(O),keys:b?j:M(P),entries:M(x)},w)for(N in T)(_||R||!(N in k))&&p(k,N,T[N]);else r({target:e,proto:!0,forced:_||R},T);return n&&!w||k[C]===j||p(k,C,j,{name:f}),m[e]=j,T}},"7f9a":function(t,e,i){var r=i("da84"),s=i("1626"),n=i("8925"),o=r.WeakMap;t.exports=s(o)&&/native code/.test(n(o))},"825a":function(t,e,i){var r=i("da84"),s=i("861d"),n=r.String,o=r.TypeError;t.exports=function(t){if(s(t))return t;throw o(n(t)+" is not an object")}},"83ab":function(t,e,i){var r=i("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"861d":function(t,e,i){var r=i("1626");t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},8925:function(t,e,i){var r=i("e330"),s=i("1626"),n=i("c6cd"),o=r(Function.toString);s(n.inspectSource)||(n.inspectSource=function(t){return o(t)}),t.exports=n.inspectSource},"8aa5":function(t,e,i){"use strict";var r=i("6547").charAt;t.exports=function(t,e,i){return e+(i?r(t,e).length:1)}},"90e3":function(t,e,i){var r=i("e330"),s=0,n=Math.random(),o=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++s+n,36)}},9112:function(t,e,i){var r=i("83ab"),s=i("9bf2"),n=i("5c6c");t.exports=r?function(t,e,i){return s.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},9263:function(t,e,i){"use strict";var r=i("c65b"),s=i("e330"),n=i("577e"),o=i("ad6d"),a=i("9f7f"),l=i("5692"),c=i("7c73"),h=i("69f3").get,u=i("fce3"),d=i("107c"),p=l("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,m=f,b=s("".charAt),v=s("".indexOf),g=s("".replace),y=s("".slice),_=function(){var t=/a/,e=/b*/g;return r(f,t,"a"),r(f,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),C=a.BROKEN_CARET,P=void 0!==/()??/.exec("")[1],O=_||P||C||u||d;O&&(m=function(t){var e,i,s,a,l,u,d,O=this,x=h(O),E=n(t),w=x.raw;if(w)return w.lastIndex=O.lastIndex,e=r(m,w,E),O.lastIndex=w.lastIndex,e;var S=x.groups,T=C&&O.sticky,N=r(o,O),M=O.source,A=0,R=E;if(T&&(N=g(N,"y",""),-1===v(N,"g")&&(N+="g"),R=y(E,O.lastIndex),O.lastIndex>0&&(!O.multiline||O.multiline&&"\n"!==b(E,O.lastIndex-1))&&(M="(?: "+M+")",R=" "+R,A++),i=new RegExp("^(?:"+M+")",N)),P&&(i=new RegExp("^"+M+"$(?!\\s)",N)),_&&(s=O.lastIndex),a=r(f,T?i:O,R),T?a?(a.input=y(a.input,A),a[0]=y(a[0],A),a.index=O.lastIndex,O.lastIndex+=a[0].length):O.lastIndex=0:_&&a&&(O.lastIndex=O.global?a.index+a[0].length:s),P&&a&&a.length>1&&r(p,a[0],i,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)})),a&&S)for(a.groups=u=c(null),l=0;l<S.length;l++)d=S[l],u[d[0]]=a[d[1]];return a}),t.exports=m},"94ca":function(t,e,i){var r=i("d039"),s=i("1626"),n=/#|\.prototype\./,o=function(t,e){var i=l[a(t)];return i==h||i!=c&&(s(e)?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(n,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",h=o.POLYFILL="P";t.exports=o},"96cf":function(t,e,i){var r=function(t){"use strict";var e,i=Object.prototype,r=i.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",a=s.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(R){l=function(t,e,i){return t[e]=i}}function c(t,e,i,r){var s=e&&e.prototype instanceof b?e:b,n=Object.create(s.prototype),o=new N(r||[]);return n._invoke=E(t,i,o),n}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(R){return{type:"throw",arg:R}}}t.wrap=c;var u="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function b(){}function v(){}function g(){}var y={};l(y,n,(function(){return this}));var _=Object.getPrototypeOf,C=_&&_(_(M([])));C&&C!==i&&r.call(C,n)&&(y=C);var P=g.prototype=b.prototype=Object.create(y);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(s,n,o,a){var l=h(t[s],t,n);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"===typeof u&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,o,a)}),(function(t){i("throw",t,o,a)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return i("throw",t,o,a)}))}a(l.arg)}var s;function n(t,r){function n(){return new e((function(e,s){i(t,r,e,s)}))}return s=s?s.then(n,n):n()}this._invoke=n}function E(t,e,i){var r=u;return function(s,n){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===s)throw n;return A()}i.method=s,i.arg=n;while(1){var o=i.delegate;if(o){var a=w(o,i);if(a){if(a===m)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===u)throw r=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=p;var l=h(t,e,i);if("normal"===l.type){if(r=i.done?f:d,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=f,i.method="throw",i.arg=l.arg)}}}function w(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,w(t,i),"throw"===i.method))return m;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var s=h(r,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,m;var n=s.arg;return n?n.done?(i[t.resultName]=n.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,m):n:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(t){if(t){var i=t[n];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var s=-1,o=function i(){while(++s<t.length)if(r.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}return{next:A}}function A(){return{value:e,done:!0}}return v.prototype=g,l(P,"constructor",g),l(g,"constructor",v),v.displayName=l(g,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,a,"GeneratorFunction")),t.prototype=Object.create(P),t},t.awrap=function(t){return{__await:t}},O(x.prototype),l(x.prototype,o,(function(){return this})),t.AsyncIterator=x,t.async=function(e,i,r,s,n){void 0===n&&(n=Promise);var o=new x(c(e,i,r,s),n);return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(P),l(P,a,"Generator"),l(P,n,(function(){return this})),l(P,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=M,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function s(r,s){return a.type="throw",a.arg=t,i.next=r,s&&(i.method="next",i.arg=e),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var s=r.arg;T(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:M(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=r}catch(s){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},"9a1f":function(t,e,i){var r=i("da84"),s=i("c65b"),n=i("59ed"),o=i("825a"),a=i("0d51"),l=i("35a1"),c=r.TypeError;t.exports=function(t,e){var i=arguments.length<2?l(t):e;if(n(i))return o(s(i,t));throw c(a(t)+" is not iterable")}},"9bf2":function(t,e,i){var r=i("da84"),s=i("83ab"),n=i("0cfb"),o=i("825a"),a=i("a04b"),l=r.TypeError,c=Object.defineProperty;e.f=s?c:function(t,e,i){if(o(t),e=a(e),o(i),n)try{return c(t,e,i)}catch(r){}if("get"in i||"set"in i)throw l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},"9ed3":function(t,e,i){"use strict";var r=i("ae93").IteratorPrototype,s=i("7c73"),n=i("5c6c"),o=i("d44e"),a=i("3f8c"),l=function(){return this};t.exports=function(t,e,i,c){var h=e+" Iterator";return t.prototype=s(r,{next:n(+!c,i)}),o(t,h,!1,!0),a[h]=l,t}},"9f7f":function(t,e,i){var r=i("d039"),s=i("da84"),n=s.RegExp,o=r((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),a=o||r((function(){return!n("a","y").sticky})),l=o||r((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:l,MISSED_STICKY:a,UNSUPPORTED_Y:o}},"9ff4":function(t,e,i){"use strict";(function(t){function r(t,e){const i=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)i[r[s]]=!0;return e?t=>!!i[t.toLowerCase()]:t=>!!i[t]}i.d(e,"a",(function(){return P})),i.d(e,"b",(function(){return C})),i.d(e,"c",(function(){return x})),i.d(e,"d",(function(){return O})),i.d(e,"e",(function(){return q})),i.d(e,"f",(function(){return Z})),i.d(e,"g",(function(){return it})),i.d(e,"h",(function(){return T})),i.d(e,"i",(function(){return nt})),i.d(e,"j",(function(){return tt})),i.d(e,"k",(function(){return A})),i.d(e,"l",(function(){return Q})),i.d(e,"m",(function(){return l})),i.d(e,"n",(function(){return et})),i.d(e,"o",(function(){return R})),i.d(e,"p",(function(){return I})),i.d(e,"q",(function(){return n})),i.d(e,"r",(function(){return b})),i.d(e,"s",(function(){return z})),i.d(e,"t",(function(){return k})),i.d(e,"u",(function(){return S})),i.d(e,"v",(function(){return Y})),i.d(e,"w",(function(){return w})),i.d(e,"x",(function(){return J})),i.d(e,"y",(function(){return X})),i.d(e,"z",(function(){return H})),i.d(e,"A",(function(){return v})),i.d(e,"B",(function(){return L})),i.d(e,"C",(function(){return a})),i.d(e,"D",(function(){return B})),i.d(e,"E",(function(){return D})),i.d(e,"F",(function(){return y})),i.d(e,"G",(function(){return _})),i.d(e,"H",(function(){return r})),i.d(e,"I",(function(){return p})),i.d(e,"J",(function(){return c})),i.d(e,"K",(function(){return N})),i.d(e,"L",(function(){return K})),i.d(e,"M",(function(){return rt})),i.d(e,"N",(function(){return G}));const s="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",n=r(s);const o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a=r(o);function l(t){return!!t||""===t}function c(t){if(R(t)){const e={};for(let i=0;i<t.length;i++){const r=t[i],s=B(r)?d(r):c(r);if(s)for(const t in s)e[t]=s[t]}return e}return B(t)||Y(t)?t:void 0}const h=/;(?![^(]*\))/g,u=/:(.+)/;function d(t){const e={};return t.split(h).forEach(t=>{if(t){const i=t.split(u);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function p(t){let e="";if(B(t))e=t;else if(R(t))for(let i=0;i<t.length;i++){const r=p(t[i]);r&&(e+=r+" ")}else if(Y(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const f="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",m="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",b=r(f),v=r(m);function g(t,e){if(t.length!==e.length)return!1;let i=!0;for(let r=0;i&&r<t.length;r++)i=y(t[r],e[r]);return i}function y(t,e){if(t===e)return!0;let i=j(t),r=j(e);if(i||r)return!(!i||!r)&&t.getTime()===e.getTime();if(i=R(t),r=R(e),i||r)return!(!i||!r)&&g(t,e);if(i=Y(t),r=Y(e),i||r){if(!i||!r)return!1;const s=Object.keys(t).length,n=Object.keys(e).length;if(s!==n)return!1;for(const i in t){const r=t.hasOwnProperty(i),s=e.hasOwnProperty(i);if(r&&!s||!r&&s||!y(t[i],e[i]))return!1}}return String(t)===String(e)}function _(t,e){return t.findIndex(t=>y(t,e))}const C={},P=[],O=()=>{},x=()=>!1,E=/^on[^a-z]/,w=t=>E.test(t),S=t=>t.startsWith("onUpdate:"),T=Object.assign,N=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},M=Object.prototype.hasOwnProperty,A=(t,e)=>M.call(t,e),R=Array.isArray,k=t=>"[object Map]"===U(t),L=t=>"[object Set]"===U(t),j=t=>t instanceof Date,I=t=>"function"===typeof t,B=t=>"string"===typeof t,D=t=>"symbol"===typeof t,Y=t=>null!==t&&"object"===typeof t,X=t=>Y(t)&&I(t.then)&&I(t.catch),F=Object.prototype.toString,U=t=>F.call(t),G=t=>U(t).slice(8,-1),J=t=>"[object Object]"===U(t),z=t=>B(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,H=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),V=t=>{const e=Object.create(null);return i=>{const r=e[i];return r||(e[i]=t(i))}},$=/-(\w)/g,q=V(t=>t.replace($,(t,e)=>e?e.toUpperCase():"")),W=/\B([A-Z])/g,Q=V(t=>t.replace(W,"-$1").toLowerCase()),Z=V(t=>t.charAt(0).toUpperCase()+t.slice(1)),K=V(t=>t?"on"+Z(t):""),tt=(t,e)=>!Object.is(t,e),et=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},it=(t,e,i)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i})},rt=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let st;const nt=()=>st||(st="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{})}).call(this,i("c8ba"))},a04b:function(t,e,i){var r=i("c04e"),s=i("d9b5");t.exports=function(t){var e=r(t,"string");return s(e)?e:e+""}},a15b:function(t,e,i){"use strict";var r=i("23e7"),s=i("e330"),n=i("44ad"),o=i("fc6a"),a=i("a640"),l=s([].join),c=n!=Object,h=a("join",",");r({target:"Array",proto:!0,forced:c||!h},{join:function(t){return l(o(this),void 0===t?",":t)}})},a4b4:function(t,e,i){var r=i("342f");t.exports=/web0s(?!.*chrome)/i.test(r)},a640:function(t,e,i){"use strict";var r=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&r((function(){i.call(null,e||function(){throw 1},1)}))}},a79d:function(t,e,i){"use strict";var r=i("23e7"),s=i("c430"),n=i("fea9"),o=i("d039"),a=i("d066"),l=i("1626"),c=i("4840"),h=i("cdf9"),u=i("6eeb"),d=!!n&&o((function(){n.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(t){var e=c(this,a("Promise")),i=l(t);return this.then(i?function(i){return h(e,t()).then((function(){return i}))}:t,i?function(i){return h(e,t()).then((function(){throw i}))}:t)}}),!s&&l(n)){var p=a("Promise").prototype["finally"];n.prototype["finally"]!==p&&u(n.prototype,"finally",p,{unsafe:!0})}},abc5:function(t,e,i){"use strict";(function(t){function r(){return s().__VUE_DEVTOOLS_GLOBAL_HOOK__}function s(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof t?t:{}}i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n}));const n="function"===typeof Proxy}).call(this,i("c8ba"))},ac1f:function(t,e,i){"use strict";var r=i("23e7"),s=i("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},ad6d:function(t,e,i){"use strict";var r=i("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae93:function(t,e,i){"use strict";var r,s,n,o=i("d039"),a=i("1626"),l=i("7c73"),c=i("e163"),h=i("6eeb"),u=i("b622"),d=i("c430"),p=u("iterator"),f=!1;[].keys&&(n=[].keys(),"next"in n?(s=c(c(n)),s!==Object.prototype&&(r=s)):f=!0);var m=void 0==r||o((function(){var t={};return r[p].call(t)!==t}));m?r={}:d&&(r=l(r)),a(r[p])||h(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},b041:function(t,e,i){"use strict";var r=i("00ee"),s=i("f5df");t.exports=r?{}.toString:function(){return"[object "+s(this)+"]"}},b424:function(module,exports,__webpack_require__){(function(global,process,module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,require;!function(t,e){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=e,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,(function(){var requirejs,require,define;return function(t){function e(t,e){return g.call(t,e)}function i(t,e){var i,r,s,n,o,a,l,c,h,u,d,p,f=e&&e.split("/"),m=b.map,v=m&&m["*"]||{};if(t){for(t=t.split("/"),o=t.length-1,b.nodeIdCompat&&_.test(t[o])&&(t[o]=t[o].replace(_,"")),"."===t[0].charAt(0)&&f&&(p=f.slice(0,f.length-1),t=p.concat(t)),h=0;h<t.length;h++)if("."===(d=t[h]))t.splice(h,1),h-=1;else if(".."===d){if(0===h||1===h&&".."===t[2]||".."===t[h-1])continue;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}if((f||v)&&m){for(i=t.split("/"),h=i.length;h>0;h-=1){if(r=i.slice(0,h).join("/"),f)for(u=f.length;u>0;u-=1)if((s=m[f.slice(0,u).join("/")])&&(s=s[r])){n=s,a=h;break}if(n)break;!l&&v&&v[r]&&(l=v[r],c=h)}!n&&l&&(n=l,a=c),n&&(i.splice(0,a,n),t=i.join("/"))}return t}function r(e,i){return function(){var r=y.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),u.apply(t,r.concat([e,i]))}}function s(t){return function(e){return i(e,t)}}function n(t){return function(e){f[t]=e}}function o(i){if(e(m,i)){var r=m[i];delete m[i],v[i]=!0,h.apply(t,r)}if(!e(f,i)&&!e(v,i))throw new Error("No "+i);return f[i]}function a(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t){return t?a(t):[]}function c(t){return function(){return b&&b.config&&b.config[t]||{}}}var h,u,d,p,f={},m={},b={},v={},g=Object.prototype.hasOwnProperty,y=[].slice,_=/\.js$/;d=function(t,e){var r,n=a(t),l=n[0],c=e[1];return t=n[1],l&&(l=i(l,c),r=o(l)),l?t=r&&r.normalize?r.normalize(t,s(c)):i(t,c):(t=i(t,c),n=a(t),l=n[0],t=n[1],l&&(r=o(l))),{f:l?l+"!"+t:t,n:t,pr:l,p:r}},p={require:function(t){return r(t)},exports:function(t){var e=f[t];return void 0!==e?e:f[t]={}},module:function(t){return{id:t,uri:"",exports:f[t],config:c(t)}}},h=function(i,s,a,c){var h,u,b,g,y,_,C,P=[],O=typeof a;if(c=c||i,_=l(c),"undefined"===O||"function"===O){for(s=!s.length&&a.length?["require","exports","module"]:s,y=0;y<s.length;y+=1)if(g=d(s[y],_),"require"===(u=g.f))P[y]=p.require(i);else if("exports"===u)P[y]=p.exports(i),C=!0;else if("module"===u)h=P[y]=p.module(i);else if(e(f,u)||e(m,u)||e(v,u))P[y]=o(u);else{if(!g.p)throw new Error(i+" missing "+u);g.p.load(g.n,r(c,!0),n(u),{}),P[y]=f[u]}b=a?a.apply(f[i],P):void 0,i&&(h&&h.exports!==t&&h.exports!==f[i]?f[i]=h.exports:b===t&&C||(f[i]=b))}else i&&(f[i]=a)},requirejs=require=u=function(e,i,r,s,n){if("string"==typeof e)return p[e]?p[e](i):o(d(e,l(i)).f);if(!e.splice){if(b=e,b.deps&&u(b.deps,b.callback),!i)return;i.splice?(e=i,i=r,r=null):e=t}return i=i||function(){},"function"==typeof r&&(r=s,s=n),s?h(t,e,i,r):setTimeout((function(){h(t,e,i,r)}),4),u},u.config=function(t){return u(t)},requirejs._defined=f,define=function(t,i,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");i.splice||(r=i,i=[]),e(f,t)||e(m,t)||(m[t]=[t,i,r])},define.amd={jQuery:!0}}(),define("../node_modules/almond/almond",(function(){})),define("jxg",[],(function(){"use strict";var t={};return"object"!=typeof JXG||JXG.extend||(t=JXG),t.extend=function(t,e,i,r){var s,n;for(s in i=i||!1,r=r||!1,e)(!i||i&&e.hasOwnProperty(s))&&(n=r?s.toLowerCase():s,t[n]=e[s])},t.defineConstant=function(e,i,r,s){(s=s||!1)&&t.exists(e[i])||Object.defineProperty(e,i,{value:r,writable:!1,enumerable:!0,configurable:!1})},t.extendConstants=function(t,e,i,r){var s,n;for(s in i=i||!1,r=r||!1,e)(!i||i&&extension.hasOwnProperty(s))&&(n=r?s.toUpperCase():s,this.defineConstant(t,n,e[s]))},t.extend(t,{boards:{},readers:{},elements:{},registerElement:function(t,e){t=t.toLowerCase(),this.elements[t]=e},registerReader:function(t,e){var i,r;for(i=0;i<e.length;i++)r=e[i].toLowerCase(),"function"!=typeof this.readers[r]&&(this.readers[r]=t)},shortcut:function(t,e){return function(){return t[e].apply(this,arguments)}},getRef:function(e,i){return t.deprecated("JXG.getRef()","Board.select()"),e.select(i)},getReference:function(e,i){return t.deprecated("JXG.getReference()","Board.select()"),e.select(i)},getBoardByContainerId:function(t){var e;for(e in JXG.boards)if(JXG.boards.hasOwnProperty(e)&&JXG.boards[e].container===t)return JXG.boards[e];return null},deprecated:function(e,i){var r=e+" is deprecated.";i&&(r+=" Please use "+i+" instead."),t.warn(r)},warn:function(t){"object"==typeof window&&window.console&&console.warn?console.warn("WARNING:",t):"object"==typeof document&&document.getElementById("warning")&&(document.getElementById("debug").innerHTML+="WARNING: "+t+"<br />")},debugInt:function(t){var e,i;for(e=0;e<arguments.length;e++)i=arguments[e],"object"==typeof window&&window.console&&console.log?console.log(i):"object"==typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=i+"<br/>")},debugWST:function(e){var i=new Error;t.debugInt.apply(this,arguments),i&&i.stack&&(t.debugInt("stacktrace"),t.debugInt(i.stack.split("\n").slice(1).join("\n")))},debugLine:function(e){var i=new Error;t.debugInt.apply(this,arguments),i&&i.stack&&t.debugInt("Called from",i.stack.split("\n").slice(2,3).join("\n"))},debug:function(e){t.debugInt.apply(this,arguments)}}),t})),define("base/constants",["jxg"],(function(t){"use strict";var e;return e={version:"1.4.0",licenseText:"JSXGraph v1.4.0 Copyright (C) see https://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,GENTYPE_ABC:1,GENTYPE_AXIS:2,GENTYPE_MID:3,GENTYPE_REFLECTION:4,GENTYPE_MIRRORELEMENT:5,GENTYPE_REFLECTION_ON_LINE:4,GENTYPE_REFLECTION_ON_POINT:5,GENTYPE_TANGENT:6,GENTYPE_PARALLEL:7,GENTYPE_BISECTORLINES:8,GENTYPE_BOARDIMG:9,GENTYPE_BISECTOR:10,GENTYPE_NORMAL:11,GENTYPE_POINT:12,GENTYPE_GLIDER:13,GENTYPE_INTERSECTION:14,GENTYPE_CIRCLE:15,GENTYPE_CIRCLE2POINTS:16,GENTYPE_LINE:17,GENTYPE_TRIANGLE:18,GENTYPE_QUADRILATERAL:19,GENTYPE_TEXT:20,GENTYPE_POLYGON:21,GENTYPE_REGULARPOLYGON:22,GENTYPE_SECTOR:23,GENTYPE_ANGLE:24,GENTYPE_PLOT:25,GENTYPE_SLIDER:26,GENTYPE_TRUNCATE:27,GENTYPE_JCODE:28,GENTYPE_MOVEMENT:29,GENTYPE_COMBINED:30,GENTYPE_RULER:31,GENTYPE_SLOPETRIANGLE:32,GENTYPE_PERPSEGMENT:33,GENTYPE_LABELMOVEMENT:34,GENTYPE_VECTOR:35,GENTYPE_NONREFLEXANGLE:36,GENTYPE_REFLEXANGLE:37,GENTYPE_PATH:38,GENTYPE_DERIVATIVE:39,GENTYPE_DELETE:41,GENTYPE_COPY:42,GENTYPE_MIRROR:43,GENTYPE_ROTATE:44,GENTYPE_ABLATION:45,GENTYPE_MIGRATE:46,GENTYPE_VECTORCOPY:47,GENTYPE_POLYGONCOPY:48,GENTYPE_CTX_TYPE_G:51,GENTYPE_CTX_TYPE_P:52,GENTYPE_CTX_TRACE:53,GENTYPE_CTX_VISIBILITY:54,GENTYPE_CTX_CCVISIBILITY:55,GENTYPE_CTX_MPVISIBILITY:56,GENTYPE_CTX_WITHLABEL:57,GENTYPE_CTX_LABEL:58,GENTYPE_CTX_FIXED:59,GENTYPE_CTX_STROKEWIDTH:60,GENTYPE_CTX_LABELSIZE:61,GENTYPE_CTX_SIZE:62,GENTYPE_CTX_FACE:63,GENTYPE_CTX_STRAIGHT:64,GENTYPE_CTX_ARROW:65,GENTYPE_CTX_COLOR:66,GENTYPE_CTX_RADIUS:67,GENTYPE_CTX_COORDS:68,GENTYPE_CTX_TEXT:69,GENTYPE_CTX_ANGLERADIUS:70,GENTYPE_CTX_DOTVISIBILITY:71,GENTYPE_CTX_FILLOPACITY:72,GENTYPE_CTX_PLOT:73,GENTYPE_CTX_SCALE:74,GENTYPE_CTX_INTVAL:75,GENTYPE_CTX_POINT1:76,GENTYPE_CTX_POINT2:77,GENTYPE_CTX_LABELSTICKY:78,GENTYPE_CTX_TYPE_I:79,GENTYPE_CTX_HASINNERPOINTS:80,GENTYPE_CTX_SNAPWIDTH:81,GENTYPE_CTX_SNAPTOGRID:82},t.extendConstants(t,e),e})),define("utils/type",["jxg","base/constants"],(function(t,e){"use strict";return t.extend(t,{isId:function(t,e){return"string"==typeof e&&!!t.objects[e]},isName:function(t,e){return"string"==typeof e&&!!t.elementsByName[e]},isGroup:function(t,e){return"string"==typeof e&&!!t.groups[e]},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t||"[Object Number]"===Object.prototype.toString.call(t)},isFunction:function(t){return"function"==typeof t},isArray:function(t){return Array.isArray?Array.isArray(t):null!==t&&"object"==typeof t&&"function"==typeof t.splice&&"function"==typeof t.join},isObject:function(t){return"object"==typeof t&&!this.isArray(t)},isPoint:function(t){return null!==t&&"object"==typeof t&&t.elementClass===e.OBJECT_CLASS_POINT},isPointType:function(t,e){var i,r;return!!this.isArray(e)||!!(this.isFunction(e)&&(i=e(),this.isArray(i)&&i.length>1))||(r=t.select(e),this.isPoint(r))},isTransformationOrArray:function(t){if(null!==t){if(this.isArray(t)&&t.length>0)return this.isTransformationOrArray(t[0]);if("object"==typeof t)return t.type===e.OBJECT_TYPE_TRANSFORMATION}return!1},exists:function(t,e){var i=!(void 0==t||null===t);return e=e||!1,e?i&&""!==t:i},isEmpty:function(t){return 0===Object.keys(t).length},def:function(t,e){return this.exists(t)?t:e},str2Bool:function(t){return!this.exists(t)||("boolean"==typeof t?t:!!this.isString(t)&&"true"===t.toLowerCase())},createEvalFunction:function(e,i,r){var s,n=[];for(s=0;s<r;s++)n[s]=t.createFunction(i[s],e,"",!0);return function(t){return n[t]()}},createFunction:function(t,e,i,r){var s=null;return this.exists(r)&&!r||!this.isString(t)?this.isFunction(t)?s=t:(this.isNumber(t)||this.isString(t))&&(s=function(){return t}):s=e.jc.snippet(t,!0,i,!0),null!==s&&(s.origin=t),s},providePoints:function(t,e,i,r,s){var n,o,a,l,c,h=0,u=[];for(this.isArray(e)||(e=[e]),a=e.length,this.exists(s)&&(h=s.length),0===h&&(l=this.copyAttributes(i,t.options,r)),n=0;n<a;++n)if(h>0&&(o=Math.min(n,h-1),l=this.copyAttributes(i,t.options,r,s[o])),this.isArray(e[n])&&e[n].length>1?(u.push(t.create("point",e[n],l)),u[u.length-1]._is_new=!0):this.isFunction(e[n])?(c=e[n](),this.isArray(c)&&c.length>1&&(u.push(t.create("point",[e[n]],l)),u[u.length-1]._is_new=!0)):u.push(t.select(e[n])),!this.isPoint(u[n]))return!1;return u},bind:function(t,e){return function(){return t.apply(e,arguments)}},evaluate:function(t){return this.isFunction(t)?t():t},indexOf:function(t,e,i){var r,s=this.exists(i);if(Array.indexOf&&!s)return t.indexOf(e);for(r=0;r<t.length;r++)if(s&&t[r][i]===e||!s&&t[r]===e)return r;return-1},eliminateDuplicates:function(t){var e,i=t.length,r=[],s={};for(e=0;e<i;e++)s[t[e]]=0;for(e in s)s.hasOwnProperty(e)&&r.push(e);return r},swap:function(t,e,i){var r;return r=t[e],t[e]=t[i],t[i]=r,t},uniqueArray:function(e){var i,r,s,n=[];if(0===e.length)return[];for(i=0;i<e.length;i++)if(s=this.isArray(e[i]),this.exists(e[i]))for(r=i+1;r<e.length;r++)s&&t.cmpArrays(e[i],e[r])?e[i]=[]:s||e[i]!==e[r]||(e[i]="");else e[i]="";for(r=0,i=0;i<e.length;i++)s=this.isArray(e[i]),s||""===e[i]?s&&0!==e[i].length&&(n[r]=e[i].slice(0),r++):(n[r]=e[i],r++);return e=n,n},isInArray:function(e,i){return t.indexOf(e,i)>-1},coordsArrayToMatrix:function(t,e){var i,r=[],s=[];for(i=0;i<t.length;i++)e?(r.push(t[i].usrCoords[1]),s.push(t[i].usrCoords[2])):s.push([t[i].usrCoords[1],t[i].usrCoords[2]]);return e&&(s=[r,s]),s},cmpArrays:function(t,e){var i;if(t===e)return!0;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(this.isArray(t[i])&&this.isArray(e[i])){if(!this.cmpArrays(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0},removeElementFromArray:function(t,e){var i;for(i=0;i<t.length;i++)if(t[i]===e)return t.splice(i,1),t;return t},trunc:function(e,i){return i=t.def(i,0),this.toFixed(e,i)},_decimalAdjust:function(t,e,i){return void 0===i||0==+i?Math[t](e):(e=+e,i=+i,isNaN(e)||"number"!=typeof i||i%1!=0?NaN:(e=e.toString().split("e"),e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-i:-i))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+i:i))))},_round10:function(t,e){return this._decimalAdjust("round",t,e)},_floor10:function(t,e){return this._decimalAdjust("floor",t,e)},_ceil10:function(t,e){return this._decimalAdjust("ceil",t,e)},toFixed:function(t,e){return this._round10(t,-e).toFixed(e)},autoDigits:function(t){var e=Math.abs(t);return e>.1?this.toFixed(t,2):e>=.01?this.toFixed(t,4):e>=1e-4?this.toFixed(t,6):t},keys:function(t,e){var i,r=[];for(i in t)e?t.hasOwnProperty(i)&&r.push(i):r.push(i);return r},clone:function(t){var e={};return e.prototype=t,e},cloneAndCopy:function(t,e){var i,r=function(){};for(i in r.prototype=t,e)r[i]=e[i];return r},merge:function(t,e){var i,r;for(i in e)if(e.hasOwnProperty(i))if(this.isArray(e[i]))for(t[i]||(t[i]=[]),r=0;r<e[i].length;r++)"object"==typeof e[i][r]?t[i][r]=this.merge(t[i][r],e[i][r]):t[i][r]=e[i][r];else"object"==typeof e[i]?(t[i]||(t[i]={}),t[i]=this.merge(t[i],e[i])):t[i]=e[i];return t},deepCopy:function(t,e,i){var r,s,n,o;if(i=i||!1,"object"!=typeof t||null===t)return t;if(this.isArray(t))for(r=[],s=0;s<t.length;s++)n=t[s],"object"==typeof n?this.exists(n.board)?r[s]=n.id:r[s]=this.deepCopy(n):r[s]=n;else{for(s in r={},t)t.hasOwnProperty(s)&&(o=i?s.toLowerCase():s,n=t[s],null!==n&&"object"==typeof n?this.exists(n.board)?r[o]=n.id:r[o]=this.deepCopy(n):r[o]=n);for(s in e)e.hasOwnProperty(s)&&(o=i?s.toLowerCase():s,n=e[s],"object"==typeof n?this.isArray(n)||!this.exists(r[o])?r[o]=this.deepCopy(n):r[o]=this.deepCopy(r[o],n,i):r[o]=n)}return r},copyAttributes:function(e,i,r){var s,n,o,a,l,c={circle:1,curve:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1};for(o=arguments.length,s=o<3||c[r]?t.deepCopy(i.elements,null,!0):{},o<4&&this.exists(r)&&this.exists(i.layer[r])&&(s.layer=i.layer[r]),a=i,l=!0,n=2;n<o;n++){if(!this.exists(a[arguments[n]])){l=!1;break}a=a[arguments[n]]}for(l&&(s=t.deepCopy(s,a,!0)),a=e,l=!0,n=3;n<o;n++){if(!this.exists(a[arguments[n]])){l=!1;break}a=a[arguments[n]]}if(l&&this.extend(s,a,null,!0),"board"===arguments[2])return s;for(a=i,l=!0,n=2;n<o;n++){if(!this.exists(a[arguments[n]])){l=!1;break}a=a[arguments[n]]}return l&&this.exists(a.label)&&(s.label=t.deepCopy(a.label,s.label)),s.label=t.deepCopy(i.label,s.label),s},copyPrototypeMethods:function(t,e,i){var r;for(r in t.prototype[i]=e.prototype.constructor,e.prototype)e.prototype.hasOwnProperty(r)&&(t.prototype[r]=e.prototype[r])},toJSON:function(e,i){var r,s,n,o;if(i=t.def(i,!1),JSON.stringify&&!i)try{return JSON.stringify(e)}catch(t){}switch(typeof e){case"object":if(e){if(r=[],this.isArray(e)){for(n=0;n<e.length;n++)r.push(t.toJSON(e[n],i));return"["+r.join(",")+"]"}for(s in e)if(e.hasOwnProperty(s)){try{o=t.toJSON(e[s],i)}catch(t){o=""}i?r.push(s+":"+o):r.push('"'+s+'":'+o)}return"{"+r.join(",")+"} "}return"null";case"string":return"'"+e.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return e.toString()}return"0"},clearVisPropOld:function(t){return t.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},t},isInObject:function(t,e){var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1},escapeHTML:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(t){return t.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},trimNumber:function(t){return t=t.replace(/^0+/,""),t=t.replace(/0+$/,""),"."!==t[t.length-1]&&","!==t[t.length-1]||(t=t.slice(0,-1)),"."!==t[0]&&","!==t[0]||(t="0"+t),t},filterElements:function(t,e){var i,r,s,n,o,a,l,c=t.length,h=[];if("function"!=typeof e&&"object"!=typeof e)return h;for(i=0;i<c;i++){if(l=!0,s=t[i],"object"==typeof e){for(r in e)if(e.hasOwnProperty(r)&&(n=r.toLowerCase(),o="function"==typeof s[r]?s[r]():s[r],a=s.visProp&&"function"==typeof s.visProp[n]?s.visProp[n]():s.visProp&&s.visProp[n],!(l="function"==typeof e[r]?e[r](o)||e[r](a):o===e[r]||a===e[r])))break}else"function"==typeof e&&(l=e(s));l&&h.push(s)}return h},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeHTML:function(t,e){return"function"==typeof html_sanitize&&e?html_sanitize(t,(function(){}),(function(t){return t})):(t&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t)},evalSlider:function(t){return t&&t.type===e.OBJECT_TYPE_GLIDER&&"function"==typeof t.Value?t.Value():t}}),t})),define("utils/env",["jxg","utils/type"],(function(t,e){"use strict";return t.extendConstants(t,{touchProperty:"touches"}),t.extend(t,{isTouchEvent:function(e){return t.exists(e[t.touchProperty])},isPointerEvent:function(e){return t.exists(e.pointerId)},isMouseEvent:function(e){return!t.isTouchEvent(e)&&!t.isPointerEvent(e)},getNumberOfTouchPoints:function(e){var i=-1;return t.isTouchEvent(e)&&(i=e[t.touchProperty].length),i},isFirstTouch:function(e){var i=t.getNumberOfTouchPoints(e);return t.isPointerEvent(e)?e.isPrimary:1===i},isBrowser:"object"==typeof window&&"object"==typeof document,supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch(t){return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return this.isBrowser&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},supportsCanvas:function(){var t,e=!1;if(this.isNode())try{t=__webpack_require__("d16f"),e=!!t}catch(t){}return e||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&(!!module.exports||"object"==typeof global&&global.requirejsVars&&!global.requirejsVars.isBrowser)},isWebWorker:function(){return!this.isBrowser&&"object"==typeof self&&"function"==typeof self.postMessage},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&void 0!==window.ontouchstart},isAndroid:function(){return e.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return e.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z\.]*Safari/)>-1},isMetroApp:function(){return"object"==typeof window&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return e.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("apple")},isFirefoxOS:function(){return e.exists(navigator)&&-1===navigator.userAgent.toLowerCase().indexOf("android")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},ieVersion:function(){var t,e,i=3;if("object"!=typeof document)return 0;t=document.createElement("div"),e=t.getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++i+"]><i></i><![endif]--\x3e"}while(e[0]);return i>4?i:void 0}(),getDimensions:function(t,i){var r,s,n,o,a,l,c,h,u,d=/\d+(\.\d*)?px/;if(!this.isBrowser||null===t)return{width:500,height:500};if(i=i||document,r=i.getElementById(t),!e.exists(r))throw new Error("\nJSXGraph: HTML container element '"+t+"' not found.");return"none"!==(s=r.style.display)&&null!==s?r.clientWidth>0&&r.clientHeight>0?{width:r.clientWidth,height:r.clientHeight}:(u=window.getComputedStyle?window.getComputedStyle(r):r.style,{width:d.test(u.width)?parseFloat(u.width):0,height:d.test(u.height)?parseFloat(u.height):0}):(n=r.style,o=n.visibility,a=n.position,l=n.display,n.visibility="hidden",n.position="absolute",n.display="block",c=r.clientWidth,h=r.clientHeight,n.display=l,n.position=a,n.visibility=o,{width:c,height:h})},addEvent:function(t,i,r,s){var n=function(){return r.apply(s,arguments)};n.origin=r,s["x_internal"+i]=s["x_internal"+i]||[],s["x_internal"+i].push(n),e.exists(t)&&e.exists(t.addEventListener)&&t.addEventListener(i,n,!1),e.exists(t)&&e.exists(t.attachEvent)&&t.attachEvent("on"+i,n)},removeEvent:function(i,r,s,n){var o;if(e.exists(n))if(e.exists(n["x_internal"+r]))if(e.isArray(n["x_internal"+r]))if(-1!==(o=e.indexOf(n["x_internal"+r],s,"origin"))){try{e.exists(i)&&e.exists(i.removeEventListener)&&i.removeEventListener(r,n["x_internal"+r][o],!1),e.exists(i)&&e.exists(i.detachEvent)&&i.detachEvent("on"+r,n["x_internal"+r][o])}catch(e){t.debug("event not registered in browser: ("+r+" -- "+s+")")}n["x_internal"+r].splice(o,1)}else t.debug("removeEvent: no such event function in internal list: "+s);else t.debug("owner[x_internal + "+r+"] is not an array");else t.debug("no such type: "+r);else t.debug("no such owner")},removeAllEvents:function(e,i,r){var s,n;if(r["x_internal"+i]){for(n=r["x_internal"+i].length,s=n-1;s>=0;s--)t.removeEvent(e,i,r["x_internal"+i][s].origin,r);r["x_internal"+i].length>0&&t.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(i,r,s){var n,o,a,l=0,c=0;if(i||(i=window.event),s=s||document,a=i[t.touchProperty],e.exists(a)&&0===a.length&&(a=i.changedTouches),e.exists(r)&&e.exists(a))if(-1===r){for(o=a.length,n=0;n<o;n++)if(a[n]){i=a[n];break}}else i=a[r];return i.clientX&&(l=i.clientX,c=i.clientY),[l,c]},getOffset:function(t){var e,i=t,r=t,s=i.offsetLeft-i.scrollLeft,n=i.offsetTop-i.scrollTop;for(e=this.getCSSTransform([s,n],i),s=e[0],n=e[1],i=i.offsetParent;i;){for(s+=i.offsetLeft,n+=i.offsetTop,i.offsetParent&&(s+=i.clientLeft-i.scrollLeft,n+=i.clientTop-i.scrollTop),e=this.getCSSTransform([s,n],i),s=e[0],n=e[1],r=r.parentNode;r!==i;)s+=r.clientLeft-r.scrollLeft,n+=r.clientTop-r.scrollTop,e=this.getCSSTransform([s,n],r),s=e[0],n=e[1],r=r.parentNode;i=i.offsetParent}return[s,n]},getStyle:function(e,i){var r,s=e.ownerDocument;return s.defaultView&&s.defaultView.getComputedStyle?r=s.defaultView.getComputedStyle(e,null).getPropertyValue(i):e.currentStyle&&t.ieVersion>=9?r=e.currentStyle[i]:e.style&&(i=i.replace(/-([a-z]|[0-9])/gi,(function(t,e){return e.toUpperCase()})),r=e.style[i]),r},getProp:function(t,e){var i=parseInt(this.getStyle(t,e),10);return isNaN(i)?0:i},getCSSTransform:function(t,i){var r,s,n,o,a,l,c,h,u=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(l=u.length,r=0,n="";r<l;r++)if(e.exists(i.style[u[r]])){n=i.style[u[r]];break}if(""!==n&&(a=n.indexOf("("))>0){for(l=n.length,o=n.substring(a+1,l-1),h=o.split(","),s=0,c=h.length;s<c;s++)h[s]=parseFloat(h[s]);0===n.indexOf("matrix")?(t[0]+=h[4],t[1]+=h[5]):0===n.indexOf("translateX")?t[0]+=h[0]:0===n.indexOf("translateY")?t[1]+=h[0]:0===n.indexOf("translate")&&(t[0]+=h[0],t[1]+=h[1])}return e.exists(i.style.zoom)&&""!==(n=i.style.zoom)&&(t[0]*=parseFloat(n),t[1]*=parseFloat(n)),t},getCSSTransformMatrix:function(t){var i,r,s,n,o,a,l,c,h,u=t.ownerDocument,d=["transform","webkitTransform","MozTransform","msTransform","oTransform"],p=[[1,0,0],[0,1,0],[0,0,1]];if(u.defaultView&&u.defaultView.getComputedStyle)h=u.defaultView.getComputedStyle(t,null),s=h.getPropertyValue("-webkit-transform")||h.getPropertyValue("-moz-transform")||h.getPropertyValue("-ms-transform")||h.getPropertyValue("-o-transform")||h.getPropertyValue("transform");else for(a=d.length,i=0,s="";i<a;i++)if(e.exists(t.style[d[i]])){s=t.style[d[i]];break}if(""!==s&&(o=s.indexOf("("))>0){for(a=s.length,n=s.substring(o+1,a-1),c=n.split(","),r=0,l=c.length;r<l;r++)c[r]=parseFloat(c[r]);0===s.indexOf("matrix")?p=[[1,0,0],[0,c[0],c[1]],[0,c[2],c[3]]]:0===s.indexOf("scaleX")?p[1][1]=c[0]:0===s.indexOf("scaleY")?p[2][2]=c[0]:0===s.indexOf("scale")&&(p[1][1]=c[0],p[2][2]=c[1])}return e.exists(t.style.zoom)&&""!==(s=t.style.zoom)&&(p[1][1]*=parseFloat(s),p[2][2]*=parseFloat(s)),p},timedChunk:function(t,e,i,r){var s=t.concat(),n=function(){var o=+new Date;do{e.call(i,s.shift())}while(s.length>0&&+new Date-o<300);s.length>0?window.setTimeout(n,1):r(t)};window.setTimeout(n,1)},_getScaleFactors:function(t){var e=t.getBoundingClientRect().width,i=t.getBoundingClientRect().height,r=window.screen.width/e,s=window.screen.height/i,n=.5*(window.screen.height-i),o=Math.min(r,s);return window.matchMedia&&window.matchMedia("(orientation:landscape)").matches&&window.screen.width<window.screen.height&&(r=window.screen.height/e,s=window.screen.width/i,o=Math.min(r,s),n=.5*(window.screen.width-i)),o*=.85,{scale:o,vshift:n}},scaleJSXGraphDiv:function(t,e,i,r){var s,n,o=document.styleSheets.length,a=[":fullscreen",":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"],l=a.length,c="{margin:0 auto;transform:matrix("+i+",0,0,"+i+",0,"+r+");}",h=new RegExp(".*#"+t+":.*full.*screen.*#"+e+".*auto;.*transform:.*matrix");for(0===o&&(s=document.createElement("style"),s.appendChild(document.createTextNode("")),document.body.appendChild(s),o=document.styleSheets.length),document.styleSheets[o-1].cssRules.length>0&&h.test(document.styleSheets[o-1].cssRules[0].cssText)&&document.styleSheets[o-1].deleteRule&&document.styleSheets[o-1].deleteRule(0),n=0;n<l;n++)try{document.styleSheets[o-1].insertRule("#"+t+a[n]+" #"+e+c,0);break}catch(t){console.log('JXG.scaleJSXGraphDiv: Could not add CSS rule "'+a[n]+'".'),console.log("One possible reason could be that the id of the JSXGraph container does not start with a letter.")}},toFullscreen:function(t){var e=document.getElementById(t);e.requestFullscreen=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen,e.requestFullscreen&&e.requestFullscreen()}}),t})),define("utils/xml",["jxg","utils/type"],(function(t,e){"use strict";return t.XML={cleanWhitespace:function(t){for(var i=t.firstChild;e.exists(i);)3!==i.nodeType||/\S/.test(i.nodeValue)?1===i.nodeType&&this.cleanWhitespace(i):t.removeChild(i),i=i.nextSibling},parse:function(t){var e,i,r;return r="function"==typeof DOMParser||"object"==typeof DOMParser?DOMParser:function(){this.parseFromString=function(t){var e;return"function"==typeof ActiveXObject&&(e=new ActiveXObject("MSXML.DomDocument"),e.loadXML(t)),e}},e=new r,i=e.parseFromString(t,"text/xml"),this.cleanWhitespace(i),i}},t.XML})),define("utils/event",["jxg","utils/type"],(function(t,e){"use strict";return t.EventEmitter={eventHandlers:{},suspended:{},trigger:function(t,e){var i,r,s,n,o,a;for(o=t.length,r=0;r<o;r++)if(n=this.eventHandlers[t[r]],!this.suspended[t[r]]){if(this.suspended[t[r]]=!0,n)for(a=n.length,i=0;i<a;i++)s=n[i],s.handler.apply(s.context,e);this.suspended[t[r]]=!1}return this},on:function(t,i,r){return e.isArray(this.eventHandlers[t])||(this.eventHandlers[t]=[]),r=e.def(r,this),this.eventHandlers[t].push({handler:i,context:r}),this},off:function(t,i){var r;return t&&e.isArray(this.eventHandlers[t])?(i?(r=e.indexOf(this.eventHandlers[t],i,"handler"),r>-1&&this.eventHandlers[t].splice(r,1),0===this.eventHandlers[t].length&&delete this.eventHandlers[t]):delete this.eventHandlers[t],this):this},eventify:function(t){t.eventHandlers={},t.on=this.on,t.off=this.off,t.triggerEventHandlers=this.trigger,t.trigger=this.trigger,t.suspended={}}},t.EventEmitter})),define("math/math",["jxg","utils/type"],(function(t,e){"use strict";var i=function(t){var e,i;return t.memo||(e={},i=Array.prototype.join,t.memo=function(){var r=i.call(arguments);return void 0!==e[r]?e[r]:e[r]=t.apply(this,arguments)}),t.memo};return t.Math={eps:1e-6,relDif:function(t,e){var i=Math.abs(t),r=Math.abs(e);return r=Math.max(i,r),0===r?0:Math.abs(t-e)/r},mod:function(t,e){return t-Math.floor(t/e)*e},vector:function(t,e){var i,r;for(e=e||0,i=[],r=0;r<t;r++)i[r]=e;return i},matrix:function(t,e,i){var r,s,n;for(i=i||0,e=e||t,r=[],s=0;s<t;s++)for(r[s]=[],n=0;n<e;n++)r[s][n]=i;return r},identity:function(t,e){var i,r;for(void 0===e&&"number"!=typeof e&&(e=t),i=this.matrix(t,e),r=0;r<Math.min(t,e);r++)i[r][r]=1;return i},frustum:function(t,e,i,r,s,n){var o=this.matrix(4,4);return o[0][0]=2*s/(e-t),o[0][1]=0,o[0][2]=(e+t)/(e-t),o[0][3]=0,o[1][0]=0,o[1][1]=2*s/(r-i),o[1][2]=(r+i)/(r-i),o[1][3]=0,o[2][0]=0,o[2][1]=0,o[2][2]=-(n+s)/(n-s),o[2][3]=-n*s*2/(n-s),o[3][0]=0,o[3][1]=0,o[3][2]=-1,o[3][3]=0,o},projection:function(t,e,i,r){var s=i*Math.tan(t/2),n=s*e;return this.frustum(-n,n,-s,s,i,r)},matVecMult:function(t,e){var i,r,s,n=t.length,o=e.length,a=[];if(3===o)for(i=0;i<n;i++)a[i]=t[i][0]*e[0]+t[i][1]*e[1]+t[i][2]*e[2];else for(i=0;i<n;i++){for(r=0,s=0;s<o;s++)r+=t[i][s]*e[s];a[i]=r}return a},matMatMult:function(t,e){var i,r,s,n,o=t.length,a=o>0?e[0].length:0,l=e.length,c=this.matrix(o,a);for(i=0;i<o;i++)for(r=0;r<a;r++){for(s=0,n=0;n<l;n++)s+=t[i][n]*e[n][r];c[i][r]=s}return c},transpose:function(t){var e,i,r,s,n;for(s=t.length,n=t.length>0?t[0].length:0,e=this.matrix(n,s),i=0;i<n;i++)for(r=0;r<s;r++)e[i][r]=t[r][i];return e},inverse:function(t){var e,i,r,s,n,o,a,l=t.length,c=[],h=[],u=[];for(e=0;e<l;e++){for(c[e]=[],i=0;i<l;i++)c[e][i]=t[e][i];h[e]=e}for(i=0;i<l;i++){for(n=Math.abs(c[i][i]),o=i,e=i+1;e<l;e++)Math.abs(c[e][i])>n&&(n=Math.abs(c[e][i]),o=e);if(n<=this.eps)return[];if(o>i){for(r=0;r<l;r++)a=c[i][r],c[i][r]=c[o][r],c[o][r]=a;a=h[i],h[i]=h[o],h[o]=a}for(s=1/c[i][i],e=0;e<l;e++)c[e][i]*=s;for(c[i][i]=s,r=0;r<l;r++)if(r!==i){for(e=0;e<l;e++)e!==i&&(c[e][r]-=c[e][i]*c[i][r]);c[i][r]=-s*c[i][r]}}for(e=0;e<l;e++){for(r=0;r<l;r++)u[h[r]]=c[e][r];for(r=0;r<l;r++)c[e][r]=u[r]}return c},innerProduct:function(t,i,r){var s,n=0;for(void 0!==r&&e.isNumber(r)||(r=t.length),s=0;s<r;s++)n+=t[s]*i[s];return n},crossProduct:function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},norm:function(t,i){var r,s=0;for(void 0!==i&&e.isNumber(i)||(i=t.length),r=0;r<i;r++)s+=t[r]*t[r];return Math.sqrt(s)},factorial:i((function(t){return t<0?NaN:(t=Math.floor(t),0===t||1===t?1:t*this.factorial(t-1))})),binomial:i((function(t,e){var i,r;if(e>t||e<0)return NaN;if(e=Math.round(e),t=Math.round(t),0===e||e===t)return 1;for(i=1,r=0;r<e;r++)i*=t-r,i/=r+1;return i})),cosh:Math.cosh||function(t){return.5*(Math.exp(t)+Math.exp(-t))},sinh:Math.sinh||function(t){return.5*(Math.exp(t)-Math.exp(-t))},acosh:Math.acosh||function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:Math.asinh||function(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))},cot:function(t){return 1/Math.tan(t)},acot:function(t){return(t>=0?.5:-.5)*Math.PI-Math.atan(t)},nthroot:function(t,e){var i=1/e;return e<=0||Math.floor(e)!==e?NaN:0===t?0:t>0?Math.exp(i*Math.log(t)):e%2==1?-Math.exp(i*Math.log(-t)):NaN},cbrt:Math.cbrt||function(t){return this.nthroot(t,3)},pow:function(t,e){return 0===t?0===e?1:0:Math.floor(e)===e?Math.pow(t,e):t>0?Math.exp(e*Math.log(t)):NaN},ratpow:function(t,e,i){var r;return 0===e?1:0===i?NaN:(r=this.gcd(e,i),this.nthroot(this.pow(t,e/r),i/r))},log10:function(t){return Math.log(t)/Math.log(10)},log2:function(t){return Math.log(t)/Math.log(2)},log:function(t,i){return void 0!==i&&e.isNumber(i)?Math.log(t)/Math.log(i):Math.log(t)},sign:Math.sign||function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1},squampow:function(t,e){var i;if(Math.floor(e)===e){for(i=1,e<0&&(t=1/t,e*=-1);0!==e;)1&e&&(i*=t),e>>=1,t*=t;return i}return this.pow(t,e)},gcd:function(t,i){if(t=Math.abs(t),i=Math.abs(i),!e.isNumber(t)||!e.isNumber(i))return NaN;if(i>t){var r=t;t=i,i=r}for(;;){if(0===(t%=i))return i;if(0===(i%=t))return t}},lcm:function(t,i){var r;return e.isNumber(t)&&e.isNumber(i)?(r=t*i,0!==r?r/this.gcd(t,i):0):NaN},erf:function(t){return this.ProbFuncs.erf(t)},erfc:function(t){return this.ProbFuncs.erfc(t)},erfi:function(t){return this.ProbFuncs.erfi(t)},ndtr:function(t){return this.ProbFuncs.ndtr(t)},ndtri:function(t){return this.ProbFuncs.ndtri(t)},lt:function(t,e){return t<e},leq:function(t,e){return t<=e},gt:function(t,e){return t>e},geq:function(t,e){return t>=e},eq:function(t,e){return t===e},neq:function(t,e){return t!==e},and:function(t,e){return t&&e},not:function(t){return!t},or:function(t,e){return t||e},xor:function(t,e){return(t||e)&&!(t&&e)},normalize:function(t){var e,i,r=2*t[3],s=t[4]/r;return t[5]=s,t[6]=-t[1]/r,t[7]=-t[2]/r,isFinite(s)?Math.abs(s)>=1?(t[0]=(t[6]*t[6]+t[7]*t[7]-s*s)/(2*s),t[1]=-t[6]/s,t[2]=-t[7]/s,t[3]=1/(2*s),t[4]=1):(i=s<=0?-1:1,t[0]=i*(t[6]*t[6]+t[7]*t[7]-s*s)*.5,t[1]=-i*t[6],t[2]=-i*t[7],t[3]=i/2,t[4]=i*s):(e=Math.sqrt(t[1]*t[1]+t[2]*t[2]),t[0]/=e,t[1]/=e,t[2]/=e,t[3]=0,t[4]=1),t},toGL:function(t){var e,i,r;if(e="function"==typeof Float32Array?new Float32Array(16):new Array(16),4!==t.length&&4!==t[0].length)return e;for(i=0;i<4;i++)for(r=0;r<4;r++)e[i+4*r]=t[i][r];return e},Vieta:function(t){var e,i,r,s=t.length,n=[];for(n=t.slice(),e=1;e<s;++e){for(r=n[e],n[e]*=n[e-1],i=e-1;i>=1;--i)n[i]+=n[i-1]*r;n[0]+=r}return n}},t.Math})),define("base/coords",["jxg","base/constants","utils/event","utils/type","math/math"],(function(t,e,i,r,s){"use strict";return t.Coords=function(t,e,s,n){this.board=s,this.usrCoords=[],this.scrCoords=[],this.emitter=!r.exists(n)||n,this.emitter&&i.eventify(this),this.setCoordinates(t,e,!1,!0)},t.extend(t.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>s.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(t){var e=Math.round,i=this.board,r=this.usrCoords,s=i.origin.scrCoords;!0===t?(this.scrCoords[0]=e(r[0]),this.scrCoords[1]=e(r[0]*s[1]+r[1]*i.unitX),this.scrCoords[2]=e(r[0]*s[2]-r[2]*i.unitY)):(this.scrCoords[0]=r[0],this.scrCoords[1]=r[0]*s[1]+r[1]*i.unitX,this.scrCoords[2]=r[0]*s[2]-r[2]*i.unitY)},screen2usr:function(){var t=this.board.origin.scrCoords,e=this.scrCoords,i=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(e[1]-t[1])/i.unitX,this.usrCoords[2]=(t[2]-e[2])/i.unitY},distance:function(t,i){var r,n,o=0,a=this.usrCoords,l=this.scrCoords;if(t===e.COORDS_BY_USER){if(r=i.usrCoords,n=a[0]-r[0],(o=n*n)>s.eps*s.eps)return Number.POSITIVE_INFINITY;n=a[1]-r[1],o+=n*n,n=a[2]-r[2],o+=n*n}else r=i.scrCoords,n=l[1]-r[1],o+=n*n,n=l[2]-r[2],o+=n*n;return Math.sqrt(o)},setCoordinates:function(t,i,r,s){var n=this.usrCoords,o=this.scrCoords,a=[n[0],n[1],n[2]],l=[o[0],o[1],o[2]];return t===e.COORDS_BY_USER?(2===i.length?(n[0]=1,n[1]=i[0],n[2]=i[1]):(n[0]=i[0],n[1]=i[1],n[2]=i[2],this.normalizeUsrCoords()),this.usr2screen(r)):(2===i.length?(o[1]=i[0],o[2]=i[1]):(o[1]=i[1],o[2]=i[2]),this.screen2usr()),!this.emitter||s||l[1]===o[1]&&l[2]===o[2]||this.triggerEventHandlers(["update"],[a,l]),this},copy:function(t,e){return void 0===e&&(e=0),this[t].slice(e)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>s.eps},__evt__update:function(t,e){},__evt:function(){}}),t.Coords})),define("utils/expect",["jxg","utils/type","base/constants","base/coords"],(function(t,e,i,r){"use strict";var s={each:function(t,i,r){var s,n,o=[];if(e.exists(t.length))for(n=t.length,s=0;s<n;s++)o.push(i.call(this,t[s],r));return o},coords:function(t,e){var s=t;return t&&t.elementClass===i.OBJECT_CLASS_POINT?s=t.coords:t.usrCoords&&t.scrCoords&&t.usr2screen&&(s=t),e&&(s=new r(i.COORDS_BY_USER,s.usrCoords,s.board)),s},coordsArray:function(t,i){var r;return r=e.isArray(t)?t:this.coords(t).usrCoords,r.length<3&&r.unshift(1),i&&(r=[r[0],r[1],r[2]]),r}};return t.Expect=s,s})),define("math/probfuncs",["math/math","utils/type"],(function(t,e){"use strict";return t.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2.461969814735305e-10,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(t,e){var i,r,s,n;return t=Math.abs(t),e<0&&(t=-t),s=this.MINV*Math.floor(this.M*t+.5),n=t-s,i=s*s,r=2*s*n+n*n,e<0&&(i=-i,r=-r),i+r>this.MAXLOG?1/0:i=Math.exp(i)*Math.exp(r)},polevl:function(t,i,r){var s,n;if(e.exists(i.reduce))return i.reduce((function(e,i){return e*t+i}),0);for(n=0,s=0;n<=r;n++)s=s*t+i[n];return s},p1evl:function(t,i,r){var s,n;if(e.exists(i.reduce))return i.reduce((function(e,i){return e*t+i}),1);for(n=0,s=1;n<r;n++)s=s*t+i[n];return s},ndtr:function(t){var e,i,r;return e=t*this.SQRTH,r=Math.abs(e),r<1?i=.5+.5*this.erf(e):(i=.5*this.erfce(r),r=this.expx2(t,-1),i*=Math.sqrt(r),e>0&&(i=1-i)),i},_underflow:function(t){return console.log("erfc","UNDERFLOW"),t<0?2:0},erfc:function(t){var e,i,r,s,n;return(r=t<0?-t:t)<1?1-this.erf(t):(n=-t*t)<-this.MAXLOG?this._underflow(t):(n=this.expx2(t,-1),r<8?(e=this.polevl(r,this.P,8),i=this.p1evl(r,this.Q,8)):(e=this.polevl(r,this.R,5),i=this.p1evl(r,this.S,6)),s=n*e/i,t<0&&(s=2-s),0===s?this._underflow(t):s)},erfce:function(t){var e,i;return t<8?(e=this.polevl(t,this.P,8),i=this.p1evl(t,this.Q,8)):(e=this.polevl(t,this.R,5),i=this.p1evl(t,this.S,6)),e/i},erf:function(t){var e;return Math.abs(t)>1?1-this.erfc(t):(e=t*t,t*this.polevl(e,this.T,4)/this.p1evl(e,this.U,5))},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6.239745391849833e-9],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6.790194080099813e-9],ndtri:function(t){var e,i,r,s,n,o,a;return t<=0?-1/0:t>=1?1/0:(a=1,i=t,i>.8646647167633873&&(i=1-i,a=0),i>.1353352832366127?(i-=.5,s=i*i,e=i+i*(s*this.polevl(s,this.P0,4)/this.p1evl(s,this.Q0,8)),e*=this.s2pi):(e=Math.sqrt(-2*Math.log(i)),n=e-Math.log(e)/e,r=1/e,o=e<8?r*this.polevl(r,this.P1,8)/this.p1evl(r,this.Q1,8):r*this.polevl(r,this.P2,8)/this.p1evl(r,this.Q2,8),e=n-o,0!==a&&(e=-e),e))},erfi:function(t){return this.ndtri(.5*(t+1))*this.SQRTH}},t.ProbFuncs})),define("math/ia",["jxg","math/math","utils/type"],(function(t,e,i){"use strict";t.Math.DoubleBits=function(){var t,e,i,r,s,n,o,a,l=new Float64Array(1),c=new Uint32Array(l.buffer);void 0!==Float64Array&&(l[0]=1,1072693248===c[1]?(t=function(t){return l[0]=t,[c[0],c[1]]},e=function(t,e){return c[0]=t,c[1]=e,l[0]},i=function(t){return l[0]=t,c[0]},r=function(t){return l[0]=t,c[1]},this.doubleBits=t,this.pack=e,this.lo=i,this.hi=r):1072693248===c[0]&&(s=function(t){return l[0]=t,[c[1],c[0]]},n=function(t,e){return c[1]=t,c[0]=e,l[0]},o=function(t){return l[0]=t,c[1]},a=function(t){return l[0]=t,c[0]},this.doubleBits=s,this.pack=n,this.lo=o,this.hi=a))},t.extend(t.Math.DoubleBits.prototype,{sign:function(t){return this.hi(t)>>>31},exponent:function(t){return(this.hi(t)<<1>>>21)-1023},fraction:function(t){var e=this.lo(t),i=this.hi(t),r=1048575&i;return 2146435072&i&&(r+=1<<20),[e,r]},denormalized:function(t){return!(2146435072&this.hi(t))}});var r=new t.Math.DoubleBits,s=function(t,i){if(void 0!==t&&void 0!==i){if(e.IntervalArithmetic.isInterval(t)){if(!e.IntervalArithmetic.isSingleton(t))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=t.lo}else this.lo=t;if(e.IntervalArithmetic.isInterval(i)){if(!e.IntervalArithmetic.isSingleton(i))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=i.hi}else this.hi=i}else{if(void 0!==t)return Array.isArray(t)?new s(t[0],t[1]):new s(t,t);this.lo=this.hi=0}};return t.extend(s.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(t,e){return this.lo=t,this.hi=e,this},bounded:function(t,i){return this.set(e.IntervalArithmetic.prev(t),e.IntervalArithmetic.next(i))},boundedSingleton:function(t){return this.bounded(t,t)},assign:function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(t)||isNaN(e)||t>e?this.setEmpty():this.set(t,e)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(t,i){return this.assign(e.IntervalArithmetic.next(t),e.IntervalArithmetic.prev(i))},halfOpenLeft:function(t,i){return this.assign(e.IntervalArithmetic.next(t),i)},halfOpenRight:function(t,i){return this.assign(t,e.IntervalArithmetic.prev(i))},toArray:function(){return[this.lo,this.hi]},clone:function(){return(new s).set(this.lo,this.hi)}}),t.Math.IntervalArithmetic={Interval:function(t,e){return new s(t,e)},isInterval:function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.lo&&"number"==typeof t.hi},isSingleton:function(t){return t.lo===t.hi},add:function(t,e){return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),new s(this.addLo(t.lo,e.lo),this.addHi(t.hi,e.hi))},sub:function(t,e){return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),new s(this.subLo(t.lo,e.hi),this.subHi(t.hi,e.lo))},mul:function(t,e){var r,n,o,a,l;return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():(r=t.lo,n=t.hi,o=e.lo,a=e.hi,l=new s,r<0?n>0?o<0?a>0?(l.lo=Math.min(this.mulLo(r,a),this.mulLo(n,o)),l.hi=Math.max(this.mulHi(r,o),this.mulHi(n,a))):(l.lo=this.mulLo(n,o),l.hi=this.mulHi(r,o)):a>0?(l.lo=this.mulLo(r,a),l.hi=this.mulHi(n,a)):(l.lo=0,l.hi=0):o<0?a>0?(l.lo=this.mulLo(r,a),l.hi=this.mulHi(r,o)):(l.lo=this.mulLo(n,a),l.hi=this.mulHi(r,o)):a>0?(l.lo=this.mulLo(r,a),l.hi=this.mulHi(n,o)):(l.lo=0,l.hi=0):n>0?o<0?a>0?(l.lo=this.mulLo(n,o),l.hi=this.mulHi(n,a)):(l.lo=this.mulLo(n,o),l.hi=this.mulHi(r,a)):a>0?(l.lo=this.mulLo(r,o),l.hi=this.mulHi(n,a)):(l.lo=0,l.hi=0):(l.lo=0,l.hi=0),l)},div:function(t,e){return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():this.zeroIn(e)?0!==e.lo?0!==e.hi?this.divZero(t):this.divNegative(t,e.lo):0!==e.hi?this.divPositive(t,e.hi):this.EMPTY.clone():this.divNonZero(t,e)},positive:function(t){return new s(t.lo,t.hi)},negative:function(t){return i.isNumber(t)?new s(-t):new s(-t.hi,-t.lo)},isEmpty:function(t){return t.lo>t.hi},isWhole:function(t){return t.lo===-1/0&&t.hi===1/0},zeroIn:function(t){return this.hasValue(t,0)},hasValue:function(t,e){return!this.isEmpty(t)&&t.lo<=e&&e<=t.hi},hasInterval:function(t,e){return!!this.isEmpty(t)||!this.isEmpty(e)&&e.lo<=t.lo&&t.hi<=e.hi},intervalsOverlap:function(t,e){return!this.isEmpty(t)&&!this.isEmpty(e)&&(t.lo<=e.lo&&e.lo<=t.hi||e.lo<=t.lo&&t.lo<=e.hi)},divNonZero:function(t,e){var i=t.lo,r=t.hi,n=e.lo,o=e.hi,a=new s;return r<0?o<0?(a.lo=this.divLo(r,n),a.hi=this.divHi(i,o)):(a.lo=this.divLo(i,n),a.hi=this.divHi(r,o)):i<0?o<0?(a.lo=this.divLo(r,o),a.hi=this.divHi(i,o)):(a.lo=this.divLo(i,n),a.hi=this.divHi(r,n)):o<0?(a.lo=this.divLo(r,o),a.hi=this.divHi(i,n)):(a.lo=this.divLo(i,o),a.hi=this.divHi(r,n)),a},divPositive:function(t,e){return 0===t.lo&&0===t.hi?t:this.zeroIn(t)?this.WHOLE:t.hi<0?new s(Number.NEGATIVE_INFINITY,this.divHi(t.hi,e)):new s(this.divLo(t.lo,e),Number.POSITIVE_INFINITY)},divNegative:function(t,e){return 0===t.lo&&0===t.hi?t:this.zeroIn(t)?this.WHOLE:t.hi<0?new s(this.divLo(t.hi,e),Number.POSITIVE_INFINITY):new s(Number.NEGATIVE_INFINITY,this.divHi(t.lo,e))},divZero:function(t){return 0===t.lo&&0===t.hi?t:this.WHOLE},fmod:function(t,e){var r,n;return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():(r=t.lo<0?e.lo:e.hi,n=t.lo/r,n=n<0?Math.ceil(n):Math.floor(n),this.sub(t,this.mul(e,new s(n))))},multiplicativeInverse:function(t){return i.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():this.zeroIn(t)?0!==t.lo?0!==t.hi?this.WHOLE:new s(Number.NEGATIVE_INFINITY,this.divHi(1,t.lo)):0!==t.hi?new s(this.divLo(1,t.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new s(this.divLo(1,t.hi),this.divHi(1,t.lo))},pow:function(t,e){var r,n;if(i.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t))return this.EMPTY.clone();if(this.isInterval(e)){if(!this.isSingleton(e))return this.EMPTY.clone();e=e.lo}return 0===e?0===t.lo&&0===t.hi?this.EMPTY.clone():this.ONE.clone():e<0?this.pow(this.multiplicativeInverse(t),-e):e%1==0?t.hi<0?(r=this.powLo(-t.hi,e),n=this.powHi(-t.lo,e),1==(1&e)?new s(-n,-r):new s(r,n)):t.lo<0?1==(1&e)?new s(-this.powLo(-t.lo,e),this.powHi(t.hi,e)):new s(0,this.powHi(Math.max(-t.lo,t.hi),e)):new s(this.powLo(t.lo,e),this.powHi(t.hi,e)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(t){return i.isNumber(t)&&(t=this.Interval(t)),this.nthRoot(t,2)},nthRoot:function(t,e){var r,n,o,a,l;if(i.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)||e<0)return this.EMPTY.clone();if(this.isInterval(e)){if(!this.isSingleton(e))return this.EMPTY.clone();e=e.lo}return r=1/e,t.hi<0?e%1==0&&1==(1&e)?(n=this.powHi(-t.lo,r),o=this.powLo(-t.hi,r),new s(-n,-o)):this.EMPTY.clone():t.lo<0?(a=this.powHi(t.hi,r),e%1==0&&1==(1&e)?(l=-this.powHi(-t.lo,r),new s(l,a)):new s(0,a)):new s(this.powLo(t.lo,r),this.powHi(t.hi,r))},exp:function(t){return i.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():new s(this.expLo(t.lo),this.expHi(t.hi))},log:function(t){var e;return i.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():(e=t.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(t.lo),new s(e,this.logHi(t.hi)))},ln:function(t){return this.log(t)},log10:function(t){return this.isEmpty(t)?this.EMPTY.clone():this.div(this.log(t),this.log(new s(10,10)))},log2:function(t){return this.isEmpty(t)?this.EMPTY.clone():this.div(this.log(t),this.log(new s(2,2)))},hull:function(t,e){var i=this.isEmpty(t),r=this.isEmpty(e);return i&&r?this.EMPTY.clone():i?e.clone():r?t.clone():new s(Math.min(t.lo,e.lo),Math.max(t.hi,e.hi))},intersection:function(t,e){var i,r;return this.isEmpty(t)||this.isEmpty(e)?this.EMPTY.clone():(i=Math.max(t.lo,e.lo),r=Math.min(t.hi,e.hi),i<=r?new s(i,r):this.EMPTY.clone())},union:function(t,e){if(!this.intervalsOverlap(t,e))throw new Error("Interval#unions do not overlap");return new s(Math.min(t.lo,e.lo),Math.max(t.hi,e.hi))},difference:function(t,e){if(this.isEmpty(t)||this.isWhole(e))return this.EMPTY.clone();if(this.intervalsOverlap(t,e)){if(t.lo<e.lo&&e.hi<t.hi)throw new Error("Interval.difference: difference creates multiple intervals");return e.lo<=t.lo&&e.hi===1/0||e.hi>=t.hi&&e.lo===-1/0?this.EMPTY.clone():e.lo<=t.lo?(new s).halfOpenLeft(e.hi,t.hi):(new s).halfOpenRight(t.lo,e.lo)}return t.clone()},width:function(t){return this.isEmpty(t)?0:this.subHi(t.hi,t.lo)},abs:function(t){return i.isNumber(t)&&(t=this.Interval(t)),this.isEmpty(t)?this.EMPTY.clone():t.lo>=0?t.clone():t.hi<=0?this.negative(t):new s(0,Math.max(-t.lo,t.hi))},max:function(t,e){var i=this.isEmpty(t),r=this.isEmpty(e);return i&&r?this.EMPTY.clone():i?e.clone():r?t.clone():new s(Math.max(t.lo,e.lo),Math.max(t.hi,e.hi))},min:function(t,e){var i=this.isEmpty(t),r=this.isEmpty(e);return i&&r?this.EMPTY.clone():i?e.clone():r?t.clone():new s(Math.min(t.lo,e.lo),Math.min(t.hi,e.hi))},onlyInfinity:function(t){return!isFinite(t.lo)&&t.lo===t.hi},_handleNegative:function(t){var e;return t.lo<0&&(t.lo===-1/0?(t.lo=0,t.hi=1/0):(e=Math.ceil(-t.lo/this.piTwiceLow),t.lo+=this.piTwiceLow*e,t.hi+=this.piTwiceLow*e)),t},cos:function(t){var e,i,r,n,o,a,l,c;return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():(e=(new s).set(t.lo,t.hi),this._handleNegative(e),i=this.PI_TWICE,r=this.fmod(e,i),this.width(r)>=i.lo?new s(-1,1):r.lo>=this.piHigh?(n=this.cos(this.sub(r,this.PI)),this.negative(n)):(o=r.lo,a=r.hi,l=this.cosLo(a),c=this.cosHi(o),a<=this.piLow?new s(l,c):a<=i.lo?new s(-1,Math.max(l,c)):new s(-1,1)))},sin:function(t){return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():this.cos(this.sub(t,this.PI_HALF))},tan:function(t){var e,i,r;return this.isEmpty(t)||this.onlyInfinity(t)?this.EMPTY.clone():(e=(new s).set(t.lo,t.hi),this._handleNegative(e),r=this.PI,i=this.fmod(e,r),i.lo>=this.piHalfLow&&(i=this.sub(i,r)),i.lo<=-this.piHalfLow||i.hi>=this.piHalfLow?this.WHOLE.clone():new s(this.tanLo(i.lo),this.tanHi(i.hi)))},asin:function(t){var e,i;return this.isEmpty(t)||t.hi<-1||t.lo>1?this.EMPTY.clone():(e=t.lo<=-1?-this.piHalfHigh:this.asinLo(t.lo),i=t.hi>=1?this.piHalfHigh:this.asinHi(t.hi),new s(e,i))},acos:function(t){var e,i;return this.isEmpty(t)||t.hi<-1||t.lo>1?this.EMPTY.clone():(e=t.hi>=1?0:this.acosLo(t.hi),i=t.lo<=-1?this.piHigh:this.acosHi(t.lo),new s(e,i))},atan:function(t){return this.isEmpty(t)?this.EMPTY.clone():new s(this.atanLo(t.lo),this.atanHi(t.hi))},sinh:function(t){return this.isEmpty(t)?this.EMPTY.clone():new s(this.sinhLo(t.lo),this.sinhHi(t.hi))},cosh:function(t){return this.isEmpty(t)?this.EMPTY.clone():t.hi<0?new s(this.coshLo(t.hi),this.coshHi(t.lo)):t.lo>=0?new s(this.coshLo(t.lo),this.coshHi(t.hi)):new s(1,this.coshHi(-t.lo>t.hi?t.lo:t.hi))},tanh:function(t){return this.isEmpty(t)?this.EMPTY.clone():new s(this.tanhLo(t.lo),this.tanhHi(t.hi))},equal:function(t,e){return this.isEmpty(t)?this.isEmpty(e):!this.isEmpty(e)&&t.lo===e.lo&&t.hi===e.hi},notEqual:function(t,e){return this.isEmpty(t)?!this.isEmpty(e):this.isEmpty(e)||t.hi<e.lo||t.lo>e.hi},lt:function(t,e){return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),!this.isEmpty(t)&&!this.isEmpty(e)&&t.hi<e.lo},gt:function(t,e){return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),!this.isEmpty(t)&&!this.isEmpty(e)&&t.lo>e.hi},leq:function(t,e){return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),!this.isEmpty(t)&&!this.isEmpty(e)&&t.hi<=e.lo},geq:function(t,e){return i.isNumber(t)&&(t=this.Interval(t)),i.isNumber(e)&&(e=this.Interval(e)),!this.isEmpty(t)&&!this.isEmpty(e)&&t.lo>=e.hi},piLow:3.141592653589793,piHigh:3.1415926535897936,piHalfLow:1.5707963267948966,piHalfHigh:1.5707963267948968,piTwiceLow:6.283185307179586,piTwiceHigh:6.283185307179587,identity:function(t){return t},_prev:function(t){return t===1/0?t:this.nextafter(t,-1/0)},_next:function(t){return t===-1/0?t:this.nextafter(t,1/0)},prev:function(t){return this._prev(t)},next:function(t){return this._next(t)},toInteger:function(t){return t<0?Math.ceil(t):Math.floor(t)},addLo:function(t,e){return this.prev(t+e)},addHi:function(t,e){return this.next(t+e)},subLo:function(t,e){return this.prev(t-e)},subHi:function(t,e){return this.next(t-e)},mulLo:function(t,e){return this.prev(t*e)},mulHi:function(t,e){return this.next(t*e)},divLo:function(t,e){return this.prev(t/e)},divHi:function(t,e){return this.next(t/e)},intLo:function(t){return this.toInteger(this.prev(t))},intHi:function(t){return this.toInteger(this.next(t))},logLo:function(t){return this.prev(Math.log(t))},logHi:function(t){return this.next(Math.log(t))},expLo:function(t){return this.prev(Math.exp(t))},expHi:function(t){return this.next(Math.exp(t))},sinLo:function(t){return this.prev(Math.sin(t))},sinHi:function(t){return this.next(Math.sin(t))},cosLo:function(t){return this.prev(Math.cos(t))},cosHi:function(t){return this.next(Math.cos(t))},tanLo:function(t){return this.prev(Math.tan(t))},tanHi:function(t){return this.next(Math.tan(t))},asinLo:function(t){return this.prev(Math.asin(t))},asinHi:function(t){return this.next(Math.asin(t))},acosLo:function(t){return this.prev(Math.acos(t))},acosHi:function(t){return this.next(Math.acos(t))},atanLo:function(t){return this.prev(Math.atan(t))},atanHi:function(t){return this.next(Math.atan(t))},sinhLo:function(t){return this.prev(e.sinh(t))},sinhHi:function(t){return this.next(e.sinh(t))},coshLo:function(t){return this.prev(e.cosh(t))},coshHi:function(t){return this.next(e.cosh(t))},tanhLo:function(t){return this.prev(e.tanh(t))},tanhHi:function(t){return this.next(e.tanh(t))},sqrtLo:function(t){return this.prev(Math.sqrt(t))},sqrtHi:function(t){return this.next(Math.sqrt(t))},powLo:function(t,e){var i;if(e%1!=0)return this.prev(Math.pow(t,e));for(i=1==(1&e)?t:1,e>>=1;e>0;)t=this.mulLo(t,t),1==(1&e)&&(i=this.mulLo(t,i)),e>>=1;return i},powHi:function(t,e){var i;if(e%1!=0)return this.next(Math.pow(t,e));for(i=1==(1&e)?t:1,e>>=1;e>0;)t=this.mulHi(t,t),1==(1&e)&&(i=this.mulHi(t,i)),e>>=1;return i},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(t){return this._prev(t)},this.next=function(t){return this._next(t)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:-1>>>0,nextafter:function(t,e){var i,s;return isNaN(t)||isNaN(e)?NaN:t===e?t:0===t?e<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(s=r.hi(t),i=r.lo(t),e>t==t>0?i===this.UINT_MAX?(s+=1,i=0):i+=1:0===i?(i=this.UINT_MAX,s-=1):i-=1,r.pack(i,s))}},t.Math.IntervalArithmetic.PI=new s(e.IntervalArithmetic.piLow,e.IntervalArithmetic.piHigh),t.Math.IntervalArithmetic.PI_HALF=new s(e.IntervalArithmetic.piHalfLow,e.IntervalArithmetic.piHalfHigh),t.Math.IntervalArithmetic.PI_TWICE=new s(e.IntervalArithmetic.piTwiceLow,e.IntervalArithmetic.piTwiceHigh),t.Math.IntervalArithmetic.ZERO=new s(0),t.Math.IntervalArithmetic.ONE=new s(1),t.Math.IntervalArithmetic.WHOLE=(new s).setWhole(),t.Math.IntervalArithmetic.EMPTY=(new s).setEmpty(),t.Math.IntervalArithmetic})),define("math/extrapolate",["math/math"],(function(t){"use strict";return t.Extrapolate={upper:15,infty:1e4,wynnEps:function(t,e,i){var r,s,n,o,a,l;if(i[e]=t,0===e)l=t;else{for(o=0,s=e;s>0;s--)n=o,o=i[s-1],a=i[s]-o,Math.abs(a)<=1e-15?i[s-1]=1e20:(r=1,i[s-1]=n*r+1/a);l=i[e%2]}return l},aitken:function(t,e,i){var r,s,n,o,a,l;if(i[e]=t,e<2)r=t;else{for(o=e/2,a=1;a<=o;a++)l=e-2*a,s=i[l+2]-2*i[l+1]+i[l],Math.abs(s)<1e-15?i[l]=1e20:(n=i[l]-i[l+1],i[l]-=n*n/s);r=i[e%2]}return r},brezinski:function(t,e,i){var r,s,n,o,a,l,c,h;if(i[e]=t,e<3)r=t;else{for(l=e/3,h=e,c=1;c<=l;c++)h-=3,n=i[h+1]-i[h],o=i[h+2]-i[h+1],a=i[h+3]-i[h+2],s=a*(o-n)-n*(a-o),Math.abs(s)<1e-15?i[h]=1e20:i[h]=i[h+1]-n*o*(a-o)/s;r=i[e%3]}return r},iteration:function(t,e,i,r,s){var n,o,a,l,c=NaN,h=[],u="finite",d=e;for(s=s||0,n=1;n<=this.upper;n++){if(d=0===s?e/(n+1):.5*d,o=i(t+d,!0),a=this[r](o,n-1,h),isNaN(a)){u="NaN";break}if(0!==o&&a/o>this.infty){c=a,u="infinite";break}if(l=a-c,Math.abs(l)<1e-7)break;c=a}return[c,u,1-(n-1)/this.upper]},levin:function(t,e,i,r,s,n){var o,a,l,c;if(c=1/(r+e),s[e]=t/i,n[e]=1/i,e>0&&(s[e-1]=s[e]-s[e-1],n[e-1]=n[e]-n[e-1],e>1))for(l=(r+e-1)*c,o=2;o<=e;o++)a=(r+e-o)*Math.pow(l,o-2)*c,s[e-o]=s[e-o+1]-a*s[e-o],n[e-o]=n[e-o+1]-a*n[e-o],c*=l;return Math.abs(n[0])<1e-15?1e20:s[0]/n[0]},iteration_levin:function(t,e,i,r){var s,n,o,a,l,c,h,u=NaN,d=[],p=[],f="finite",m=e,b="u";for(r=r||0,a=i(t+e,!0),s=1;s<=this.upper;s++){if(m=0===r?e/(s+1):.5*m,n=i(t+m,!0),l=n-a,b=Math.abs(l)<1?"u":"t",h="u"===b?(1+s)*l:l,a=n,o=this.levin(n,s-1,h,1,d,p),c=o-u,isNaN(o)){f="NaN";break}if(0!==n&&o/n>this.infty){u=o,f="infinite";break}if(Math.abs(c)<1e-7)break;u=o}return[u,f,1-(s-1)/this.upper]},limit:function(t,e,i){return this.iteration_levin(t,e,i,0)}},t.Extrapolate})),define("math/qdt",["math/math","utils/type"],(function(t,e){"use strict";return t.Quadtree=function(t){this.capacity=10,this.points=[],this.xlb=t[0],this.xub=t[2],this.ylb=t[3],this.yub=t[1],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},e.extend(t.Quadtree.prototype,{contains:function(t,e){return this.xlb<t&&t<=this.xub&&this.ylb<e&&e<=this.yub},insert:function(t){return!!this.contains(t.usrCoords[1],t.usrCoords[2])&&(this.points.length<this.capacity?(this.points.push(t),!0):(null===this.northWest&&this.subdivide(),!!this.northWest.insert(t)||!!this.northEast.insert(t)||!!this.southEast.insert(t)||!!this.southWest.insert(t)))},subdivide:function(){var t,e=this.points.length,i=this.xlb+(this.xub-this.xlb)/2,r=this.ylb+(this.yub-this.ylb)/2;for(this.northWest=new Quadtree([this.xlb,this.yub,i,r]),this.northEast=new Quadtree([i,this.yub,this.xub,r]),this.southEast=new Quadtree([this.xlb,r,i,this.ylb]),this.southWest=new Quadtree([i,r,this.xub,this.ylb]),t=0;t<e;t+=1)this.northWest.insert(this.points[t]),this.northEast.insert(this.points[t]),this.southEast.insert(this.points[t]),this.southWest.insert(this.points[t])},_query:function(t,e){var i;if(this.contains(t,e)){if(null===this.northWest)return this;if(i=this.northWest._query(t,e))return i;if(i=this.northEast._query(t,e))return i;if(i=this.southEast._query(t,e))return i;if(i=this.southWest._query(t,e))return i}return!1},query:function(t,i){var r,s;return e.exists(i)?(r=t,s=i):(r=t.usrCoords[1],s=t.usrCoords[2]),this._query(r,s)}}),t.Quadtree})),define("math/numerics",["jxg","utils/type","utils/env","math/math"],(function(t,e,i,r){"use strict";var s={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};return r.Numerics={Gauss:function(t,i){var s,n,o,a,l,c=r.eps,h=t.length>0?t[0].length:0;if(h!==i.length||h!==t.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(a=[],l=i.slice(0,h),s=0;s<h;s++)a[s]=t[s].slice(0,h);for(n=0;n<h;n++){for(s=h-1;s>n;s--)if(Math.abs(a[s][n])>c)if(Math.abs(a[n][n])<c)e.swap(a,s,n),e.swap(l,s,n);else for(a[s][n]/=a[n][n],l[s]-=a[s][n]*l[n],o=n+1;o<h;o++)a[s][o]-=a[s][n]*a[n][o];if(Math.abs(a[n][n])<c)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(a,l,!0),l},backwardSolve:function(t,e,i){var r,s,n,o,a;for(r=i?e:e.slice(0,e.length),s=t.length,n=t.length>0?t[0].length:0,o=s-1;o>=0;o--){for(a=n-1;a>o;a--)r[o]-=t[o][a]*r[a];r[o]/=t[o][o]}return r},gaussBareiss:function(t){var e,i,s,n,o,a,l,c,h,u=r.eps;if((l=t.length)<=0)return 0;for(t[0].length<l&&(l=t[0].length),c=[],n=0;n<l;n++)c[n]=t[n].slice(0,l);for(i=1,s=1,e=0;e<l-1;e++){if(a=c[e][e],Math.abs(a)<u){for(n=e+1;n<l&&!(Math.abs(c[n][e])>=u);n++);if(n===l)return 0;for(o=e;o<l;o++)h=c[n][o],c[n][o]=c[e][o],c[e][o]=h;s=-s,a=c[e][e]}for(n=e+1;n<l;n++)for(o=e+1;o<l;o++)h=a*c[n][o]-c[n][e]*c[e][o],c[n][o]=h/i;i=a}return s*c[l-1][l-1]},det:function(t){return 2===t.length&&2===t[0].length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:this.gaussBareiss(t)},Jacobi:function(t){var e,i,s,n,o,a,l,c,h,u=r.eps*r.eps,d=0,p=t.length,f=[[0,0,0],[0,0,0],[0,0,0]],m=[[0,0,0],[0,0,0],[0,0,0]],b=0;for(e=0;e<p;e++){for(i=0;i<p;i++)f[e][i]=0,m[e][i]=t[e][i],d+=Math.abs(m[e][i]);f[e][e]=1}if(1===p)return[m,f];if(d<=0)return[m,f];d/=p*p;do{for(c=0,h=0,i=1;i<p;i++)for(e=0;e<i;e++)if(n=Math.abs(m[e][i]),n>h&&(h=n),c+=n,n>=u){for(n=.5*Math.atan2(2*m[e][i],m[e][e]-m[i][i]),o=Math.sin(n),a=Math.cos(n),s=0;s<p;s++)l=m[s][e],m[s][e]=a*l+o*m[s][i],m[s][i]=-o*l+a*m[s][i],l=f[s][e],f[s][e]=a*l+o*f[s][i],f[s][i]=-o*l+a*f[s][i];for(m[e][e]=a*m[e][e]+o*m[i][e],m[i][i]=-o*m[e][i]+a*m[i][i],m[e][i]=0,s=0;s<p;s++)m[e][s]=m[s][e],m[i][s]=m[s][i]}b+=1}while(Math.abs(c)/d>u&&b<2e3);return[m,f]},NewtonCotes:function(t,i,r){var s,n,o,a=0,l=r&&e.isNumber(r.number_of_nodes)?r.number_of_nodes:28,c={trapez:!0,simpson:!0,milne:!0},h=r&&r.integration_type&&c.hasOwnProperty(r.integration_type)&&c[r.integration_type]?r.integration_type:"milne",u=(t[1]-t[0])/l;switch(h){case"trapez":for(a=.5*(i(t[0])+i(t[1])),s=t[0],n=0;n<l-1;n++)s+=u,a+=i(s);a*=u;break;case"simpson":if(l%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(o=l/2,a=i(t[0])+i(t[1]),s=t[0],n=0;n<o-1;n++)s+=2*u,a+=2*i(s);for(s=t[0]-u,n=0;n<o;n++)s+=2*u,a+=4*i(s);a*=u/3;break;default:if(l%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(o=.25*l,a=7*(i(t[0])+i(t[1])),s=t[0],n=0;n<o-1;n++)s+=4*u,a+=14*i(s);for(s=t[0]-3*u,n=0;n<o;n++)s+=4*u,a+=32*(i(s)+i(s+2*u));for(s=t[0]-2*u,n=0;n<o;n++)s+=4*u,a+=12*i(s);a*=2*u/45}return a},Romberg:function(t,i,r){var s,n,o,a,l,c,h,u,d=[],p=0,f=1/0,m=r&&e.isNumber(r.max_iterations)?r.max_iterations:20,b=r&&e.isNumber(r.eps)?r.eps:r.eps||1e-7;for(s=t[0],n=t[1],o=n-s,l=1,d[0]=.5*o*(i(s)+i(n)),c=0;c<m;++c){for(a=0,o*=.5,l*=2,u=1,h=1;h<l;h+=2)a+=i(s+h*o);for(d[c+1]=.5*d[c]+a*o,p=d[c+1],h=c-1;h>=0;--h)u*=4,d[h]=d[h+1]+(d[h+1]-d[h])/(u-1),p=d[h];if(Math.abs(p-f)<b*Math.abs(p))break;f=p}return p},GaussLegendre:function(t,i,r){var s,n,o,a,l,c,h,u,d=0,p=[],f=[],m=r&&e.isNumber(r.n)?r.n:12;if(m>18&&(m=18),p[2]=[.5773502691896257],f[2]=[1],p[4]=[.33998104358485626,.8611363115940526],f[4]=[.6521451548625461,.34785484513745385],p[6]=[.2386191860831969,.6612093864662645,.932469514203152],f[6]=[.46791393457269104,.3607615730481386,.17132449237917036],p[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],f[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],p[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],f[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],p[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],f[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],p[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],f[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],p[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],f[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],p[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],f[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],p[3]=[0,.7745966692414834],f[3]=[.8888888888888888,.5555555555555556],p[5]=[0,.5384693101056831,.906179845938664],f[5]=[.5688888888888889,.47862867049936647,.23692688505618908],p[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],f[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],p[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],f[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],p[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],f[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],p[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],f[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],p[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],f[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],p[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],f[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],s=t[0],n=t[1],a=m+1>>1,h=p[m],u=f[m],c=.5*(n-s),l=.5*(n+s),!0&m)for(d=u[0]*i(l),o=1;o<a;++o)d+=u[o]*(i(l+c*h[o])+i(l-c*h[o]));else for(d=0,o=0;o<a;++o)d+=u[o]*(i(l+c*h[o])+i(l-c*h[o]));return c*d},_rescale_error:function(t,e,i){var r,s;return t=Math.abs(t),0!==i&&0!==t&&(r=Math.pow(200*t/i,1.5),t=r<1?i*r:i),e>20041683600089728e-310&&(s=11102230246251565e-30*e)>t&&(t=s),t},_gaussKronrod:function(t,e,i,r,s,n,o){var a,l,c,h,u,d,p,f,m,b=t[0],v=t[1],g=.5*(b+v),y=.5*(v-b),_=Math.abs(y),C=e(g),P=0,O=C*n[i-1],x=Math.abs(O),E=0,w=0,S=0,T=[],N=[];for(i%2==0&&(P=C*s[i/2-1]),a=Math.floor((i-1)/2),c=0;c<a;c++)h=2*c+1,u=y*r[h],d=e(g-u),p=e(g+u),f=d+p,T[h]=d,N[h]=p,P+=s[c]*f,O+=n[h]*f,x+=n[h]*(Math.abs(d)+Math.abs(p));for(a=Math.floor(i/2),c=0;c<a;c++)m=2*c,u=y*r[m],d=e(g-u),p=e(g+u),T[m]=d,N[m]=p,O+=n[m]*(d+p),x+=n[m]*(Math.abs(d)+Math.abs(p));for(w=.5*O,E=n[i-1]*Math.abs(C-w),c=0;c<i-1;c++)E+=n[c]*(Math.abs(T[c]-w)+Math.abs(N[c]-w));return S=(O-P)*y,O*=y,x*=_,E*=_,l=O,o.abserr=this._rescale_error(S,x,E),o.resabs=x,o.resasc=E,l},GaussKronrod15:function(t,e,i){var r=[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],s=[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],n=[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782];return this._gaussKronrod(t,e,8,r,s,n,i)},GaussKronrod21:function(t,e,i){var r=[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],s=[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],n=[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169];return this._gaussKronrod(t,e,11,r,s,n,i)},GaussKronrod31:function(t,e,i){var r=[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],s=[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],n=[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154];return this._gaussKronrod(t,e,16,r,s,n,i)},_workspace:function(t,e){return{limit:e,size:0,nrmax:0,i:0,alist:[t[0]],blist:[t[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var t,e,i,r,s,n=this.size-1,o=this.limit,a=this.nrmax,l=this.order[a];if(n<2)return this.order[0]=0,this.order[1]=1,void(this.i=l);for(t=this.elist[l];a>0&&t>this.elist[this.order[a-1]];)this.order[a]=this.order[a-1],a--;for(s=n<o/2+2?n:o-n+1,i=a+1;i<s&&t<this.elist[this.order[i]];)this.order[i-1]=this.order[i],i++;for(this.order[i-1]=l,e=this.elist[n],r=s-1;r>i-2&&e>=this.elist[this.order[r]];)this.order[r+1]=this.order[r],r--;this.order[r+1]=n,l=this.order[a],this.i=l,this.nrmax=a},set_initial_result:function(t,e){this.size=1,this.rlist[0]=t,this.elist[0]=e},update:function(t,e,i,r,s,n,o,a){var l=this.i,c=this.size,h=this.level[this.i]+1;a>r?(this.alist[l]=s,this.rlist[l]=o,this.elist[l]=a,this.level[l]=h,this.alist[c]=t,this.blist[c]=e,this.rlist[c]=i,this.elist[c]=r,this.level[c]=h):(this.blist[l]=e,this.rlist[l]=i,this.elist[l]=r,this.level[l]=h,this.alist[c]=s,this.blist[c]=n,this.rlist[c]=o,this.elist[c]=a,this.level[c]=h),this.size++,h>this.maximum_level&&(this.maximum_level=h),this.qpsrt()},retrieve:function(){var t=this.i;return{a:this.alist[t],b:this.blist[t],r:this.rlist[t],e:this.elist[t]}},sum_results:function(){var t,e=this.size,i=0;for(t=0;t<e;t++)i+=this.rlist[t];return i},subinterval_too_small:function(t,e,i){var r=1.0000000000000222*(Math.abs(e)+22250738585072014e-321);return Math.abs(t)<=r&&Math.abs(i)<=r}}},Qag:function(i,s,n){var o,a,l,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w=this._workspace(i,1e3),S=n&&e.isNumber(n.limit)?n.limit:15,T=n&&e.isNumber(n.epsrel)?n.epsrel:1e-7,N=n&&e.isNumber(n.epsabs)?n.epsabs:1e-7,M=n&&e.isFunction(n.q)?n.q:this.GaussKronrod15,A={},R=0,k=0,L=0,j=0,I=0,B=0,D=0,Y=0,X=0,F=0;if(S>w.limit&&t.warn("iteration limit exceeds available workspace"),N<=0&&(T<50*r.eps||T<5e-29)&&t.warn("tolerance cannot be acheived with given epsabs and epsrel"),l=M.apply(this,[i,s,A]),c=A.abserr,h=A.resabs,u=A.resasc,w.set_initial_result(l,c),d=Math.max(N,T*Math.abs(l)),p=11102230246251565e-30*h,c<=p&&c>d)return t.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(c<=d&&c!==u||0===c)return l;if(1===S)return t.warn("a maximum of one iteration was insufficient"),-1/0;o=l,a=c,R=1;do{I=0,B=0,D=0,Y=0,X=0,F=0,x=w.retrieve(),g=x.a,y=x.b,_=x.r,C=x.e,f=g,m=.5*(g+y),b=m,v=y,I=M.apply(this,[[f,m],s,A]),Y=A.abserr,P=A.resasc,B=M.apply(this,[[b,v],s,A]),X=A.abserr,O=A.resasc,D=I+B,F=Y+X,a+=F-C,o+=D-_,P!==Y&&O!==X&&(E=_-D,Math.abs(E)<=1e-5*Math.abs(D)&&F>=.99*C&&k++,R>=10&&F>C&&L++),d=Math.max(N,T*Math.abs(o)),a>d&&((k>=6||L>=20)&&(j=2),w.subinterval_too_small(f,b,v)&&(j=3)),w.update(f,m,I,Y,b,v,B,X),x=w.retrieve(),g=x.a_i,y=x.b_i,_=x.r_i,C=x.e_i,R++}while(R<S&&!j&&a>d);return w.sum_results()},I:function(t,e){return this.Qag(t,e,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(t,i,s){var n,o=0,a=r.eps,l=t.apply(s,[i]);for(e.isArray(i)&&(i=i[0]);o<50&&Math.abs(l)>a;)n=this.D(t,s)(i),Math.abs(n)>a?i-=l/n:i+=.2*Math.random()-1,l=t.apply(s,[i]),o+=1;return i},root:function(t,e,i){return this.chandrupatla(t,e,i)},generalizedNewton:function(t,e,i,s){var n,o,a,l,c,h,u,d,p,f,m,b,v,g,y=0;for(this.generalizedNewton.t1memo?(n=this.generalizedNewton.t1memo,o=this.generalizedNewton.t2memo):(n=i,o=s),d=t.X(n)-e.X(o),p=t.Y(n)-e.Y(o),f=d*d+p*p,m=this.D(t.X,t),b=this.D(e.X,e),v=this.D(t.Y,t),g=this.D(e.Y,e);f>r.eps&&y<10;)a=m(n),l=-b(o),c=v(n),h=-g(o),u=a*h-l*c,n-=(h*d-l*p)/u,o-=(a*p-c*d)/u,d=t.X(n)-e.X(o),p=t.Y(n)-e.Y(o),f=d*d+p*p,y+=1;return this.generalizedNewton.t1memo=n,this.generalizedNewton.t2memo=o,Math.abs(n)<Math.abs(o)?[t.X(n),t.Y(n)]:[e.X(o),e.Y(o)]},Neville:function(t){var e=[],i=function(i){return function(s,n){var o,a,l,c=r.binomial,h=t.length,u=h-1,d=0,p=0;if(!n)for(l=1,o=0;o<h;o++)e[o]=c(u,o)*l,l*=-1;for(a=s,o=0;o<h;o++){if(0===a)return t[o][i]();l=e[o]/a,a-=1,d+=t[o][i]()*l,p+=l}return d/p}};return[i("X"),i("Y"),0,function(){return t.length-1}]},splineDef:function(t,e){var i,r,s,n=Math.min(t.length,e.length),o=[],a=[],l=[],c=[],h=[],u=[];if(2===n)return[0,0];for(r=0;r<n;r++)i={X:t[r],Y:e[r]},l.push(i);for(l.sort((function(t,e){return t.X-e.X})),r=0;r<n;r++)t[r]=l[r].X,e[r]=l[r].Y;for(r=0;r<n-1;r++)c.push(t[r+1]-t[r]);for(r=0;r<n-2;r++)h.push(6*(e[r+2]-e[r+1])/c[r+1]-6*(e[r+1]-e[r])/c[r]);for(o.push(2*(c[0]+c[1])),a.push(h[0]),r=0;r<n-3;r++)s=c[r+1]/o[r],o.push(2*(c[r+1]+c[r+2])-s*c[r+1]),a.push(h[r+1]-s*a[r]);for(u[n-3]=a[n-3]/o[n-3],r=n-4;r>=0;r--)u[r]=(a[r]-c[r+1]*u[r+1])/o[r];for(r=n-3;r>=0;r--)u[r+1]=u[r];return u[0]=0,u[n-1]=0,u},splineEval:function(t,i,r,s){var n,o,a,l,c,h,u,d=Math.min(i.length,r.length),p=1,f=!1,m=[];for(e.isArray(t)?(p=t.length,f=!0):t=[t],n=0;n<p;n++){if(t[n]<i[0]||i[n]>i[d-1])return NaN;for(o=1;o<d&&!(t[n]<=i[o]);o++);o-=1,a=r[o],l=(r[o+1]-r[o])/(i[o+1]-i[o])-(i[o+1]-i[o])/6*(s[o+1]+2*s[o]),c=s[o]/2,h=(s[o+1]-s[o])/(6*(i[o+1]-i[o])),u=t[n]-i[o],m.push(a+(l+(c+h*u)*u)*u)}return f?m:m[0]},generatePolynomialTerm:function(t,e,i,r){var s,n=[];for(s=e;s>=0;s--)n=n.concat(["(",t[s].toPrecision(r),")"]),s>1?n=n.concat(["*",i,"<sup>",s,"<","/sup> + "]):1===s&&(n=n.concat(["*",i," + "]));return n.join("")},lagrangePolynomial:function(t){var e=[],i=this,r=function(i,r){var s,n,o,a,l=t.length,c=0,h=0;if(!r)for(s=0;s<l;s++){for(e[s]=1,o=t[s].X(),n=0;n<l;n++)n!==s&&(e[s]*=o-t[n].X());e[s]=1/e[s]}for(s=0;s<l;s++){if(o=t[s].X(),i===o)return t[s].Y();a=e[s]/(i-o),h+=a,c+=a*t[s].Y()}return c/h};return r.getTerm=function(e,r,s){return i.lagrangePolynomialTerm(t,e,r,s)()},r},lagrangePolynomialTerm:function(e,s,n,o){return function(){var a,l,c,h,u,d,p=e.length,f=[],m=[],b=[],v=!0;for(n=n||"x",void 0===o&&(o=" * "),a=p-1,h=0;h<p;h++)b[h]=0;for(c=0;c<p;c++){for(u=e[c].Y(),d=e[c].X(),f=[],h=0;h<p;h++)h!==c&&(u/=d-e[h].X(),f.push(e[h].X()));for(m=[1].concat(r.Vieta(f)),h=0;h<m.length;h++)b[h]+=(h%2==1?-1:1)*m[h]*u}for(l="",h=0;h<b.length;h++)u=b[h],Math.abs(u)<r.eps||(t.exists(s)&&(u=i._round10(u,-s)),v?(l+=u>0?u:"-"+-u,v=!1):l+=u>0?" + "+u:" - "+-u,a-h>1?l+=o+n+"^"+(a-h):a-h==1&&(l+=o+n));return l}},_initCubicPoly:function(t,e,i,r){return[t,i,-3*t+3*e-2*i-r,2*t-2*e+i+r]},CardinalSpline:function(t,i,s){var n,o,a,l,c=[],h=this;return l=e.isFunction(i)?i:function(){return i},void 0===s&&(s="uniform"),o=function(e){return function(i,o){var u,d,p,f,m,b,v,g,y,_;if(t.length<2)return NaN;if(!o)for(a=l(),p={X:function(){return 2*t[0].X()-t[1].X()},Y:function(){return 2*t[0].Y()-t[1].Y()},Dist:function(t){var e=this.X()-t.X(),i=this.Y()-t.Y();return Math.sqrt(e*e+i*i)}},f={X:function(){return 2*t[t.length-1].X()-t[t.length-2].X()},Y:function(){return 2*t[t.length-1].Y()-t[t.length-2].Y()},Dist:function(t){var e=this.X()-t.X(),i=this.Y()-t.Y();return Math.sqrt(e*e+i*i)}},n=[p].concat(t,[f]),_=n.length,c[e]=[],u=0;u<_-3;u++)"centripetal"===s?(v=n[u].Dist(n[u+1]),g=n[u+2].Dist(n[u+1]),y=n[u+3].Dist(n[u+2]),v=Math.sqrt(v),g=Math.sqrt(g),y=Math.sqrt(y),g<r.eps&&(g=1),v<r.eps&&(v=g),y<r.eps&&(y=g),m=(n[u+1][e]()-n[u][e]())/v-(n[u+2][e]()-n[u][e]())/(g+v)+(n[u+2][e]()-n[u+1][e]())/g,b=(n[u+2][e]()-n[u+1][e]())/g-(n[u+3][e]()-n[u+1][e]())/(y+g)+(n[u+3][e]()-n[u+2][e]())/y,m*=g,b*=g,c[e][u]=h._initCubicPoly(n[u+1][e](),n[u+2][e](),a*m,a*b)):c[e][u]=h._initCubicPoly(n[u+1][e](),n[u+2][e](),a*(n[u+2][e]()-n[u][e]()),a*(n[u+3][e]()-n[u+1][e]()));return isNaN(i)?NaN:(_=t.length,i<=0?t[0][e]():i>=_?t[_-1][e]():(u=Math.floor(i))===i?t[u][e]():(i-=u,d=c[e][u],void 0===d?NaN:((d[3]*i+d[2])*i+d[1])*i+d[0]))}},[o("X"),o("Y"),0,function(){return t.length-1}]},CatmullRomSpline:function(t,e){return this.CardinalSpline(t,.5,e)},regressionPolynomial:function(t,i,s){var n,o,a,l,c,h,u="";if(e.isPoint(t)&&e.isFunction(t.Value))o=function(){return t.Value()};else if(e.isFunction(t))o=t;else{if(!e.isNumber(t))throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof t+"'.");o=function(){return t}}if(3===arguments.length&&e.isArray(i)&&e.isArray(s))c=0;else if(2===arguments.length&&e.isArray(i)&&i.length>0&&e.isPoint(i[0]))c=1;else{if(!(2===arguments.length&&e.isArray(i)&&i.length>0&&i[0].usrCoords&&i[0].scrCoords))throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");c=2}return h=function(t,h){var d,p,f,m,b,v,g,y,_,C=i.length;if(_=Math.floor(o()),!h){if(1===c)for(a=[],l=[],d=0;d<C;d++)a[d]=i[d].X(),l[d]=i[d].Y();if(2===c)for(a=[],l=[],d=0;d<C;d++)a[d]=i[d].usrCoords[1],l[d]=i[d].usrCoords[2];if(0===c)for(a=[],l=[],d=0;d<C;d++)e.isFunction(i[d])?a.push(i[d]()):a.push(i[d]),e.isFunction(s[d])?l.push(s[d]()):l.push(s[d]);for(f=[],p=0;p<C;p++)f.push([1]);for(d=1;d<=_;d++)for(p=0;p<C;p++)f[p][d]=f[p][d-1]*a[p];b=l,m=r.transpose(f),v=r.matMatMult(m,f),g=r.matVecMult(m,b),n=r.Numerics.Gauss(v,g),u=r.Numerics.generatePolynomialTerm(n,_,"x",3)}for(y=n[_],d=_-1;d>=0;d--)y=y*t+n[d];return y},h.getTerm=function(){return u},h},bezier:function(t){var e,i,r=function(r){return function(s,n){var o=3*Math.floor(s),a=s%1,l=1-a;return n||(i=3*Math.floor((t.length-1)/3),e=Math.floor(i/3)),s<0?t[0][r]():s>=e?t[i][r]():isNaN(s)?NaN:l*l*(l*t[o][r]()+3*a*t[o+1][r]())+(3*l*t[o+2][r]()+a*t[o+3][r]())*a*a}};return[r("X"),r("Y"),0,function(){return Math.floor(t.length/3)}]},bspline:function(t,e){var i,r=function(t,e){var i,r=[];for(i=0;i<t+e+1;i++)r[i]=i<e?0:i<=t?i-e+1:t-e+2;return r},s=function(t,e,i,r){var s,n,o,a,l,c=[];for(e[r]<=t&&t<e[r+1]?c[r]=1:c[r]=0,s=2;s<=i;s++)for(n=r-s+1;n<=r;n++)o=n<=r-s+1||n<0?0:c[n],a=n>=r?0:c[n+1],l=e[n+s-1]-e[n],c[n]=0===l?0:(t-e[n])/l*o,0!==(l=e[n+s]-e[n+1])&&(c[n]+=(e[n+s]-t)/l*a);return c},n=function(n){return function(o,a){var l,c,h,u=[],d=t.length,p=d-1,f=e;if(p<=0)return NaN;if(p+2<=f&&(f=p+1),o<=0)return t[0][n]();if(o>=p-f+2)return t[p][n]();for(h=Math.floor(o)+f-1,i=r(p,f),u=s(o,i,f,h),l=0,c=h-f+1;c<=h;c++)c<d&&c>=0&&(l+=t[c][n]()*u[c]);return l}};return[n("X"),n("Y"),0,function(){return t.length-1}]},D:function(t,i){return e.exists(i)?function(e,r){var s=1e-5;return(t.apply(i,[e+s,r])-t.apply(i,[e-s,r]))/2e-5}:function(e,i){var r=1e-5;return(t(e+r,i)-t(e-r,i))/2e-5}},_riemannValue:function(t,e,i,r){var s,n,o,a;if(r<0&&("trapezoidal"!==i&&(t+=r),r*=-1,"lower"===i?i="upper":"upper"===i&&(i="lower")),a=.01*r,"right"===i)s=e(t+r);else if("middle"===i)s=e(t+.5*r);else if("left"===i||"trapezoidal"===i)s=e(t);else if("lower"===i){for(s=e(t),o=t+a;o<=t+r;o+=a)(n=e(o))<s&&(s=n);n=e(t+r),n<s&&(s=n)}else if("upper"===i){for(s=e(t),o=t+a;o<=t+r;o+=a)(n=e(o))>s&&(s=n);n=e(t+r),n>s&&(s=n)}else s="random"===i?e(t+r*Math.random()):"simpson"===i?(e(t)+4*e(t+.5*r)+e(t+r))/6:e(t);return s},riemann:function(t,i,r,s,n){var o,a,l,c,h,u,d,p=[],f=[],m=0,b=s,v=0;if(e.isArray(t)?(h=t[0],c=t[1]):c=t,(i=Math.floor(i))<=0)return[p,f,v];for(a=(n-s)/i,o=0;o<i;o++)l=this._riemannValue(b,c,r,a),p[m]=b,f[m]=l,m+=1,b+=a,"trapezoidal"===r&&(l=c(b)),p[m]=b,f[m]=l,m+=1;for(o=0;o<i;o++)l=h?this._riemannValue(b,h,r,-a):0,p[m]=b,f[m]=l,m+=1,b-=a,"trapezoidal"===r&&h&&(l=h(b)),p[m]=b,f[m]=l,"trapezoidal"!==r?(u=l,d=f[2*(i-1)-2*o]):(d=.5*(c(b+a)+c(b)),u=h?.5*(h(b+a)+h(b)):0),v+=(d-u)*a,m+=1,p[m]=b,f[m]=f[2*(i-1)-2*o],m+=1;return[p,f,v]},riemannsum:function(e,i,r,s,n){return t.deprecated("Numerics.riemannsum()","Numerics.riemann()"),this.riemann(e,i,r,s,n)[2]},rungeKutta:function(t,i,r,n,o){var a,l,c,h,u,d,p=[],f=[],m=(r[1]-r[0])/n,b=r[0],v=i.length,g=[],y=0;for(e.isString(t)&&(t=s[t]||s.euler),d=t.s,a=0;a<v;a++)p[a]=i[a];for(l=0;l<n;l++){for(g[y]=[],a=0;a<v;a++)g[y][a]=p[a];for(y+=1,h=[],c=0;c<d;c++){for(a=0;a<v;a++)f[a]=0;for(u=0;u<c;u++)for(a=0;a<v;a++)f[a]+=t.A[c][u]*m*h[u][a];for(a=0;a<v;a++)f[a]+=p[a];h.push(o(b+t.c[c]*m,f))}for(a=0;a<v;a++)f[a]=0;for(u=0;u<d;u++)for(a=0;a<v;a++)f[a]+=t.b[u]*h[u][a];for(a=0;a<v;a++)p[a]=p[a]+m*f[a];b+=m}return g},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(t,i,r){var s,n,o,a,l,c,h,u,d,p;if(e.isArray(i))return i;for(s=i,o=t.call(r,s),n=0===s?1:s,a=[s-.1*n,s+.1*n,s-1,s+1,s-.5*n,s+.5*n,s-.6*n,s+.6*n,s-1*n,s+1*n,s-2*n,s+2*n,s-5*n,s+5*n,s-10*n,s+10*n,s-50*n,s+50*n,s-100*n,s+100*n],p=a.length,d=0;d<p&&(l=a[d],c=t.call(r,l),!(o*c<=0));d++);return l<s&&(h=s,s=l,l=h,u=o,o=c,c=u),[s,o,l,c]},fzero:function(t,i,s){var n,o,a,l,c,h,u,d,p,f,m,b,v,g,y,_=r.eps,C=this.maxIterationsRoot,P=0;if(e.isArray(i)){if(i.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");n=i[0],l=t.call(s,n),o=i[1],c=t.call(s,o)}else u=this.findBracket(t,i,s),n=u[0],l=u[1],o=u[2],c=u[3];if(Math.abs(l)<=_)return n;if(Math.abs(c)<=_)return o;if(l*c>0)return e.isArray(i)?this.fminbr(t,[n,o],s):this.Newton(t,n,s);for(a=n,h=l;P<C;){if(d=o-n,Math.abs(h)<Math.abs(c)&&(n=o,o=a,a=n,l=c,c=h,h=l),b=2*_*Math.abs(o)+.5*_,y=.5*(a-o),Math.abs(y)<=b||Math.abs(c)<=_)return o;Math.abs(d)>=b&&Math.abs(l)>Math.abs(c)&&(f=a-o,n===a?(p=c/l,v=f*p,g=1-p):(g=l/h,p=c/h,m=c/l,v=m*(f*g*(g-p)-(o-n)*(p-1)),g=(g-1)*(p-1)*(m-1)),v>0?g=-g:v=-v,v<.75*f*g-.5*Math.abs(b*g)&&v<Math.abs(d*g*.5)&&(y=v/g)),Math.abs(y)<b&&(y=y>0?b:-b),n=o,l=c,o+=y,c=t.call(s,o),(c>0&&h>0||c<0&&h<0)&&(a=n,h=l),P++}return o},chandrupatla:function(t,i,s){var n,o,a,l,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w,S,T,N,M,A=0,R=this.maxIterationsRoot,k=1+.001*Math.random(),L=.5*k,j=r.eps;if(e.isArray(i)){if(i.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");n=i[0],o=t.call(s,n),a=i[1],l=t.call(s,a)}else c=this.findBracket(t,i,s),n=c[0],o=c[1],a=c[2],l=c[3];if(o*l>0)return e.isArray(i)?this.fminbr(t,[n,a],s):this.Newton(t,n,s);h=n,u=a,f=o,m=l;do{if(p=h+L*(u-h),v=t.call(s,p),Math.sign(v)===Math.sign(f)?(d=h,h=p,b=f,f=v):(d=u,u=h,b=m,m=f),h=p,f=v,g=h,y=f,Math.abs(m)<Math.abs(f)&&(g=u,y=m),_=2*j*Math.abs(g)+5e-6,(C=_/Math.abs(u-h))>.5||0===y)break;P=(h-u)/(d-u),O=(f-m)/(b-m),x=1-Math.sqrt(1-P),E=Math.sqrt(P),x<O&&O<E?(w=(d-h)/(u-h),S=f/(m-f),T=b/(m-b),N=f/(b-f),M=m/(b-m),L=S*T+N*M*w):L=.5*k,L<C&&(L=C),L>1-C&&(L=1-C),A++}while(A<=R);return g},fminbr:function(t,i,s){var n,o,a,l,c,h,u,d,p,f,m,b,v,g,y,_,C=.5*(3-Math.sqrt(5)),P=r.eps,O=r.eps,x=this.maxIterationsMinimize,E=0;if(!e.isArray(i)||i.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(n=i[0],o=i[1],l=n+C*(o-n),u=t.call(s,l),a=l,c=l,h=u,d=u;E<x;){if(p=o-n,f=.5*(n+o),m=O*Math.abs(a)+P/3,Math.abs(a-f)+.5*p<=2*m)return a;b=C*(a<f?o-a:n-a),Math.abs(a-c)>=m&&(y=(a-c)*(h-u),g=(a-l)*(h-d),v=(a-l)*g-(a-c)*y,g=2*(g-y),g>0?v=-v:g=-g,Math.abs(v)<Math.abs(b*g)&&v>g*(n-a+2*m)&&v<g*(o-a-2*m)&&(b=v/g)),Math.abs(b)<m&&(b=b>0?m:-m),y=a+b,_=t.call(s,y),_<=h?(y<a?o=a:n=a,l=c,c=a,a=y,u=d,d=h,h=_):(y<a?n=y:o=y,_<=d||c===a?(l=c,c=y,u=d,d=_):(_<=u||l===a||l===c)&&(l=y,u=_)),E+=1}return a},RamerDouglasPeucker:function(t,e){var i,s,n,o=[],a=[],l=function(t,e,i){var s,n,o,a,l,c,h,u,d,p,f,m=0,b=e;if(i-e<2)return[-1,0];if(o=t[e].scrCoords,a=t[i].scrCoords,isNaN(o[1])||isNaN(o[2]))return[NaN,e];if(isNaN(a[1])||isNaN(a[2]))return[NaN,i];for(n=e+1;n<i;n++){if(l=t[n].scrCoords,isNaN(l[1])||isNaN(l[2]))return[NaN,n];c=l[1]-o[1],h=l[2]-o[2],u=a[1]-o[1],d=a[2]-o[2],c=c===1/0?1e4:c,h=h===1/0?1e4:h,u=u===1/0?1e4:u,d=d===1/0?1e4:d,c=c===-1/0?-1e4:c,h=h===-1/0?-1e4:h,u=u===-1/0?-1e4:u,d=d===-1/0?-1e4:d,p=u*u+d*d,p>=r.eps?(f=(c*u+h*d)/p,f<0?f=0:f>1&&(f=1),c-=f*u,h-=f*d,s=c*c+h*h):(f=0,s=c*c+h*h),s>m&&(m=s,b=n)}return[Math.sqrt(m),b]},c=function(t,e,i,r,s){var n=l(t,e,i),o=n[1];if(isNaN(n[0])){c(t,e,o-1,r,s),s.push(t[o]);do{++o}while(o<=i&&isNaN(t[o].scrCoords[1]+t[o].scrCoords[2]));o<=i&&s.push(t[o]),c(t,o+1,i,r,s)}else n[0]>r?(c(t,e,o,r,s),c(t,o,i,r,s)):s.push(t[i])};for(n=t.length,i=0;;){for(;i<n&&isNaN(t[i].scrCoords[1]+t[i].scrCoords[2]);)i+=1;for(s=i+1;s<n&&!isNaN(t[s].scrCoords[1]+t[s].scrCoords[2]);)s+=1;if(s--,i<n&&s>i&&(a=[],a[0]=t[i],c(t,i,s,e,a),o=o.concat(a)),i>=n)break;s<n-1&&o.push(t[s+1]),i=s+1}return o},RamerDouglasPeuker:function(e,i){return t.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(e,i)},Visvalingam:function(e,i){var r,s,n,o,a,l,c,h,u,d=[],p=[],f=[];if((s=e.length)<=2)return e;for(d[0]={used:!0,lft:null,node:null},a=0,r=1;r<s-1;r++)n=Math.abs(t.Math.Numerics.det([e[r-1].usrCoords,e[r].usrCoords,e[r+1].usrCoords])),isNaN(n)||(u={v:n,idx:r},p.push(u),d[r]={used:!0,lft:a,node:u},d[a].rt=r,a=r);for(d[s-1]={used:!0,rt:null,lft:a,node:null},d[a].rt=s-1,o=-1/0;p.length>i;)p.sort((function(t,e){return e.v-t.v})),r=p.pop().idx,d[r].used=!1,o=d[r].node.v,a=d[r].lft,l=d[r].rt,d[a].rt=l,d[l].lft=a,c=d[a].lft,null!==c&&(n=Math.abs(t.Math.Numerics.det([e[c].usrCoords,e[a].usrCoords,e[l].usrCoords])),d[a].node.v=n>=o?n:o),null!==(h=d[l].rt)&&(n=Math.abs(t.Math.Numerics.det([e[a].usrCoords,e[l].usrCoords,e[h].usrCoords])),d[l].node.v=n>=o?n:o);r=0,f=[e[r]];do{r=d[r].rt,f.push(e[r])}while(null!==d[r].rt);return f}},r.Numerics})),define("math/nlp",["jxg"],(function(t){"use strict";return t.Math.Nlp={arr:function(t){var e,i=new Array(t);for(e=0;e<t;e++)i[e]=0;return i},arr2:function(t,e){for(var i=0,r=new Array(t);i<t;)r[i]=this.arr(e),i++;return r},arraycopy:function(t,e,i,r,s){for(var n=0;n<s;)i[n+r]=t[n+e],n++},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(t,e,i,r,s,n,o,a){var l,c,h=i+2,u=this.arr(e+1),d=this;return u[0]=0,this.arraycopy(r,0,u,1,e),c=function(e,i,r,s){var n,o,a=d.arr(e);return d.arraycopy(r,1,a,0,e),n=d.arr(i),o=t(e,i,a,n),d.arraycopy(n,0,s,1,i),o},l=this.cobylb(c,e,i,h,u,s,n,o,a),this.arraycopy(u,1,r,0,e),l},cobylb:function(t,e,i,r,s,n,o,a,l){var c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w,S,T,N,M,A,R,k,L,j,I,B,D,Y,X=-1,F=0,U=0,G=e+1,J=i+1,z=n,H=0,V=!1,$=!1,q=0,W=0,Q=0,Z=this.arr(1+r),K=this.arr2(1+e,1+G),tt=this.arr2(1+e,1+e),et=this.arr2(1+r,1+G),it=this.arr2(1+e,1+J),rt=this.arr(1+e),st=this.arr(1+e),nt=this.arr(1+e),ot=this.arr(1+e),at=this.arr(1+e);for(a>=2&&console.log("The initial value of RHO is "+z+" and PARMU is set to zero."),b=0,f=1/z,h=1;h<=e;++h)K[h][G]=s[h],K[h][h]=z,tt[h][h]=f;v=G,g=!1;t:for(;;){if(b>=l&&b>0){X=this.MaxIterationsReached;break t}for(++b,F=t(e,i,s,Z),U=0,d=1;d<=i;++d)U=Math.max(U,-Z[d]);if(b!==a-1&&3!==a||this.PrintIterationResult(b,F,U,s,e,a),Z[J]=F,Z[r]=U,y=!0,!g){for(y=!1,h=1;h<=r;++h)et[h][v]=Z[h];if(b<=G){if(v<=e)if(et[J][G]<=F)s[v]=K[v][G];else{for(K[v][G]=s[v],d=1;d<=r;++d)et[d][v]=et[d][G],et[d][G]=Z[d];for(d=1;d<=v;++d){for(K[v][d]=-z,f=0,h=d;h<=v;++h)f-=tt[h][d];tt[v][d]=f}}if(b<=e){v=b,s[v]+=z;continue t}}g=!0}e:for(;;){i:do{if(!y){for(_=et[J][G]+H*et[r][G],C=G,u=1;u<=e;++u)f=et[J][u]+H*et[r][u],f<_?(C=u,_=f):f===_&&0===H&&et[r][u]<et[r][C]&&(C=u);if(C<=e){for(h=1;h<=r;++h)f=et[h][G],et[h][G]=et[h][C],et[h][C]=f;for(h=1;h<=e;++h){for(f=K[h][C],K[h][C]=0,K[h][G]+=f,m=0,d=1;d<=e;++d)K[h][d]-=f,m-=tt[d][h];tt[C][h]=m}}for(P=0,h=1;h<=e;++h)for(u=1;u<=e;++u)f=this.DOT_PRODUCT(this.PART(this.ROW(tt,h),1,e),this.PART(this.COL(K,u),1,e))-(h===u?1:0),P=Math.max(P,Math.abs(f));if(P>.1){X=this.DivergingRoundingErrors;break t}for(d=1;d<=J;++d){for(Z[d]=-et[d][G],u=1;u<=e;++u)at[u]=et[d][u]+Z[d];for(h=1;h<=e;++h)it[h][d]=(d===J?-1:1)*this.DOT_PRODUCT(this.PART(at,1,e),this.PART(this.COL(tt,h),1,e))}for(V=!0,q=.25*z,O=2.1*z,u=1;u<=e;++u){for(x=0,d=1;d<=e;++d)x+=tt[u][d]*tt[u][d];for(E=0,d=1;d<=e;++d)E+=K[d][u]*K[d][u];rt[u]=1/Math.sqrt(x),st[u]=Math.sqrt(E),(rt[u]<q||st[u]>O)&&(V=!1)}if(!g&&!V){for(v=0,f=O,u=1;u<=e;++u)st[u]>f&&(v=u,f=st[u]);if(0===v)for(u=1;u<=e;++u)rt[u]<f&&(v=u,f=rt[u]);for(f=.5*z*rt[v],d=1;d<=e;++d)ot[d]=f*tt[v][d];for(w=0,S=0,c=0,d=1;d<=J;++d)c=this.DOT_PRODUCT(this.PART(this.COL(it,d),1,e),this.PART(ot,1,e)),d<J&&(f=et[d][G],w=Math.max(w,-c-f),S=Math.max(S,c-f));for(T=H*(w-S)>2*c?-1:1,f=0,h=1;h<=e;++h)ot[h]=T*ot[h],K[h][v]=ot[h],f+=tt[v][h]*ot[h];for(d=1;d<=e;++d)tt[v][d]/=f;for(u=1;u<=e;++u){if(u!==v)for(f=this.DOT_PRODUCT(this.PART(this.ROW(tt,u),1,e),this.PART(ot,1,e)),d=1;d<=e;++d)tt[u][d]-=f*tt[v][d];s[u]=K[u][G]+ot[u]}continue t}if(!($=this.trstlp(e,i,it,Z,z,ot))){for(f=0,d=1;d<=e;++d)f+=ot[d]*ot[d];if(f<.25*z*z){g=!0;break i}}for(c=0,N=0,Z[J]=0,d=1;d<=J;++d)c=Z[d]-this.DOT_PRODUCT(this.PART(this.COL(it,d),1,e),this.PART(ot,1,e)),d<J&&(N=Math.max(N,c));if(W=et[r][G]-N,M=W>0?c/W:0,H<1.5*M)for(H=2*M,a>=2&&console.log("Increase in PARMU to "+H),A=et[J][G]+H*et[r][G],u=1;u<=e;++u)if((f=et[J][u]+H*et[r][u])<A||f===A&&0===H&&et[r][u]<et[r][G])continue e;for(Q=H*W-c,d=1;d<=e;++d)s[d]=K[d][G]+ot[d];g=!0;continue t}for(y=!1,R=et[J][G]+H*et[r][G],k=F+H*U,L=R-k,0===H&&F===et[J][G]&&(Q=W,L=et[r][G]-U),j=L<=0?1:0,v=0,u=1;u<=e;++u)f=Math.abs(this.DOT_PRODUCT(this.PART(this.ROW(tt,u),1,e),this.PART(ot,1,e))),f>j&&(v=u,j=f),nt[u]=f*rt[u];for(I=1.1*z,p=0,u=1;u<=e;++u)if(nt[u]>=q||nt[u]>=rt[u]){if(f=st[u],L>0){for(f=0,d=1;d<=e;++d)f+=Math.pow(ot[d]-K[d][u],2);f=Math.sqrt(f)}f>I&&(p=u,I=f)}if(p>0&&(v=p),0!==v){for(f=0,h=1;h<=e;++h)K[h][v]=ot[h],f+=tt[v][h]*ot[h];for(d=1;d<=e;++d)tt[v][d]/=f;for(u=1;u<=e;++u)if(u!==v)for(f=this.DOT_PRODUCT(this.PART(this.ROW(tt,u),1,e),this.PART(ot,1,e)),d=1;d<=e;++d)tt[u][d]-=f*tt[v][d];for(d=1;d<=r;++d)et[d][v]=Z[d];if(L>0&&L>=.1*Q)continue e}}while(0);if(V){if(z<=o){X=this.Normal;break t}if(B=0,D=0,z*=.5,z<=1.5*o&&(z=o),H>0){for(Y=0,d=1;d<=J;++d){for(B=et[d][G],D=B,h=1;h<=e;++h)B=Math.min(B,et[d][h]),D=Math.max(D,et[d][h]);d<=i&&B<.5*D&&(f=Math.max(D,0)-B,Y=Y<=0?f:Math.min(Y,f))}0===Y?H=0:D-B<H*Y&&(H=(D-B)/Y)}a>=2&&console.log("Reduction in RHO to "+z+"  and PARMU = "+H),2===a&&this.PrintIterationResult(b,et[J][G],et[r][G],this.COL(K,G),e,a)}else g=!1}}switch(X){case this.Normal:if(a>=1&&console.log("%nNormal return from subroutine COBYLA%n"),$)return a>=1&&this.PrintIterationResult(b,F,U,s,e,a),X;break;case this.MaxIterationsReached:a>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:a>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(d=1;d<=e;++d)s[d]=K[d][G];return F=et[J][G],U=et[r][G],a>=1&&this.PrintIterationResult(b,F,U,s,e,a),X},trstlp:function(t,e,i,r,s,n){var o,a,l,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w,S,T,N,M,A,R,k,L,j,I,B,D,Y,X=0,F=0,U=0,G=this.arr2(1+t,1+t),J=this.arr(2+e),z=this.arr(2+e),H=this.arr(1+t),V=this.arr(1+t),$=this.arr(2+e),q=this.arr(2+e),W=e,Q=0;for(l=1;l<=t;++l)G[l][l]=1,n[l]=0;if(o=0,a=0,e>=1){for(c=1;c<=e;++c)r[c]>a&&(a=r[c],o=c);for(c=1;c<=e;++c)q[c]=c,z[c]=a-r[c]}h=!0;do{t:for(;;){(!h||h&&0===a)&&(W=e+1,o=W,q[W]=W,z[W]=0),h=!1,u=0,d=0,p=0,f=0;e:do{if(m=W===e?a:-this.DOT_PRODUCT(this.PART(n,1,t),this.PART(this.COL(i,W),1,t)),0===d||m<u?(u=m,F=Q,d=3):Q>F?(F=Q,d=3):--d,0===d)break t;if(b=0,o<=Q){if(o<Q){v=q[o],g=z[o],c=o;do{for(_=c+1,C=q[_],P=this.DOT_PRODUCT(this.PART(this.COL(G,c),1,t),this.PART(this.COL(i,C),1,t)),X=Math.sqrt(P*P+J[_]*J[_]),O=J[_]/X,x=P/X,J[_]=O*J[c],J[c]=X,l=1;l<=t;++l)X=O*G[l][_]+x*G[l][c],G[l][_]=O*G[l][c]-x*G[l][_],G[l][c]=X;q[c]=C,z[c]=z[_],c=_}while(c<Q);q[c]=v,z[c]=g}if(--Q,W>e)for(X=1/J[Q],c=1;c<=t;++c)H[c]=X*G[c][Q];else for(X=this.DOT_PRODUCT(this.PART(H,1,t),this.PART(this.COL(G,Q+1),1,t)),c=1;c<=t;++c)H[c]-=X*G[c][Q+1]}else{for(C=q[o],c=1;c<=t;++c)V[c]=i[c][C];for(E=0,c=t;c>Q;){for(P=0,w=0,l=1;l<=t;++l)X=G[l][c]*V[l],P+=X,w+=Math.abs(X);if(S=w+.1*Math.abs(P),T=w+.2*Math.abs(P),(w>=S||S>=T)&&(P=0),0===E)E=P;else for(_=c+1,X=Math.sqrt(P*P+E*E),O=P/X,x=E/X,E=X,l=1;l<=t;++l)X=O*G[l][c]+x*G[l][_],G[l][_]=O*G[l][_]-x*G[l][c],G[l][c]=X;--c}if(0===E){b=-1,c=Q;do{for(N=0,M=0,l=1;l<=t;++l)X=G[l][c]*V[l],N+=X,M+=Math.abs(X);if(S=M+.1*Math.abs(N),T=M+.2*Math.abs(N),M<S&&S<T){if(X=N/J[c],X>0&&q[c]<=e&&(Y=z[c]/X,(b<0||Y<b)&&(b=Y)),c>=2)for(A=q[c],l=1;l<=t;++l)V[l]-=X*i[l][A];$[c]=X}else $[c]=0}while(--c>0);if(b<0)break t;for(c=1;c<=Q;++c)z[c]=Math.max(0,z[c]-b*$[c]);if(o<Q){v=q[o],g=z[o],c=o;do{for(_=c+1,A=q[_],P=this.DOT_PRODUCT(this.PART(this.COL(G,c),1,t),this.PART(this.COL(i,A),1,t)),X=Math.sqrt(P*P+J[_]*J[_]),O=J[_]/X,x=P/X,J[_]=O*J[c],J[c]=X,l=1;l<=t;++l)X=O*G[l][_]+x*G[l][c],G[l][_]=O*G[l][c]-x*G[l][_],G[l][c]=X;q[c]=A,z[c]=z[_],c=_}while(c<Q);q[c]=v,z[c]=g}if(0===(X=this.DOT_PRODUCT(this.PART(this.COL(G,Q),1,t),this.PART(this.COL(i,C),1,t))))break t;J[Q]=X,z[o]=0,z[Q]=b}else++Q,J[Q]=E,z[o]=z[Q],z[Q]=0;if(q[o]=q[Q],q[Q]=C,W>e&&C!==W){for(c=Q-1,P=this.DOT_PRODUCT(this.PART(this.COL(G,c),1,t),this.PART(this.COL(i,C),1,t)),X=Math.sqrt(P*P+J[Q]*J[Q]),O=J[Q]/X,x=P/X,J[Q]=O*J[c],J[c]=X,l=1;l<=t;++l)X=O*G[l][Q]+x*G[l][c],G[l][Q]=O*G[l][c]-x*G[l][Q],G[l][c]=X;q[Q]=q[c],q[c]=C,X=z[c],z[c]=z[Q],z[Q]=X}if(W>e)for(X=1/J[Q],c=1;c<=t;++c)H[c]=X*G[c][Q];else for(C=q[Q],X=(this.DOT_PRODUCT(this.PART(H,1,t),this.PART(this.COL(i,C),1,t))-1)/J[Q],c=1;c<=t;++c)H[c]-=X*G[c][Q]}for(R=s*s,L=0,k=0,l=1;l<=t;++l)Math.abs(n[l])>=1e-6*s&&(R-=n[l]*n[l]),L+=n[l]*H[l],k+=H[l]*H[l];if(R<=0)break t;if(X=Math.sqrt(k*R),Math.abs(L)>=1e-6*X&&(X=Math.sqrt(k*R+L*L)),f=R/(X+L),p=f,W===e){if(S=p+.1*a,T=p+.2*a,p>=S||S>=T)break e;p=Math.min(p,a)}for(c=1;c<=t;++c)V[c]=n[c]+p*H[c];if(W===e)for(U=a,a=0,c=1;c<=Q;++c)C=q[c],X=r[C]-this.DOT_PRODUCT(this.PART(this.COL(i,C),1,t),this.PART(V,1,t)),a=Math.max(a,X);c=Q;do{for(j=0,I=0,l=1;l<=t;++l)X=G[l][c]*V[l],j+=X,I+=Math.abs(X);if(S=I+.1*Math.abs(j),T=I+.2*Math.abs(j),(I>=S||S>=T)&&(j=0),$[c]=j/J[c],c>=2)for(C=q[c],l=1;l<=t;++l)V[l]-=$[c]*i[l][C]}while(c-- >=2);for(W>e&&($[Q]=Math.max(0,$[Q])),c=1;c<=t;++c)V[c]=n[c]+p*H[c];if(W>Q)for(B=Q+1,c=B;c<=W;++c){for(C=q[c],y=a-r[C],D=a+Math.abs(r[C]),l=1;l<=t;++l)X=i[l][C]*V[l],y+=X,D+=Math.abs(X);S=D+.1*Math.abs(y),T=D+.2*Math.abs(y),(D>=S||S>=T)&&(y=0),$[c]=y}for(b=1,o=0,c=1;c<=W;++c)$[c]<0&&(X=z[c]/(z[c]-$[c]))<b&&(b=X,o=c);for(X=1-b,c=1;c<=t;++c)n[c]=X*n[c]+b*V[c];for(c=1;c<=W;++c)z[c]=Math.max(0,X*z[c]+b*$[c]);W===e&&(a=U+b*(a-U))}while(o>0);if(p===f)return!0}}while(W===e);return!1},PrintIterationResult:function(t,e,i,r,s,n){n>1&&console.log("NFVALS = "+t+"  F = "+e+"  MAXCV = "+i),n>1&&console.log("X = "+this.PART(r,1,s))},ROW:function(t,e){return t[e].slice()},COL:function(t,e){var i,r=t.length,s=this.arr(r);for(i=0;i<r;++i)s[i]=t[i][e];return s},PART:function(t,e,i){return t.slice(e,i+1)},FORMAT:function(t){return t.join(",")},DOT_PRODUCT:function(t,e){var i,r=0,s=t.length;for(i=0;i<s;++i)r+=t[i]*e[i];return r}},t.Math.Nlp})),define("math/statistics",["jxg","math/math","utils/type"],(function(t,e,i){"use strict";return e.Statistics={sum:function(t){var e,i=t.length,r=0;for(e=0;e<i;e++)r+=t[e];return r},prod:function(t){var e,i=t.length,r=1;for(e=0;e<i;e++)r*=t[e];return r},mean:function(t){return t.length>0?this.sum(t)/t.length:0},median:function(t){var e,i;return t.length>0?(ArrayBuffer.isView(t)?(e=new Float64Array(t),e.sort()):(e=t.slice(0),e.sort((function(t,e){return t-e}))),i=e.length,1&i?e[parseInt(.5*i,10)]:.5*(e[.5*i-1]+e[.5*i])):0},percentile:function(t,e){var r,s,n,o,a,l=[];if(t.length>0){for(ArrayBuffer.isView(t)?(r=new Float64Array(t),r.sort()):(r=t.slice(0),r.sort((function(t,e){return t-e}))),s=r.length,o=i.isArray(e)?e:[e],n=0;n<o.length;n++)a=s*o[n]*.01,parseInt(a,10)===a?l.push(.5*(r[a-1]+r[a])):l.push(r[parseInt(a,10)]);return i.isArray(e)?l:l[0]}return 0},variance:function(t){var e,i,r,s=t.length;if(s>1){for(e=this.mean(t),i=0,r=0;r<s;r++)i+=(t[r]-e)*(t[r]-e);return i/(t.length-1)}return 0},sd:function(t){return Math.sqrt(this.variance(t))},weightedMean:function(t,e){if(t.length!==e.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return t.length>0?this.mean(this.multiply(t,e)):0},max:function(t){return Math.max.apply(this,t)},min:function(t){return Math.min.apply(this,t)},range:function(t){return[this.min(t),this.max(t)]},abs:function(t){var e,r,s;if(i.isArray(t))if(t.map)s=t.map(Math.abs);else for(r=t.length,s=[],e=0;e<r;e++)s[e]=Math.abs(t[e]);else s=ArrayBuffer.isView(t)?t.map(Math.abs):Math.abs(t);return s},add:function(t,e){var r,s,n=[];if(t=i.evalSlider(t),e=i.evalSlider(e),i.isArray(t)&&i.isNumber(e))for(s=t.length,r=0;r<s;r++)n[r]=t[r]+e;else if(i.isNumber(t)&&i.isArray(e))for(s=e.length,r=0;r<s;r++)n[r]=t+e[r];else if(i.isArray(t)&&i.isArray(e))for(s=Math.min(t.length,e.length),r=0;r<s;r++)n[r]=t[r]+e[r];else n=t+e;return n},div:function(t,e){var r,s,n=[];if(t=i.evalSlider(t),e=i.evalSlider(e),i.isArray(t)&&i.isNumber(e))for(s=t.length,r=0;r<s;r++)n[r]=t[r]/e;else if(i.isNumber(t)&&i.isArray(e))for(s=e.length,r=0;r<s;r++)n[r]=t/e[r];else if(i.isArray(t)&&i.isArray(e))for(s=Math.min(t.length,e.length),r=0;r<s;r++)n[r]=t[r]/e[r];else n=t/e;return n},divide:function(){t.deprecated("Statistics.divide()","Statistics.div()"),e.Statistics.div.apply(e.Statistics,arguments)},mod:function(t,r,s){var n,o,a=[],l=function(t,e){return t%e};if(s=i.def(s,!1),s&&(l=e.mod),t=i.evalSlider(t),r=i.evalSlider(r),i.isArray(t)&&i.isNumber(r))for(o=t.length,n=0;n<o;n++)a[n]=l(t[n],r);else if(i.isNumber(t)&&i.isArray(r))for(o=r.length,n=0;n<o;n++)a[n]=l(t,r[n]);else if(i.isArray(t)&&i.isArray(r))for(o=Math.min(t.length,r.length),n=0;n<o;n++)a[n]=l(t[n],r[n]);else a=l(t,r);return a},multiply:function(t,e){var r,s,n=[];if(t=i.evalSlider(t),e=i.evalSlider(e),i.isArray(t)&&i.isNumber(e))for(s=t.length,r=0;r<s;r++)n[r]=t[r]*e;else if(i.isNumber(t)&&i.isArray(e))for(s=e.length,r=0;r<s;r++)n[r]=t*e[r];else if(i.isArray(t)&&i.isArray(e))for(s=Math.min(t.length,e.length),r=0;r<s;r++)n[r]=t[r]*e[r];else n=t*e;return n},subtract:function(t,e){var r,s,n=[];if(t=i.evalSlider(t),e=i.evalSlider(e),i.isArray(t)&&i.isNumber(e))for(s=t.length,r=0;r<s;r++)n[r]=t[r]-e;else if(i.isNumber(t)&&i.isArray(e))for(s=e.length,r=0;r<s;r++)n[r]=t-e[r];else if(i.isArray(t)&&i.isArray(e))for(s=Math.min(t.length,e.length),r=0;r<s;r++)n[r]=t[r]-e[r];else n=t-e;return n},TheilSenRegression:function(t){var i,r,s=[],n=[],o=[];for(i=0;i<t.length;i++){for(n.length=0,r=0;r<t.length;r++)Math.abs(t[r].usrCoords[1]-t[i].usrCoords[1])>e.eps&&(n[r]=(t[r].usrCoords[2]-t[i].usrCoords[2])/(t[r].usrCoords[1]-t[i].usrCoords[1]));s[i]=this.median(n),o.push(t[i].usrCoords[2]-s[i]*t[i].usrCoords[1])}return[this.median(o),this.median(s),-1]},generateGaussian:function(t,e){var i,r,s;if(this.hasSpare)return this.hasSpare=!1,this.spare*e+t;do{i=2*Math.random()-1,r=2*Math.random()-1,s=i*i+r*r}while(s>=1||0===s);return s=Math.sqrt(-2*Math.log(s)/s),this.spare=r*s,this.hasSpare=!0,t+e*i*s}},e.Statistics})),define("math/geometry",["jxg","base/constants","base/coords","math/math","math/numerics","utils/type","utils/expect"],(function(t,e,i,r,s,n,o){"use strict";return r.Geometry={},t.extend(r.Geometry,{angle:function(e,i,r){var s,n,o,a,l=[],c=[],h=[];return t.deprecated("Geometry.angle()","Geometry.rad()"),e.coords?(l[0]=e.coords.usrCoords[1],l[1]=e.coords.usrCoords[2]):(l[0]=e[0],l[1]=e[1]),i.coords?(c[0]=i.coords.usrCoords[1],c[1]=i.coords.usrCoords[2]):(c[0]=i[0],c[1]=i[1]),r.coords?(h[0]=r.coords.usrCoords[1],h[1]=r.coords.usrCoords[2]):(h[0]=r[0],h[1]=r[1]),s=l[0]-c[0],n=l[1]-c[1],o=h[0]-c[0],a=h[1]-c[1],Math.atan2(s*a-n*o,s*o+n*a)},trueAngle:function(t,e,i){return 57.29577951308232*this.rad(t,e,i)},rad:function(t,e,i){var r,s,n,o,a,l,c;return t.coords?(r=t.coords.usrCoords[1],s=t.coords.usrCoords[2]):(r=t[0],s=t[1]),e.coords?(n=e.coords.usrCoords[1],o=e.coords.usrCoords[2]):(n=e[0],o=e[1]),i.coords?(a=i.coords.usrCoords[1],l=i.coords.usrCoords[2]):(a=i[0],l=i[1]),c=Math.atan2(l-o,a-n)-Math.atan2(s-o,r-n),c<0&&(c+=6.283185307179586),c},angleBisector:function(t,r,s,o){var a,l,c,h,u,d=t.coords.usrCoords,p=r.coords.usrCoords,f=s.coords.usrCoords;return n.exists(o)||(o=t.board),0===p[0]?new i(e.COORDS_BY_USER,[1,.5*(d[1]+f[1]),.5*(d[2]+f[2])],o):(h=d[1]-p[1],u=d[2]-p[2],a=Math.atan2(u,h),h=f[1]-p[1],u=f[2]-p[2],l=Math.atan2(u,h),c=.5*(a+l),a>l&&(c+=Math.PI),h=Math.cos(c)+p[1],u=Math.sin(c)+p[2],new i(e.COORDS_BY_USER,[1,h,u],o))},reflection:function(t,r,s){var o,a,l,c,h,u,d,p=r.coords.usrCoords,f=t.point1.coords.usrCoords,m=t.point2.coords.usrCoords;return n.exists(s)||(s=r.board),h=m[1]-f[1],u=m[2]-f[2],o=p[1]-f[1],a=p[2]-f[2],d=(h*a-u*o)/(h*h+u*u),l=p[1]+2*d*u,c=p[2]-2*d*h,new i(e.COORDS_BY_USER,[l,c],s)},rotation:function(t,r,s,o){var a,l,c,h,u,d,p=r.coords.usrCoords,f=t.coords.usrCoords;return n.exists(o)||(o=r.board),a=p[1]-f[1],l=p[2]-f[2],c=Math.cos(s),h=Math.sin(s),u=a*c-l*h+f[1],d=a*h+l*c+f[2],new i(e.COORDS_BY_USER,[u,d],o)},perpendicular:function(t,s,o){var a,l,c,h,u,d=t.point1.coords.usrCoords,p=t.point2.coords.usrCoords,f=s.coords.usrCoords;return n.exists(o)||(o=s.board),s===t.point1?(a=d[1]+p[2]-d[2],l=d[2]-p[1]+d[1],u=d[0]*p[0],Math.abs(u)<r.eps&&(a=p[2],l=-p[1]),h=[u,a,l],c=!0):s===t.point2?(a=p[1]+d[2]-p[2],l=p[2]-d[1]+p[1],u=d[0]*p[0],Math.abs(u)<r.eps&&(a=d[2],l=-d[1]),h=[u,a,l],c=!1):Math.abs(r.innerProduct(f,t.stdform,3))<r.eps?(a=f[1]+p[2]-f[2],l=f[2]-p[1]+f[1],u=p[0],Math.abs(u)<r.eps&&(a=p[2],l=-p[1]),c=!0,Math.abs(u)>r.eps&&Math.abs(a-f[1])<r.eps&&Math.abs(l-f[2])<r.eps&&(a=f[1]+d[2]-f[2],l=f[2]-d[1]+f[1],c=!1),h=[u,a,l]):(h=[0,t.stdform[1],t.stdform[2]],h=r.crossProduct(h,f),h=r.crossProduct(h,t.stdform),c=!0),[new i(e.COORDS_BY_USER,h,o),c]},circumcenterMidpoint:function(){t.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(t,s,o,a){var l,c,h,u,d=t.coords.usrCoords,p=s.coords.usrCoords,f=o.coords.usrCoords;return n.exists(a)||(a=t.board),l=[p[0]-d[0],-p[2]+d[2],p[1]-d[1]],c=[.5*(d[0]+p[0]),.5*(d[1]+p[1]),.5*(d[2]+p[2])],h=r.crossProduct(l,c),l=[f[0]-p[0],-f[2]+p[2],f[1]-p[1]],c=[.5*(p[0]+f[0]),.5*(p[1]+f[1]),.5*(p[2]+f[2])],u=r.crossProduct(l,c),new i(e.COORDS_BY_USER,r.crossProduct(h,u),a)},distance:function(t,e,i){var r,s=0;for(i||(i=Math.min(t.length,e.length)),r=0;r<i;r++)s+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(s)},affineDistance:function(t,e,i){var s;return s=this.distance(t,e,i),s>r.eps&&(Math.abs(t[0])<r.eps||Math.abs(e[0])<r.eps)?1/0:s},affineRatio:function(t,e,i){var s;return n.exists(t.usrCoords)&&(t=t.usrCoords),n.exists(e.usrCoords)&&(e=e.usrCoords),n.exists(i.usrCoords)&&(i=i.usrCoords),s=e[1]-t[1],Math.abs(s)>r.eps?(i[1]-t[1])/s:(i[2]-t[2])/(e[2]-t[2])},sortVertices:function(t){for(var e,i=o.each(t,o.coordsArray),r=i.length,s=null;i[0][0]===i[r-1][0]&&i[0][1]===i[r-1][1]&&i[0][2]===i[r-1][2];)s=i.pop(),r--;return e=i[0],i.sort((function(t,i){return(t[2]===e[2]&&t[1]===e[1]?-1/0:Math.atan2(t[2]-e[2],t[1]-e[1]))-(i[2]===e[2]&&i[1]===e[1]?-1/0:Math.atan2(i[2]-e[2],i[1]-e[1]))})),null!==s&&i.push(s),i},signedTriangle:function(t,e,i){var r=o.coordsArray(t),s=o.coordsArray(e),n=o.coordsArray(i);return.5*((s[1]-r[1])*(n[2]-r[2])-(s[2]-r[2])*(n[1]-r[1]))},signedPolygon:function(t,e){var i,r,s=0,n=o.each(t,o.coordsArray);for(void 0===e&&(e=!0),e?n.unshift(n[n.length-1]):n=this.sortVertices(n),r=n.length,i=1;i<r;i++)s+=n[i-1][1]*n[i][2]-n[i][1]*n[i-1][2];return.5*s},GrahamScan:function(t){var e,i=1,r=o.each(t,o.coordsArray),s=r.length;for(r=this.sortVertices(r),s=r.length,e=2;e<s;e++){for(;this.signedTriangle(r[i-1],r[i],r[e])<=0;){if(i>1)i-=1;else if(e===s-1)break;e+=1}i+=1,r=n.swap(r,i,e)}return r.slice(0,i)},calcStraight:function(t,i,s,o){var a,l,c,h,u,d,p,f,m,b;if(n.exists(o)||(o=10),d=n.evaluate(t.visProp.straightfirst),p=n.evaluate(t.visProp.straightlast),Math.abs(i.scrCoords[0])<r.eps&&(d=!0),Math.abs(s.scrCoords[0])<r.eps&&(p=!0),(d||p)&&(f=[],f[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,f[1]=t.stdform[1]/t.board.unitX,f[2]=-t.stdform[2]/t.board.unitY,!isNaN(f[0]+f[1]+f[2]))){if(a=!1,l=!1,a=!d&&Math.abs(i.usrCoords[0])>=r.eps&&i.scrCoords[1]>=0&&i.scrCoords[1]<=t.board.canvasWidth&&i.scrCoords[2]>=0&&i.scrCoords[2]<=t.board.canvasHeight,l=!p&&Math.abs(s.usrCoords[0])>=r.eps&&s.scrCoords[1]>=0&&s.scrCoords[1]<=t.board.canvasWidth&&s.scrCoords[2]>=0&&s.scrCoords[2]<=t.board.canvasHeight,c=this.meetLineBoard(f,t.board,o),h=c[0],u=c[1],!a&&!l){if(!d&&p&&!this.isSameDirection(i,s,h)&&!this.isSameDirection(i,s,u))return;if(d&&!p&&!this.isSameDirection(s,i,h)&&!this.isSameDirection(s,i,u))return}a?l||(b=this.isSameDir(i,s,h,u)?u:h):l?m=this.isSameDir(i,s,h,u)?h:u:this.isSameDir(i,s,h,u)?(m=h,b=u):(b=h,m=u),m&&i.setCoordinates(e.COORDS_BY_USER,m.usrCoords),b&&s.setCoordinates(e.COORDS_BY_USER,b.usrCoords)}},calcLineDelimitingPoints:function(t,i,s){var o,a,l,c,h,u,d,p,f,m,b=!1,v=!1;if(u=n.evaluate(t.visProp.straightfirst),d=n.evaluate(t.visProp.straightlast),Math.abs(i.scrCoords[0])<r.eps&&(u=!0),Math.abs(s.scrCoords[0])<r.eps&&(d=!0),p=[],p[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,p[1]=t.stdform[1]/t.board.unitX,p[2]=-t.stdform[2]/t.board.unitY,!isNaN(p[0]+p[1]+p[2])){if(b=!u,v=!d,a=t.board.getBoundingBox(),l=t.getSlope(),l>=0?(c=this.projectPointToLine({coords:{usrCoords:[1,a[2],a[1]]}},t,t.board),h=this.projectPointToLine({coords:{usrCoords:[1,a[0],a[3]]}},t,t.board)):(c=this.projectPointToLine({coords:{usrCoords:[1,a[0],a[1]]}},t,t.board),h=this.projectPointToLine({coords:{usrCoords:[1,a[2],a[3]]}},t,t.board)),!b&&!v){if(!u&&!d){if(o=i.distance(e.COORDS_BY_USER,s),Math.abs(i.distance(e.COORDS_BY_USER,c)+c.distance(e.COORDS_BY_USER,s)-o)>r.eps)return;if(Math.abs(i.distance(e.COORDS_BY_USER,h)+h.distance(e.COORDS_BY_USER,s)-o)>r.eps)return}if(!u&&d&&!this.isSameDirection(i,s,c)&&!this.isSameDirection(i,s,h))return;if(u&&!d&&!this.isSameDirection(s,i,c)&&!this.isSameDirection(s,i,h))return}b?v||(m=this.isSameDir(i,s,c,h)?h:c):v?f=this.isSameDir(i,s,c,h)?c:h:this.isSameDir(i,s,c,h)?(f=c,m=h):(m=c,f=h),f&&i.setCoordinates(e.COORDS_BY_USER,f.usrCoords),m&&s.setCoordinates(e.COORDS_BY_USER,m.usrCoords)}},calcLabelQuadrant:function(t){var e;return t<0&&(t+=2*Math.PI),e=Math.floor((t+Math.PI/8)/(Math.PI/4))%8,["rt","urt","top","ulft","lft","llft","lrt"][e]},isSameDir:function(t,e,i,s){var n=e.usrCoords[1]-t.usrCoords[1],o=e.usrCoords[2]-t.usrCoords[2],a=s.usrCoords[1]-i.usrCoords[1],l=s.usrCoords[2]-i.usrCoords[2];return Math.abs(e.usrCoords[0])<r.eps&&(n=e.usrCoords[1],o=e.usrCoords[2]),Math.abs(t.usrCoords[0])<r.eps&&(n=-t.usrCoords[1],o=-t.usrCoords[2]),n*a+o*l>=0},isSameDirection:function(t,e,i){var s,n,o,a,l=!1;return s=e.usrCoords[1]-t.usrCoords[1],n=e.usrCoords[2]-t.usrCoords[2],o=i.usrCoords[1]-t.usrCoords[1],a=i.usrCoords[2]-t.usrCoords[2],Math.abs(s)<r.eps&&(s=0),Math.abs(n)<r.eps&&(n=0),Math.abs(o)<r.eps&&(o=0),Math.abs(a)<r.eps&&(a=0),(s>=0&&o>=0||s<=0&&o<=0)&&(l=n>=0&&a>=0||n<=0&&a<=0),l},intersectionFunction:function(s,o,a,l,c,h){var u=this,d=!1,p=!1;return d=o.elementClass===e.OBJECT_CLASS_CURVE&&(o.type===e.OBJECT_TYPE_ARC||o.type===e.OBJECT_TYPE_SECTOR),p=a.elementClass===e.OBJECT_CLASS_CURVE&&(a.type===e.OBJECT_TYPE_ARC||a.type===e.OBJECT_TYPE_SECTOR),o.elementClass!==e.OBJECT_CLASS_CURVE&&a.elementClass!==e.OBJECT_CLASS_CURVE||o.elementClass!==e.OBJECT_CLASS_CURVE&&o.elementClass!==e.OBJECT_CLASS_CIRCLE||a.elementClass!==e.OBJECT_CLASS_CURVE&&a.elementClass!==e.OBJECT_CLASS_CIRCLE?o.elementClass===e.OBJECT_CLASS_CURVE&&!d&&a.elementClass===e.OBJECT_CLASS_LINE||a.elementClass===e.OBJECT_CLASS_CURVE&&!p&&o.elementClass===e.OBJECT_CLASS_LINE?function(){return u.meetCurveLine(o,a,l,o.board,h)}:o.elementClass===e.OBJECT_CLASS_LINE&&a.elementClass===e.OBJECT_CLASS_LINE?function(){var t,r,s=n.evaluate(o.visProp.straightfirst),c=n.evaluate(o.visProp.straightlast),d=n.evaluate(a.visProp.straightfirst),p=n.evaluate(a.visProp.straightlast);return n.evaluate(h)||s&&c&&d&&p?u.meet(o.stdform,a.stdform,l,o.board):(t=u.meetSegmentSegment(o.point1.coords.usrCoords,o.point2.coords.usrCoords,a.point1.coords.usrCoords,a.point2.coords.usrCoords),r=!s&&t[1]<0||!c&&t[1]>1||!d&&t[2]<0||!p&&t[2]>1?[0,NaN,NaN]:t[0],new i(e.COORDS_BY_USER,r,o.board))}:function(){var s,c,f,m=u.meet(o.stdform,a.stdform,l,o.board),b=!0;return h?m:o.elementClass===e.OBJECT_CLASS_LINE&&(s=n.evaluate(o.visProp.straightfirst),c=n.evaluate(o.visProp.straightlast),(!s||!c)&&(f=u.affineRatio(o.point1.coords,o.point2.coords,m),!c&&f>1+r.eps||!s&&f<0-r.eps))||a.elementClass===e.OBJECT_CLASS_LINE&&(s=n.evaluate(a.visProp.straightfirst),c=n.evaluate(a.visProp.straightlast),(!s||!c)&&(f=u.affineRatio(a.point1.coords,a.point2.coords,m),!c&&f>1+r.eps||!s&&f<0-r.eps))||d&&(b=u.coordsOnArc(o,m),b&&p&&(b=u.coordsOnArc(a,m)),!b)?new i(t.COORDS_BY_USER,[0,NaN,NaN],o.board):m}:function(){return u.meetCurveCurve(o,a,l,c,o.board)}},coordsOnArc:function(t,e){var i=this.rad(t.radiuspoint,t.center,e.usrCoords.slice(1)),r=0,s=this.rad(t.radiuspoint,t.center,t.anglepoint),o=n.evaluate(t.visProp.selection);return("minor"===o&&s>Math.PI||"major"===o&&s<Math.PI)&&(r=s,s=2*Math.PI),!(i<r||i>s)},meet:function(t,e,i,s){var n=r.eps;return Math.abs(t[3])<n&&Math.abs(e[3])<n?this.meetLineLine(t,e,i,s):Math.abs(t[3])>=n&&Math.abs(e[3])<n?this.meetLineCircle(e,t,i,s):Math.abs(t[3])<n&&Math.abs(e[3])>=n?this.meetLineCircle(t,e,i,s):this.meetCircleCircle(t,e,i,s)},meetLineBoard:function(t,s,o){var a,l,c,h,u=[];for(n.exists(o)||(o=0),u[0]=r.crossProduct(t,[o,0,1]),u[1]=r.crossProduct(t,[o,1,0]),u[2]=r.crossProduct(t,[-o-s.canvasHeight,0,1]),u[3]=r.crossProduct(t,[-o-s.canvasWidth,1,0]),c=0;c<4;c++)if(Math.abs(u[c][0])>r.eps){for(h=2;h>0;h--)u[c][h]/=u[c][0];u[c][0]=1}return Math.abs(u[1][0])<r.eps?(a=u[0],l=u[2]):Math.abs(u[0][0])<r.eps?(a=u[1],l=u[3]):u[1][2]<0?(a=u[0],l=u[3][2]>s.canvasHeight?u[2]:u[3]):u[1][2]>s.canvasHeight?(a=u[2],l=u[3][2]<0?u[0]:u[3]):(a=u[1],l=u[3][2]<0?u[0]:u[3][2]>s.canvasHeight?u[2]:u[3]),a=new i(e.COORDS_BY_SCREEN,a.slice(1),s),l=new i(e.COORDS_BY_SCREEN,l.slice(1),s),[a,l]},meetLineLine:function(t,s,n,o){var a=isNaN(t[5]+s[5])?[0,0,0]:r.crossProduct(t,s);return new i(e.COORDS_BY_USER,a,o)},meetLineCircle:function(t,s,n,o){var a,l,c,h,u,d,p,f,m,b;return s[4]<r.eps?Math.abs(r.innerProduct([1,s[6],s[7]],t,3))<r.eps?new i(e.COORDS_BY_USER,s.slice(6,8),o):new i(e.COORDS_BY_USER,[NaN,NaN],o):(c=s[0],l=s.slice(1,3),a=s[3],h=t[0],u=t.slice(1,3),d=a,p=l[0]*u[1]-l[1]*u[0],f=a*h*h-(l[0]*u[0]+l[1]*u[1])*h+c,m=p*p-4*d*f,m>-r.eps*r.eps?(m=Math.sqrt(Math.abs(m)),b=[(-p+m)/(2*d),(-p-m)/(2*d)],new i(e.COORDS_BY_USER,0===n?[-b[0]*-u[1]-h*u[0],-b[0]*u[0]-h*u[1]]:[-b[1]*-u[1]-h*u[0],-b[1]*u[0]-h*u[1]],o)):new i(e.COORDS_BY_USER,[0,0,0],o))},meetCircleCircle:function(t,s,n,o){var a;return t[4]<r.eps?Math.abs(this.distance(t.slice(6,2),s.slice(6,8))-s[4])<r.eps?new i(e.COORDS_BY_USER,t.slice(6,8),o):new i(e.COORDS_BY_USER,[0,0,0],o):s[4]<r.eps?Math.abs(this.distance(s.slice(6,2),t.slice(6,8))-t[4])<r.eps?new i(e.COORDS_BY_USER,s.slice(6,8),o):new i(e.COORDS_BY_USER,[0,0,0],o):(a=[s[3]*t[0]-t[3]*s[0],s[3]*t[1]-t[3]*s[1],s[3]*t[2]-t[3]*s[2],0,1,1/0,1/0,1/0],a=r.normalize(a),this.meetLineCircle(a,t,n,o))},meetCurveCurve:function(t,r,o,a,l,c){var h;return h=n.exists(c)&&"newton"===c?s.generalizedNewton(t,r,o,a):3===t.bezierDegree||3===r.bezierDegree?this.meetBezierCurveRedBlueSegments(t,r,o):this.meetCurveRedBlueSegments(t,r,o),new i(e.COORDS_BY_USER,h,l)},meetCurveLine:function(t,i,r,s,o){var a,l;return n.exists(s)||(s=t.board),t.elementClass===e.OBJECT_CLASS_CURVE?(a=t,l=i):(a=i,l=t),this.meetCurveLineDiscrete(a,l,r,s,!o)},meetCurveLineContinuous:function(t,n,o,a,l){var c,h,u,d,p,f,m,b,v,g,y,_,C,P,O=r.eps,x=r.eps;for(d=this.meetCurveLineDiscrete(t,n,o,a,l),p=d.usrCoords[1],f=d.usrCoords[2],h=function(e){var i,r;return e>t.maxX()||e<t.minX()?1/0:(i=p-t.X(e),r=f-t.Y(e),i*i+r*r)},u=function(e){var i=n.stdform[0]+n.stdform[1]*t.X(e)+n.stdform[2]*t.Y(e);return i*i},b=50,v=(t.maxX()-t.minX())/b,g=t.minX(),C=1e-4,_=NaN,y=0;y<b&&(c=s.root(h,[Math.max(g,t.minX()),Math.min(g+v,t.maxX())]),!((P=Math.abs(h(c)))<=C&&(C=P,_=c,C<O)));y++)g+=v;return c=_,c=s.root(u,[Math.max(c-v,t.minX()),Math.min(c+v,t.maxX())]),P=u(c),m=isNaN(P)||Math.abs(P)>x?0:1,new i(e.COORDS_BY_USER,[m,t.X(c),t.Y(c)],a)},meetCurveLineDiscrete:function(t,s,o,a,l){var c,h,u,d,p,f,m,b=s.point1.coords.usrCoords,v=s.point2.coords.usrCoords,g=0,y=t.numberPoints,_=n.evaluate(s.visProp.straightfirst),C=n.evaluate(s.visProp.straightlast);for(f=new i(e.COORDS_BY_USER,[0,NaN,NaN],a),0===b[0]?b=[1,v[1]+s.stdform[2],v[2]-s.stdform[1]]:0===v[0]&&(v=[1,b[1]+s.stdform[2],b[2]-s.stdform[1]]),d=t.points[0].usrCoords,c=1;c<y;c+=t.bezierDegree)if(u=d.slice(0),d=t.points[c].usrCoords,this.distance(u,d)>r.eps)for(m=3===t.bezierDegree?this.meetBeziersegmentBeziersegment([t.points[c-1].usrCoords.slice(1),t.points[c].usrCoords.slice(1),t.points[c+1].usrCoords.slice(1),t.points[c+2].usrCoords.slice(1)],[b.slice(1),v.slice(1)],l):[this.meetSegmentSegment(u,d,b,v)],h=0;h<m.length;h++)if(p=m[h],0<=p[1]&&p[1]<=1){if(g===o)return l&&(!_&&p[2]<0||!C&&p[2]>1)?f:f=new i(e.COORDS_BY_USER,p[0],a);g+=1}return f},meetCurveRedBlueSegments:function(t,e,i){var r,s,n,o,a,l,c,h,u,d=0,p=e.numberPoints,f=t.numberPoints;if(p<=1||f<=1)return[0,NaN,NaN];for(r=1;r<f;r++)for(n=t.points[r-1].usrCoords,o=t.points[r].usrCoords,h=Math.min(n[1],o[1]),u=Math.max(n[1],o[1]),l=e.points[0].usrCoords,s=1;s<p;s++)if(a=l,l=e.points[s].usrCoords,Math.min(a[1],l[1])<u&&Math.max(a[1],l[1])>h&&(c=this.meetSegmentSegment(n,o,a,l),c[1]>=0&&c[2]>=0&&(c[1]<1&&c[2]<1||r===f-1&&1===c[1]||s===p-1&&1===c[2]))){if(d===i)return c[0];d++}return[0,NaN,NaN]},meetSegmentSegment:function(t,e,i,s){var n,o,a,l,c=r.crossProduct(t,e),h=r.crossProduct(i,s),u=r.crossProduct(c,h);return Math.abs(u[0])<r.eps?[u,1/0,1/0]:(u[1]/=u[0],u[2]/=u[0],u[0]/=u[0],a=Math.abs(e[1]-e[0]*t[1])<r.eps?2:1,l=t[a]/t[0],n=(u[a]-l)/(0!==e[0]?e[a]/e[0]-l:e[a]),a=Math.abs(s[1]-s[0]*i[1])<r.eps?2:1,l=i[a]/i[0],o=(u[a]-l)/(0!==s[0]?s[a]/s[0]-l:s[a]),[u,n,o])},_bezierSplit:function(t){var e,i,r,s,n,o;return e=[.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],i=[.5*(t[1][0]+t[2][0]),.5*(t[1][1]+t[2][1])],r=[.5*(t[2][0]+t[3][0]),.5*(t[2][1]+t[3][1])],s=[.5*(e[0]+i[0]),.5*(e[1]+i[1])],n=[.5*(i[0]+r[0]),.5*(i[1]+r[1])],o=[.5*(s[0]+n[0]),.5*(s[1]+n[1])],[[t[0],e,s,o],[o,n,r,t[3]]]},_bezierBbox:function(t){var e=[];return 4===t.length?(e[0]=Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),e[1]=Math.max(t[0][1],t[1][1],t[2][1],t[3][1]),e[2]=Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),e[3]=Math.min(t[0][1],t[1][1],t[2][1],t[3][1])):(e[0]=Math.min(t[0][0],t[1][0]),e[1]=Math.max(t[0][1],t[1][1]),e[2]=Math.max(t[0][0],t[1][0]),e[3]=Math.min(t[0][1],t[1][1])),e},_bezierOverlap:function(t,e){return t[2]>=e[0]&&t[0]<=e[2]&&t[1]>=e[3]&&t[3]<=e[1]},_bezierListConcat:function(t,e,i,r){var s,o=n.exists(r),a=0,l=e.length,c=t.length;for(c>0&&l>0&&(1===t[c-1][1]&&0===e[0][1]||o&&1===t[c-1][2]&&0===e[0][2])&&(a=1),s=a;s<l;s++)o&&(e[s][2]*=.5,e[s][2]+=r),e[s][1]*=.5,e[s][1]+=i,t.push(e[s])},_bezierMeetSubdivision:function(t,e,i){var r,s,n,o,a,l,c,h,u,d,p,f,m=[];return s=this._bezierBbox(e),r=this._bezierBbox(t),this._bezierOverlap(s,r)?i<5?(n=this._bezierSplit(t),l=n[0],c=n[1],n=this._bezierSplit(e),o=n[0],a=n[1],this._bezierListConcat(m,this._bezierMeetSubdivision(l,o,i+1),0,0),this._bezierListConcat(m,this._bezierMeetSubdivision(l,a,i+1),0,.5),this._bezierListConcat(m,this._bezierMeetSubdivision(c,o,i+1),.5,0),this._bezierListConcat(m,this._bezierMeetSubdivision(c,a,i+1),.5,.5),m):(p=[1].concat(t[0]),f=[1].concat(t[3]),u=[1].concat(e[0]),d=[1].concat(e[3]),h=this.meetSegmentSegment(p,f,u,d),h[1]>=0&&h[2]>=0&&h[1]<=1&&h[2]<=1?[h]:[]):[]},_bezierLineMeetSubdivision:function(t,e,i,r){var s,n,o,a,l,c,h,u,d,p,f=[];return s=this._bezierBbox(e),n=this._bezierBbox(t),r&&!this._bezierOverlap(n,s)?[]:i<5?(o=this._bezierSplit(t),a=o[0],l=o[1],this._bezierListConcat(f,this._bezierLineMeetSubdivision(a,e,i+1),0),this._bezierListConcat(f,this._bezierLineMeetSubdivision(l,e,i+1),.5),f):(d=[1].concat(t[0]),p=[1].concat(t[3]),h=[1].concat(e[0]),u=[1].concat(e[1]),c=this.meetSegmentSegment(d,p,h,u),c[1]>=0&&c[1]<=1&&(!r||c[2]>=0&&c[2]<=1)?[c]:[])},meetBeziersegmentBeziersegment:function(t,e,i){var r,s,n;for(r=4===t.length&&4===e.length?this._bezierMeetSubdivision(t,e,0):this._bezierLineMeetSubdivision(t,e,0,i),r.sort((function(t,e){return 1e7*(t[1]-e[1])+(t[2]-e[2])})),s=[],n=0;n<r.length;n++)0!==n&&r[n][1]===r[n-1][1]&&r[n][2]===r[n-1][2]||s.push(r[n]);return s},meetBezierCurveRedBlueSegments:function(t,i,s){var n,o,a,l,c,h,u,d,p,f,m=0,b=0,v=i.numberPoints,g=t.numberPoints,y=[];if(v<i.bezierDegree+1||g<t.bezierDegree+1)return[0,NaN,NaN];for(v-=i.bezierDegree,g-=t.bezierDegree,t.type===e.OBJECT_TYPE_SECTOR&&(m=3,g-=3),i.type===e.OBJECT_TYPE_SECTOR&&(b=3,v-=3),o=m;o<g;o+=t.bezierDegree)for(n=t.points,h=[n[o].usrCoords.slice(1),n[o+1].usrCoords.slice(1)],3===t.bezierDegree&&(h[2]=n[o+2].usrCoords.slice(1),h[3]=n[o+3].usrCoords.slice(1)),d=this._bezierBbox(h),a=b;a<v;a+=i.bezierDegree)if(n=i.points,u=[n[a].usrCoords.slice(1),n[a+1].usrCoords.slice(1)],3===i.bezierDegree&&(u[2]=n[a+2].usrCoords.slice(1),u[3]=n[a+3].usrCoords.slice(1)),p=this._bezierBbox(u),this._bezierOverlap(d,p)){if(f=this.meetBeziersegmentBeziersegment(h,u),0===f.length)continue;for(l=0;l<f.length;l++)c=f[l],c[1]<-r.eps||c[1]>1+r.eps||c[2]<-r.eps||c[2]>1+r.eps||y.push(c);if(y.length>s)return y[s][0]}return y.length>s?y[s][0]:[0,NaN,NaN]},bezierSegmentEval:function(t,e){var i,r,s,n=1-t;return r=0,s=0,i=n*n*n,r+=i*e[0][0],s+=i*e[0][1],i=3*t*n*n,r+=i*e[1][0],s+=i*e[1][1],i=3*t*t*n,r+=i*e[2][0],s+=i*e[2][1],i=t*t*t,r+=i*e[3][0],s+=i*e[3][1],[1,r,s]},bezierArc:function(t,e,i,s,n){var o,a,l,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O=.5*Math.PI,x=e[1],E=e[2],w=e[0],S=[],T=[];for(h=this.distance(e,t),x/=w,E/=w,u=this.rad(t.slice(1),e.slice(1),i.slice(1)),-1===n&&(u=2*Math.PI-u),o=t,o[1]/=o[0],o[2]/=o[0],o[0]/=o[0],c=o.slice(0),s?(S=[x,x+.333*(o[1]-x),x+.666*(o[1]-x),o[1]],T=[E,E+.333*(o[2]-E),E+.666*(o[2]-E),o[2]]):(S=[o[1]],T=[o[2]]);u>r.eps;)u>O?(d=O,u-=O):(d=u,u=0),p=Math.cos(n*d),f=Math.sin(n*d),P=[[1,0,0],[x*(1-p)+E*f,p,-f],[E*(1-p)-x*f,f,p]],_=r.matVecMult(P,o),c=[_[0]/_[0],_[1]/_[0],_[2]/_[0]],m=o[1]-x,b=o[2]-E,v=c[1]-x,g=c[2]-E,C=Math.sqrt((m+v)*(m+v)+(b+g)*(b+g)),y=Math.abs(g-b)>r.eps?(m+v)*(h/C-.5)/(g-b)*8/3:(b+g)*(h/C-.5)/(m-v)*8/3,a=[1,o[1]-y*b,o[2]+y*m],l=[1,c[1]+y*g,c[2]-y*v],S=S.concat([a[1],l[1],c[1]]),T=T.concat([a[2],l[2],c[2]]),o=c.slice(0);return s&&(S=S.concat([c[1]+.333*(x-c[1]),c[1]+.666*(x-c[1]),x]),T=T.concat([c[2]+.333*(E-c[2]),c[2]+.666*(E-c[2]),E])),[S,T]},projectPointToCircle:function(t,s,o){var a,l,c,h,u,d=s.center.coords.usrCoords;return n.exists(o)||(o=t.board),n.isPoint(t)?(a=t.coords.distance(e.COORDS_BY_USER,s.center.coords),l=t.coords.usrCoords):(a=t.distance(e.COORDS_BY_USER,s.center.coords),l=t.usrCoords),Math.abs(a)<r.eps&&(a=r.eps),u=s.Radius()/a,c=d[1]+u*(l[1]-d[1]),h=d[2]+u*(l[2]-d[2]),new i(e.COORDS_BY_USER,[c,h],o)},projectPointToLine:function(t,s,o){var a,l=[0,s.stdform[1],s.stdform[2]];return n.exists(o)||(o=n.exists(t.coords)?t.board:s.board),a=n.exists(t.coords)?t.coords.usrCoords:t.usrCoords,l=r.crossProduct(l,a),new i(e.COORDS_BY_USER,r.crossProduct(l,s.stdform),o)},projectCoordsToSegment:function(t,e,i){var s,n,o=[i[1]-e[1],i[2]-e[2]],a=[t[1]-e[1],t[2]-e[2]];return Math.abs(o[0])<r.eps&&Math.abs(o[1])<r.eps?[e,0]:(s=r.innerProduct(a,o),n=r.innerProduct(o,o),s/=n,[[1,s*o[0]+e[1],s*o[1]+e[2]],s])},projectCoordsToBeziersegment:function(e,i,r){var s,n=function(t){var s=[1,i.X(r+t),i.Y(r+t)];return s[1]-=e[1],s[2]-=e[2],s[1]*s[1]+s[2]*s[2]};return s=t.Math.Numerics.fminbr(n,[0,1]),[[1,i.X(s+r),i.Y(s+r)],s]},projectPointToCurve:function(t,e,i){n.exists(i)||(i=t.board);var r=t.X(),s=t.Y(),o=t.position||0;return this.projectCoordsToCurve(r,s,o,e,i)},projectCoordsToCurve:function(t,r,o,a,l){var c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w,S,T,N,M=Number.POSITIVE_INFINITY;if(n.exists(l)||(l=a.board),"plot"===n.evaluate(a.visProp.curvetype)){if(o=0,p=M,c=0===a.numberPoints?[0,1,1]:[a.Z(0),a.X(0),a.Y(0)],a.numberPoints>1)for(b=[1,t,r],3===a.bezierDegree?d=0:y=[a.Z(0),a.X(0),a.Y(0)],u=0;u<a.numberPoints-1;u++)3===a.bezierDegree?C=this.projectCoordsToBeziersegment(b,a,d):(_=[a.Z(u+1),a.X(u+1),a.Y(u+1)],C=this.projectCoordsToSegment(b,y,_)),m=C[1],v=C[0],0<=m&&m<=1?(f=this.distance(v,b),g=u+m):m<0?(v=y,f=this.distance(y,b),g=u):m>1&&u===a.numberPoints-2&&(v=_,f=this.distance(v,b),g=a.numberPoints-1),f<p&&(p=f,o=g,c=v),3===a.bezierDegree?(d++,u+=2):y=_;h=new i(e.COORDS_BY_USER,c,l)}else{for(P=function(e){var i,s;return e<a.minX()||e>a.maxX()?1/0:(i=t-a.X(e),s=r-a.Y(e),i*i+s*s)},E=P(o),S=50,T=a.minX(),N=a.maxX(),w=(N-T)/S,O=T,u=0;u<S;u++)x=P(O),(x<E||E===1/0)&&(o=O,E=x),O+=w;o=s.fminbr(P,[Math.max(o-w,T),Math.min(o+w,N)]),o=o<T?T:o,o=o>N?N:o,h=new i(e.COORDS_BY_USER,[a.X(o),a.Y(o)],l)}return[a.updateTransform(h),o]},projectCoordsToPolygon:function(e,i){var r,s,n,o,a,l=i.vertices.length,c=1/0;for(r=0;r<l-1;r++)n=t.Math.Geometry.projectCoordsToSegment(e,i.vertices[r].coords.usrCoords,i.vertices[r+1].coords.usrCoords),0<=n[1]&&n[1]<=1?(s=t.Math.Geometry.distance(n[0],e,3),o=n[0]):n[1]<0?(s=t.Math.Geometry.distance(i.vertices[r].coords.usrCoords,e,3),o=i.vertices[r].coords.usrCoords):(s=t.Math.Geometry.distance(i.vertices[r+1].coords.usrCoords,e,3),o=i.vertices[r+1].coords.usrCoords),s<c&&(a=o.slice(0),c=s);return a},projectPointToTurtle:function(t,r,s){var o,a,l,c,h,u,d,p,f,m,b=0,v=0,g=Number.POSITIVE_INFINITY,y=r.objects.length;for(n.exists(s)||(s=t.board),h=0;h<y;h++)d=r.objects[h],d.elementClass===e.OBJECT_CLASS_CURVE&&(f=this.projectPointToCurve(t,d),o=f[0],m=f[1],u=this.distance(o.usrCoords,t.coords.usrCoords),u<g&&(l=o.usrCoords[1],c=o.usrCoords[2],a=m,g=u,p=d,v=b),b+=d.numberPoints);return o=new i(e.COORDS_BY_USER,[l,c],s),[p.updateTransform(o),a+v]},projectPointToPoint:function(t,e){return e.coords},projectPointToBoard:function(t,e){var i,s,n,o=e||t.board,a=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],l=t.coords||t,c=o.getBoundingBox();for(i=0;i<4;i++)n=a[i],n[0]*l.usrCoords[n[1]]<n[0]*c[n[2]]&&(s=r.crossProduct([1,c[n[3]],c[n[4]]],[1,c[n[5]],c[n[6]]]),s[3]=0,s=r.normalize(s),l=this.projectPointToLine({coords:l},{stdform:s},o));return l},distPointLine:function(t,e){var i,s=e[1],n=e[2],o=e[0];return Math.abs(s)+Math.abs(n)<r.eps?Number.POSITIVE_INFINITY:(i=s*t[1]+n*t[2]+o,s*=s,n*=n,Math.abs(i)/Math.sqrt(s+n))},reuleauxPolygon:function(t,e){var i,s=2*Math.PI,n=s/e,o=(e-1)/2,a=0,l=function(l,c){return function(h,u){var d=(h%s+s)%s,p=Math.floor(d/n)%e;return u||(a=t[0].Dist(t[o]),i=r.Geometry.rad([t[0].X()+1,t[0].Y()],t[0],t[o%e])),isNaN(p)?p:(d=.5*d+p*n*.5+i,t[p][l]()+a*Math[c](d))}};return[l("X","cos"),l("Y","sin"),0,s]}}),r.Geometry})),define("math/plot",["jxg","base/constants","base/coords","math/math","math/extrapolate","math/numerics","math/statistics","math/geometry","math/ia","utils/type"],(function(t,e,i,r,s,n,o,a,l,c){"use strict";return r.Plot={checkReal:function(t){var e,i,s=!1,n=t.length;for(e=0;e<n;e++)if(i=t[e].usrCoords,!isNaN(i[1])&&!isNaN(i[2])&&Math.abs(i[0])>r.eps){s=!0;break}return s},updateParametricCurveNaive:function(t,i,r,s){var n,o,a=!1,l=(r-i)/s;for(n=0;n<s;n++)o=i+n*l,t.points[n].setCoordinates(e.COORDS_BY_USER,[t.X(o,a),t.Y(o,a)],!1),t.points[n]._t=o,a=!0;return t},isSegmentOutside:function(t,e,i,r,s){return e<0&&r<0||e>s.canvasHeight&&r>s.canvasHeight||t<0&&i<0||t>s.canvasWidth&&i>s.canvasWidth},isDistOK:function(t,e,i,r){return Math.abs(t)<i&&Math.abs(e)<r&&!isNaN(t+e)},isSegmentDefined:function(t,e,i,r){return!(isNaN(t+e)&&isNaN(i+r))},updateParametricCurveOld:function(s,n,o){var a,l,c,h,u,d,p,f,m,b,v,g=!1,y=new i(e.COORDS_BY_USER,[0,0],s.board,!1),_=[],C=[],P=[],O=[],x=!1,E=0;for(t.deprecated("Curve.updateParametricCurveOld()"),s.board.updateQuality===s.board.BOARD_QUALITY_LOW?(m=15,b=10,v=10):(m=21,b=.7,v=.7),O[0]=o-n,a=1;a<m;a++)O[a]=.5*O[a-1];a=1,_[0]=1,C[0]=0,l=n,y.setCoordinates(e.COORDS_BY_USER,[s.X(l,g),s.Y(l,g)],!1),g=!0,u=y.scrCoords[1],d=y.scrCoords[2],l=o,y.setCoordinates(e.COORDS_BY_USER,[s.X(l,g),s.Y(l,g)],!1),c=y.scrCoords[1],h=y.scrCoords[2],P[0]=[c,h],p=1,f=0,s.points=[],s.points[E++]=new i(e.COORDS_BY_SCREEN,[u,d],s.board,!1);do{for(x=this.isDistOK(c-u,h-d,b,v)||this.isSegmentOutside(u,d,c,h,s.board);f<m&&(!x||f<6)&&(f<=7||this.isSegmentDefined(u,d,c,h));)_[p]=a,C[p]=f,P[p]=[c,h],p+=1,a=2*a-1,f++,l=n+a*O[f],y.setCoordinates(e.COORDS_BY_USER,[s.X(l,g),s.Y(l,g)],!1,!0),c=y.scrCoords[1],h=y.scrCoords[2],x=this.isDistOK(c-u,h-d,b,v)||this.isSegmentOutside(u,d,c,h,s.board);E>1&&function(t,e,i){var s,n,o=i[1]-t[1],a=i[2]-t[2],l=e[0]-t[1],c=e[1]-t[2],h=l*l+c*c;return h>=r.eps&&(s=(o*l+a*c)/h)>0&&(s<=1?(o-=s*l,a-=s*c):(o-=l,a-=c)),n=o*o+a*a,Math.sqrt(n)}(s.points[E-2].scrCoords,[c,h],s.points[E-1].scrCoords)<.015&&(E-=1),s.points[E]=new i(e.COORDS_BY_SCREEN,[c,h],s.board,!1),s.points[E]._t=l,E+=1,u=c,d=h,p-=1,c=P[p][0],h=P[p][1],f=C[p]+1,a=2*_[p]}while(p>0&&E<5e5);return s.numberPoints=s.points.length,s},_insertPoint_v2:function(t,e,i){var r=!isNaN(this._lastCrds[1]+this._lastCrds[2]),s=!isNaN(e.scrCoords[1]+e.scrCoords[2]),n=t.board.canvasWidth,o=t.board.canvasHeight;(!(s=s&&e.scrCoords[1]>-500&&e.scrCoords[2]>-500&&e.scrCoords[1]<n+500&&e.scrCoords[2]<o+500)&&r||s&&(!r||Math.abs(e.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(e.scrCoords[2]-this._lastCrds[2])>.7))&&(e._t=i,t.points.push(e),this._lastCrds=e.copy("scrCoords"))},neighborhood_isNaN_v2:function(t,s){var n,o,a=new i(e.COORDS_BY_USER,[0,0],t.board,!1);return n=s+r.eps,a.setCoordinates(e.COORDS_BY_USER,[t.X(n,!0),t.Y(n,!0)],!1),o=a.usrCoords,!(!isNaN(o[1]+o[2])&&(n=s-r.eps,a.setCoordinates(e.COORDS_BY_USER,[t.X(n,!0),t.Y(n,!0)],!1),o=a.usrCoords,!isNaN(o[1]+o[2])))},_borderCase:function(t,r,s,n,o,a,l,c){var h,u,d,p,f,m,b,v=null,g=!1;if(c<=1){if(u=new i(e.COORDS_BY_USER,[0,0],t.board,!1),isNaN(r[1]+r[2])&&!isNaN(n[1]+n[2])&&!this.neighborhood_isNaN_v2(t,o))return!1;if(isNaN(s[1]+s[2])&&!isNaN(n[1]+n[2])&&!this.neighborhood_isNaN_v2(t,a))return!1;if(isNaN(n[1]+n[2])&&(!isNaN(r[1]+r[2])||!isNaN(s[1]+s[2]))&&!this.neighborhood_isNaN_v2(t,l))return!1;p=0;do{if(isNaN(r[1]+r[2])&&!isNaN(n[1]+n[2]))f=o,m=l,b=a;else if(isNaN(s[1]+s[2])&&!isNaN(n[1]+n[2]))f=a,m=l,b=o;else if(isNaN(n[1]+n[2])&&!isNaN(s[1]+s[2]))f=l,m=a,b=a+(a-l);else{if(!isNaN(n[1]+n[2])||isNaN(r[1]+r[2]))return!1;f=l,m=o,b=o-(l-o)}h=.5*(f+m),u.setCoordinates(e.COORDS_BY_USER,[t.X(h,!0),t.Y(h,!0)],!1),d=u.usrCoords,g=isNaN(d[1]+d[2]),g?f=h:(b=m,m=h),++p}while(g&&p<30);if(p<30&&(v=d.slice(),n=d.slice(),m=h),t.X(m,!0),t.X(b,!0),t.Y(m,!0),t.Y(b,!0),null!==v)return this._insertPoint_v2(t,new i(e.COORDS_BY_USER,v,t.board,!1)),!0}return!1},_plotRecursive_v2:function(t,r,s,n,o,a,l){var c,h,u,d,p,f,m=0,b=new i(e.COORDS_BY_USER,[0,0],t.board,!1);if(!(t.numberPoints>65536))return a<this.nanLevel&&this._isUndefined(t,r,s,n,o)||a<this.nanLevel&&this._isOutside(r,s,n,o,t.board)||(c=.5*(s+o),b.setCoordinates(e.COORDS_BY_USER,[t.X(c,!0),t.Y(c,!0)],!1),h=b.scrCoords,this._borderCase(t,r,n,h,s,o,c,a)||(u=this._triangleDists(r,n,h),d=a<this.smoothLevel&&u[3]<l,p=a<this.jumpLevel&&(u[2]>.99*u[0]||u[1]>.99*u[0]||u[0]===1/0||u[1]===1/0||u[2]===1/0),f=a<this.smoothLevel+2&&u[0]<.5*(u[1]+u[2]),f&&(m=0,d=!1),--a,p?this._insertPoint_v2(t,new i(e.COORDS_BY_SCREEN,[NaN,NaN],t.board,!1),c):a<=m||d?this._insertPoint_v2(t,b,c):(this._plotRecursive_v2(t,r,s,h,c,a,l),isNaN(b.scrCoords[1]+b.scrCoords[2])||this._insertPoint_v2(t,b,c),this._plotRecursive_v2(t,h,c,n,o,a,l)))),this},updateParametricCurve_v2:function(t,r,s){var n,o,a,l,h,u,d,p,f,m=!1,b=new i(e.COORDS_BY_USER,[0,0],t.board,!1),v=new i(e.COORDS_BY_USER,[0,0],t.board,!1);return t.board.updateQuality===t.board.BOARD_QUALITY_LOW?(h=c.evaluate(t.visProp.recursiondepthlow)||13,u=2,this.smoothLevel=h-6,this.jumpLevel=3):(h=c.evaluate(t.visProp.recursiondepthhigh)||17,u=2,this.smoothLevel=h-9,this.jumpLevel=2),this.nanLevel=h-4,t.points=[],"x"===this.xterm?(p=t.board.getBoundingBox(),d=.3*(p[2]-p[0]),p[1],p[3],n=Math.max(r,p[0]-d),o=Math.min(s,p[2]+d)):(n=r,o=s),b.setCoordinates(e.COORDS_BY_USER,[t.X(n,m),t.Y(n,m)],!1),m=!0,v.setCoordinates(e.COORDS_BY_USER,[t.X(o,m),t.Y(o,m)],!1),f=this._findStartPoint(t,b.scrCoords,n,v.scrCoords,o),b.setCoordinates(e.COORDS_BY_SCREEN,f[0],!1),n=f[1],f=this._findStartPoint(t,v.scrCoords,o,b.scrCoords,n),v.setCoordinates(e.COORDS_BY_SCREEN,f[0],!1),o=f[1],this._visibleArea=[n,o],a=b.copy("scrCoords"),l=v.copy("scrCoords"),b._t=n,t.points.push(b),this._lastCrds=b.copy("scrCoords"),this._plotRecursive_v2(t,a,n,l,o,h,u),v._t=o,t.points.push(v),t.numberPoints=t.points.length,t},_insertLimesPoint:function(t,s,n,o,a){var l,c,h;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(a.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(a.left_y)===1/0||(l=new i(e.COORDS_BY_USER,[a.left_x,a.left_y],t.board),l._t=n,t.points.push(l),isNaN(a.left_x)||isNaN(a.left_y)||isNaN(a.right_x)||isNaN(a.right_y)||!(Math.abs(a.left_x-a.right_x)>r.eps||Math.abs(a.left_y-a.right_y)>r.eps)||(c=new i(e.COORDS_BY_SCREEN,s,t.board),c._t=n,t.points.push(c)),h=new i(e.COORDS_BY_USER,[a.right_x,a.right_y],t.board),h._t=n,t.points.push(h),this._lastScrCrds=h.copy("scrCoords"),this._lastUsrCrds=h.copy("usrCoords"))},_insertPoint:function(t,r,s,n,o){var a,l=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),h=!isNaN(r[1]+r[2]),u=t.board.canvasWidth,d=t.board.canvasHeight;c.exists(o)?this._insertLimesPoint(t,r,s,n,o):(h=h&&r[1]>-500&&r[2]>-500&&r[1]<u+500&&r[2]<d+500,(l||h)&&(h&&l&&Math.abs(r[1]-this._lastScrCrds[1])<.8&&Math.abs(r[2]-this._lastScrCrds[2])<.8||Math.abs(r[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(r[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||(a=new i(e.COORDS_BY_SCREEN,r,t.board),a._t=s,t.points.push(a),this._lastScrCrds=a.copy("scrCoords"),this._lastUsrCrds=a.copy("usrCoords"))))},_triangleDists:function(t,e,i){var r,s,n,o,l;return r=[t[0]*e[0],.5*(t[1]+e[1]),.5*(t[2]+e[2])],s=a.distance(t,e,3),n=a.distance(t,i,3),o=a.distance(i,e,3),l=a.distance(i,r,3),[s,n,o,l]},_isUndefined:function(t,r,s,n,o){var a,l,c;if(!isNaN(r[1]+r[2])||!isNaN(n[1]+n[2]))return!1;for(c=new i(e.COORDS_BY_USER,[0,0],t.board,!1),l=0;l<20;++l)if(a=s+Math.random()*(o-s),c.setCoordinates(e.COORDS_BY_USER,[t.X(a,!0),t.Y(a,!0)],!1),!isNaN(c.scrCoords[0]+c.scrCoords[1]+c.scrCoords[2]))return!1;return!0},_isOutside:function(t,e,i,r,s){var n=s.canvasWidth,o=s.canvasHeight;return!!(t[1]<-500&&i[1]<-500||t[2]<-500&&i[2]<-500||t[1]>n+500&&i[1]>n+500||t[2]>o+500&&i[2]>o+500)},_isOutsidePoint:function(t,e){var i=e.canvasWidth,r=e.canvasHeight;return!!(t[1]<-500||t[2]<-500||t[1]>i+500||t[2]>r+500)},_findStartPoint:function(t,r,s,n,o){return new i(e.COORDS_BY_USER,[0,0],t.board,!1),t.board.getBoundingBox(),[r,s]},_getBorderPos:function(t,s,n,o,a,l,c){var h,u,d,p,f,m,b=!1;if(u=new i(e.COORDS_BY_USER,[0,0],t.board,!1),p=0,isNaN(n[1]+n[2])&&!isNaN(a[1]+a[2]))m=s,f=o;else if(isNaN(c[1]+c[2])&&!isNaN(a[1]+a[2]))m=l,f=o;else if(isNaN(a[1]+a[2])&&!isNaN(c[1]+c[2]))m=o,f=l;else{if(!isNaN(a[1]+a[2])||isNaN(n[1]+n[2]))return!1;m=o,f=s}do{h=.5*(f+m),u.setCoordinates(e.COORDS_BY_USER,[t.X(h,!0),t.Y(h,!0)],!1),d=u.usrCoords,b=isNaN(d[1]+d[2]),b?m=h:f=h,++p}while(p<30&&Math.abs(f-m)>r.eps);return h},_getCuspPos:function(t,e,i){var r=[t.X(e,!0),t.Y(e,!0)],s=[t.X(i,!0),t.Y(i,!0)],o=function(e){var i=[t.X(e,!0),t.Y(e,!0)];return-(Math.sqrt((r[0]-i[0])*(r[0]-i[0])+(r[1]-i[1])*(r[1]-i[1]))+Math.sqrt((s[0]-i[0])*(s[0]-i[0])+(s[1]-i[1])*(s[1]-i[1])))};return n.fminbr(o,[e,i],t)},_getJumpPos:function(t,e,i){var s=function(e){var i=r.eps*r.eps,s=[t.X(e,!0),t.Y(e,!0)],n=[t.X(e+i,!0),t.Y(e+i,!0)];return-Math.abs((n[1]-s[1])/(n[0]-s[0]))};return n.fminbr(s,[e,i],t)},_getLimits:function(t,e){var i,r,n,o,a,l=2/(t.maxX()-t.minX());return i=s.limit(e,-l,t.X),r=i[0],"infinite"===i[1]&&(r=Math.sign(r)*(1/0)),i=s.limit(e,-l,t.Y),o=i[0],"infinite"===i[1]&&(o=Math.sign(o)*(1/0)),i=s.limit(e,l,t.X),n=i[0],"infinite"===i[1]&&(n=Math.sign(n)*(1/0)),i=s.limit(e,l,t.Y),a=i[0],"infinite"===i[1]&&(a=Math.sign(a)*(1/0)),{left_x:r,left_y:o,right_x:n,right_y:a,t:e}},_getLimes:function(t,e,i,r,s,n,o,a,l){var c;return"border"===a?c=this._getBorderPos(t,e,i,r,s,n,o):"cusp"===a?c=this._getCuspPos(t,e,n):"jump"===a&&(c=this._getJumpPos(t,e,n)),this._getLimits(t,c)},_plotNonRecursive:function(t,e,i,r,s,n){var o,a,l,c,h,u,d,p,f,m,b,v=null,g=!1,y="",_=[],C=0;for(p=t.board.origin.scrCoords,_[C++]=[e,i,r,s,n,1/0];C>0;){if(b=_[--C],e=b[0],i=b[1],r=b[2],s=b[3],f=b[4],m=b[5],g=!1,y="",v=null,t.points.length>65536)return;if(f<this.nanLevel){if(this._isUndefined(t,e,i,r,s))continue;if(this._isOutside(e,i,r,s,t.board))continue}o=.5*(i+s),u=t.X(o,!0),d=t.Y(o,!0),a=[1,p[1]+u*t.board.unitX,p[2]-d*t.board.unitY],l=this._triangleDists(e,r,a),c=isNaN(e[1]+e[2]),h=isNaN(r[1]+r[2]),c&&!h||!c&&h?y="border":l[0]>.66*m||l[0]<this.cusp_threshold*(l[1]+l[2])||l[1]>5*l[2]||l[2]>5*l[1]?y="cusp":(l[2]>this.jump_threshold*l[0]||l[1]>this.jump_threshold*l[0]||l[0]===1/0||l[1]===1/0||l[2]===1/0)&&(y="jump"),g=""===y&&f<this.smoothLevel&&l[3]<this.smooth_threshold,f<this.testLevel&&!g&&(""===y?g=!0:v=this._getLimes(t,i,e,o,a,s,r,y,f)),null!==v?(a=[1,NaN,NaN],this._insertPoint(t,a,o,f,v)):f<=0||g?this._insertPoint(t,a,o,f,null):(_[C++]=[a,o,r,s,f-1,l[0]],_[C++]=[e,i,a,o,f-1,l[0]])}return this},updateParametricCurve_v3:function(t,r,s){var n,o,a,l,h,u,d,p,f=!1,m=new i(e.COORDS_BY_USER,[0,0],t.board,!1),b=new i(e.COORDS_BY_USER,[0,0],t.board,!1);return h=t.board.updateQuality===t.board.BOARD_QUALITY_LOW?c.evaluate(t.visProp.recursiondepthlow)||14:c.evaluate(t.visProp.recursiondepthhigh)||17,this.smoothLevel=7,this.nanLevel=h-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,t.points=[],"x"===t.xterm?(d=t.board.getBoundingBox(),u=.3*(d[2]-d[0]),n=Math.max(r,d[0]-u),o=Math.min(s,d[2]+u)):(n=r,o=s),m.setCoordinates(e.COORDS_BY_USER,[t.X(n,f),t.Y(n,f)],!1),f=!0,b.setCoordinates(e.COORDS_BY_USER,[t.X(o,f),t.Y(o,f)],!1),p=this._findStartPoint(t,m.scrCoords,n,b.scrCoords,o),m.setCoordinates(e.COORDS_BY_SCREEN,p[0],!1),n=p[1],p=this._findStartPoint(t,b.scrCoords,o,m.scrCoords,n),b.setCoordinates(e.COORDS_BY_SCREEN,p[0],!1),o=p[1],this._visibleArea=[n,o],a=m.copy("scrCoords"),l=b.copy("scrCoords"),m._t=n,t.points.push(m),this._lastScrCrds=m.copy("scrCoords"),this._lastUsrCrds=m.copy("usrCoords"),this._plotNonRecursive(t,a,n,l,o,h),b._t=o,t.points.push(b),t.numberPoints=t.points.length,t},_criticalInterval:function(t,e,i){var r,s,n,a,l,c,h,u=!1,d=-1/0,p=!1,f=!1,m=0,b=[],v=[],g=[];for(h=o.abs(t),a=o.median(h),a<1e-7?(a=1e-7,p=!0):a*=this.criticalThreshold,r=0;r<e;r++)h[r]>a?(g.push({i:r,v:t[r],group:m}),d=r,u||(u=!0)):u&&r>d+4&&(g.length>0&&b.push(g.slice(0)),g=[],u=!1,m++);for(u&&g.length>1&&b.push(g.slice(0)),p&&0===b.length&&(f=!0),s=0;s<b.length;s++)if(v[s]="point",!((n=b[s].length)<64)){for(c=0,l=Math.sign(b[s][0].v),r=1;r<n;r++)Math.sign(b[s][r].v)!==l&&(c++,l=Math.sign(b[s][r].v));6*c>n&&(v[s]="interval")}return{smooth:f,groups:b,types:v}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(t,e,i,r){var s,n,o,a,l,c,h=[],u=0,d=0,p=0,f=!1,m=!1;for(o=(i-e)/r,h[u]=new this.Component,c=h[u],s=0,n=e;s<=r;s++,n+=o)a=t.X(n,m),l=t.Y(n,m),isNaN(a)||isNaN(l)?++p>1&&f&&(c.right_isNaN=!0,c.right_t=n-o,c.len=d,f=!1,u++,h[u]=new this.Component,c=h[u],p=0):(f||(f=!0,d=0,p>0&&(c.left_t=n-o,c.left_isNaN=!0)),p=0,c.t_values[d]=n,c.x_values[d]=a,c.y_values[d]=l,d++),0===s&&(m=!0);return f?c.len=d:h.pop(),h},getPointType:function(t,e,i,r,s,n,o){var a=s[0],l=n[0],c=r.length,h={idx:e,t:i,x:a[e],y:l[e],type:"other"};return e<5?(h.type="borderleft",h.idx=0,h.t=r[0],h.x=a[0],h.y=l[0],h):e>o-6?(h.type="borderright",h.idx=c-1,h.t=r[c-1],h.x=a[c-1],h.y=l[c-1],h):h},newtonApprox:function(t,e,i,r,s){var n,o=0;for(n=r;n>0;n--)o=(o+s[n][t])*(e-(n-1)*i)/n;return o+s[0][t]},thiele:function(t,e,i,r,s){var n,o=0;for(n=s;n>1;n--)o=(t-i[r+n])/(e[n][r+1]-e[n-2][r+1]+o);return e[0][r+1]+(t-i[r+1])/(e[1][r+1]+o)},differenceMethodExperiments:function(t,e){var i,r,s,n,o,a,l,c,h,u,d,p=t.t_values,f=t.x_values,m=t.y_values,b=[],v=[],g=[],y=[],_=[],C=[],P=[],O=[],x=0,E=[];for(o=p[1]-p[0],_.push([]),C.push([]),P.push([]),O.push([]),s=m.length,i=0;i<s;i++)_[0][i]=f[i],C[0][i]=m[i],P[0][i]=f[i],O[0][i]=m[i];for(_.push([]),C.push([]),P.push([]),O.push([]),a=o,s=m.length-1,i=0;i<s;i++)b[i]=f[i+1]-f[i],v[i]=m[i+1]-m[i],g[i]=b[i],y[i]=v[i],_[1][i]=b[i],C[1][i]=v[i],P[1][i]=a/b[i],O[1][i]=a/v[i];for(s--,n=Math.min(8,m.length-1),r=1;r<n;r++){for(_.push([]),C.push([]),P.push([]),O.push([]),a*=o,i=0;i<s;i++)b[i]=b[i+1]-b[i],v[i]=v[i+1]-v[i],_[r+1][i]=b[i],C[r+1][i]=v[i],P[r+1][i]=a/(P[r][i+1]-P[r][i])+P[r-1][i+1],O[r+1][i]=a/(O[r][i+1]-O[r][i])+O[r-1][i+1];if(!1===(d=this._criticalPoints(v,s,r))){console.log("Polynomial of degree",r),d=[];break}if(d.length>0&&++x>1&&r%2==0)break;s--}for(i=0;i<d.length;i++){for(c=-1/0,h=0;h<d[i].length;h++)(u=Math.abs(d[i][h].v))>c&&(c=u,l=h);l=Math.floor(d[i][l].i+r/2),E.push(this.getPointType(e,l,p,f,m,g,y,s+1))}return[E,_,C,P,O]},getCenterOfCriticalInterval:function(t,e,i){var r,s,n,o,a,l=0,c=0,h=i[1]-i[0],u=[];for(r=-1/0,u=[],s=0;s<t.length;s++)o=Math.abs(t[s].v),o>r?(u=[s],r=o,n=s):r===o&&u.push(s);if(u.length>0&&(a=u.reduce((function(t,e){return t+e}),0)/u.length,n=Math.floor(a),a+=t[0].i),r<1/0){for(s=0;s<t.length;s++)l+=Math.abs(t[s].v)*t[s].i,c+=Math.abs(t[s].v);a=l/c}return a+=e/2,[t[n].i+e/2,a,i[Math.floor(a)]+h*(a-Math.floor(a))]},differenceMethod:function(t,e){var i,r,s,n,o,a,l,c,h,u,d=t.t_values,p=t.x_values,f=t.y_values,m=[],b=[],v=0,g=-1,y=-1,_=[],C=[];for(s=f.length,m.push(new Float64Array(p)),b.push(new Float64Array(f)),s--,n=Math.min(12,s),r=0;r<n&&(m.push(new Float64Array(s)),b.push(new Float64Array(s)),m[r+1]=m[r].map((function(t,e,i){return i[e+1]-t})),b[r+1]=b[r].map((function(t,e,i){return i[e+1]-t})),c=this._criticalInterval(b[r+1],s,r),!0===c.smooth&&(y=r,_=[]),l=this._criticalInterval(m[r+1],s,r),-1===g&&!0===l.smooth&&(g=r),!(y>=0));r++){if(c.groups.length>0&&++v>2&&(r+1)%2==0){_=c.groups,u=c.types;break}s--}for(i=0;i<_.length;i++)"interval"!==u[i]&&(a=this.getCenterOfCriticalInterval(_[i],r+1,d),o=c[0],o=Math.floor(a[1]),h=a[2],C.push(this.getPointType(e,o,h,d,m,b,s+1)));return[C,m,b,g,y]},_insertPoint_v4:function(t,r,s,n){var o,a,l,c=null;t.points.length>0&&(c=t.points[t.points.length-1].scrCoords),o=new i(e.COORDS_BY_USER,r,t.board),null!==c&&(a=o.scrCoords[1]-c[1],l=o.scrCoords[2]-c[2],a*a+l*l<.8*.8)||(o._t=s,t.points.push(o))},getInterval:function(e,i,r){var s,n;return l.disable(),s=l.Interval(i,r),e.board.mathLib=l,e.board.mathLibJXG=l,e.X(s,!0),n=e.Y(s,!0),e.board.mathLib=Math,e.board.mathLibJXG=t.Math,n},sign:function(t){return t<0?-1:t>0?1:0},handleBorder:function(t,e,i,r,s){var n,o,a,l,h,u,d,p,f,m,b,v,g=i.idx;if(v=e.t_values[1]-e.t_values[0],"borderleft"===i.type?(n=e.left_isNaN?e.left_t:i.t-v,o=n,a=o+v):"borderright"===i.type?(n=e.right_isNaN?e.right_t:i.t+v,a=n,o=a-v):console.log("No bordercase!!!"),m=this.findComponents(t,o,a,32),0!==m.length){for("borderleft"===i.type&&(o=m[0].left_t,a=m[0].t_values[0],v=m[0].t_values[1]-m[0].t_values[0],o=null===o?a-v:o,n=o,l=this.getInterval(t,o,a),c.isObject(l)&&(d=l.lo,p=l.hi,h=t.X(n,!0),u=s[1][g]<0?p:d,this._insertPoint_v4(t,[1,h,u],n))),b=m[0].t_values.length,f=0;f<b;f++)n=m[0].t_values[f],h=m[0].x_values[f],u=m[0].y_values[f],this._insertPoint_v4(t,[1,h,u],n);"borderright"===i.type&&(o=m[0].t_values[b-1],a=m[0].right_t,v=m[0].t_values[1]-m[0].t_values[0],a=null===a?o+v:a,n=a,l=this.getInterval(t,o,a),c.isObject(l)&&(d=l.lo,p=l.hi,h=t.X(n,!0),u=s[1][g]>0?p:d,this._insertPoint_v4(t,[1,h,u],n)))}},_seconditeration_v4:function(t,e,i,r,s){var n,o,a,l,c,h,u,d,p,f,m,b,v;for(o=e.t_values[i.idx-2],a=e.t_values[i.idx+2],c=this.findComponents(t,o,a,64),u=0;u<c.length;u++){for(h=c[u],l=this.differenceMethod(h,t),d=l[0],f=l[1],m=l[2],b=0,p=0;p<=d.length;p++){for(v=p===d.length?h.len:d[p].idx,n=b;n<v;n++)isNaN(h.x_values[n])||isNaN(h.y_values[n])||this._insertPoint_v4(t,[1,h.x_values[n],h.y_values[n]],h.t_values[n]);p<d.length&&(this.handleSingularity(t,h,d[p],f,m),b=d[p].idx+1)}v=h.len,u<c.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],h.right_t)}return this},_recurse_v4:function(t,e,i,r,s,n,o,a){var l,c,h=.5*(e+i),u=t.X(h,!0),d=t.Y(h,!0);0!=a?(l=(u-r)*t.board.unitX,c=(d-s)*t.board.unitY,Math.sqrt(l*l+c*c)>2?this._recurse_v4(t,e,h,r,s,u,d,a-1):this._insertPoint_v4(t,[1,u,d],h),l=(u-n)*t.board.unitX,c=(d-o)*t.board.unitY,Math.sqrt(l*l+c*c)>2?this._recurse_v4(t,h,i,u,d,n,o,a-1):this._insertPoint_v4(t,[1,u,d],h)):this._insertPoint_v4(t,[1,NaN,NaN],h)},handleSingularity:function(t,e,i,r,s){var n,o,a,l,h,u,d,p,f,m,b,v=i.idx;n=i.t,console.log("HandleSingularity at t =",n),o=e.t_values[v-5],a=e.t_values[v+5],l=this.getInterval(t,o,a),c.isObject(l)?(p=l.lo,f=l.hi):s[0][v-1]<s[0][v+1]?(p=s[0][v-1],f=s[0][v+1]):(p=s[0][v+1],f=s[0][v-1]),d=t.X(n,!0),m=(s[0][v-3]-s[0][v-5])/(e.t_values[v-3]-e.t_values[v-5]),b=(s[0][v+3]-s[0][v+5])/(e.t_values[v+3]-e.t_values[v+5]),console.log(":::",m,b),m<-100?(this._insertPoint_v4(t,[1,d,p],n,!0),b<=100&&this._insertPoint_v4(t,[1,NaN,NaN],n)):m>100?(this._insertPoint_v4(t,[1,d,f],n),b>=-100&&this._insertPoint_v4(t,[1,NaN,NaN],n)):(p===-1/0&&(this._insertPoint_v4(t,[1,d,p],n,!0),this._insertPoint_v4(t,[1,NaN,NaN],n)),f===1/0&&(this._insertPoint_v4(t,[1,NaN,NaN],n),this._insertPoint_v4(t,[1,d,f],n,!0)),i.t<e.t_values[v]?(h=v-1,u=v):(h=v,u=v+1),o=e.t_values[h],a=e.t_values[u],this._recurse_v4(t,o,a,r[0][h],s[0][h],r[0][u],s[0][u],10)),b<-100?this._insertPoint_v4(t,[1,d,f],n):b>100&&this._insertPoint_v4(t,[1,d,p],n)},steps:1021,criticalThreshold:1e3,plot_v4:function(t,e,i,r){var s,o,a,l,h,u,d,p,f,m,b,v,g,y,_,C=(i-e)/r,P=function(e){return t.Y(e,!0)},O=function(e){return-t.Y(e,!0)},x=.5*C;for(a=this.findComponents(t,e,i,r),l=0;l<a.length;l++){for(h=a[l],f=this.differenceMethod(h,t),u=f[0],m=f[1],b=f[2],f[3],f[4],0!==u.length&&"borderleft"===u[0].type||u.unshift({idx:0,t:h.t_values[0],x:h.x_values[0],y:h.y_values[0],type:"borderleft"}),"borderright"!==u[u.length-1].type&&(o=h.t_values.length,u.push({idx:o-1,t:h.t_values[o-1],x:h.x_values[o-1],y:h.y_values[o-1],type:"borderright"})),p=0,d=0;d<=u.length;d++){for(o=d===u.length?h.len:u[d].idx-1,0,0,s=p;s<o-2;s++)this._insertPoint_v4(t,[1,h.x_values[s],h.y_values[s]],h.t_values[s]),Math.max(0,s-2),s>=p+3&&s<o-3&&b.length>3&&Math.abs(b[2][s])>.2*Math.abs(b[0][s])?(v=h.t_values[s],x=.25*C,_=this.getInterval(t,v,v+C),c.isObject(_)?b[2][s]>0?this._insertPoint_v4(t,[1,v+x,_.lo],v+x):this._insertPoint_v4(t,[1,v+C-x,_.hi],v+C-x):(g=n.fminbr(P,[v,v+C]),y=n.fminbr(O,[v,v+C]),g<y?(this._insertPoint_v4(t,[1,t.X(g,!0),t.Y(g,!0)],g),this._insertPoint_v4(t,[1,t.X(y,!0),t.Y(y,!0)],y)):(this._insertPoint_v4(t,[1,t.X(y,!0),t.Y(y,!0)],y),this._insertPoint_v4(t,[1,t.X(g,!0),t.Y(g,!0)],g)))):0;d<u.length&&(s=u[d].idx,"borderleft"===u[d].type||"borderright"===u[d].type?this.handleBorder(t,h,u[d],m,b):this._seconditeration_v4(t,h,u[d],m,b),p=u[d].idx+1+1)}o=h.len,l<a.length-1&&this._insertPoint_v4(t,[1,NaN,NaN],h.right_t)}},updateParametricCurve_v4:function(t,e,i){var r,s,n,o;"x"===t.xterm?(o=t.board.getBoundingBox(),n=.3*(o[2]-o[0]),r=Math.max(e,o[0]-n),s=Math.min(i,o[2]+n)):(r=e,s=i),t.points=[],this.plot_v4(t,r,s,this.steps),t.numberPoints=t.points.length},updateParametricCurve:function(t,e,i){return this.updateParametricCurve_v2(t,e,i)}},r.Plot})),define("math/metapost",["utils/type","math/math"],(function(t,e){"use strict";return e.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(t){var e,i,r,s,n,o,a,l,c,h,u,d,p,f,m;a=t[0];do{if(!a)break;o=a.next,a.rtype>this.MP_EXPLICIT&&(a.x-o.x)*(a.x-o.x)+(a.y-o.y)*(a.y-o.y)<this.EPS_SQ&&(a.rtype=this.MP_EXPLICIT,a.ltype===this.MP_OPEN&&(a.ltype=this.MP_CURL,a.set_left_curl(this.UNITY)),o.ltype=this.MP_EXPLICIT,o.rtype===this.MP_OPEN&&(o.rtype=this.MP_CURL,o.set_right_curl(this.UNITY)),a.rx=a.x,o.lx=a.x,a.ry=a.y,o.ly=a.y),a=o}while(a!==t[0]);for(i=t[0];;){if(i.ltype!==this.MP_OPEN||i.rtype!==this.MP_OPEN)break;if((i=i.next)===t[0]){i.ltype=this.MP_END_CYCLE;break}}for(a=i;;){if(!a)break;if(o=a.next,a.rtype>=this.MP_GIVEN){for(;o.ltype===this.MP_OPEN&&o.rtype===this.MP_OPEN;)o=o.next;for(r=0,l=a,n=t.length,d=[],p=[],f=[],m=[null];;)if(h=l.next,d.push(h.x-l.x),p.push(h.y-l.y),f.push(this.mp_pyth_add(d[r],p[r])),r>0&&(u=p[r-1]/f[r-1],c=d[r-1]/f[r-1],m.push(Math.atan2(p[r]*c-d[r]*u,d[r]*c+p[r]*u))),r++,l=h,l===o&&(n=r),r>=n&&l.ltype!==this.MP_END_CYCLE)break;r===n?m.push(0):m.push(m[1]),o.ltype===this.MP_OPEN&&(s=o.rx-o.x,e=o.ry-o.y,s*s+e*e<this.EPS_SQ?(o.ltype=this.MP_CURL,o.set_left_curl(this.UNITY)):(o.ltype=this.MP_GIVEN,o.set_left_given(Math.atan2(e,s)))),a.rtype===this.MP_OPEN&&a.ltype===this.MP_EXPLICIT&&(s=a.x-a.lx,e=a.y-a.ly,s*s+e*e<this.EPS_SQ?(a.rtype=this.MP_CURL,a.set_right_curl(this.UNITY)):(a.rtype=this.MP_GIVEN,a.set_right_given(Math.atan2(e,s)))),this.mp_solve_choices(a,o,n,d,p,f,m)}else a.rtype===this.MP_ENDPOINT&&(a.rx=a.x,a.ry=a.y,o.lx=o.x,o.ly=o.y);if((a=o)===i)break}},mp_solve_choices:function(t,e,i,r,s,n,o){var a,l,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w,S,T,N,M,A,R;for(u=n.length+1,b=new Array(u),m=new Array(u),c=new Array(u),C=new Array(u),A=0;A<u;A++)C[A]=c[A]=m[A]=b[A]=0;for(p=0,f=t,g=0;;){if(y=f.next,0===p)if(f.rtype===this.MP_GIVEN){if(y.ltype===this.MP_GIVEN)return a=Math.atan2(s[0],r[0]),E=this.mp_n_sin_cos(t.right_given()-a),w=E[0],S=E[1],T=this.mp_n_sin_cos(e.left_given()-a),N=T[0],M=T[1],void this.mp_set_controls(t,e,r[0],s[0],S,w,-M,N);c[0]=f.right_given()-Math.atan2(s[0],r[0]),c[0]=this.reduce_angle(c[0]),b[0]=0,m[0]=0}else if(f.rtype===this.MP_CURL){if(y.ltype===this.MP_CURL)return t.rtype=this.MP_EXPLICIT,e.ltype=this.MP_EXPLICIT,v=Math.abs(e.left_tension()),P=Math.abs(t.right_tension()),_=this.UNITY/(3*P),t.rx=t.x+r[0]*_,t.ry=t.y+s[0]*_,_=this.UNITY/(3*v),e.lx=e.x-r[0]*_,void(e.ly=e.y-s[0]*_);x=f.right_curl(),v=Math.abs(y.left_tension()),P=Math.abs(f.right_tension()),b[0]=this.mp_curl_ratio(x,P,v),c[0]=-o[1]*b[0],m[0]=0}else f.rtype===this.MP_OPEN&&(b[0]=0,c[0]=0,m[0]=this.FRACTION_ONE);else if(f.ltype===this.MP_END_CYCLE||f.ltype===this.MP_OPEN){if(a=this.UNITY/(3*Math.abs(g.right_tension())-this.UNITY),O=n[p]*(this.FRACTION_THREE-this.UNITY/Math.abs(g.right_tension())),h=this.UNITY/(3*Math.abs(y.left_tension())-this.UNITY),d=n[p-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(y.left_tension())),x=this.FRACTION_ONE-b[p-1]*a,O*=x,v=Math.abs(f.left_tension()),P=Math.abs(f.right_tension()),v<P?O*=Math.pow(v/P,2):v>P&&(d*=Math.pow(P/v,2)),_=d/(d+O),b[p]=_*h,l=-o[p+1]*b[p],g.rtype===this.MP_CURL?(m[p]=0,c[p]=l-o[1]*(this.FRACTION_ONE-_)):(_=(this.FRACTION_ONE-_)/x,l-=o[p]*_,_*=a,c[p]=l-c[p-1]*_,m[p]=-m[p-1]*_),f.ltype===this.MP_END_CYCLE){for(a=0,h=this.FRACTION_ONE;;)if(p-=1,0===p&&(p=i),a=c[p]-a*b[p],h=m[p]-h*b[p],p===i)break;for(a/=this.FRACTION_ONE-h,C[i]=a,c[0]=a,R=1;R<i;R++)c[R]=c[R]+a*m[R];break}}else{if(f.ltype===this.MP_CURL){x=f.left_curl(),v=Math.abs(f.left_tension()),P=Math.abs(g.right_tension()),_=this.mp_curl_ratio(x,v,P),C[i]=-c[i-1]*_/(this.FRACTION_ONE-_*b[i-1]);break}if(f.ltype===this.MP_GIVEN){C[i]=f.left_given()-Math.atan2(s[i-1],r[i-1]),C[i]=this.reduce_angle(C[i]);break}}g=f,f=y,p+=1}for(p=i-1;p>-1;p--)C[p]=c[p]-C[p+1]*b[p];for(f=t,p=0;;)if(y=f.next,E=this.mp_n_sin_cos(C[p]),w=E[0],S=E[1],T=this.mp_n_sin_cos(-o[p+1]-C[p+1]),N=T[0],M=T[1],this.mp_set_controls(f,y,r[p],s[p],S,w,M,N),p++,f=y,p===i)break},mp_n_sin_cos:function(t){return[Math.cos(t),Math.sin(t)]},mp_set_controls:function(t,e,i,r,s,n,o,a){var l,c,h,u,d;h=Math.abs(e.left_tension()),l=Math.abs(t.right_tension()),d=this.mp_velocity(s,n,o,a,l),c=this.mp_velocity(o,a,s,n,h),(t.right_tension()<0||e.left_tension()<0)&&(s>=0&&o>=0||s<=0&&o<=0)&&(u=Math.abs(s)*a+Math.abs(o)*n)>0&&(u*=1.00024414062,t.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(o),this.FRACTION_ONE,d,u)<0&&(d=Math.abs(o)/u),e.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(s),this.FRACTION_ONE,c,u)<0&&(c=Math.abs(s)/u)),t.rx=t.x+(i*n-r*s)*d,t.ry=t.y+(r*n+i*s)*d,e.lx=e.x-(i*a+r*o)*c,e.ly=e.y-(r*a-i*o)*c,t.rtype=this.MP_EXPLICIT,e.ltype=this.MP_EXPLICIT},mp_pyth_add:function(t,e){return Math.sqrt(t*t+e*e)},mp_curl_ratio:function(t,e,i){var r=1/e,s=1/i;return Math.min(4,((3-r)*r*r*t+s*s*s)/(r*r*r*t+(3-s)*s*s))},mp_ab_vs_cd:function(t,e,i,r){return t*e==i*r?0:t*e>i*r?1:-1},mp_velocity:function(t,e,i,r,s){return Math.min(4,(2+Math.sqrt(2)*(t-i/16)*(i-t/16)*(e-r))/(1.5*s*(2+(Math.sqrt(5)-1)*e+(3-Math.sqrt(5))*r)))},reduce_angle:function(t){return Math.abs(t)>this.ONE_EIGHTY_DEG&&(t>0?t-=this.THREE_SIXTY_DEG:t+=this.THREE_SIXTY_DEG),t},makeknots:function(t,e,i){var r,s,n=[];for(e=e||1,s=t.length,r=0;r<s;r++)n.push({x:t[r][0],y:t[r][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,ly:e,ry:e,lx:e,rx:e,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||(this.ly=1),this.ly},right_tension:function(){return this.ry||(this.ry=1),this.ry},set_right_curl:function(t){this.rx=t||0},set_left_curl:function(t){this.lx=t||0}});for(s=n.length,r=0;r<s;r++)n[r].next=n[r+1]||n[r],n[r].set_right_given=n[r].set_right_curl,n[r].set_left_given=n[r].set_left_curl,n[r].right_given=n[r].right_curl,n[r].left_given=n[r].left_curl;return n[s-1].next=n[0],i||(n[s-1].rtype=this.MP_ENDPOINT,n[s-1].ltype=this.MP_CURL,n[0].rtype=this.MP_CURL),n},curve:function(e,i){var r,s,n,o,a=[],l=[];for(n in i=i||{tension:1,direction:{},curl:{},isClosed:!1},r=this.makeknots(e,t.evaluate(i.tension),i.isClosed),s=r.length,i.direction)i.direction.hasOwnProperty(n)&&(o=t.evaluate(i.direction[n]),t.isArray(o)?(!1!==o[0]&&(r[n].lx=o[0]*Math.PI/180,r[n].ltype=this.MP_GIVEN),!1!==o[1]&&(r[n].rx=o[1]*Math.PI/180,r[n].rtype=this.MP_GIVEN)):(r[n].lx=o*Math.PI/180,r[n].rx=o*Math.PI/180,r[n].ltype=r[n].rtype=this.MP_GIVEN));for(n in i.curl)i.curl.hasOwnProperty(n)&&(o=t.evaluate(i.curl[n]),0===parseInt(n,10)?(r[n].rtype=this.MP_CURL,r[n].set_right_curl(o)):parseInt(n,10)===s-1&&(r[n].ltype=this.MP_CURL,r[n].set_left_curl(o)));for(this.make_choices(r),n=0;n<s-1;n++)a.push(r[n].x),a.push(r[n].rx),a.push(r[n+1].lx),l.push(r[n].y),l.push(r[n].ry),l.push(r[n+1].ly);return a.push(r[s-1].x),l.push(r[s-1].y),i.isClosed&&(a.push(r[s-1].rx),l.push(r[s-1].ry),a.push(r[0].lx),l.push(r[0].ly),a.push(r[0].x),l.push(r[0].y)),[a,l]}},e.Metapost})),define("utils/zip",["jxg"],(function(t){"use strict";var e=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],n=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],a=256;return t.Util=t.Util||{},t.Util.Unzip=function(l){function c(){return 8,L<k?l[L++]:-1}function h(){j=1}function u(){var t;try{return t=1&j,j>>=1,0===j&&(j=c(),t=1&j,j=j>>1|128),t}catch(t){throw t}}function d(t){var i=0,r=t;try{for(;r--;)i=i<<1|u();t&&(i=e[i]>>8-t)}catch(t){throw t}return i}function p(){A=0}function f(t){M[A++]=t,S.push(String.fromCharCode(t)),32768===A&&(A=0)}function m(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function b(){for(;;){if(F[X]>=w)return-1;if(E[F[X]]===X)return F[X]++;F[X]++}}function v(){var t,e=Y[D];if(17===X)return-1;if(D++,X++,(t=b())>=0)e.b0=t;else if(e.b0=32768,v())return-1;if((t=b())>=0)e.b1=t,e.jump=null;else if(e.b1=32768,e.jump=Y[D],e.jumppos=D,v())return-1;return X--,0}function g(t,e,i,r){var s;for(Y=t,D=0,E=i,w=e,s=0;s<17;s++)F[s]=0;return X=0,v()?-1:0}function y(t){for(var e,i,r=0,s=t[r];;)if(u()){if(!(32768&s.b1))return s.b1;for(s=s.jump,e=t.length,i=0;i<e;i++)if(t[i]===s){r=i;break}}else{if(!(32768&s.b0))return s.b0;r++,s=t[r]}}function _(){var a,l,b,v,_,C,P,O,x,E,w,S,T,N,R,k;do{if(a=u(),0===(b=d(2)))for(h(),E=c(),E|=c()<<8,S=c(),S|=c()<<8,65535&(E^~S)&&t.debug("BlockLen checksum mismatch\n");E--;)l=c(),f(l);else if(1===b)for(;;)if(_=e[d(7)]>>1,_>23?(_=_<<1|u(),_>199?(_-=128,_=_<<1|u()):(_-=48)>143&&(_+=136)):_+=256,_<256)f(_);else{if(256===_)break;for(_-=257,x=d(r[_])+i[_],_=e[d(5)]>>3,n[_]>8?(w=d(8),w|=d(n[_]-8)<<8):w=d(n[_]),w+=s[_],_=0;_<x;_++)l=M[A-w&32767],f(l)}else if(2===b){for(P=new Array(320),N=257+d(5),R=1+d(5),k=4+d(4),_=0;_<19;_++)P[_]=0;for(_=0;_<k;_++)P[o[_]]=d(3);for(x=B.length,v=0;v<x;v++)B[v]=new m;if(g(B,19,P,0))return p(),1;for(T=N+R,v=0,-1;v<T;)if((_=y(B))<16)P[v++]=_;else if(16===_){if(_=3+d(2),v+_>T)return p(),1;for(C=v?P[v-1]:0;_--;)P[v++]=C}else{if(_=17===_?3+d(3):11+d(7),v+_>T)return p(),1;for(;_--;)P[v++]=0}for(x=I.length,v=0;v<x;v++)I[v]=new m;if(g(I,N,P,0))return p(),1;for(x=I.length,v=0;v<x;v++)B[v]=new m;for(O=[],v=N;v<P.length;v++)O[v-N]=P[v];if(g(B,R,O,0))return p(),1;for(;;)if((_=y(I))>=256){if(0===(_-=256))break;for(_-=1,x=d(r[_])+i[_],_=y(B),n[_]>8?(w=d(8),w|=d(n[_]-8)<<8):w=d(n[_]),w+=s[_];x--;)l=M[A-w&32767],f(l)}else f(_)}}while(!a);return p(),h(),0}function C(){var t,e,i,r,s,n=[];try{if(S=[],R=!1,n[0]=c(),n[1]=c(),120===n[0]&&218===n[1]&&(_(),N[T]=[S.join(""),"geonext.gxt"],T++),31===n[0]&&139===n[1]&&(P(),N[T]=[S.join(""),"file"],T++),80===n[0]&&75===n[1]){if(R=!0,n[2]=c(),n[3]=c(),3===n[2]&&4===n[3]){for(n[0]=c(),n[1]=c(),O=c(),O|=c()<<8,s=c(),s|=c()<<8,c(),c(),c(),c(),c(),c()<<8,c()<<16,c()<<24,c(),c()<<8,c()<<16,c()<<24,c(),c()<<8,c()<<16,c()<<24,r=c(),r|=c()<<8,i=c(),i|=c()<<8,t=0,U=[];r--;)e=c(),"/"===e|":"===e?t=0:t<a-1&&(U[t++]=String.fromCharCode(e));for(x||(x=U),t=0;t<i;)e=c(),t++;if(0,8===s&&(_(),N[T]=new Array(2),N[T][0]=S.join(""),N[T][1]=U.join(""),T++),P())return!1}return!0}}catch(t){throw t}return!1}function P(){var t,e,i=[];if(8&O&&(i[0]=c(),i[1]=c(),i[2]=c(),i[3]=c(),80===i[0]&&75===i[1]&&7===i[2]&&8===i[3]?(c(),c()<<8,c()<<16,c()<<24):i[0]|i[1]<<8|i[2]<<16|i[3]<<24,c(),c()<<8,c()<<16,c()<<24,c(),c()<<8,c()<<16,c()<<24),R&&C())return!1;if(i[0]=c(),8!==i[0])return!0;if(O=c(),c(),c(),c(),c(),c(),c(),4&O)for(i[0]=c(),i[2]=c(),X=i[0]+256*i[1],t=0;t<X;t++)c();if(8&O)for(t=0,U=[],e=c();e;)"7"!==e&&":"!==e||(t=0),t<a-1&&(U[t++]=e),e=c();if(16&O)for(e=c();e;)e=c();return 2&O&&(c(),c()),_(),c(),c()<<8,c()<<16,c()<<24,c(),c()<<8,c()<<16,c()<<24,R&&C(),!1}var O,x,E,w,S=[],T=0,N=[],M=new Array(32768),A=0,R=!1,k=l.length,L=0,j=1,I=new Array(288),B=new Array(32),D=0,Y=null,X=(new Array(64),new Array(64),0),F=new Array(17),U=[];F[0]=0,t.Util.Unzip.prototype.unzipFile=function(t){var e;for(this.unzip(),e=0;e<N.length;e++)if(N[e][1]===t)return N[e][0];return""},t.Util.Unzip.prototype.unzip=function(){return C(),N}},t.Util})),define("utils/encoding",["jxg"],(function(t){"use strict";var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];return t.Util=t.Util||{},t.Util.UTF8={encode:function(t){var e,i,r="",s=t.length;if(t=t.replace(/\r\n/g,"\n"),"function"==typeof unescape&&"function"==typeof encodeURIComponent)return unescape(encodeURIComponent(t));for(e=0;e<s;e++)i=t.charCodeAt(e),i<128?r+=String.fromCharCode(i):i>127&&i<2048?(r+=String.fromCharCode(i>>6|192),r+=String.fromCharCode(63&i|128)):(r+=String.fromCharCode(i>>12|224),r+=String.fromCharCode(i>>6&63|128),r+=String.fromCharCode(63&i|128));return r},decode:function(t){var i,r,s,n=0,o=0,a=0,l=[],c=t.length,h=[];for(i=0;i<c;i++)r=t.charCodeAt(i),s=e[r],o=0!==a?63&r|o<<6:255>>s&r,0===(a=e[256+a+s])&&(o>65535?l.push(55232+(o>>10),56320+(1023&o)):l.push(o),++n%1e4==0&&(h.push(String.fromCharCode.apply(null,l)),l=[]));return h.push(String.fromCharCode.apply(null,l)),h.join("")},asciiCharCodeAt:function(t,e){var i=t.charCodeAt(e);if(i>255)switch(i){case 8364:i=128;break;case 8218:i=130;break;case 402:i=131;break;case 8222:i=132;break;case 8230:i=133;break;case 8224:i=134;break;case 8225:i=135;break;case 710:i=136;break;case 8240:i=137;break;case 352:i=138;break;case 8249:i=139;break;case 338:i=140;break;case 381:i=142;break;case 8216:i=145;break;case 8217:i=146;break;case 8220:i=147;break;case 8221:i=148;break;case 8226:i=149;break;case 8211:i=150;break;case 8212:i=151;break;case 732:i=152;break;case 8482:i=153;break;case 353:i=154;break;case 8250:i=155;break;case 339:i=156;break;case 382:i=158;break;case 376:i=159}return i}},t.Util.UTF8})),define("utils/base64",["jxg","utils/encoding"],(function(t,e){"use strict";function i(t,e){return 255&t.charCodeAt(e)}function r(t,e){return s.indexOf(t.charAt(e))}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return t.Util=t.Util||{},t.Util.Base64={encode:function(t){var r,n,o,a,l,c=[];for(l=e.encode(t),o=l.length,a=o%3,r=0;r<o-a;r+=3)n=i(l,r)<<16|i(l,r+1)<<8|i(l,r+2),c.push(s.charAt(n>>18),s.charAt(n>>12&63),s.charAt(n>>6&63),s.charAt(63&n));switch(a){case 1:n=i(l,o-1),c.push(s.charAt(n>>2),s.charAt(n<<4&63),"=","=");break;case 2:n=i(l,o-2)<<8|i(l,o-1),c.push(s.charAt(n>>10),s.charAt(n>>4&63),s.charAt(n<<2&63),"=")}return c.join("")},decode:function(t,i){var s,n,o,a,l,c,h=[],u=[];if(s=t.replace(/[^A-Za-z0-9\+\/=]/g,""),(o=s.length)%4!=0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for("="===s.charAt(o-1)&&(a=1,"="===s.charAt(o-2)&&(a=2),o-=4),n=0;n<o;n+=4)l=r(s,n)<<18|r(s,n+1)<<12|r(s,n+2)<<6|r(s,n+3),u.push(l>>16,l>>8&255,255&l),n%1e4==0&&(h.push(String.fromCharCode.apply(null,u)),u=[]);switch(a){case 1:l=r(s,o)<<12|r(s,o+1)<<6|r(s,o+2),u.push(l>>10,l>>2&255);break;case 2:l=r(s,n)<<6|r(s,n+1),u.push(l>>4)}return h.push(String.fromCharCode.apply(null,u)),c=h.join(""),i&&(c=e.decode(c)),c},decodeAsArray:function(t){var e,i=this.decode(t),r=[],s=i.length;for(e=0;e<s;e++)r[e]=i.charCodeAt(e);return r}},t.Util.Base64})),define("server/server",["jxg","utils/zip","utils/base64","utils/type"],(function(t,e,i,r){"use strict";return t.Server={modules:{},runningCalls:{},handleError:function(e){t.debug("error occured, server says: "+e.message)},callServer:function(s,n,o,a){var l,c,h,u,d,p;for(p in a=a||!1,"",o)o.hasOwnProperty(p)&&"&"+escape(p)+"="+escape(o[p]);d=r.toJSON(o);do{u=s+Math.floor(4096*Math.random())}while(r.exists(this.runningCalls[u]));return this.runningCalls[u]={action:s},r.exists(o.module)&&(this.runningCalls[u].module=o.module),l=t.serverBase+"JXGServer.py",c="action="+escape(s)+"&id="+u+"&dataJSON="+escape(i.encode(d)),this.cbp=function(t){var s,o,a,l,c,h,u,d;if(s=new e.Unzip(i.decodeAsArray(t)).unzip(),r.isArray(s)&&s.length>0&&(s=s[0][0]),r.exists(s))if(o=window.JSON&&window.JSON.parse?window.JSON.parse(s):new Function("return "+s)(),"error"===o.type)this.handleError(o);else if("response"===o.type){for(h=o.id,u=0;u<o.fields.length;u++)a=o.fields[u],l=a.namespace+("object"==typeof new Function("return "+a.namespace)()?".":".prototype.")+a.name+" = "+a.value,new Function(l)();for(u=0;u<o.handler.length;u++){for(a=o.handler[u],c=[],d=0;d<a.parameters.length;d++)c[d]='"'+a.parameters[d]+'": '+a.parameters[d];l="if(typeof JXG.Server.modules."+this.runningCalls[h].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[h].module+" = {};",l+="JXG.Server.modules."+this.runningCalls[h].module+"."+a.name+"_cb = "+a.callback+";",l+="JXG.Server.modules."+this.runningCalls[h].module+"."+a.name+" = function ("+a.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[h].module+"."+a.name+"_cb;var __JXGSERVER_PAR__ = {"+c.join(",")+', "module": "'+this.runningCalls[h].module+'", "handler": "'+a.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};',new Function(l)()}delete this.runningCalls[h],n(o.data)}},this.cb=t.bind(this.cbp,this),window.XMLHttpRequest?(h=new XMLHttpRequest,h.overrideMimeType("text/plain; charset=iso-8859-1")):h=new ActiveXObject("Microsoft.XMLHTTP"),!(!h||(h.open("POST",l,!a),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a||(h.onreadystatechange=function(t){return function(){return 4===h.readyState&&200===h.status&&(t(h.responseText),!0)}}(this.cb)),h.send(c),!a))&&(this.cb(h.responseText),!0)},loadModule_cb:function(e){var i;for(i=0;i<e.length;i++)t.debug(e[i].name+": "+e[i].value)},loadModule:function(e){return t.Server.callServer("load",t.Server.loadModule_cb,{module:e},!0)}},t.Server.load=t.Server.loadModule,t.Server})),define("math/symbolic",["base/constants","base/coords","math/math","math/geometry","server/server","utils/type"],(function(t,e,i,r,s,n){"use strict";return i.Symbolic={generateSymbolicCoordinatesPartial:function(t,e,i,r){var s,o,a,l=e.ancestors,c=0,h=function(t){return"underscore"===r?i+"_{"+t+"}":"brace"===r?i+"["+t+"]":i+t};for(o in t.listOfFreePoints=[],t.listOfDependantPoints=[],l)if(l.hasOwnProperty(o)&&(s=0,n.isPoint(l[o]))){for(a in l[o].ancestors)l[o].ancestors.hasOwnProperty(a)&&s++;0===s?(l[o].symbolic.x=l[o].coords.usrCoords[1],l[o].symbolic.y=l[o].coords.usrCoords[2],t.listOfFreePoints.push(l[o])):(c+=1,l[o].symbolic.x=h(c),c+=1,l[o].symbolic.y=h(c),t.listOfDependantPoints.push(l[o]))}return n.isPoint(e)&&(e.symbolic.x="x",e.symbolic.y="y"),c},clearSymbolicCoordinates:function(t){var e=function(t){var e,i=t&&t.length||0;for(e=0;e<i;e++)n.isPoint(t[e])&&(t[e].symbolic.x="",t[e].symbolic.y="")};e(t.listOfFreePoints),e(t.listOfDependantPoints),delete t.listOfFreePoints,delete t.listOfDependantPoints},generatePolynomials:function(t,e,i){var r,s,o,a,l=e.ancestors,c=[],h=[];for(r in i&&this.generateSymbolicCoordinatesPartial(t,e,"u","brace"),l[e.id]=e,l)if(l.hasOwnProperty(r)&&(a=0,c=[],n.isPoint(l[r]))){for(s in l[r].ancestors)l[r].ancestors.hasOwnProperty(s)&&a++;if(a>0)for(c=l[r].generatePolynomial(),o=0;o<c.length;o++)h.push(c[o])}return i&&this.clearSymbolicCoordinates(t),h},geometricLocusByGroebnerBase:function(o,a){var l,c,h,u,d,p,f,m,b,v,g,y,_,C=o.options.locus,P={},O=this.generateSymbolicCoordinatesPartial(o,a,"u","brace"),x=new e(t.COORDS_BY_USR,[0,0],o),E=new e(t.COORDS_BY_USR,[o.canvasWidth,o.canvasHeight],o),w=1,S=0,T=0,N=0;if(void 0===s.modules.geoloci&&s.loadModule("geoloci"),void 0===s.modules.geoloci)throw new Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(f=x.usrCoords[1],m=E.usrCoords[1],b=E.usrCoords[2],v=x.usrCoords[2],C.translateToOrigin&&o.listOfFreePoints.length>0){for(u=void 0!==C.toOrigin&&null!==C.toOrigin&&n.isInArray(o.listOfFreePoints,C.toOrigin.id)?C.toOrigin:o.listOfFreePoints[0],S=u.symbolic.x,T=u.symbolic.y,p=0;p<o.listOfFreePoints.length;p++)o.listOfFreePoints[p].symbolic.x-=S,o.listOfFreePoints[p].symbolic.y-=T;if(f-=S,m-=S,b-=T,v-=T,C.translateTo10&&o.listOfFreePoints.length>1){for(d=void 0!==C.to10&&null!==C.to10&&C.to10.id!==C.toOrigin.id&&n.isInArray(o.listOfFreePoints,C.to10.id)?C.to10:o.listOfFreePoints[0].id===u.id?o.listOfFreePoints[1]:o.listOfFreePoints[0],N=r.rad([1,0],[0,0],[d.symbolic.x,d.symbolic.y]),g=Math.cos(-N),y=Math.sin(-N),p=0;p<o.listOfFreePoints.length;p++)_=o.listOfFreePoints[p].symbolic.x,o.listOfFreePoints[p].symbolic.x=g*o.listOfFreePoints[p].symbolic.x-y*o.listOfFreePoints[p].symbolic.y,o.listOfFreePoints[p].symbolic.y=y*_+g*o.listOfFreePoints[p].symbolic.y;if(d.symbolic.y=0,_=f,f=g*f-y*b,b=y*_+g*b,_=m,m=g*m-y*v,v=y*_+g*v,C.stretch&&Math.abs(d.symbolic.x)>i.eps){for(w=d.symbolic.x,p=0;p<o.listOfFreePoints.length;p++)o.listOfFreePoints[p].symbolic.x/=w,o.listOfFreePoints[p].symbolic.y/=w;for(p=0;p<o.objectsList.length;p++)o.objectsList[p].elementClass===t.OBJECT_CLASS_CIRCLE&&"pointRadius"===o.objectsList[p].method&&(P[p]=o.objectsList[p].radius,o.objectsList[p].radius/=w);f/=w,m/=w,b/=w,v/=w,d.symbolic.x=1}}for(p=0;p<o.listOfFreePoints.length;p++)_=o.listOfFreePoints[p].symbolic.x,Math.abs(_)<i.eps&&(o.listOfFreePoints[p].symbolic.x=0),Math.abs(_-Math.round(_))<i.eps&&(o.listOfFreePoints[p].symbolic.x=Math.round(_)),_=o.listOfFreePoints[p].symbolic.y,Math.abs(_)<i.eps&&(o.listOfFreePoints[p].symbolic.y=0),Math.abs(_-Math.round(_))<i.eps&&(o.listOfFreePoints[p].symbolic.y=Math.round(_))}for(p in l=this.generatePolynomials(o,a),c=l.join(","),this.cbp=function(t){h=t},this.cb=n.bind(this.cbp,this),s.modules.geoloci.lociCoCoA(f,m,b,v,O,c,w,N,S,T,this.cb,!0),this.clearSymbolicCoordinates(o),P)P.hasOwnProperty(p)&&(o.objects[p].radius=P[p]);return h}},i.Symbolic})),define("math/clip",["jxg","base/constants","base/coords","math/math","math/geometry","utils/type"],(function(t,e,i,r,s,n){"use strict";return r.Clip={_isSeparator:function(t){return isNaN(t.coords.usrCoords[1])&&isNaN(t.coords.usrCoords[2])},makeDoublyLinkedList:function(t){var e,i=null,r=[],s=t.length;if(s>0)for(e=0;e<s;e++)this._isSeparator(t[e])?(t[e]._next=t[(e+1)%s],t[e]._prev=t[(s+e-1)%s]):(null===i&&(i=e,r.push(i)),this._isSeparator(t[(e+1)%s])||e===s-1?(t[e]._next=t[i],t[i]._prev=t[e],t[e]._end=!0,i=null):(t[e]._next=t[(e+1)%s],t[i]._prev=t[e]),this._isSeparator(t[(s+e-1)%s])||(t[e]._prev=t[(s+e-1)%s]));return r},det:function(t,e,i){return(t[1]-i[1])*(e[2]-i[2])-(e[1]-i[1])*(t[2]-i[2])},windingNumber:function(t,e){var i,s,n,o,a,l=0,c=e.length,h=t[1],u=t[2];if(0===c)return 0;if(isNaN(h)||isNaN(u))return 1;if(e[0].coords.usrCoords[1]===h&&e[0].coords.usrCoords[2]===u)return 1;for(a=0;a<c;a++)if(i=e[a].coords.usrCoords,s=e[(a+1)%c].coords.usrCoords,!(0===i[0]||0===s[0]||isNaN(i[1])||isNaN(s[1])||isNaN(i[2])||isNaN(s[2]))){if(s[2]===u){if(s[1]===h)return 1;if(i[2]===u&&s[1]>h==i[1]<h)return 0}if(i[2]<u!=s[2]<u)if(o=2*(s[2]>i[2]?1:0)-1,i[1]>=h)if(s[1]>h)l+=o;else{if(0===(n=this.det(i,s,t)))return 0;n>0==s[2]>i[2]&&(l+=o)}else s[1]>h&&(n=this.det(i,s,t))>0+r.eps==s[2]>i[2]&&(l+=o)}return l},Vertex:function(t,i,r,s,n,o){this.pos=i,this.intersection=!0,this.coords=t,this.elementClass=e.OBJECT_CLASS_POINT,this.data={alpha:r,path:s,pathname:n,done:!1,type:o,revtype:o,link:null,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(t,i,s){var n=t.length,o=r.eps*r.eps;n>0&&Math.abs(t[n-1].coords.usrCoords[0]-i.usrCoords[0])<o&&Math.abs(t[n-1].coords.usrCoords[1]-i.usrCoords[1])<o&&Math.abs(t[n-1].coords.usrCoords[2]-i.usrCoords[2])<o||t.push({pos:s,intersection:!1,coords:i,elementClass:e.OBJECT_CLASS_POINT})},sortIntersections:function(t){var e,i,r,s,n,o,a=[],l=t.length;for(e=0;e<l;e++)if(t[e].sort((function(t,e){return t.data.alpha>e.data.alpha?1:-1})),t[e].length>0){for(n=t[e].length-1,r=t[e][0],s=r.data.path[r.pos],o=s._next,e===l-1&&(s._end=!1),0===r.data.alpha&&"T"===r.data.type?(s.intersection=!0,s.data=r.data,s.neighbour=r.neighbour,s.neighbour.neighbour=s,s.entry_exit=!1,t[e][0]=s):(r._prev=s,r._prev._next=r),i=1;i<=n;i++)r=t[e][i],r._prev=t[e][i-1],r._prev._next=r;r=t[e][n],r._next=o,r._next._prev=r,e===l-1&&(r._end=!0),a=a.concat(t[e])}return a},_inbetween:function(t,e,i){var s,n=r.eps*r.eps,o=i[1]-e[1],a=i[2]-e[2],l=t[1]-e[1],c=t[2]-e[2];return 0===o&&0===a&&0===l&&0===c||(s=Math.abs(l)<n&&Math.abs(o)<n?c/a:l/o,Math.abs(s)<n&&(s=0),s)},_print_array:function(t){var e,i;for(e=0;e<t.length;e++)try{i="",t[e]._end&&(i=" end"),console.log(e,t[e].coords.usrCoords,"prev",t[e]._prev.coords.usrCoords,"next",t[e]._next.coords.usrCoords+i)}catch(i){console.log(e,t[e].coords.usrCoords)}},_print_list:function(t){for(var e,i=0;i<100&&(e=t.data?t.data.alpha:"-",console.log("\t",t.coords.usrCoords,"\n\t\tis:",t.intersection,"end:",t._end,e,"\n\t\t-:",t._prev.coords.usrCoords,"\n\t\t+:",t._next.coords.usrCoords,"\n\t\tn:",t.intersection?t.neighbour.coords.usrCoords:"-"),!t._end);)t=t._next,i++},_noOverlap:function(t,e,i,s){var n,o,a,l,c,h=r.eps*r.eps,u=!1;for(n=0;n<3;n++)if(o=Math.min(t[n],e[n]),a=Math.max(t[n],e[n]),l=Math.min(i[n],s[n]),c=Math.max(i[n],s[n]),a<l-h||o>c+h){u=!0;break}return u},findIntersections:function(t,n,o){var a,l,c,h,u,d,p,f,m,b,v,g,y,_=[],C=r.eps,P=t.length,O=n.length,x=[],E=[],w=[],S=[],T=!1,N=!1;for(l=0;l<O;l++)S.push([]);for(a=0;a<P;a++)if(w.push([]),this._isSeparator(t[a])||this._isSeparator(t[(a+1)%P]))T=!0;else{if(T&&a===P-1)break;for(h=t[a].coords.usrCoords,u=t[(a+1)%P].coords.usrCoords,l=0;l<O;l++)if(this._isSeparator(n[l])||this._isSeparator(n[(l+1)%O]))N=!0;else{if(N&&l===O-1)break;if(d=n[l].coords.usrCoords,p=n[(l+1)%O].coords.usrCoords,!this._noOverlap(h,u,d,p)&&(_=s.meetSegmentSegment(h,u,d,p),f=s.distance(h,u,3),m=s.distance(d,p,3),_[1]*f>-C&&_[1]<1-C/f&&_[2]*m>-C&&_[2]<1-C/m||_[1]===1/0&&_[2]===1/0&&r.norm(_[0],3)<C)){if(c=new i(e.COORDS_BY_USER,_[0],o),v="X",Math.abs(_[1])*f<C||Math.abs(_[2])*m<C)v="T",Math.abs(_[1])*f<C&&(_[1]=0),Math.abs(_[2])*m<C&&(_[2]=0),c=0===_[1]?new i(e.COORDS_BY_USER,h,o):new i(e.COORDS_BY_USER,d,o);else if(_[1]===1/0&&_[2]===1/0&&r.norm(_[0],3)<C){b=this._inbetween(h,d,p),b>=0&&b<1&&(v="T",c=new i(e.COORDS_BY_USER,h,o),_[1]=0,_[2]=b,g=new this.Vertex(c,a,_[1],t,"S",v),y=new this.Vertex(c,l,_[2],n,"C",v),g.neighbour=y,y.neighbour=g,w[a].push(g),S[l].push(y)),b=this._inbetween(d,h,u),s.distance(h,d,3)>C&&b>=0&&b<1&&(v="T",c=new i(e.COORDS_BY_USER,d,o),_[1]=b,_[2]=0,g=new this.Vertex(c,a,_[1],t,"S",v),y=new this.Vertex(c,l,_[2],n,"C",v),g.neighbour=y,y.neighbour=g,w[a].push(g),S[l].push(y));continue}g=new this.Vertex(c,a,_[1],t,"S",v),y=new this.Vertex(c,l,_[2],n,"C",v),g.neighbour=y,y.neighbour=g,w[a].push(g),S[l].push(y)}}}for(x=this.sortIntersections(w),a=0;a<x.length;a++)x[a].data.idx=a,x[a].neighbour.data.idx=a;return E=this.sortIntersections(S),[x,E]},_getPosition:function(t,e,i,r){var s=this.det(t,e,i),n=this.det(t,i,r);return this.det(e,i,r)>=0?s>0&&n>0?"left":"right":s<0&&n<0?"right":"left"},_classifyDegenerateIntersections:function(t){var e,i,o,a,l,c,h;for(h=0,t._start=0;;){if(t.intersection&&"T"===t.data.type&&(e=t._next.coords.usrCoords,i=t._prev.coords.usrCoords,s.distance(t.coords.usrCoords,e,3)<r.eps&&(t._next=t._next._next,e=t._next.coords.usrCoords),s.distance(t.coords.usrCoords,i,3)<r.eps&&(t._prev=t._prev._prev,i=t._prev.coords.usrCoords),l=t.neighbour,a=t.neighbour._prev.coords.usrCoords,o=t.neighbour._next.coords.usrCoords,t._next.intersection&&t._next.neighbour===l._next?t._prev.intersection&&t._prev.neighbour===l._prev?t.delayedStatus=["on","on"]:(c=this._getPosition(a,i,t.coords.usrCoords,e),t.delayedStatus="right"===c?["left","on"]:["right","on"]):t._next.intersection&&t._next.neighbour===l._prev&&(t._prev.intersection&&t._prev.neighbour===l._next?t.delayedStatus=["on","on"]:(c=this._getPosition(o,i,t.coords.usrCoords,e),t.delayedStatus="right"===c?["left","on"]:["right","on"])),t._prev.intersection&&t._prev.neighbour===l._prev?t._next.intersection&&t._next.neighbour===l._next||(c=this._getPosition(o,i,t.coords.usrCoords,e),t.delayedStatus="right"===c?["on","left"]:["on","right"]):t._prev.intersection&&t._prev.neighbour===l._next&&(t._next.intersection&&t._next.neighbour===l._prev||(c=this._getPosition(a,i,t.coords.usrCoords,e),t.delayedStatus="right"===c?["on","left"]:["on","right"])),t._next.intersection&&(t._next.neighbour===l._prev||t._next.neighbour===l._next)||t._prev.intersection&&(t._prev.neighbour===l._prev||t._prev.neighbour===l._next)||(c=this._getPosition(a,i,t.coords.usrCoords,e),c!==this._getPosition(o,i,t.coords.usrCoords,e)?(t.data.type="X",t.data.revtype="X"):(t.data.type="B",t.data.revtype="B"))),n.exists(t._start)&&t._start++,t._start>3||t._end||h>1e3){h>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),n.exists(t._start)&&delete t._start;break}t.intersection&&h++,t=t._next}},_handleIntersectionChains:function(t){for(var e,i=0,r="Null",s=!1,n=!1;;){if(!0===t.intersection&&("T"===t.data.type&&("on"!==t.delayedStatus[0]&&"on"===t.delayedStatus[1]?(s=!0,e=t,r=t.delayedStatus[0]):"on"===t.delayedStatus[0]&&"on"===t.delayedStatus[1]?(t.data.type="B",t.data.revtype="B"):"on"===t.delayedStatus[0]&&"on"!==t.delayedStatus[1]&&s&&(s=!1,r===t.delayedStatus[1]?(t.data.type="B",t.data.revtype="B",e.data.type="B",e.data.revtype="B"):(t.data.type="X",t.data.revtype="B",e.data.type="B",e.data.revtype="X"),e.data.link=t,t.data.link=e)),i++),t._end&&(n=!0),n&&!s)break;if(i>1e3){console.log("Clipping: Intersection chain - exit");break}t=t._next}},_handleFullyDegenerateCase:function(t,s,n){var o,a,l,c,h,u,d,p,f,m,b,v,g,y,_=[t,s];for(l=0;l<2;l++){for(o=_[l],b=o.length,f=0,y=!0;f<b;f++)if(!o[f].intersection){y=!1;break}if(y)for(a=_[(l+1)%2],v=a.length,f=0;f<b;f++){for(u=o[f].coords.usrCoords,d=o[(f+1)%b].coords.usrCoords,c=[.5*(u[0]+d[0]),.5*(u[1]+d[1]),.5*(u[2]+d[2])],m=0,g=!1;m<v;m++)if(Math.abs(this.det(a[m].coords.usrCoords,a[(m+1)%v].coords.usrCoords,c))<r.eps){g=!0;break}if(!g){h=new i(e.COORDS_BY_USER,c,n),p={pos:f,intersection:!1,coords:h,elementClass:e.OBJECT_CLASS_POINT},o[f]._next=p,p._prev=o[f],o[(f+1)%b]._prev=p,p._next=o[(f+1)%b],o[f]._end&&(o[f]._end=!1,p._end=!0);break}}}},_getStatus:function(t,e){for(var i;t.intersection&&!t._end;)t=t._next;return i=this.windingNumber(t.coords.usrCoords,e)%2==0?"entry":"exit",[t,i]},markEntryExit:function(t,e,i){var r,s,o,a,l,c,h;for(c=i.length,l=0;l<c;l++)for(h=i[l],this._classifyDegenerateIntersections(t[h]),this._handleIntersectionChains(t[h]),a=this._getStatus(t[h],e),s=a[0],r=a[1],s._starter=!0,o=0;;){if(!0===s.intersection&&"X"===s.data.type&&(s.entry_exit=r,r="entry"===r?"exit":"entry",null===s.data.link||s.data.link.entry_exit||(s.data.link.entry_exit=s.entry_exit)),!0===s.intersection&&"X"!==s.data.type&&(s.entry_exit||null===s.data.link||(s.entry_exit=s.data.link.entry_exit)),s=s._next,n.exists(s._starter)||o>1e4)break;o++}},_isCrossing:function(t,e){return e=e||!1,t.intersection&&"X"===(e?t.data.revtype:t.data.type)},tracing:function(t,e,i){var r,s,n,o,a=0,l=0,c=[];for(o="difference"===i||"union"===i;l<e.length&&a<1e4;)if(s=e[l],!s.data.done&&this._isCrossing(s,o)){c.length>0&&c.push([NaN,NaN]),n=s.data.idx,r=t;do{if(c.push(s),s.data.done=!0,"intersection"===i&&"entry"===s.entry_exit||"union"===i&&"exit"===s.entry_exit||"difference"===i&&r===t==("exit"===s.entry_exit)){s=s._next;do{a++,this._isCrossing(s,o)||(isNaN(s.coords.usrCoords[1])||isNaN(s.coords.usrCoords[2])||c.push(s),s=s._next)}while(!this._isCrossing(s,o)&&a<1e4)}else{s=s._prev;do{a++,this._isCrossing(s,!0)||(isNaN(s.coords.usrCoords[1])||isNaN(s.coords.usrCoords[2])||c.push(s),s=s._prev)}while(!this._isCrossing(s,!0)&&a<1e4)}if(s.data.done=!0,!s.neighbour)return console.log("BREAK!!!!!!!!!!!!!!!!!",a),[[0],[0]];if(s=s.neighbour,s.data.done){c.push(s);break}r=s.data.path}while(("S"!==s.data.pathname||s.data.idx!==n)&&a<1e4);l++}else l++;return this._getCoordsArrays(c,!1)},isEmptyCase:function(t,e,i,r,s){return"intersection"===i&&(0===t.length||0===e.length)||"union"===i&&(0===t.length||0===e.length)||"difference"===i&&(0===t.length||0===e.length)},_getCoordsArrays:function(t,e){var i,r=[],s=[],n=t.length;for(i=0;i<n;i++)t[i].coords?(r.push(t[i].coords.usrCoords[1]),s.push(t[i].coords.usrCoords[2])):(r.push(t[i][0]),s.push(t[i][1]));return e&&n>0&&(t[0].coords?(r.push(t[0].coords.usrCoords[1]),s.push(t[0].coords.usrCoords[2])):(r.push(t[0][0]),s.push(t[0][1]))),[r,s]},handleEmptyIntersection:function(t,e,i){var r,n,o=!1,a=[];if(0===t.length)return a="union"===i?e:[],this._getCoordsArrays(a,!0);if(0===e.length)return a="intersection"===i?[]:t,this._getCoordsArrays(a,!0);if("union"===i)return a=a.concat(t),a.push(t[0]),a.push([NaN,NaN]),a=a.concat(e),a.push(e[0]),this._getCoordsArrays(a,!1);if(t.length>0)for(r=t[0];r.intersection&&(r=r._next,!r._end););if(e.length>0)for(n=e[0];n.intersection&&(n=n._next,!n._end););return 0===this.windingNumber(r.coords.usrCoords,e)?0!==this.windingNumber(n.coords.usrCoords,t)?("difference"===i&&(a=a.concat(t),a.push(t[0]),s.signedPolygon(t)*s.signedPolygon(e)>0&&a.reverse(),a.push([NaN,NaN])),a=a.concat(e),a.push(e[0]),o=!1):"difference"===i&&(a=a.concat(t),o=!0):"intersection"===i&&(a=a.concat(t),o=!0),this._getCoordsArrays(a,o)},_countCrossingIntersections:function(t){var e,i=t.length,r=0;for(e=0;e<i;e++)"X"===t[e].data.type&&r++;return r},_getPath:function(t,r){var o,a,l,c,h,u,d,p=[];if(t.elementClass!==e.OBJECT_CLASS_CURVE||t.type!==e.OBJECT_TYPE_ARC&&t.type!==e.OBJECT_TYPE_SECTOR){if(t.elementClass===e.OBJECT_CLASS_CURVE&&n.exists(t.points))for(a=t.numberPoints,o=0;o<a;o++)this._addToList(p,t.points[o],o);else if(t.type===e.OBJECT_TYPE_POLYGON)for(o=0;o<t.vertices.length;o++)this._addToList(p,t.vertices[o].coords,o);else if(t.elementClass===e.OBJECT_CLASS_CIRCLE)for(d=359,l=t.Radius(),c=2*Math.PI/d,o=0;o<=d;o++)this._addToList(p,new i(e.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(o*c)*l,t.center.coords.usrCoords[2]+Math.sin(o*c)*l],r),o);else if(n.isArray(t))for(a=t.length,o=0;o<a;o++)n.exists(t[o].coords)?this._addToList(p,t[o].coords,o):n.isArray(t[o])?this._addToList(p,new i(e.COORDS_BY_USER,t[o],r),o):n.exists(t[o].usrCoords)&&this._addToList(p,t[o],o)}else{for(h=s.rad(t.radiuspoint,t.center,t.anglepoint),d=Math.floor(180*h/Math.PI),l=t.Radius(),c=h/d,u=Math.atan2(t.radiuspoint.coords.usrCoords[2]-t.center.coords.usrCoords[2],t.radiuspoint.coords.usrCoords[1]-t.center.coords.usrCoords[1]),t.type===e.OBJECT_TYPE_SECTOR&&this._addToList(p,t.center.coords,0),o=0;o<=d;o++)this._addToList(p,new i(e.COORDS_BY_USER,[t.center.coords.usrCoords[0],t.center.coords.usrCoords[1]+Math.cos(o*c+u)*l,t.center.coords.usrCoords[2]+Math.sin(o*c+u)*l],r),o+1);t.type===e.OBJECT_TYPE_SECTOR&&this._addToList(p,t.center.coords,d+2)}return p},greinerHormann:function(t,e,i,n){var o,a,l,c=[],h=[],u=[],d=[],p=[],f=[];return c=this._getPath(t,n),o=c.length,o>0&&s.distance(c[0].coords.usrCoords,c[o-1].coords.usrCoords,3)<r.eps&&c.pop(),h=this._getPath(e,n),o=h.length,o>0&&s.distance(h[0].coords.usrCoords,h[o-1].coords.usrCoords,3)<r.eps*r.eps&&h.pop(),this.isEmptyCase(c,h,i,p,f)?[p,f]:(a=this.makeDoublyLinkedList(c),l=this.makeDoublyLinkedList(h),d=this.findIntersections(c,h,n),u=d[0],this._handleFullyDegenerateCase(c,h,n),this.markEntryExit(c,h,a),this.markEntryExit(h,c,l),0===this._countCrossingIntersections(u)?this.handleEmptyIntersection(c,h,i):this.tracing(c,u,i))},union:function(t,e,i){return this.greinerHormann(t,e,"union",i)},intersection:function(t,e,i){return this.greinerHormann(t,e,"intersection",i)},difference:function(t,e,i){return this.greinerHormann(t,e,"difference",i)}},t.extend(r.Clip,{}),r.Clip})),define("math/poly",["jxg","math/math","utils/type"],(function(t,e,i){"use strict";return e.Poly={},e.Poly.Ring=function(t){this.vars=t},t.extend(e.Poly.Ring.prototype,{}),e.Poly.Monomial=function(t,e,r){var s;if(!i.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(i.isArray(r)||(r=[]),r=r.slice(0,t.vars.length),s=r.length;s<t.vars.length;s++)r.push(0);this.ring=t,this.coefficient=e||0,this.exponents=i.deepCopy(r)},t.extend(e.Poly.Monomial.prototype,{copy:function(){return new e.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var t,e=[];for(t=0;t<this.ring.vars.length;t++)e.push(this.ring.vars[t]+"^"+this.exponents[t]);return this.coefficient+"*"+e.join("*")}}),e.Poly.Polynomial=function(t,e){var r;if(!i.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");r=i.exists(e)&&i.isString(e)?void 0:[],this.ring=t,this.monomials=r},t.extend(e.Poly.Polynomial.prototype,{findSignature:function(t){var e;for(e=0;e<this.monomials.length;e++)if(i.cmpArrays(this.monomials[e].exponents,t))return e;return-1},addSubMonomial:function(t,e){var i;i=this.findSignature(t.exponents),i>-1?this.monomials[i].coefficient+=e*t.coefficient:(t.coefficient*=e,this.monomials.push(t))},add:function(t){var e;if(!i.exists(t)||t.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(i.isArray(t.exponents))this.addSubMonomial(t,1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],1)},sub:function(t){var e;if(!i.exists(t)||t.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(i.isArray(t.exponents))this.addSubMonomial(t,-1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],-1)},copy:function(){var t,i;for(i=new e.Poly.Polynomial(this.ring),t=0;t<this.monomials.length;t++)i.monomials.push(this.monomials[t].copy());return i},print:function(){var t,e=[];for(t=0;t<this.monomials.length;t++)e.push("("+this.monomials[t].print()+")");return e.join("+")}}),e.Poly})),define("math/complex",["jxg","utils/type"],(function(t,e){"use strict";return t.Complex=function(t,e){this.isComplex=!0,t&&t.isComplex&&(e=t.imaginary,t=t.real),this.real=t||0,this.imaginary=e||0,this.absval=0,this.angle=0},t.extend(t.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(t){return e.isNumber(t)?this.real+=t:(this.real+=t.real,this.imaginary+=t.imaginary),this},sub:function(t){return e.isNumber(t)?this.real-=t:(this.real-=t.real,this.imaginary-=t.imaginary),this},mult:function(t){var i,r;return e.isNumber(t)?(this.real*=t,this.imaginary*=t):(i=this.real,r=this.imaginary,this.real=i*t.real-r*t.imaginary,this.imaginary=i*t.imaginary+r*t.real),this},div:function(t){var i,r,s;if(e.isNumber(t)){if(Math.abs(t)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=t,this.imaginary/=t}else{if(Math.abs(t.real)<Math.eps&&Math.abs(t.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;i=t.real*t.real+t.imaginary*t.imaginary,s=this.real,r=this.imaginary,this.real=(s*t.real+r*t.imaginary)/i,this.imaginary=(r*t.real-s*t.imaginary)/i}return this},conj:function(){return this.imaginary*=-1,this}}),t.C={},t.C.add=function(e,i){var r=new t.Complex(e);return r.add(i),r},t.C.sub=function(e,i){var r=new t.Complex(e);return r.sub(i),r},t.C.mult=function(e,i){var r=new t.Complex(e);return r.mult(i),r},t.C.div=function(e,i){var r=new t.Complex(e);return r.div(i),r},t.C.conj=function(e){var i=new t.Complex(e);return i.conj(),i},t.C.abs=function(e){var i=new t.Complex(e);return i.conj(),i.mult(e),Math.sqrt(i.real)},t.Complex.C=t.C,t.Complex})),define("utils/color",["jxg","utils/type","math/math"],(function(t,e,i){"use strict";var r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},s=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}];return t.rgbParser=function(t,i,n){var o,a,l,c,h,u,d,p,f,m,b=t;if(!e.exists(t))return[];if(e.exists(i)&&e.exists(n)&&(b=[t,i,n]),o=b,m=!1,e.isArray(o)){for(u=0;u<3;u++)m=m||/\./.test(b[u].toString());for(u=0;u<3;u++)m=m&&b[u]>=0&&b[u]<=1;return m?[Math.ceil(255*b[0]),Math.ceil(255*b[1]),Math.ceil(255*b[2])]:b}for("string"==typeof b&&(o=b),"#"===o.charAt(0)&&(o=o.substr(1,6)),o=o.replace(/ /g,"").toLowerCase(),o=r[o]||o,u=0;u<s.length;u++)l=s[u].re,c=s[u].process,(h=l.exec(o))&&(a=c(h),d=a[0],p=a[1],f=a[2]);return isNaN(d)||isNaN(p)||isNaN(f)?[]:(d=d<0||isNaN(d)?0:d>255?255:d,p=p<0||isNaN(p)?0:p>255?255:p,f=f<0||isNaN(f)?0:f>255?255:f,[d,p,f])},t.rgb2css=function(e,i,r){var s;return s=t.rgbParser(e,i,r),"rgb("+s[0]+", "+s[1]+", "+s[2]+")"},t.rgb2hex=function(e,i,r){var s,n,o;return s=t.rgbParser(e,i,r),n=s[1],o=s[2],s=s[0],s=s.toString(16),n=n.toString(16),o=o.toString(16),1===s.length&&(s="0"+s),1===n.length&&(n="0"+n),1===o.length&&(o="0"+o),"#"+s+n+o},t.hex2rgb=function(e){return t.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),t.rgb2css(e)},t.hsv2rgb=function(t,e,r){var s,n,o,a,l,c,h,u,d;if(t=(t%360+360)%360,0===e){if(!(isNaN(t)||t<i.eps))return"#ffffff";s=r,n=r,o=r}else switch(c=t>=360?0:t,c/=60,l=Math.floor(c),a=c-l,h=r*(1-e),u=r*(1-e*a),d=r*(1-e*(1-a)),l){case 0:s=r,n=d,o=h;break;case 1:s=u,n=r,o=h;break;case 2:s=h,n=r,o=d;break;case 3:s=h,n=u,o=r;break;case 4:s=d,n=h,o=r;break;case 5:s=r,n=h,o=u}return s=Math.round(255*s).toString(16),s=2===s.length?s:1===s.length?"0"+s:"00",n=Math.round(255*n).toString(16),n=2===n.length?n:1===n.length?"0"+n:"00",o=Math.round(255*o).toString(16),o=2===o.length?o:1===o.length?"0"+o:"00",["#",s,n,o].join("")},t.rgb2hsv=function(e,i,r){var s,n,o,a,l,c,h,u,d,p,f,m,b;return s=t.rgbParser(e,i,r),n=s[1],o=s[2],s=s[0],a=s/255,l=n/255,c=o/255,m=Math.max(s,n,o),b=Math.min(s,n,o),h=m/255,u=b/255,f=h,p=0,f>0&&(p=(f-u)/f),d=1/(h-u),p>0&&(m===s?d*=l-c:d=m===n?2+(c-a)*d:4+(a-l)*d),d*=60,d<0&&(d+=360),m===b&&(d=0),[d,p,f]},t.rgb2LMS=function(e,i,r){var s,n,o,a,l,c,h,u=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return s=t.rgbParser(e,i,r),n=s[1],o=s[2],s=s[0],s=Math.pow(s,.476190476),n=Math.pow(n,.476190476),o=Math.pow(o,.476190476),a=s*u[0][0]+n*u[0][1]+o*u[0][2],l=s*u[1][0]+n*u[1][1]+o*u[1][2],c=s*u[2][0]+n*u[2][1]+o*u[2][2],h=[a,l,c],h.l=a,h.m=l,h.s=c,h},t.LMS2rgb=function(t,e,i){var r,s,n,o,a=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],l=function(t){for(var e=127,i=64;i>0;){if(Math.pow(e,.476190476)>t)e-=i;else{if(Math.pow(e+1,.476190476)>t)return e;e+=i}i/=2}return 254===e&&13.994955247<t?255:e};return r=t*a[0][0]+e*a[0][1]+i*a[0][2],s=t*a[1][0]+e*a[1][1]+i*a[1][2],n=t*a[2][0]+e*a[2][1]+i*a[2][2],r=l(r),s=l(s),n=l(n),o=[r,s,n],o.r=r,o.g=s,o.b=n,o},t.rgba2rgbo=function(t){var e;return 9===t.length&&"#"===t.charAt(0)?(e=parseInt(t.substr(7,2).toUpperCase(),16)/255,t=t.substr(0,7)):e=1,[t,e]},t.rgbo2rgba=function(t,e){var i;return"none"===t?t:(i=Math.round(255*e).toString(16),1===i.length&&(i="0"+i),t+i)},t.rgb2bw=function(e){var i,r,s,n="0123456789ABCDEF";return"none"===e?e:(s=t.rgbParser(e),i=Math.floor(.3*s[0]+.59*s[1]+.11*s[2]),r=n.charAt(i>>4&15)+n.charAt(15&i),e="#"+r+r+r)},t.rgb2cb=function(e,i){var r,s,n,o,a,l,c,h,u,d,p,f,m,b="0123456789ABCDEF";if("none"===e)return e;switch(a=t.rgb2LMS(e),s=a[0],n=a[1],o=a[2],i=i.toLowerCase()){case"protanopia":c=-.06150039994295001,h=.08277001656812001,u=-.013200141220000003,d=.05858939668799999,p=-.07934519995360001,f=.013289415272000003,m=.6903216543277437,l=o/n,s=l<m?-(h*n+u*o)/c:-(p*n+f*o)/d;break;case"tritanopia":c=-.00058973116217,h=.007690316482,u=-.01011703519052,d=.025495080838999994,p=-.0422740347,f=.017005316784,m=.8349489908460004,l=n/s,o=l<m?-(c*s+h*n)/u:-(d*s+p*n)/f;break;default:c=-.06150039994295001,h=.08277001656812001,u=-.013200141220000003,d=.05858939668799999,p=-.07934519995360001,f=.013289415272000003,m=.5763833686400911,l=o/s,n=l<m?-(c*s+u*o)/h:-(d*s+f*o)/p}return r=t.LMS2rgb(s,n,o),l=b.charAt(r[0]>>4&15)+b.charAt(15&r[0]),e="#"+l,l=b.charAt(r[1]>>4&15)+b.charAt(15&r[1]),e+=l,l=b.charAt(r[2]>>4&15)+b.charAt(15&r[2]),e+l},t.autoHighlight=function(e){var i=t.rgba2rgbo(e),r=i[0],s=i[1];return"#"===e.charAt(0)?(s*=s<.3?1.8:.4,t.rgbo2rgba(r,s)):e},t.contrast=function(e,i,r,s){var n,o,a,l,c;return i=i||"#000000",r=r||"#ffffff",s=s||7,n=t.rgbParser(e),o=t.rgbParser("#000000"),a=.2126*Math.pow(n[0]/255,2.2)+.7152*Math.pow(n[1]/255,2.2)+.0722*Math.pow(n[2]/255,2.2),l=.2126*Math.pow(o[0]/255,2.2)+.7152*Math.pow(o[1]/255,2.2)+.0722*Math.pow(o[2]/255,2.2),c=a>l?Math.floor((a+.05)/(l+.05)):Math.floor((l+.05)/(a+.05)),c-=1,c>s?i:r},t.setClassicColors=function(){t.Options.elements.strokeColor="blue",t.Options.elements.fillColor="red",t.Options.hatch.strokeColor="blue",t.Options.angle.fillColor="#ff7f00",t.Options.angle.highlightFillColor="#ff7f00",t.Options.angle.strokeColor="#ff7f00",t.Options.angle.label.strokeColor="blue",t.Options.arc.strokeColor="blue",t.Options.circle.center.fillColor="red",t.Options.circle.center.strokeColor="blue",t.Options.circumcircle.strokeColor="blue",t.Options.circumcircle.center.fillColor="red",t.Options.circumcircle.center.strokeColor="blue",t.Options.circumcirclearc.strokeColor="blue",t.Options.circumcirclesector.strokeColor="blue",t.Options.circumcirclesector.fillColor="green",t.Options.circumcirclesector.highlightFillColor="green",t.Options.conic.strokeColor="blue",t.Options.curve.strokeColor="blue",t.Options.incircle.strokeColor="blue",t.Options.incircle.center.fillColor="red",t.Options.incircle.center.strokeColor="blue",t.Options.inequality.fillColor="red",t.Options.integral.fillColor="red",t.Options.integral.curveLeft.color="red",t.Options.integral.curveRight.color="red",t.Options.line.strokeColor="blue",t.Options.point.fillColor="red",t.Options.point.strokeColor="red",t.Options.polygon.fillColor="green",t.Options.polygon.highlightFillColor="green",t.Options.polygon.vertices.strokeColor="red",t.Options.polygon.vertices.fillColor="red",t.Options.regularpolygon.fillColor="green",t.Options.regularpolygon.highlightFillColor="green",t.Options.regularpolygon.vertices.strokeColor="red",t.Options.regularpolygon.vertices.fillColor="red",t.Options.riemannsum.fillColor="yellow",t.Options.sector.fillColor="green",t.Options.sector.highlightFillColor="green",t.Options.semicircle.center.fillColor="red",t.Options.semicircle.center.strokeColor="blue",t.Options.slopetriangle.fillColor="red",t.Options.slopetriangle.highlightFillColor="red",t.Options.turtle.arrow.strokeColor="blue"},t.extend(t,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),t.palette=t.paletteWong,t})),define("options",["jxg","base/constants","math/math","utils/color","utils/type"],(function(t,e,i,r,s){"use strict";return t.Options={jc:{enabled:!0,compile:!0},board:{boundingBox:[-5,5,5,-5],maxBoundingBox:[-1/0,1/0,1/0,-1/0],zoomFactor:1,zoomX:1,zoomY:1,title:"",description:"",showCopyright:!0,axis:!1,defaultAxes:{x:{name:"x",ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},drawZero:!1,visible:"inherit"}},y:{name:"y",ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],drawZero:!1,visible:"inherit"}}},showNavigation:!0,showZoom:!0,showReload:!1,showScreenshot:!1,screenshot:{scale:1,type:"png",symbol:"⌘",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},showFullscreen:!1,fullscreen:{symbol:"⛶",id:null},showClearTraces:!1,keepAspectRatio:!1,ignoreLabels:!0,maxNameLength:1,document:!1,takeFirst:!1,takeSizeFromFile:!1,renderer:"auto",animationDelay:35,maxFrameRate:40,registerEvents:!0,minimizeReflow:"none",offsetX:0,offsetY:0,zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,min:1e-4,max:1e4,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},pan:{needShift:!0,needTwoFingers:!1,enabled:!0},drag:{enabled:!0},keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},resize:{enabled:!0,throttle:10},moveTarget:null,selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,withLines:!1,vertices:{visible:!1},fillColor:"#ffff00",visible:!1},showInfobox:!0},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",fillColor:r.palette.red,highlightFillColor:"none",strokeOpacity:1,highlightStrokeOpacity:1,fillOpacity:1,highlightFillOpacity:1,gradient:null,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,gradientEndOffset:1,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientR:.5,gradientFX:.5,gradientFY:.5,gradientFR:0,transitionDuration:100,strokeWidth:2,highlightStrokeWidth:2,fixed:!1,frozen:!1,withLabel:!1,visible:!0,priv:!1,layer:0,dash:0,shadow:!1,trace:!1,traceAttributes:{},highlight:!0,needsRegularUpdate:!0,snapToGrid:!1,scalable:!0,dragToTopOfLayer:!1,precision:"inherit",draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},isLabel:!1,tabindex:0},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],minorTicks:4,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear"},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:r.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:r.palette.orange,highlightFillColor:r.palette.orange,strokeColor:r.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:r.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]}},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:r.palette.blue,fillColor:r.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:r.palette.blue,highlightFillColor:r.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!1,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:r.palette.red,strokeColor:r.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:r.palette.red,strokeColor:r.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:r.palette.yellow,highlightFillColor:r.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:r.palette.blue,fillColor:"none",fixed:!0,useQDT:!1,handDrawing:!1,curveType:null,RDPsmoothing:!1,numberPointsHigh:1600,numberPointsLow:400,doAdvancedPlot:!0,recursionDepthHigh:17,recursionDepthLow:15,doAdvancedPlotOld:!1,plotVersion:2,label:{position:"lft"},firstArrow:!1,lastArrow:!1},foreignobject:{attractors:[],fixed:!0,visible:!0},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,gridX:1,gridY:1,strokeColor:"#c0c0c0",strokeOpacity:.5,strokeWidth:1,dash:0,snapToGrid:!1,snapSizeX:10,snapSizeY:10},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:r.palette.red,strokeColor:r.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:r.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:r.palette.red,fillOpacity:.3,highlightFillColor:r.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:r.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:r.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,position:"urt",offset:[10,10],autoPosition:!1},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],rowHeight:20,strokeWidth:5},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:r.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,defaultDistance:1,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1,lineCap:"butt"},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},metapostspline:{createPoints:!0,isArrayOfCoordinates:!1,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,fillColor:r.palette.red,strokeColor:r.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:r.palette.yellow,highlightFillColor:r.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},vertices:{layer:9,withLabel:!1,name:"",strokeColor:r.palette.red,fillColor:r.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},regularpolygon:{hasInnerPoints:!1,fillColor:r.palette.yellow,highlightFillColor:r.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:r.palette.red,fillColor:r.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:r.palette.yellow},sector:{fillColor:r.palette.yellow,highlightFillColor:r.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,selection:"auto",arc:{visible:!1,fillColor:"none"},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:r.palette.red,strokeColor:r.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:r.palette.red,name:""}},slider:{snapWidth:-1,precision:2,firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,precision:2,includeBoundaries:1,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,minorHeight:4,majorHeight:5,minorTicks:0,defaultDistance:1,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},curve:{strokeWidth:1,strokeColor:"#000000",fillColor:"none"}},slopetriangle:{fillColor:r.palette.red,fillOpacity:.4,highlightFillColor:r.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0}},stepfunction:{},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,precision:2,point1:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],defaultDistance:.1,strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit"},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",digits:2,parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",useASCIIMathML:!1,useMathJax:!1,useKatex:!1,display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:r.palette.red,lastArrow:!0}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},t.Validator=function(){var e,r=function(t){return/^[0-9]+px$/.test(t)},n=function(t){return"html"===t||"internal"===t},o=function(t){return s.isString(t)},a=function(e){return s.exists(t.normalizePointFace(e))},l=function(t){return Math.abs(t-Math.round(t))<i.eps},c=function(t){return l(t)&&t>=0},h=function(t){return l(t)&&t>0},u=function(t){return"vml"===t||"svg"===t||"canvas"===t||"no"===t},d=function(t){return t>0},p=function(t){return t>=0},f={},m={attractorDistance:p,color:o,defaultDistance:s.isNumber,display:n,doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:a,factor:s.isNumber,fillColor:o,fillOpacity:s.isNumber,firstArrow:!1,fontSize:l,dash:l,gridX:s.isNumber,gridY:s.isNumber,hasGrid:!1,highlightFillColor:o,highlightFillOpacity:s.isNumber,highlightStrokeColor:o,highlightStrokeOpacity:s.isNumber,insertTicks:!1,lastArrow:!1,layer:c,majorHeight:l,minorHeight:l,minorTicks:p,minTicksDistance:h,numberPointsHigh:h,numberPointsLow:h,opacity:s.isNumber,radius:s.isNumber,RDPsmoothing:!1,renderer:u,right:r,showCopyright:!1,showInfobox:!1,showNavigation:!1,size:p,snapSizeX:d,snapSizeY:d,snapWidth:s.isNumber,snapToGrid:!1,snatchDistance:p,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:o,strokeOpacity:s.isNumber,strokeWidth:p,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(e in m)m.hasOwnProperty(e)&&(f[e.toLowerCase()]=m[e]);return f}(),t.normalizePointFace=function(t){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",diamond:"<>","<>":"<>",triangleup:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[t]},t.useStandardOptions=function(i){var r,s,n,o,a=t.Options,l=i.hasGrid;for(r in i.options.grid.hasGrid=a.grid.hasGrid,i.options.grid.gridX=a.grid.gridX,i.options.grid.gridY=a.grid.gridY,i.options.grid.gridColor=a.grid.gridColor,i.options.grid.gridOpacity=a.grid.gridOpacity,i.options.grid.gridDash=a.grid.gridDash,i.options.grid.snapToGrid=a.grid.snapToGrid,i.options.grid.snapSizeX=a.grid.SnapSizeX,i.options.grid.snapSizeY=a.grid.SnapSizeY,i.takeSizeFromFile=a.takeSizeFromFile,o=function(t,e){t.visProp.fillcolor=e.fillColor,t.visProp.highlightfillcolor=e.highlightFillColor,t.visProp.strokecolor=e.strokeColor,t.visProp.highlightstrokecolor=e.highlightStrokeColor},i.objects)if(i.objects.hasOwnProperty(r))if(n=i.objects[r],n.elementClass===e.OBJECT_CLASS_POINT)o(n,a.point);else if(n.elementClass===e.OBJECT_CLASS_LINE)for(o(n,a.line),s=0;s<n.ticks.length;s++)n.ticks[s].majorTicks=a.line.ticks.majorTicks,n.ticks[s].minTicksDistance=a.line.ticks.minTicksDistance,n.ticks[s].visProp.minorheight=a.line.ticks.minorHeight,n.ticks[s].visProp.majorheight=a.line.ticks.majorHeight;else n.elementClass===e.OBJECT_CLASS_CIRCLE?o(n,a.circle):n.type===e.OBJECT_TYPE_ANGLE?o(n,a.angle):n.type===e.OBJECT_TYPE_ARC?o(n,a.arc):n.type===e.OBJECT_TYPE_POLYGON?o(n,a.polygon):n.type===e.OBJECT_TYPE_CONIC?o(n,a.conic):n.type===e.OBJECT_TYPE_CURVE?o(n,a.curve):n.type===e.OBJECT_TYPE_SECTOR&&(n.arc.visProp.fillcolor=a.sector.fillColor,n.arc.visProp.highlightfillcolor=a.sector.highlightFillColor,n.arc.visProp.fillopacity=a.sector.fillOpacity,n.arc.visProp.highlightfillopacity=a.sector.highlightFillOpacity);i.fullUpdate(),l&&!i.hasGrid?i.removeGrids(i):!l&&i.hasGrid&&i.create("grid",[])},t.useBlackWhiteOptions=function(e){var i=t.Options;i.point.fillColor=r.rgb2bw(i.point.fillColor),i.point.highlightFillColor=r.rgb2bw(i.point.highlightFillColor),i.point.strokeColor=r.rgb2bw(i.point.strokeColor),i.point.highlightStrokeColor=r.rgb2bw(i.point.highlightStrokeColor),i.line.fillColor=r.rgb2bw(i.line.fillColor),i.line.highlightFillColor=r.rgb2bw(i.line.highlightFillColor),i.line.strokeColor=r.rgb2bw(i.line.strokeColor),i.line.highlightStrokeColor=r.rgb2bw(i.line.highlightStrokeColor),i.circle.fillColor=r.rgb2bw(i.circle.fillColor),i.circle.highlightFillColor=r.rgb2bw(i.circle.highlightFillColor),i.circle.strokeColor=r.rgb2bw(i.circle.strokeColor),i.circle.highlightStrokeColor=r.rgb2bw(i.circle.highlightStrokeColor),i.arc.fillColor=r.rgb2bw(i.arc.fillColor),i.arc.highlightFillColor=r.rgb2bw(i.arc.highlightFillColor),i.arc.strokeColor=r.rgb2bw(i.arc.strokeColor),i.arc.highlightStrokeColor=r.rgb2bw(i.arc.highlightStrokeColor),i.polygon.fillColor=r.rgb2bw(i.polygon.fillColor),i.polygon.highlightFillColor=r.rgb2bw(i.polygon.highlightFillColor),i.sector.fillColor=r.rgb2bw(i.sector.fillColor),i.sector.highlightFillColor=r.rgb2bw(i.sector.highlightFillColor),i.curve.strokeColor=r.rgb2bw(i.curve.strokeColor),i.grid.gridColor=r.rgb2bw(i.grid.gridColor),t.useStandardOptions(e)},t.Options.normalizePointFace=t.normalizePointFace,t.Options})),define("renderer/abstract",["jxg","options","base/coords","base/constants","math/math","math/geometry","utils/type","utils/env"],(function(t,e,i,r,s,n,o,a){"use strict";return t.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1},t.extend(t.AbstractRenderer.prototype,{_updateVisual:function(t,e,i){(i||this.enhancedRendering)&&(e=e||{},this.setObjectTransition(t),o.evaluate(t.visProp.draft)?this.setDraft(t):(e.stroke||(t.highlighted?(this.setObjectStrokeColor(t,t.visProp.highlightstrokecolor,t.visProp.highlightstrokeopacity),this.setObjectStrokeWidth(t,t.visProp.highlightstrokewidth)):(this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))),e.fill||(t.highlighted?this.setObjectFillColor(t,t.visProp.highlightfillcolor,t.visProp.highlightfillopacity):this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity)),e.dash||this.setDashStyle(t,t.visProp),e.shadow||this.setShadow(t),e.gradient||this.setShadow(t),e.tabindex||this.setTabindex(t)))},_getHighlighted:function(t){var e=!1;return o.exists(t.board)&&o.exists(t.board.highlightedObjects)||(e=!0),!e&&o.exists(t.board.highlightedObjects[t.id])?"highlight":""},drawPoint:function(t){var i,r=e.normalizePointFace(o.evaluate(t.visProp.face));i="o"===r?"ellipse":"[]"===r?"rect":"path",t.rendNode=this.appendChildPrim(this.createPrim(i,t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,i),this._updateVisual(t,{dash:!0,shadow:!0},!0),this.updatePoint(t)},updatePoint:function(t){var i,r=o.evaluate(t.visProp.size),s=e.normalizePointFace(o.evaluate(t.visProp.face)),n=o.evaluate(t.visProp.sizeunit),a=o.evaluate(t.visProp.zoom);isNaN(t.coords.scrCoords[2]+t.coords.scrCoords[1])||("user"===n&&(r*=Math.sqrt(t.board.unitX*t.board.unitY)),r*=t.board&&a?Math.sqrt(t.board.zoomX*t.board.zoomY):1,i=0===r?0:r+1,"o"===s?this.updateEllipsePrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2],i,i):"[]"===s?this.updateRectPrim(t.rendNode,t.coords.scrCoords[1]-r,t.coords.scrCoords[2]-r,2*r,2*r):this.updatePathPrim(t.rendNode,this.updatePathStringPoint(t,r,s),t.board),this._updateVisual(t,{dash:!1,shadow:!1}),this.setShadow(t))},changePointStyle:function(t){var e=this.getElementById(t.id);o.exists(e)&&this.remove(e),this.drawPoint(t),o.clearVisPropOld(t),t.visPropCalc.visible||this.display(t,!1),o.evaluate(t.visProp.draft)&&this.setDraft(t)},drawLine:function(t){t.rendNode=this.appendChildPrim(this.createPrim("line",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"lines"),this.updateLine(t)},updateLine:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},drawCurve:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path"),this.updateCurve(t)},updateCurve:function(t){this._updateVisual(t),this.updatePathWithArrowHeads(t),this.setLineCap(t)},updatePathWithArrowHeads:function(t,e){var i,s,n=t.visProp,a=e?"highlight":"";i=e&&n.highlightstrokewidth?Math.max(o.evaluate(n.highlightstrokewidth),o.evaluate(n.strokewidth)):o.evaluate(n.strokewidth),s=this.getArrowHeadData(t,i,a),this.makeArrows(t,s),t.elementClass===r.OBJECT_CLASS_LINE?this.updateLineWithEndings(t,s):t.elementClass===r.OBJECT_CLASS_CURVE&&this.updatePath(t),this.setArrowSize(t,s)},getArrowHeadData:function(t,e,i){var n,a,l,c,h=s.eps,u=0,d=0,p=0,f=0,m=o.evaluate(t.visProp.firstarrow),b=o.evaluate(t.visProp.lastarrow);return(m||b)&&(n=o.exists(m.type)?o.evaluate(m.type):t.elementClass===r.OBJECT_CLASS_LINE?1:7,a=o.exists(b.type)?o.evaluate(b.type):t.elementClass===r.OBJECT_CLASS_LINE?1:7,m&&(c=6,o.exists(m.size)&&(c=o.evaluate(m.size)),""!==i&&o.exists(m[i+"size"])&&(c=o.evaluate(m[i+"size"])),l=e*c,2===n?(l*=.5,h+=e*c):3===n?(l=e*c/3,h+=e):4===n||5===n||6===n?(l=e*c/1.5,h+=e*c):7===n?(l=0,c=10,h+=e):h+=e*c,u+=l,p=c),b&&(c=6,o.exists(b.size)&&(c=o.evaluate(b.size)),""!==i&&o.exists(b[i+"size"])&&(c=o.evaluate(b[i+"size"])),l=e*c,2===a?(l*=.5,h+=e*c):3===a?(l=e*c/3,h+=e):4===a||5===a||6===a?(l=e*c/1.5,h+=e*c):7===a?(l=0,c=10,h+=e):h+=e*c,d+=l,f=c)),t.visPropCalc.typeFirst=n,t.visPropCalc.typeLast=a,{evFirst:m,evLast:b,typeFirst:n,typeLast:a,offFirst:u,offLast:d,sizeFirst:p,sizeLast:f,showFirst:1,showLast:1,minLen:h,strokeWidth:e}},updateLineWithEndings:function(t,e){var s,a,l=null;return s=new i(r.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),a=new i(r.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),l=o.evaluate(t.visProp.margin),n.calcStraight(t,s,a,l),this.handleTouchpoints(t,s,a,e),this.getPositionArrowHead(t,s,a,e),this.updateLinePrim(t.rendNode,s.scrCoords[1],s.scrCoords[2],a.scrCoords[1],a.scrCoords[2],t.board),this},updatePath:function(t){return o.evaluate(t.visProp.handdrawing)?this.updatePathPrim(t.rendNode,this.updatePathStringBezierPrim(t),t.board):this.updatePathPrim(t.rendNode,this.updatePathStringPrim(t),t.board),this},getPositionArrowHead:function(t,e,i,s){var n,o,a,l,c;return(s.evFirst||s.evLast)&&(o=a=l=c=0,n=e.distance(r.COORDS_BY_SCREEN,i),s.evFirst&&"vml"!==t.board.renderer.type&&(n>=s.minLen?(o=(i.scrCoords[1]-e.scrCoords[1])*s.offFirst/n,a=(i.scrCoords[2]-e.scrCoords[2])*s.offFirst/n):s.showFirst=0),s.evLast&&"vml"!==t.board.renderer.type&&(n>=s.minLen?(l=(i.scrCoords[1]-e.scrCoords[1])*s.offLast/n,c=(i.scrCoords[2]-e.scrCoords[2])*s.offLast/n):s.showLast=0),e.setCoordinates(r.COORDS_BY_SCREEN,[e.scrCoords[1]+o,e.scrCoords[2]+a],!1,!0),i.setCoordinates(r.COORDS_BY_SCREEN,[i.scrCoords[1]-l,i.scrCoords[2]-c],!1,!0)),this},handleTouchpoints:function(t,e,i,s){var n,a,l,c,h,u,d;return(s.evFirst||s.evLast)&&(l=c=h=u=d=0,n=o.evaluate(t.point1.visProp.size)+o.evaluate(t.point1.visProp.strokewidth),a=o.evaluate(t.point2.visProp.size)+o.evaluate(t.point2.visProp.strokewidth),s.evFirst&&o.evaluate(t.visProp.touchfirstpoint)&&(l=e.distance(r.COORDS_BY_SCREEN,i),c=(i.scrCoords[1]-e.scrCoords[1])*n/l,h=(i.scrCoords[2]-e.scrCoords[2])*n/l),s.evLast&&o.evaluate(t.visProp.touchlastpoint)&&(l=e.distance(r.COORDS_BY_SCREEN,i),u=(i.scrCoords[1]-e.scrCoords[1])*a/l,d=(i.scrCoords[2]-e.scrCoords[2])*a/l),e.setCoordinates(r.COORDS_BY_SCREEN,[e.scrCoords[1]+c,e.scrCoords[2]+h],!1,!0),i.setCoordinates(r.COORDS_BY_SCREEN,[i.scrCoords[1]-u,i.scrCoords[2]-d],!1,!0)),this},setArrowSize:function(t,e){return e.evFirst&&this._setArrowWidth(t.rendNodeTriangleStart,e.showFirst*e.strokeWidth,t.rendNode,e.sizeFirst),e.evLast&&this._setArrowWidth(t.rendNodeTriangleEnd,e.showLast*e.strokeWidth,t.rendNode,e.sizeLast),this},setLineCap:function(t){},drawTicks:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path")},updateTicks:function(t){},drawEllipse:function(t){t.rendNode=this.appendChildPrim(this.createPrim("ellipse",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"ellipse"),this.updateEllipse(t)},updateEllipse:function(t){this._updateVisual(t);var e=t.Radius();e>0&&Math.abs(t.center.coords.usrCoords[0])>s.eps&&!isNaN(e+t.center.coords.scrCoords[1]+t.center.coords.scrCoords[2])&&e*t.board.unitX<2e6&&this.updateEllipsePrim(t.rendNode,t.center.coords.scrCoords[1],t.center.coords.scrCoords[2],e*t.board.unitX,e*t.board.unitY)},drawPolygon:function(t){t.rendNode=this.appendChildPrim(this.createPrim("polygon",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"polygon"),this.updatePolygon(t)},updatePolygon:function(t){this._updateVisual(t,{stroke:!0,dash:!0}),this.updatePolygonPrim(t.rendNode,t)},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){var e,i,r,s;"html"===o.evaluate(t.visProp.display)&&a.isBrowser&&"no"!==this.type?(e=this.container.ownerDocument.createElement("div"),e.style.position="absolute",e.className=o.evaluate(t.visProp.cssclass),r=o.evaluate(t.visProp.layer),o.exists(r)||(r=0),i=""===this.container.style.zIndex?0:parseInt(this.container.style.zIndex,10),e.style.zIndex=i+r,this.container.appendChild(e),e.setAttribute("id",this.container.id+"_"+t.id)):e=this.drawInternalText(t),t.rendNode=e,t.htmlStr="",t.visProp.islabel&&o.exists(t.visProp.anchor)?(s=o.evaluate(t.visProp.anchor.visProp.visible),t.prepareUpdate().updateVisibility(s)):t.prepareUpdate().updateVisibility(),this.updateText(t)},updateText:function(e){var i,r,s,n,l,c,h,u,d,p=e.plaintext;if(e.visPropCalc.visible)if(this.updateTextStyle(e,!1),"html"===o.evaluate(e.visProp.display)&&"no"!==this.type){if(isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])||(r=e.coords.scrCoords[1],r=Math.abs(r)<1e6?r:1e6,u=e.getAnchorX(),i="right"===u?e.board.canvasWidth-r:"middle"===u?r-.5*e.size[0]:r,e.visPropOld.left!==u+i&&("right"===u?(e.rendNode.style.right=i+"px",e.rendNode.style.left="auto"):(e.rendNode.style.left=i+"px",e.rendNode.style.right="auto"),e.visPropOld.left=u+i),r=e.coords.scrCoords[2]+this.vOffsetText,r=Math.abs(r)<1e6?r:1e6,d=e.getAnchorY(),i="bottom"===d?e.board.canvasHeight-r:"middle"===d?r-.5*e.size[1]:r,e.visPropOld.top!==d+i&&("bottom"===d?(e.rendNode.style.top="auto",e.rendNode.style.bottom=i+"px"):(e.rendNode.style.bottom="auto",e.rendNode.style.top=i+"px"),e.visPropOld.top=d+i)),e.htmlStr!==p){try{e.type===o.OBJECT_TYPE_BUTTON?e.rendNodeButton.innerHTML=p:e.type===o.OBJECT_TYPE_CHECKBOX||e.type===o.OBJECT_TYPE_INPUT?e.rendNodeLabel.innerHTML=p:e.rendNode.innerHTML=p}catch(t){s=e.rendNode.parentNode,e.rendNode.parentNode.removeChild(e.rendNode),e.rendNode.innerHTML=p,s.appendChild(e.rendNode)}if(e.htmlStr=p,o.evaluate(e.visProp.usemathjax))try{MathJax.typeset?MathJax.typeset([e.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,e.rendNode]),c=e.board.container,h="fullscreenwrap_"+c,document.getElementById(h)&&(n=e.board.containerObj._cssFullscreenStore.scale,l=e.board.containerObj._cssFullscreenStore.vshift,a.scaleJSXGraphDiv("#"+h,"#"+c,n,l))}catch(e){t.debug("MathJax (not yet) loaded")}else if(o.evaluate(e.visProp.usekatex))try{katex.render(p,e.rendNode,{throwOnError:!1})}catch(e){t.debug("KaTeX (not yet) loaded")}else if(o.evaluate(e.visProp.useasciimathml))try{AMprocessNode(e.rendNode,!1)}catch(e){t.debug("AsciiMathML (not yet) loaded")}}this.transformImage(e,e.transformations)}else this.updateInternalText(e)},_css2js:function(t){var e,i,r,s,n,a=[],l=o.trim(t).replace(/;$/,"").split(";");for(i=l.length,e=0;e<i;++e)""!==o.trim(l[e])&&(n=l[e].split(":"),r=o.trim(n[0].replace(/-([a-z])/gi,(function(t,e){return e.toUpperCase()}))),s=o.trim(n[1]),a.push({key:r,val:s}));return a},updateTextStyle:function(t,e){var i,r,s,n,l,c,h,u,d,p=t.visProp,f=a.isBrowser?p.display:"internal",m=["rendNode","rendNodeTag","rendNodeLabel"],b=m.length,v=o.evaluate(p.fontunit),g=["cssdefaultstyle","cssstyle"],y=g.length;if(e?(s=p.highlightstrokecolor,r=p.highlightstrokeopacity,n=p.highlightcssclass):(s=p.strokecolor,r=p.strokeopacity,n=p.cssclass),"no"!==this.type&&("html"===f||"canvas"!==this.type)){for(u=0;u<y;u++)if(""!==(d=o.evaluate(p[(e?"highlight":"")+g[u]]))&&t.visPropOld[g[u]]!==d){for(c=this._css2js(d),l=0;l<b;l++)if(o.exists(t[m[l]]))for(h in c)c.hasOwnProperty(h)&&(t[m[l]].style[c[h].key]=c[h].val);t.visPropOld[g[u]]=d}if(i=o.evaluate(p.fontsize),t.visPropOld.fontsize!==i){t.needsSizeUpdate=!0;try{for(l=0;l<b;l++)o.exists(t[m[l]])&&(t[m[l]].style.fontSize=i+v)}catch(e){for(l=0;l<b;l++)o.exists(t[m[l]])&&(t[m[l]].style.fontSize=i)}t.visPropOld.fontsize=i}}return this.setObjectTransition(t),"html"===f&&"no"!==this.type?(t.visPropOld.cssclass!==n&&(t.rendNode.className=n,t.visPropOld.cssclass=n,t.needsSizeUpdate=!0),this.setObjectStrokeColor(t,s,r)):this.updateInternalTextStyle(t,s,r),this},updateInternalTextStyle:function(t,e,i){this.setObjectStrokeColor(t,e,i)},drawImage:function(t){},updateImage:function(t){this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),this.updateImageURL(t),this.transformImage(t,t.transformations),this._updateVisual(t,{stroke:!0,dash:!0},!0)},joinTransforms:function(t,e){var i,r=t.board.origin.scrCoords[1],n=t.board.origin.scrCoords[2],o=t.board.unitX,a=t.board.unitY,l=e.length,c=[[1,0,0],[-r/o,1/o,0],[n/a,0,-1/a]];for(i=0;i<l;i++)c=s.matMatMult(e[i].matrix,c);return s.matMatMult([[1,0,0],[r,o,0],[n,0,-a]],c)},transformImage:function(t,e){},updateImageURL:function(t){},updateImageStyle:function(t,e){t.rendNode.className=o.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass)},drawForeignObject:function(t){},updateForeignObject:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t,e){},_setArrowWidth:function(t,e,i){},updateEllipsePrim:function(t,e,i,r,s){},updateLinePrim:function(t,e,i,r,s,n){},updatePathPrim:function(t,e,i){},updatePathStringPoint:function(t,e,i){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,i,r,s){},setPropertyPrim:function(t,e,i){},setTabindex:function(t){var e;o.exists(t.rendNode)&&(e=o.evaluate(t.visProp.tabindex))!==t.visPropOld.tabindex&&(t.rendNode.setAttribute("tabindex",e),t.visPropOld.tabindex=e)},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){if(o.evaluate(t.visProp.draft)){var e=t.board.options.elements.draft.color,i=t.board.options.elements.draft.opacity;this.setObjectTransition(t),t.type===r.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,e,i):(t.elementClass===r.OBJECT_CLASS_POINT?this.setObjectFillColor(t,e,i):this.setObjectFillColor(t,"none",0),this.setObjectStrokeColor(t,e,i),this.setObjectStrokeWidth(t,t.board.options.elements.draft.strokeWidth))}},removeDraft:function(t){this.setObjectTransition(t),t.type===r.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity):(t.type===r.OBJECT_CLASS_POINT&&this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity),this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectFillColor:function(t,e,i){},setObjectStrokeColor:function(t,e,i){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t){var e,i,s=t.visProp;if(this.setObjectTransition(t),!s.draft){if(t.type===r.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,s.highlightfillcolor,s.highlightfillopacity),e=0;e<t.borders.length;e++)this.setObjectStrokeColor(t.borders[e],t.borders[e].visProp.highlightstrokecolor,t.borders[e].visProp.highlightstrokeopacity);else t.elementClass===r.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!0):t.type===r.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!0),this.setObjectFillColor(t,s.highlightfillcolor,s.highlightfillopacity)):(this.setObjectStrokeColor(t,s.highlightstrokecolor,s.highlightstrokeopacity),this.setObjectFillColor(t,s.highlightfillcolor,s.highlightfillopacity));s.highlightstrokewidth&&(i=Math.max(o.evaluate(s.highlightstrokewidth),o.evaluate(s.strokewidth)),this.setObjectStrokeWidth(t,i),t.elementClass!==r.OBJECT_CLASS_LINE&&t.elementClass!==r.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(t,!0))}return this},noHighlight:function(t){var e,i,s=t.visProp;if(this.setObjectTransition(t),!o.evaluate(t.visProp.draft)){if(t.type===r.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,s.fillcolor,s.fillopacity),e=0;e<t.borders.length;e++)this.setObjectStrokeColor(t.borders[e],t.borders[e].visProp.strokecolor,t.borders[e].visProp.strokeopacity);else t.elementClass===r.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!1):t.type===r.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!1),this.setObjectFillColor(t,s.fillcolor,s.fillopacity)):(this.setObjectStrokeColor(t,s.strokecolor,s.strokeopacity),this.setObjectFillColor(t,s.fillcolor,s.fillopacity));i=o.evaluate(s.strokewidth),this.setObjectStrokeWidth(t,i),t.elementClass!==r.OBJECT_CLASS_LINE&&t.elementClass!==r.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(t,!1)}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(t,e){var i,r,s=function(t){t||(t=window.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},n=function(e,n){var l;l=i.createElement("span"),r.appendChild(l),l.appendChild(i.createTextNode(e)),l.style.paddingLeft="7px",l.style.paddingRight="7px",void 0!==l.classList&&l.classList.add("JXG_navigation_button"),a.addEvent(l,"click",(function(e){return o.bind(n,t)(),!1}),t),a.addEvent(l,"mouseup",s,t),a.addEvent(l,"mousedown",s,t),a.addEvent(l,"touchend",s,t),a.addEvent(l,"touchstart",s,t)};a.isBrowser&&"no"!==this.type&&(i=t.containerObj.ownerDocument,r=i.createElement("div"),r.setAttribute("id",t.containerObj.id+"_navigationbar"),r.style.color=e.strokecolor,r.style.backgroundColor=e.fillcolor,r.style.padding=e.padding,r.style.position=e.position,r.style.fontSize=e.fontsize,r.style.cursor=e.cursor,r.style.zIndex=e.zindex,t.containerObj.appendChild(r),r.style.right=e.right,r.style.bottom=e.bottom,void 0!==r.classList&&r.classList.add("JXG_navigation"),t.attr.showfullscreen&&n(t.attr.fullscreen.symbol,(function(){t.toFullscreen(t.attr.fullscreen.id)})),t.attr.showscreenshot&&n(t.attr.screenshot.symbol,(function(){window.setTimeout((function(){t.renderer.screenshot(t,"",!1)}),330)})),t.attr.showreload&&n("↻",(function(){t.reload()})),t.attr.showcleartraces&&n("⊗",(function(){t.clearTraces()})),t.attr.shownavigation&&(t.attr.showzoom&&(n("–",t.zoomOut),n("o",t.zoom100),n("+",t.zoomIn)),n("←",t.clickLeftArrow),n("↓",t.clickUpArrow),n("↑",t.clickDownArrow),n("→",t.clickRightArrow)))},getElementById:function(t){return o.exists(this.container)?this.container.ownerDocument.getElementById(this.container.id+"_"+t):""},removeToInsertLater:function(t){var e=t.parentNode,i=t.nextSibling;if(null!==e)return e.removeChild(t),function(){i?e.insertBefore(t,i):e.appendChild(t)}},resize:function(t,e){},createTouchpoints:function(t){},showTouchpoint:function(t){},hideTouchpoint:function(t){},updateTouchpoint:function(t,e){},dumpToDataURI:function(t){},dumpToCanvas:function(t,e,i,r){},screenshot:function(t){},setLayer:function(t,e){}}),t.AbstractRenderer})),define("reader/file",["jxg","utils/env","utils/type","utils/encoding","utils/base64"],(function(t,e,i,r,s){"use strict";return t.FileReader={handleRemoteFile:function(e,n,o,a,l,c){var h=!1;try{h=new XMLHttpRequest,"raw"===o.toLowerCase()?h.overrideMimeType("text/plain; charset="+l):h.overrideMimeType("text/xml; charset="+l)}catch(t){try{h=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{h=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){h=!1}}}if(h){h.open("GET",e,a),"raw"===o.toLowerCase()?this.cbp=function(){var t=h;4===t.readyState&&n(t.responseText)}:this.cbp=function(){var t=h,e="";4===t.readyState&&(e=!i.exists(t.responseStream)||"PK"!==t.responseText.slice(0,2)&&31!==r.asciiCharCodeAt(t.responseText.slice(0,1),0)?t.responseText:s.decode(jxgBinFileReader(t)),this.parseString(e,n,o,c))},this.cb=i.bind(this.cbp,this),h.onreadystatechange=this.cb;try{h.send(null)}catch(t){throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+e+"'.")}}else t.debug("AJAX not activated!")},handleLocalFile:function(t,e,r,s,n,o){i.exists(s)||(s=!0),"raw"===r.toLowerCase()?this.cbp=function(t){e(t.target.result)}:this.cbp=function(t){var i=t.target.result;this.parseString(i,e,r,o)},this.cb=i.bind(this.cbp,this);var a=new FileReader;a.onload=this.cb,"raw"===r.toLowerCase()?a.readAsText(t):a.readAsText(t,n)},parseFileContent:function(t,e,r,s,n,o){i.isString(t)||void 0===FileReader?this.handleRemoteFile(t,e,r,s,n,o):this.handleLocalFile(t,e,r,s,n,o)},parseString:function(e,r,s,n){var o,a;if(s=s.toLowerCase(),o=t.readers[s],i.exists(o))a=new o(r,e),a.read();else if("jessiecode"!==s)throw new Error("JSXGraph: There is no reader available for '"+s+"'.");i.isFunction(n)&&n(r)}},!e.isMetroApp()&&e.isBrowser&&"object"==typeof navigator&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write('<script type="text/vbscript">\nFunction Base64Encode(inData)\n  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"\n  Dim cOut, sOut, I\n  For I = 1 To LenB(inData) Step 3\n    Dim nGroup, pOut, sGroup\n    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _\n      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))\n    nGroup = Oct(nGroup)\n    nGroup = String(8 - Len(nGroup), "0") & nGroup\n    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)\n    sOut = sOut + pOut\n  Next\n  Select Case LenB(inData) Mod 3\n    Case 1: \'8 bit final\n      sOut = Left(sOut, Len(sOut) - 2) + "=="\n    Case 2: \'16 bit final\n      sOut = Left(sOut, Len(sOut) - 1) + "="\n  End Select\n  Base64Encode = sOut\nEnd Function\n\nFunction MyASC(OneChar)\n  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)\nEnd Function\n\nFunction jxgBinFileReader(xhr)\n    Dim byteString\n    Dim b64String\n    Dim i\n    byteString = xhr.responseBody\n    ReDim byteArray(LenB(byteString))\n    For i = 1 To LenB(byteString)\n        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n    Next\n    b64String = Base64Encode(byteString)\n    jxgBinFileReader = b64String\nEnd Function\n<\/script>\n'),t.FileReader})),define("parser/geonext",["jxg","base/constants","utils/type"],(function(t,e,i){"use strict";return t.GeonextParser={replacePow:function(t){var e,i,r,s,n,o,a,l,c,h,u,d;for(t=t.replace(/(\s*)\^(\s*)/g,"^"),h=t.indexOf("^"),s=-1;h>=0&&h<t.length-1;){if(s===h)throw new Error("JSXGraph: Error while parsing expression '"+t+"'");if(s=h,c=t.slice(0,h),u=t.slice(h+1),")"===c.charAt(c.length-1)){for(e=1,i=c.length-2;i>=0&&e>0;)r=c.charAt(i),")"===r?e++:"("===r&&(e-=1),i-=1;if(0!==e)throw new Error("JSXGraph: Missing '(' in expression");for(n="",a=c.substring(0,i+1),l=i;l>=0&&a.substr(l,1).match(/([\w\.]+)/);)n=RegExp.$1+n,l-=1;n+=c.substring(i+1,c.length),n=n.replace(/([\(\)\+\*\%\^\-\/\]\[])/g,"\\$1")}else n="[\\w\\.]+";if(u.match(/^([\w\.]*\()/)){for(e=1,i=RegExp.$1.length;i<u.length&&e>0;)r=u.charAt(i),")"===r?e-=1:"("===r&&(e+=1),i+=1;if(0!==e)throw new Error("JSXGraph: Missing ')' in expression");o=u.substring(0,i),o=o.replace(/([\(\)\+\*\%\^\-\/\[\]])/g,"\\$1")}else o="[\\w\\.]+";d=new RegExp("("+n+")\\^("+o+")"),t=t.replace(d,"pow($1,$2)"),h=t.indexOf("^")}return t},replaceIf:function(t){var e,i,r,s,n,o,a,l,c,h="",u=null,d=null,p=null;if((r=t.indexOf("If("))<0)return t;for(t=t.replace(/""/g,"0");r>=0;){for(e=t.slice(0,r),i=t.slice(r+3),n=1,s=0,o=-1,a=-1;s<i.length&&n>0;)l=i.charAt(s),")"===l?n-=1:"("===l?n+=1:","===l&&1===n&&(o<0?o=s:a=s),s+=1;if(c=i.slice(0,s-1),i=i.slice(s),o<0)return"";if(a<0)return"";u=c.slice(0,o),d=c.slice(o+1,a),p=c.slice(a+1),u=this.replaceIf(u),d=this.replaceIf(d),p=this.replaceIf(p),h+=e+"(("+u+")?("+d+"):("+p+"))",t=i,u=null,d=null,r=t.indexOf("If(")}return h+i},replaceNameById:function(t,e,i){var r,s,n,o,a=0,l=["X","Y","L","V"],c=function(t){return i?"$('"+t+"')":t};for(o=0;o<l.length;o++)for(a=t.indexOf(l[o]+"(");a>=0;)a>=0&&(r=t.indexOf(")",a+2))>=0&&(s=t.slice(a+2,r),s=s.replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+2)+(i?"$('":"")+c(n.id)+t.slice(r))),r=t.indexOf(")",a+2),a=t.indexOf(l[o]+"(",r);for(a=t.indexOf("Dist(");a>=0;)a>=0&&(r=t.indexOf(",",a+5))>=0&&(s=t.slice(a+5,r),s=s.replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+5)+c(n.id)+t.slice(r))),r=t.indexOf(",",a+5),a=t.indexOf(",",r),r=t.indexOf(")",a+1),r>=0&&(s=t.slice(a+1,r),s=s.replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+1)+c(n.id)+t.slice(r))),r=t.indexOf(")",a+1),a=t.indexOf("Dist(",r);for(l=["Deg","Rad"],o=0;o<l.length;o++)for(a=t.indexOf(l[o]+"(");a>=0;)a>=0&&(r=t.indexOf(",",a+4))>=0&&(s=t.slice(a+4,r),s=s.replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+4)+c(n.id)+t.slice(r))),r=t.indexOf(",",a+4),a=t.indexOf(",",r),r=t.indexOf(",",a+1),r>=0&&(s=t.slice(a+1,r),s=s.replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+1)+c(n.id)+t.slice(r))),r=t.indexOf(",",a+1),a=t.indexOf(",",r),r=t.indexOf(")",a+1),r>=0&&(s=t.slice(a+1,r),s=s.replace(/\\(['"])?/g,"$1"),(n=e.elementsByName[s])&&(t=t.slice(0,a+1)+c(n.id)+t.slice(r))),r=t.indexOf(")",a+1),a=t.indexOf(l[o]+"(",r);return t},replaceIdByObj:function(t){var e=/(X|Y|L)\(([\w_]+)\)/g;return t=t.replace(e,"$('$2').$1()"),e=/(V)\(([\w_]+)\)/g,t=t.replace(e,"$('$2').Value()"),e=/(Dist)\(([\w_]+),([\w_]+)\)/g,t=t.replace(e,"dist($('$2'), $('$3'))"),e=/(Deg)\(([\w_]+),([ \w\[\w_]+),([\w_]+)\)/g,t=t.replace(e,"deg($('$2'),$('$3'),$('$4'))"),e=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,t=t.replace(e,"rad($('$1'),$('$2'),$('$3'))"),e=/N\((.+)\)/g,t.replace(e,"($1)")},geonext2JS:function(t,e){var i,r,s,n=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],o=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&amp;/g,"&"),r=t,r=this.replaceNameById(r,e),r=this.replaceIf(r),r=this.replacePow(r),r=this.replaceIdByObj(r),s=0;s<n.length;s++)i=new RegExp(["(\\W|^)(",n[s],")"].join(""),"ig"),r=r.replace(i,["$1",o[s]].join(""));return r=r.replace(/True/g,"true"),r=r.replace(/False/g,"false"),r=r.replace(/fasle/g,"false"),r=r.replace(/Pi/g,"PI"),r.replace(/"/g,"'")},findDependencies:function(t,r,s){var n,o,a,l;for(o in i.exists(s)||(s=t.board),n=s.elementsByName,n)n.hasOwnProperty(o)&&o!==t.name&&(n[o].elementClass===e.OBJECT_CLASS_TEXT&&i.evaluate(n[o].visProp.islabel)||(l=o.replace(/\[/g,"\\["),l=l.replace(/\]/g,"\\]"),a=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+l+")(,[\\w\\[\\]'_ ]+)*\\)","g"),r.search(a)>=0&&n[o].addChild(t)))},gxt2jc:function(t,e){var i;return t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&amp;/g,"&"),i=t,i=this.replaceNameById(i,e,!0),i=i.replace(/True/g,"true"),i=i.replace(/False/g,"false"),i.replace(/fasle/g,"false")}},t.GeonextParser})),define("base/element",["jxg","base/constants","base/coords","math/math","math/statistics","options","utils/event","utils/color","utils/type"],(function(t,e,i,r,s,n,o,a,l){"use strict";return t.GeometryElement=function(t,i,r,s){var n,a,c;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},o.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,arguments.length>0){for(a in this.board=t,this.type=r,this._org_type=r,this.elementClass=s||e.OBJECT_CLASS_OTHER,this.id=i.id,n=i.name,l.exists(n)||(n=this.board.generateName(this)),""!==n&&(this.board.elementsByName[n]=this),this.name=n,this.needsRegularUpdate=i.needsregularupdate,l.clearVisPropOld(this),c=this.resolveShortcuts(i),c)c.hasOwnProperty(a)&&this._set(a,c[a]);this.visProp.draft=c.draft&&c.draft.draft}},t.extend(t.GeometryElement.prototype,{addChild:function(t){var e,i;for(e in this.childElements[t.id]=t,this.addDescendants(t),t.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(e))for(i in this.descendants[e].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(i)&&(this.descendants[e].ancestors[this.ancestors[i].id]=this.ancestors[i]);for(e in this.ancestors)if(this.ancestors.hasOwnProperty(e))for(i in this.descendants)this.descendants.hasOwnProperty(i)&&(this.ancestors[e].descendants[this.descendants[i].id]=this.descendants[i]);return this},addDescendants:function(t){var e;for(e in this.descendants[t.id]=t,t.childElements)t.childElements.hasOwnProperty(e)&&this.addDescendants(t.childElements[e]);return this},addParents:function(t){var e,i,r;for(r=l.isArray(t)?t:arguments,i=r.length,e=0;e<i;++e)l.exists(r[e])&&(l.isId(this.board,r[e])?this.parents.push(r[e]):l.exists(r[e].id)&&this.parents.push(r[e].id));this.parents=l.uniqueArray(this.parents)},setParents:function(t){this.parents=[],this.addParents(t)},removeChild:function(t){return delete this.childElements[t.id],this.removeDescendants(t),delete t.ancestors[this.id],this},removeDescendants:function(t){var e;for(e in delete this.descendants[t.id],t.childElements)t.childElements.hasOwnProperty(e)&&this.removeDescendants(t.childElements[e]);return this},countChildren:function(){var t,e,i=0;for(t in e=this.childElements,e)e.hasOwnProperty(t)&&t.indexOf("Label")<0&&i++;return i},getName:function(){return this.name},addTransform:function(t){return this},draggable:function(){return this.isDraggable&&!l.evaluate(this.visProp.fixed)&&this.type!==e.OBJECT_TYPE_GLIDER},setPosition:function(t,i){var r,s,n,o,a=[];if(!l.exists(this.parents))return this;for(n=this.parents.length,s=0;s<n;++s)if(r=this.board.select(this.parents[s]),l.isPoint(r)){if(!r.draggable())return this;a.push(r)}for(3===i.length&&(i=i.slice(1)),o=this.board.create("transform",i,{type:"translate"}),n=a.length,n>0?o.applyOnce(a):this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(o):this.addTransform(o),s=0;s<n;++s)a[s].type===e.OBJECT_TYPE_GLIDER&&a[s].updateGlider();return this},setPositionDirectly:function(t,r,n){var o=new i(t,r,this.board,!1),a=new i(t,n,this.board,!1),l=s.subtract(o.usrCoords,a.usrCoords);return this.setPosition(e.COORDS_BY_USER,l),this},generatePolynomial:function(){return[]},animate:function(t,e,i){i=i||{};var r,s,n,o=this.board.attr.animationdelay,c=Math.ceil(e/o),h=this,u=function(t,e,i,r){var s,o;if(t=parseFloat(t),e=parseFloat(e),!isNaN(t)&&!isNaN(e))for(o=(e-t)/c,h.animationData[i]=[],n=0;n<c;n++)s=t+(n+1)*o,h.animationData[i][c-n-1]=r?Math.floor(s):s};for(r in this.animationData={},t)if(t.hasOwnProperty(r))switch(s=r.toLowerCase()){case"strokecolor":case"fillcolor":!function(t,e,i){var r,s,o,l,u;for(r=a.rgb2hsv(t),s=a.rgb2hsv(e),o=(s[0]-r[0])/c,l=(s[1]-r[1])/c,u=(s[2]-r[2])/c,h.animationData[i]=[],n=0;n<c;n++)h.animationData[i][c-n-1]=a.hsv2rgb(r[0]+(n+1)*o,r[1]+(n+1)*l,r[2]+(n+1)*u)}(this.visProp[s],t[r],s);break;case"size":if(!l.isPoint(this))break;u(this.visProp[s],t[r],s,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":u(this.visProp[s],t[r],s,!1)}return this.animationCallback=i.callback,this.board.addAnimation(this),this},update:function(){return l.evaluate(this.visProp.trace)&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(t){return this.prepareUpdate().update().updateVisibility(t).updateRenderer()},setDisplayRendNode:function(t){var e,i,r,s,n;if(void 0===t&&(t=this.visPropCalc.visible),t===this.visPropOld.visible)return this;for(this.board.renderer.display(this,t),i=this.inherits.length,r=0;r<i;r++)if(n=this.inherits[r],l.isArray(n))for(s=n.length,e=0;e<s;e++)l.exists(n[e])&&l.exists(n[e].rendNode)&&"inherit"===l.evaluate(n[e].visProp.visible)&&n[e].setDisplayRendNode(t);else l.exists(n)&&l.exists(n.rendNode)&&"inherit"===l.evaluate(n.visProp.visible)&&n.setDisplayRendNode(t);return this.hasLabel&&l.exists(this.label)&&l.exists(this.label.rendNode)&&"inherit"===l.evaluate(this.label.visProp.visible)&&this.label.setDisplayRendNode(t),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(t){var e,i,r,s,n,o;if(this.needsUpdate){for(void 0!==t?this.visPropCalc.visible=t:(o=l.evaluate(this.visProp.visible),l.exists(this.hiddenByParent)&&this.hiddenByParent&&(o=!1),"inherit"!==o&&(this.visPropCalc.visible=o)),i=this.inherits.length,r=0;r<i;r++)if(n=this.inherits[r],l.isArray(n))for(s=n.length,e=0;e<s;e++)l.exists(n[e])&&"inherit"===l.evaluate(n[e].visProp.visible)&&n[e].prepareUpdate().updateVisibility(this.visPropCalc.visible);else l.exists(n)&&"inherit"===l.evaluate(n.visProp.visible)&&n.prepareUpdate().updateVisibility(this.visPropCalc.visible);l.exists(this.label)&&l.exists(this.label.visProp)&&l.evaluate(this.label.visProp.visible)&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(t,e){var i;if(t=t.toLocaleLowerCase(),this.visProp.hasOwnProperty(t)&&t.indexOf("color")>=0&&l.isString(e)&&9===e.length&&"#"===e.charAt(0))e=a.rgba2rgbo(e),this.visProp[t]=e[0],this.visProp[t.replace("color","opacity")]=e[1];else if(null===e||!l.isObject(e)||l.exists(e.id)||l.exists(e.name))this.visProp[t]=e;else for(i in this.visProp[t]={},e)e.hasOwnProperty(i)&&(this.visProp[t][i.toLocaleLowerCase()]=e[i])},resolveShortcuts:function(t){var e,i;for(e in n.shortcuts)if(n.shortcuts.hasOwnProperty(e)&&l.exists(t[e]))for(i=0;i<n.shortcuts[e].length;i++)l.exists(t[n.shortcuts[e][i]])||(t[n.shortcuts[e][i]]=t[e]);return t},setLabel:function(t){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(t)},setLabelText:function(t){return l.exists(this.label)&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(t)),this},setName:function(t){t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"slider"!==this.elType&&this.setLabelText(t),this.setAttribute({name:t})},setProperty:function(){t.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(i){var r,s,n,o,c,h,u,d,p,f={};for(r=0;r<arguments.length;r++)h=arguments[r],l.isString(h)?(d=h.split(":"),f[l.trim(d[0])]=l.trim(d[1])):l.isArray(h)?f[h[0]]=h[1]:t.extend(f,h);for(r in f=this.resolveShortcuts(f),f)if(f.hasOwnProperty(r)){if(o=r.replace(/\s+/g,"").toLowerCase(),c=f[r],l.isObject(c)&&l.exists(this.visProp[o])){if(this.visProp[o]=l.merge(this.visProp[o],c),this.type===e.OBJECT_TYPE_TICKS&&l.exists(this.labels))for(n=this.labels.length,s=0;s<n;s++)this.labels[s].setAttribute(c);else if(l.exists(this[o]))if(l.isArray(this[o]))for(s=0;s<this[o].length;s++)this[o][s].setAttribute(c);else this[o].setAttribute(c);continue}switch(p=this.visProp[o],o){case"name":p=this.name,delete this.board.elementsByName[this.name],this.name=c,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!("false"===c||!1===c),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"labelcolor":c=a.rgba2rgbo(c),u=c[1],c=c[0],0===u&&l.exists(this.label)&&this.hasLabel&&this.label.hideElement(),l.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=c,this.board.renderer.setObjectStrokeColor(this.label,c,u)),this.elementClass===e.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=c,this.visProp.strokeopacity=u,this.board.renderer.setObjectStrokeColor(this,c,u));break;case"infoboxtext":l.isString(c)?this.infoboxText=c:this.infoboxText=!1;break;case"visible":this.visProp.visible="false"!==c&&("true"===c||c),this.setDisplayRendNode(l.evaluate(this.visProp.visible)),l.evaluate(this.visProp.visible)&&l.exists(this.updateSize)&&this.updateSize();break;case"face":l.isPoint(this)&&(this.visProp.face=c,this.board.renderer.changePointStyle(this));break;case"trace":"false"===c||!1===c?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace="pause"!==c;break;case"gradient":this.visProp.gradient=c,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":c=a.rgba2rgbo(c),this.visProp.gradientsecondcolor=c[0],this.visProp.gradientsecondopacity=c[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=c,this.board.renderer.updateGradient(this);break;case"withlabel":this.visProp.withlabel=c,l.evaluate(c)?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=c;break;case"radius":this.type!==e.OBJECT_TYPE_ANGLE&&this.type!==e.OBJECT_TYPE_SECTOR||this.setRadius(c);break;case"rotate":(this.elementClass===e.OBJECT_CLASS_TEXT&&"internal"===l.evaluate(this.visProp.display)||this.type===e.OBJECT_TYPE_IMAGE)&&this.addRotation(c);break;case"ticksdistance":this.type===e.OBJECT_TYPE_TICKS&&l.isNumber(c)&&(this.ticksFunction=this.makeTicksFunction(c));break;case"generatelabelvalue":this.type===e.OBJECT_TYPE_TICKS&&l.isFunction(c)&&(this.generateLabelValue=c);break;case"onpolygon":this.type===e.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!c);break;case"disabled":l.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!c);break;case"checked":l.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!c);break;case"maxlength":l.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!c);break;case"layer":this.board.renderer.setLayer(this,l.evaluate(c)),this._set(o,c);break;case"tabindex":l.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",c),this._set(o,c));break;default:l.exists(this.visProp[o])&&(!t.Validator[o]||t.Validator[o]&&t.Validator[o](c)||t.Validator[o]&&l.isFunction(c)&&t.Validator[o](c()))&&(c=(!c.toLowerCase||"false"!==c.toLowerCase())&&c,this._set(o,c))}this.triggerEventHandlers(["attribute:"+o],[p,c,this])}return this.triggerEventHandlers(["attribute"],[f,this]),l.evaluate(this.visProp.needsregularupdate)?this.board.update(this):this.board.fullUpdate(),this},getProperty:function(){t.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(t){var e;switch(t=t.toLowerCase()){case"needsregularupdate":e=this.needsRegularUpdate;break;case"labelcolor":e=this.label.visProp.strokecolor;break;case"infoboxtext":e=this.infoboxText;break;case"withlabel":e=this.hasLabel;break;default:e=this.visProp[t]}return e},setDash:function(t){return this.setAttribute({dash:t}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.board.renderer.getElementById(this.id)),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new i(e.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new i(e.COORDS_BY_USER,[0,0],this.board)},setArrow:function(t,i){return this.visProp.firstarrow=t,this.visProp.lastarrow=i,i&&(this.type=e.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var t=l.evaluate(this.visProp.gradient);"linear"!==t&&"radial"!==t||this.board.renderer.setGradient(this)},createLabel:function(){var e,i=this;return t.elements.text?(e=l.deepCopy(this.visProp.label,null),e.id=this.id+"Label",e.isLabel=!0,e.anchor=this,e.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=t.elements.text(this.board,[0,0,function(){return l.isFunction(i.name)?i.name():i.name}],e),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):t.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(t){return t=l.def(t,!1),!l.evaluate(this.visProp.highlight)||this.highlighted&&!t||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var t;for(t in this.traces)this.traces.hasOwnProperty(t)&&this.board.renderer.remove(this.traces[t]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=r.normalize(this.stdform),this},toJSON:function(){var t,e,i=['{"name":',this.name];for(e in i.push(', "id":'+this.id),t=[],this.visProp)this.visProp.hasOwnProperty(e)&&l.exists(this.visProp[e])&&t.push('"'+e+'":'+this.visProp[e]);return i.push(', "visProp":{'+t.toString()+"}"),i.push("}"),i.join("")},addRotation:function(t){var i,r,s,n,o,a=this;return(this.elementClass===e.OBJECT_CLASS_TEXT&&"internal"===l.evaluate(this.visProp.display)||this.type===e.OBJECT_TYPE_IMAGE)&&0!==t&&(i=this.board.create("transform",[function(){return-a.X()},function(){return-a.Y()}],{type:"translate"}),r=this.board.create("transform",[function(){return a.X()},function(){return a.Y()}],{type:"translate"}),s=this.board.create("transform",[function(){return a.board.unitX/a.board.unitY},function(){return 1}],{type:"scale"}),n=this.board.create("transform",[function(){return a.board.unitY/a.board.unitX},function(){return 1}],{type:"scale"}),o=this.board.create("transform",[function(){return l.evaluate(t)*Math.PI/180}],{type:"rotate"}),i.bindTo(this),s.bindTo(this),o.bindTo(this),n.bindTo(this),r.bindTo(this)),this},highlightStrokeColor:function(e){return t.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:e}),this},strokeColor:function(e){return t.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:e}),this},strokeWidth:function(e){return t.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:e}),this},fillColor:function(e){return t.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:e}),this},highlightFillColor:function(e){return t.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:e}),this},labelColor:function(e){return t.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:e}),this},dash:function(e){return t.deprecated("dash()","setAttribute()"),this.setAttribute({dash:e}),this},visible:function(e){return t.deprecated("visible()","setAttribute()"),this.setAttribute({visible:e}),this},shadow:function(e){return t.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:e}),this},getType:function(){return this.elType},getParents:function(){return l.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var t,e=l.deepCopy(this.visProp),i=[],r=i.length;for(e.id=this.id,e.name=this.name,t=0;t<r;t++)delete e[i[t]];return e},hasPoint:function(t,e){return!1},addTicks:function(t){return""!==t.id&&l.exists(t.id)||(t.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(t),this.ticks.push(t),t.id},removeAllTicks:function(){var t;if(l.exists(this.ticks)){for(t=this.ticks.length;t>0;t--)this.removeTicks(this.ticks[t-1]);this.ticks=[],this.board.update()}},removeTicks:function(t){var e,i;if(l.exists(this.defaultTicks)&&this.defaultTicks===t&&(this.defaultTicks=null),l.exists(this.ticks))for(e=this.ticks.length;e>0;e--)if(this.ticks[e-1]===t){if(this.board.removeObject(this.ticks[e-1]),this.ticks[e-1].ticks)for(i=0;i<this.ticks[e-1].ticks.length;i++)l.exists(this.ticks[e-1].labels[i])&&this.board.removeObject(this.ticks[e-1].labels[i]);delete this.ticks[e-1];break}},getSnapSizes:function(){var t,e,i;return t=l.evaluate(this.visProp.snapsizex),e=l.evaluate(this.visProp.snapsizey),t<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(i=this.board.defaultAxes.x.defaultTicks,t=i.ticksDelta*(l.evaluate(i.visProp.minorticks)+1)),e<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(i=this.board.defaultAxes.y.defaultTicks,e=i.ticksDelta*(l.evaluate(i.visProp.minorticks)+1)),[t,e]},handleSnapToGrid:function(i,r){var s,n,o,a,c,h,u,d,p,f=!1,m=l.evaluate(this.visProp.attracttogrid),b=l.evaluate(this.visProp.attractorunit),v=l.evaluate(this.visProp.attractordistance);return!l.exists(this.coords)||l.evaluate(this.visProp.fixed)||(f=l.evaluate(this.visProp.snaptogrid)||m||!0===i,f&&(s=this.coords.usrCoords[1],n=this.coords.usrCoords[2],u=this.getSnapSizes(),d=u[0],p=u[1],d>0&&p>0&&(h=this.board.getBoundingBox(),o=Math.round(s/d)*d,a=Math.round(n/p)*p,c=new t.Coords(e.COORDS_BY_USER,[o,a],this.board),(!m||c.distance("screen"==b?e.COORDS_BY_SCREEN:e.COORDS_BY_USER,this.coords)<v)&&(s=o,n=a,r||(s<h[0]?s+=d:s>h[2]&&(s-=d),n<h[3]?n+=p:n>h[1]&&(n-=p)),this.coords.setCoordinates(e.COORDS_BY_USER,[s,n]))))),this},getBoundingBox:function(){var t,i,r,s,n,o=[1/0,1/0,-1/0,-1/0];if(this.type===e.OBJECT_TYPE_POLYGON){if((i=this.vertices.length-1)<=0)return o;for(t=0;t<i;t++)r=this.vertices[t].X(),o[0]=r<o[0]?r:o[0],o[2]=r>o[2]?r:o[2],r=this.vertices[t].Y(),o[1]=r<o[1]?r:o[1],o[3]=r>o[3]?r:o[3]}else if(this.elementClass===e.OBJECT_CLASS_CIRCLE)s=this.center.X(),n=this.center.Y(),o=[s-this.radius,n+this.radius,s+this.radius,n-this.radius];else if(this.elementClass===e.OBJECT_CLASS_CURVE){if(0===(i=this.vertices.length))return o;for(t=0;t<i;t++)r=this.points[t].coords.usrCoords[1],o[0]=r<o[0]?r:o[0],o[2]=r>o[2]?r:o[2],r=this.points[t].coords.usrCoords[1],o[1]=r<o[1]?r:o[1],o[3]=r>o[3]?r:o[3]}return o},addEvent:t.shortcut(t.GeometryElement.prototype,"on"),removeEvent:t.shortcut(t.GeometryElement.prototype,"off"),__evt__over:function(t){},__evt__mouseover:function(t){},__evt__out:function(t){},__evt__mouseout:function(t){},__evt__move:function(t){},__evt__mousemove:function(t){},__evt__drag:function(t){},__evt__mousedrag:function(t){},__evt__pendrag:function(t){},__evt__touchdrag:function(t){},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pendown:function(t){},__evt__touchdown:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__penup:function(t){},__evt__touchup:function(t){},__evt__attribute:function(t,e){},__evt__attribute_:function(t,e,i){},__evt:function(){}}),t.GeometryElement})),define("base/coordselement",["jxg","math/math","math/geometry","math/numerics","math/statistics","base/coords","base/constants","utils/type"],(function(t,e,i,r,s,n,o,a){"use strict";return t.CoordsElement=function(t,e){var i;for(a.exists(t)||(t=[1,0,0]),i=0;i<t.length;++i)t[i]=parseFloat(t[i]);this.coords=new n(o.COORDS_BY_USER,t,this.board),this.initialCoords=new n(o.COORDS_BY_USER,t,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=a.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",onPolygon:"onPolygon"}),a.exists(this.element)&&this.addAnchor(t,e),this.isDraggable=!0},t.extend(t.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(t){return this.needsUpdate?(a.exists(t)||(t=!1),a.evaluate(this.visProp.frozen)||this.updateConstraint(),this.type===o.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(t=!1),t?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(t),this):this},updateGlider:function(){var t,r,s,l,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w=2*Math.PI,S=!1,T=this.slideObject,N=[];if(this.needsUpdateFromParent=!1,T.elementClass===o.OBJECT_CLASS_CIRCLE)a.evaluate(this.visProp.isgeonext)&&(w=1),_=i.projectPointToCircle(this,T,this.board),C=i.rad([T.center.X()+1,T.center.Y()],T.center,this)/w;else if(T.elementClass===o.OBJECT_CLASS_LINE){if(this.onPolygon){if(r=T.point1.coords.usrCoords,s=T.point2.coords.usrCoords,t=1,l=s[t]-r[t],Math.abs(l)<e.eps&&(t=2,l=s[t]-r[t]),u=i.projectPointToLine(this,T,this.board),d=(u.usrCoords[t]-r[t])/l,h=T.parentPolygon,d<0){for(t=0;t<h.borders.length;t++)if(T===h.borders[t]){T=h.borders[(t-1+h.borders.length)%h.borders.length];break}}else if(d>1)for(t=0;t<h.borders.length;t++)if(T===h.borders[t]){T=h.borders[(t+1+h.borders.length)%h.borders.length];break}T.id!==this.slideObject.id&&(this.slideObject=T)}r=T.point1.coords,s=T.point2.coords,l=r.distance(o.COORDS_BY_USER,s),l<e.eps?(_=r,S=!0,C=0):(_=i.projectPointToLine(this,T,this.board),r=r.usrCoords.slice(0),s=s.usrCoords.slice(0),Math.abs(s[0])<e.eps?(t=1,l=s[t],Math.abs(l)<e.eps&&(t=2,l=s[t]),l=(_.usrCoords[t]-r[t])/l,p=l>=0?1:-1,l=Math.abs(l),C=p*l/(l+1)):Math.abs(r[0])<e.eps?(t=1,l=r[t],Math.abs(l)<e.eps&&(t=2,l=r[t]),l=(_.usrCoords[t]-s[t])/l,C=l<0?(1-2*l)/(1-l):1/(l+1)):(t=1,l=s[t]-r[t],Math.abs(l)<e.eps&&(t=2,l=s[t]-r[t]),C=(_.usrCoords[t]-r[t])/l)),P=a.evaluate(this.visProp.snapwidth),a.evaluate(P)>0&&Math.abs(this._smax-this._smin)>=e.eps&&(C=Math.max(Math.min(C,1),0),c=C*(this._smax-this._smin)+this._smin,c=Math.round(c/P)*P,C=(c-this._smin)/(this._smax-this._smin),this.update(!0)),r=T.point1.coords,!a.evaluate(T.visProp.straightfirst)&&Math.abs(r.usrCoords[0])>e.eps&&C<0&&(_=r,S=!0,C=0),s=T.point2.coords,!a.evaluate(T.visProp.straightlast)&&Math.abs(s.usrCoords[0])>e.eps&&C>1&&(_=s,S=!0,C=1)}else if(T.type===o.OBJECT_TYPE_TURTLE)this.updateConstraint(),O=i.projectPointToTurtle(this,T,this.board),_=O[0],C=O[1];else if(T.elementClass===o.OBJECT_CLASS_CURVE)if(T.type===o.OBJECT_TYPE_ARC||T.type===o.OBJECT_TYPE_SECTOR)_=i.projectPointToCircle(this,T,this.board),b=i.rad(T.radiuspoint,T.center,this),f=0,m=i.rad(T.radiuspoint,T.center,T.anglepoint),C=b,P=a.evaluate(T.visProp.selection),("minor"===P&&m>Math.PI||"major"===P&&m<Math.PI)&&(f=m,m=2*Math.PI),(b<f||b>m)&&(C=m,(b<f&&b>.5*f||b>m&&b>.5*m+Math.PI)&&(C=f),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),w=m-f,this.visProp.isgeonext&&(w=1),Math.abs(w)>e.eps&&(C/=w);else if(this.updateConstraint(),T.transformations.length>0){for(E=!1,O=T.getTransformationSource(),O[0]&&(E=O[0],N.push(T),N.push(O[1]));O[0]&&a.exists(O[1]._transformationSource);)O=O[1].getTransformationSource(),N.push(O[1]);if(x=this.coords.usrCoords,E){for(t=0;t<N.length;t++)N[t].updateTransformMatrix(),y=e.inverse(N[t].transformMat),x=e.matVecMult(y,x);for(v=new n(o.COORDS_BY_USER,x,this.board).usrCoords,g=i.projectCoordsToCurve(v[1],v[2],this.position||0,N[N.length-1],this.board),x=g[0].usrCoords,t=N.length-2;t>=0;t--)x=e.matVecMult(N[t].transformMat,x);g[0]=new n(o.COORDS_BY_USER,x,this.board)}else T.updateTransformMatrix(),y=e.inverse(T.transformMat),x=e.matVecMult(y,x),v=new n(o.COORDS_BY_USER,x,this.board).usrCoords,g=i.projectCoordsToCurve(v[1],v[2],this.position||0,T,this.board);_=g[0],C=g[1]}else O=i.projectPointToCurve(this,T,this.board),_=O[0],C=O[1];else a.isPoint(T)&&(_=i.projectPointToPoint(this,T,this.board),C=this.position);this.coords.setCoordinates(o.COORDS_BY_USER,_.usrCoords,S),this.position=C},updateGliderFromParent:function(){var t,r,s,l,c,h,u,d,p,f,m,b,v=this.slideObject,g=[],y=2*Math.PI;if(this.needsUpdateFromParent){if(v.elementClass===o.OBJECT_CLASS_CIRCLE)s=v.Radius(),a.evaluate(this.visProp.isgeonext)&&(y=1),c=[v.center.X()+s*Math.cos(this.position*y),v.center.Y()+s*Math.sin(this.position*y)];else if(v.elementClass===o.OBJECT_CLASS_LINE)t=v.point1.coords.usrCoords,r=v.point2.coords.usrCoords,0===t[0]&&0===t[1]&&0===t[2]||0===r[0]&&0===r[1]&&0===r[2]?c=[0,0,0]:Math.abs(r[0])<e.eps?(l=Math.min(Math.abs(this.position),1-e.eps),l/=1-l,this.position<0&&(l=-l),c=[t[0]+l*r[0],t[1]+l*r[1],t[2]+l*r[2]]):Math.abs(t[0])<e.eps?(l=Math.max(this.position,e.eps),l=Math.min(l,2-e.eps),l=l>1?(l-1)/(l-2):(1-l)/l,c=[r[0]+l*t[0],r[1]+l*t[1],r[2]+l*t[2]]):(l=this.position,c=[t[0]+l*(r[0]-t[0]),t[1]+l*(r[1]-t[1]),t[2]+l*(r[2]-t[2])]);else if(v.type===o.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(o.COORDS_BY_USER,[v.Z(this.position),v.X(this.position),v.Y(this.position)]),this.updateConstraint(),c=i.projectPointToTurtle(this,v,this.board)[0].usrCoords;else if(v.elementClass===o.OBJECT_CLASS_CURVE){for(d=!1,h=v.getTransformationSource(),h[0]&&(d=h[0],g.push(v),g.push(h[1]));h[0]&&a.exists(h[1]._transformationSource);)h=h[1].getTransformationSource(),g.push(h[1]);if(d?this.coords.setCoordinates(o.COORDS_BY_USER,[g[g.length-1].Z(this.position),g[g.length-1].X(this.position),g[g.length-1].Y(this.position)]):this.coords.setCoordinates(o.COORDS_BY_USER,[v.Z(this.position),v.X(this.position),v.Y(this.position)]),v.type===o.OBJECT_TYPE_ARC||v.type===o.OBJECT_TYPE_SECTOR)p=i.rad([v.center.X()+1,v.center.Y()],v.center,v.radiuspoint),f=0,b=i.rad(v.radiuspoint,v.center,v.anglepoint),("minor"===v.visProp.selection&&b>Math.PI||"major"===v.visProp.selection&&b<Math.PI)&&(f=b,b=2*Math.PI),y=b-f,a.evaluate(this.visProp.isgeonext)&&(y=1),m=this.position*y,(m<f||m>b)&&(m=b,(m<f&&m>.5*f||m>b&&m>.5*b+Math.PI)&&(m=f),this.position=m,Math.abs(y)>e.eps&&(this.position/=y)),s=v.Radius(),c=[v.center.X()+s*Math.cos(this.position*y+p),v.center.Y()+s*Math.sin(this.position*y+p)];else if(this.updateConstraint(),d)for(c=i.projectPointToCurve(this,g[g.length-1],this.board)[0].usrCoords,u=g.length-2;u>=0;u--)c=new n(o.COORDS_BY_USER,e.matVecMult(g[u].transformMat,c),this.board).usrCoords;else c=i.projectPointToCurve(this,v,this.board)[0].usrCoords}else a.isPoint(v)&&(c=i.projectPointToPoint(this,v,this.board).usrCoords);this.coords.setCoordinates(o.COORDS_BY_USER,c,!1)}else this.needsUpdateFromParent=!0},updateRendererGeneric:function(t){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>e.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[t](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(t){return this.isReal&&t.isReal?this.coords.distance(o.COORDS_BY_USER,t.coords):NaN},snapToGrid:function(t){return this.handleSnapToGrid(t)},handleSnapToPoints:function(t){var e,r,s,n,l,c,h,u,d=0,p=1/0,f=null,m=a.evaluate(this.visProp.ignoredsnaptopoints),b=!1;if(n=this.board.objectsList.length,m&&(h=m.length),a.evaluate(this.visProp.snaptopoints)||t){for(l=a.evaluate(this.visProp.attractorunit),c=a.evaluate(this.visProp.attractordistance),e=0;e<n;e++){if(r=this.board.objectsList[e],m){for(b=!1,u=0;u<h;u++)if(r===this.board.select(m[u])){b=!0;break}if(b)continue}a.isPoint(r)&&r!==this&&r.visPropCalc.visible&&(s=i.projectPointToPoint(this,r,this.board),(d="screen"===l?s.distance(o.COORDS_BY_SCREEN,this.coords):s.distance(o.COORDS_BY_USER,this.coords))<c&&d<p&&(p=d,f=s))}null!==f&&this.coords.setCoordinates(o.COORDS_BY_USER,f.usrCoords)}return this},snapToPoints:function(t){return this.handleSnapToPoints(t)},handleAttractors:function(){var t,e,r,s,l=0,c=a.evaluate(this.visProp.attractorunit),h=a.evaluate(this.visProp.attractordistance),u=a.evaluate(this.visProp.snatchdistance),d=a.evaluate(this.visProp.attractors),p=d.length;if(0!==h){for(t=0;t<p;t++)if(e=this.board.select(d[t]),a.exists(e)&&e!==this){if(a.isPoint(e)?r=i.projectPointToPoint(this,e,this.board):e.elementClass===o.OBJECT_CLASS_LINE?(s=i.projectCoordsToSegment(this.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords),r=!a.evaluate(e.visProp.straightfirst)&&s[1]<0?e.point1.coords:!a.evaluate(e.visProp.straightlast)&&s[1]>1?e.point2.coords:new n(o.COORDS_BY_USER,s[0],this.board)):e.elementClass===o.OBJECT_CLASS_CIRCLE?r=i.projectPointToCircle(this,e,this.board):e.elementClass===o.OBJECT_CLASS_CURVE?r=i.projectPointToCurve(this,e,this.board)[0]:e.type===o.OBJECT_TYPE_TURTLE?r=i.projectPointToTurtle(this,e,this.board)[0]:e.type===o.OBJECT_TYPE_POLYGON&&(r=new n(o.COORDS_BY_USER,i.projectCoordsToPolygon(this.coords.usrCoords,e),this.board)),(l="screen"===c?r.distance(o.COORDS_BY_SCREEN,this.coords):r.distance(o.COORDS_BY_USER,this.coords))<h){this.type===o.OBJECT_TYPE_GLIDER&&(e===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===e)||this.makeGlider(e);break}l>=u&&(e===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===e)&&this.popSlideObject()}return this}},setPositionDirectly:function(t,i){var r,l,c,h,u=this.coords;if(this.relativeCoords)return l=new n(t,i,this.board),a.evaluate(this.visProp.islabel)?(c=s.subtract(l.scrCoords,u.scrCoords),this.relativeCoords.scrCoords[1]+=c[1],this.relativeCoords.scrCoords[2]+=c[2]):(c=s.subtract(l.usrCoords,u.usrCoords),this.relativeCoords.usrCoords[1]+=c[1],this.relativeCoords.usrCoords[2]+=c[2]),this;for(this.coords.setCoordinates(t,i),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),r=this.transformations.length-1;r>=0;r--)t===o.COORDS_BY_SCREEN?h=new n(t,i,this.board).usrCoords:(2===i.length&&(i=[1].concat(i)),h=i),this.initialCoords.setCoordinates(o.COORDS_BY_USER,e.matVecMult(e.inverse(this.transformations[r].matrix),h));return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===o.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(t,e){var i;return e=new n(t,e,this.board),i=this.board.create("transform",e.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(i):this.addTransform(this,i),this.prepareUpdate().update(),this},setPosition:function(t,e){return this.setPositionDirectly(t,e)},setGliderPosition:function(t){return this.type===o.OBJECT_TYPE_GLIDER&&(this.position=t,this.board.update()),this},makeGlider:function(e){var i,r,s,n=this.board.select(e),l=!1;if(n.type===o.OBJECT_TYPE_POLYGON){for(i=Number.MAX_VALUE,r=0;r<n.borders.length;r++)(s=t.Math.Geometry.distPointLine(this.coords.usrCoords,n.borders[r].stdform))<i&&(i=s,e=n.borders[r]);n=this.board.select(e),l=!0}if(!a.exists(n))throw new Error("JSXGraph: slide object undefined.");if(n.type===o.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(e),this.slideObjects.push(this.slideObject),this.addParents(e),this.type=o.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=l,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),0===this.slideObjects.length?(this.type=this._org_type,this.type===o.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===o.OBJECT_CLASS_TEXT?this.elType="text":this.type===o.OBJECT_TYPE_IMAGE?this.elType="image":this.type===o.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var t,e;if(this.type!==o.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===o.OBJECT_CLASS_POINT&&(this.type=o.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(t in this.board.objects)this.board.objects.hasOwnProperty(t)&&(e=this.board.objects[t],e.descendants&&(delete e.descendants[this.id],delete e.childElements[this.id],this.hasLabel&&(delete e.descendants[this.label.id],delete e.childElements[this.label.id])));this.ancestors={},this.slideObject=null,this.slideObjects=[],this.elementClass===o.OBJECT_CLASS_POINT?(this.type=o.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===o.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===o.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(t){var e,i,r=[],s=["X","Y"];for(this.elementClass===o.OBJECT_CLASS_POINT&&(this.type=o.OBJECT_TYPE_CAS),this.isDraggable=!1,e=0;e<t.length;e++)i=t[e],a.isString(i)?(r[e]=this.board.jc.snippet(i,!0,null,!0),2===t.length&&(this[s[e]+"jc"]=t[e])):a.isFunction(i)?r[e]=i:a.isNumber(i)?r[e]=function(t){return function(){return t}}(i):a.isObject(i)&&a.isFunction(i.Value)&&(r[e]=function(t){return function(){return t.Value()}}(i)),r[e].origin=i;return 1===t.length?this.updateConstraint=function(){var t=r[0]();return a.isArray(t)?this.coords.setCoordinates(o.COORDS_BY_USER,t):this.coords=t,this}:2===t.length?(this.XEval=r[0],this.YEval=r[1],this.setParents([r[0].origin,r[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(o.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=r[0],this.XEval=r[1],this.YEval=r[2],this.setParents([r[0].origin,r[1].origin,r[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(o.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(t,e){this.relativeCoords=e?new n(o.COORDS_BY_SCREEN,t.slice(0,2),this.board):new n(o.COORDS_BY_USER,t,this.board),this.element.addChild(this),e&&this.addParents(this.element),this.XEval=function(){var t,e,i,r;return a.evaluate(this.visProp.islabel)?(r=a.evaluate(this.visProp.offset),t=parseFloat(r[0]),i=this.element.getLabelAnchor(),e=new n(o.COORDS_BY_SCREEN,[t+this.relativeCoords.scrCoords[1]+i.scrCoords[1],0],this.board),e.usrCoords[1]):(i=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+i.usrCoords[1])},this.YEval=function(){var t,e,i,r;return a.evaluate(this.visProp.islabel)?(r=a.evaluate(this.visProp.offset),t=-parseFloat(r[1]),i=this.element.getLabelAnchor(),e=new n(o.COORDS_BY_SCREEN,[0,t+this.relativeCoords.scrCoords[2]+i.scrCoords[2]],this.board),e.usrCoords[2]):(i=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+i.usrCoords[2])},this.ZEval=a.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(o.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(t){var e;if(0===this.transformations.length)return this;for(e=0;e<this.transformations.length;e++)this.transformations[e].update();return this},addTransform:function(t,e){var i,r=a.isArray(e)?e:[e],s=r.length;for(0===this.transformations.length&&(this.baseElement=t),i=0;i<s;i++)this.transformations.push(r[i]);return this},startAnimation:function(t,e,i){var r=this;return i=i||250,this.type!==o.OBJECT_TYPE_GLIDER||a.exists(this.intervalCode)||(this.intervalCode=window.setInterval((function(){r._anim(t,e)}),i),a.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return a.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(t,e,i){i=i||{};var s,n,l,c,h,u=[],d=[],p=this.board.attr.animationdelay,f=e/p,m=function(e,i){return function(){return t[e][i]}};if(a.isArray(t)){for(l=t.length,s=0;s<l;s++)a.isPoint(t[s])?d[s]=t[s]:d[s]={elementClass:o.OBJECT_CLASS_POINT,X:m(s,0),Y:m(s,1)};if(0===(e=e||0))return this.setPosition(o.COORDS_BY_USER,[d[d.length-1].X(),d[d.length-1].Y()]),this.board.update(this);if(!a.exists(i.interpolate)||i.interpolate)for(n=r.Neville(d),s=0;s<f;s++)u[s]=[],u[s][0]=n[0]((f-s)/f*n[3]()),u[s][1]=n[1]((f-s)/f*n[3]());else{for(l=t.length-1,s=0;s<f;++s)c=Math.floor(s/f*l),h=s/f*l-c,u[s]=[],u[s][0]=(1-h)*d[c].X()+h*d[c+1].X(),u[s][1]=(1-h)*d[c].Y()+h*d[c+1].Y();u.push([d[l].X(),d[l].Y()]),u.reverse()}this.animationPath=u}else a.isFunction(t)&&(this.animationPath=t,this.animationStart=(new Date).getTime());return this.animationCallback=i.callback,this.board.addAnimation(this),this},moveTo:function(t,i,r){r=r||{},t=new n(o.COORDS_BY_USER,t,this.board);var s,l=this.board.attr.animationdelay,c=Math.ceil(i/l),h=[],u=this.coords.usrCoords[1],d=this.coords.usrCoords[2],p=t.usrCoords[1]-u,f=t.usrCoords[2]-d,m=function(t){return r.effect&&"<>"===r.effect?Math.pow(Math.sin(t/c*Math.PI/2),2):t/c};if(!a.exists(i)||0===i||Math.abs(t.usrCoords[0]-this.coords.usrCoords[0])>e.eps)return this.setPosition(o.COORDS_BY_USER,t.usrCoords),this.board.update(this);if(!a.exists(r.callback)&&Math.abs(p)<e.eps&&Math.abs(f)<e.eps)return this;for(s=c;s>=0;s--)h[c-s]=[t.usrCoords[0],u+p*m(s),d+f*m(s)];return this.animationPath=h,this.animationCallback=r.callback,this.board.addAnimation(this),this},visit:function(t,e,i){t=new n(o.COORDS_BY_USER,t,this.board);var r,s,l,c=this.board.attr.animationdelay,h=[],u=this.coords.usrCoords[1],d=this.coords.usrCoords[2],p=t.usrCoords[1]-u,f=t.usrCoords[2]-d,m=function(t){var e=t<l/2?2*t/l:2*(l-t)/l;return i.effect&&"<>"===i.effect?Math.pow(Math.sin(e*Math.PI/2),2):e};for(a.isNumber(i)?i={repeat:i}:(i=i||{},a.exists(i.repeat)||(i.repeat=1)),l=Math.ceil(e/(c*i.repeat)),s=0;s<i.repeat;s++)for(r=l;r>=0;r--)h[s*(l+1)+l-r]=[t.usrCoords[0],u+p*m(r),d+f*m(r)];return this.animationPath=h,this.animationCallback=i.callback,this.board.addAnimation(this),this},_anim:function(t,e){var r,s,n,a,l,c,h,u,d;return this.intervalCount+=1,this.intervalCount>e&&(this.intervalCount=0),this.slideObject.elementClass===o.OBJECT_CLASS_LINE?(h=this.slideObject.point1.coords.scrCoords,u=this.slideObject.point2.coords.scrCoords,r=Math.round((u[1]-h[1])*this.intervalCount/e),s=Math.round((u[2]-h[2])*this.intervalCount/e),t>0?a=this.slideObject.point1:(a=this.slideObject.point2,r*=-1,s*=-1),this.coords.setCoordinates(o.COORDS_BY_SCREEN,[a.coords.scrCoords[1]+r,a.coords.scrCoords[2]+s])):this.slideObject.elementClass===o.OBJECT_CLASS_CURVE?(l=t>0?Math.round(this.intervalCount/e*this.board.canvasWidth):Math.round((e-this.intervalCount)/e*this.board.canvasWidth),this.coords.setCoordinates(o.COORDS_BY_SCREEN,[l,0]),d=i.projectPointToCurve(this,this.slideObject,this.board),this.coords=d[0],this.position=d[1]):this.slideObject.elementClass===o.OBJECT_CLASS_CIRCLE&&(n=2*Math.PI,n*=t<0?this.intervalCount/e:e-this.intervalCount,c=this.slideObject.Radius(),this.coords.setCoordinates(o.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+c*Math.cos(n),this.slideObject.center.coords.usrCoords[2]+c*Math.sin(n)])),this.board.update(this),this},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var t=[this.Z(),this.X(),this.Y()];return 0!==this.parents.length&&(t=this.parents),this.type===o.OBJECT_TYPE_GLIDER&&(t=[this.X(),this.Y(),this.slideObject.id]),t}}),t.CoordsElement.create=function(t,e,i,r,s,n){var o,l,c=!1;for(l=0;l<i.length;l++)(a.isFunction(i[l])||a.isString(i[l]))&&(c=!0);if(c)o=new t(e,[0,0],r,s,n),o.addConstraint(i);else if(a.isNumber(i[0])&&a.isNumber(i[1]))o=new t(e,i,r,s,n),a.exists(r.slideobject)?o.makeGlider(r.slideobject):o.baseElement=o,o.isDraggable=!0;else{if(!a.isObject(i[0])||!a.isTransformationOrArray(i[1]))return!1;o=new t(e,[0,0],r,s,n),o.addTransform(i[0],i[1]),o.isDraggable=!1}return o.handleSnapToGrid(),o.handleSnapToPoints(),o.handleAttractors(),o.addParents(i),o},t.CoordsElement})),define("base/text",["jxg","base/constants","base/element","parser/geonext","utils/env","utils/type","math/math","base/coordselement"],(function(t,e,i,r,s,n,o,a){"use strict";var l={HTMLSliderInputEventHandler:function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()}};return t.Text=function(t,i,r,s){this.constructor(t,r,e.OBJECT_TYPE_TEXT,e.OBJECT_CLASS_TEXT),this.element=this.board.select(r.anchor),this.coordsConstructor(i,n.evaluate(this.visProp.islabel)),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),this.setText(s),n.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=n.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords"})},t.Text.prototype=new i,n.copyPrototypeMethods(t.Text,a,"coordsConstructor"),t.extend(t.Text.prototype,{hasPoint:function(t,e){var i,r,s,a,l,c,h,u;return n.isObject(n.evaluate(this.visProp.precision))?(h=this.board._inputDevice,u=n.evaluate(this.visProp.precision[h])):u=this.board.options.precision.hasPoint,this.transformations.length>0&&(i=o.matVecMult(o.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,t,e]),t=i[1],e=i[2]),l=this.getAnchorX(),i="right"===l?this.coords.scrCoords[1]-this.size[0]:"middle"===l?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1],r=i+this.size[0],c=this.getAnchorY(),a="top"===c?this.coords.scrCoords[2]+this.size[1]:"middle"===c?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2],s=a-this.size[1],"all"===n.evaluate(this.visProp.dragarea)?t>=i-u&&t<r+u&&e>=s-u&&e<=a+u:e>=s-u&&e<=a+u&&(t>=i-u&&t<=i+2*u||t>=r-2*u&&t<=r+u)},_createFctUpdateText:function(t){var e,i,r=n.evaluate(this.visProp.parse),s=n.evaluate(this.visProp.usemathjax),o=n.evaluate(this.visProp.usekatex);this.orgText=t,n.isFunction(t)?this.updateText=function(){i=t().toString(),this.plaintext=!r||s||o?i:this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(i)))}:n.isString(t)&&!r?this.updateText=function(){this.plaintext=t}:(n.isNumber(t)?this.content=n.toFixed(t,n.evaluate(this.visProp.digits)):n.evaluate(this.visProp.useasciimathml)?this.content="'`"+t+"`'":this.content=s||o?"'"+t+"'":this.generateTerm(t,!0,!0),e=this.board.jc.snippet(this.content,!0,"",!1),this.updateText=function(){this.plaintext=e()})},_setText:function(t){return this._createFctUpdateText(t),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(t){var e;return this.visProp.castext=t,e=n.isFunction(t)?function(){return n.sanitizeHTML(t())}:n.isNumber(t)?t:n.sanitizeHTML(t),this._setText(e)},setText:function(t){return this._setText(t)},updateSize:function(){var t,e,i,r=n.evaluate(this.visProp.display);return s.isBrowser&&"no"!==this.board.renderer.type?(i=this.rendNode,"html"===r||"vml"===this.board.renderer.type?n.exists(i.offsetWidth)?(e=this,window.setTimeout((function(){e.size=[i.offsetWidth,i.offsetHeight],e.needsUpdate=!0,e.updateRenderer()}),0)):this.size=this.crudeSizeEstimate():"internal"===r&&("svg"===this.board.renderer.type?(e=this,window.setTimeout((function(){try{t=i.getBBox(),e.size=[t.width,t.height],e.needsUpdate=!0,e.updateRenderer()}catch(t){}}),0)):"canvas"===this.board.renderer.type&&(this.size=this.crudeSizeEstimate())),this):this},crudeSizeEstimate:function(){var t=parseFloat(n.evaluate(this.visProp.fontsize));return[t*this.plaintext.length*.45,.9*t]},utf8_decode:function(t){return t.replace(/&#x(\w+);/g,(function(t,e){return String.fromCharCode(parseInt(e,16))}))},replaceSub:function(t){if(!t.indexOf)return t;for(var e,i=t.indexOf("_{");i>=0;)t=t.substr(0,i)+t.substr(i).replace(/_\{/,"<sub>"),e=t.substr(i).indexOf("}"),e>=0&&(t=t.substr(0,e)+t.substr(e).replace(/\}/,"</sub>")),i=t.indexOf("_{");for(i=t.indexOf("_");i>=0;)t=t.substr(0,i)+t.substr(i).replace(/_(.?)/,"<sub>$1</sub>"),i=t.indexOf("_");return t},replaceSup:function(t){if(!t.indexOf)return t;for(var e,i=t.indexOf("^{");i>=0;)t=t.substr(0,i)+t.substr(i).replace(/\^\{/,"<sup>"),e=t.substr(i).indexOf("}"),e>=0&&(t=t.substr(0,e)+t.substr(e).replace(/\}/,"</sup>")),i=t.indexOf("^{");for(i=t.indexOf("^");i>=0;)t=t.substr(0,i)+t.substr(i).replace(/\^(.?)/,"<sup>$1</sup>"),i=t.indexOf("^");return t},getSize:function(){return this.size},setCoords:function(t,i){var r,s,o;return n.isArray(t)&&t.length>1&&(i=t[1],t=t[0]),n.evaluate(this.visProp.islabel)&&n.exists(this.element)?(r=this.element.getLabelAnchor(),s=(t-r.usrCoords[1])*this.board.unitX,o=-(i-r.usrCoords[2])*this.board.unitY,this.relativeCoords.setCoordinates(e.COORDS_BY_SCREEN,[s,o])):this.coords.setCoordinates(e.COORDS_BY_USER,[t,i]),this.fullUpdate(),this},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateText(),"internal"===n.evaluate(this.visProp.display)&&n.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return n.evaluate(this.visProp.autoposition)&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(t){var e=/([\)0-9\.])\s*([\(a-zA-Z_])/g;return t.replace(e,"$1*$2")},generateTerm:function(t,e,i){var s,o,a,l,c='""';if(t=t||"",t=t.replace(/\r/g,""),t=t.replace(/\n/g,""),t=t.replace(/"/g,"'"),t=t.replace(/'/g,"\\'"),t=t.replace(/&amp;arc;/g,"&ang;"),t=t.replace(/<arc\s*\/>/g,"&ang;"),t=t.replace(/&lt;arc\s*\/&gt;/g,"&ang;"),t=t.replace(/&lt;sqrt\s*\/&gt;/g,"&radic;"),t=t.replace(/&lt;value&gt;/g,"<value>"),t=t.replace(/&lt;\/value&gt;/g,"</value>"),a=t.indexOf("<value>"),l=t.indexOf("</value>"),a>=0)for(;a>=0;)c+=' + "'+this.replaceSub(this.replaceSup(t.slice(0,a)))+'"',o=t.slice(a+7,l),o=o.replace(/\s+/g,""),!0===e&&(o=this.expandShortMath(o)),s=i?o:r.geonext2JS(o,this.board),s=s.replace(/\\"/g,"'"),s=s.replace(/\\'/g,"'"),s.indexOf("toFixed")<0&&n.isNumber(n.bind(this.board.jc.snippet(s,!0,"",!1),this)())?c+="+("+s+").toFixed("+n.evaluate(this.visProp.digits)+")":c+="+("+s+")",t=t.slice(l+8),a=t.indexOf("<value>"),l=t.indexOf("</value>");return c+=' + "'+this.replaceSub(this.replaceSup(t))+'"',c=this.convertGeonextAndSketchometry2CSS(c),c=c.replace(/&amp;/g,"&"),c.replace(/"/g,"'")},convertGeonext2CSS:function(t){return n.isString(t)&&(t=t.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>"),t=t.replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>"),t=t.replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>"),t=t.replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),t},convertSketchometry2CSS:function(t){return n.isString(t)&&(t=t.replace(/(<|&lt;)sketchofont(>|&gt;)/g,"<span style=font-family:sketchometry-light;font-weight:500;>"),t=t.replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,"</span>"),t=t.replace(/(<|&lt;)sketchometry-light(>|&gt;)/g,"<span style=font-family:sketchometry-light;font-weight:500;>"),t=t.replace(/(<|&lt;)\/sketchometry-light(>|&gt;)/g,"</span>")),t},convertGeonextAndSketchometry2CSS:function(t){return t=this.convertGeonext2CSS(t),this.convertSketchometry2CSS(t)},notifyParents:function(t){var e,i=null;t=t.replace(/&lt;value&gt;/g,"<value>"),t=t.replace(/&lt;\/value&gt;/g,"</value>");do{e=/<value>([\w\s\*\/\^\-\+\(\)\[\],<>=!]+)<\/value>/,null!==(i=e.exec(t))&&(r.findDependencies(this,i[1],this.board),t=t.substr(i.index),t=t.replace(e,""))}while(null!==i);return this},getParents:function(){var t;return t=void 0!==this.relativeCoords?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],0!==this.parents.length&&(t=this.parents),t},bounds:function(){var t=this.coords.usrCoords;return n.evaluate(this.visProp.islabel)||0===this.board.unitY||0===this.board.unitX?[0,0,0,0]:[t[1],t[2]+this.size[1]/this.board.unitY,t[1]+this.size[0]/this.board.unitX,t[2]]},getAnchorX:function(){var t=n.evaluate(this.visProp.anchorx);if("auto"===t)switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";case"lft":case"llft":case"ulft":default:return"right"}return t},getAnchorY:function(){var t=n.evaluate(this.visProp.anchory);if("auto"===t)switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";case"rt":case"lft":default:return"middle"}return t},getNumberofConflicts:function(t,e,i,r){var s,n,o,a,l=0;for(a=this.board.options.precision.hasPoint,this.board.options.precision.hasPoint=.25*(i+r),s=0,o=this.board.objectsList.length;s<o;s++)n=this.board.objectsList[s],n.visPropCalc.visible&&"axis"!==n.elType&&"ticks"!==n.elType&&n!==this.board.infobox&&n!==this&&n.hasPoint(t,e)&&l++;return this.board.options.precision.hasPoint=a,l},setAutoPosition:function(){var t,e,i,r,s,o,a,l,c,h,u,d,p,f,m,b,v,g=this.size[0],y=this.size[1],_={conflicts:1/0,angle:0,r:0},C=2*Math.PI/12;if(this===this.board.infobox||!this.visPropCalc.visible||!n.evaluate(this.visProp.islabel)||!this.element)return this;if(n.evaluate(this.visProp.anchorx),n.evaluate(this.visProp.anchory),u=n.evaluate(this.visProp.offset),s=this.element.getLabelAnchor(),i=s.scrCoords[1],r=s.scrCoords[2],f=u[0],m=u[1],0===(h=this.getNumberofConflicts(i+f,r-m,g,y)))return this;for(d=12,l=28,c=.2*d,o=Math.atan2(m,f),_.conflicts=h,_.angle=o,_.r=d;_.conflicts>0&&d<l;){for(p=1,a=o+C;p<12&&_.conflicts>0&&(b=Math.cos(a),v=Math.sin(a),t=i+d*b,e=r-d*v,h=this.getNumberofConflicts(t,e,g,y),h<_.conflicts&&(_.conflicts=h,_.angle=a,_.r=d),0!==_.conflicts);p++)a+=C;d+=c}return d=_.r,b=Math.cos(_.angle),v=Math.sin(_.angle),this.visProp.offset=[d*b,d*v],this.visProp.anchorx=b<-.2?"right":b>.2?"left":"middle",this}}),t.createText=function(e,i,r){var s,o=n.copyAttributes(r,e.options,"text"),l=i.slice(0,-1),c=i[i.length-1];if(o.anchor=o.parent||o.anchor,!(s=a.create(t.Text,e,l,o,c)))throw new Error("JSXGraph: Can't create text with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==o.rotate&&"internal"===o.display&&s.addRotation(o.rotate),s},t.registerElement("text",t.createText),t.createHTMLSlider=function(e,i,r){var o,a,c=n.copyAttributes(r,e.options,"htmlslider");if(2!==i.length||2!==i[0].length||3!==i[1].length)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parents are: [[x,y], [min, start, max]]");c.anchor=c.parent||c.anchor,c.fixed=c.fixed||!0,a=[i[0][0],i[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],o=t.createText(e,a,c),o.type=n.OBJECT_TYPE_HTMLSLIDER,o.rendNodeForm=o.rendNode.childNodes[0],o.rendNodeRange=o.rendNodeForm.childNodes[0],o.rendNodeRange.min=i[1][0],o.rendNodeRange.max=i[1][2],o.rendNodeRange.step=c.step,o.rendNodeRange.value=i[1][1],o.rendNodeLabel=o.rendNodeForm.childNodes[1],o.rendNodeLabel.id=o.rendNode.id+"_label",c.withlabel&&(o.rendNodeLabel.innerHTML=o.name+"="),o.rendNodeOut=o.rendNodeForm.childNodes[2],o.rendNodeOut.value=i[1][1];try{o.rendNodeForm.id=o.rendNode.id+"_form",o.rendNodeRange.id=o.rendNode.id+"_range",o.rendNodeOut.id=o.rendNode.id+"_out"}catch(e){t.debug(e)}return o.rendNodeRange.style.width=c.widthrange+"px",o.rendNodeRange.style.verticalAlign="middle",o.rendNodeOut.style.width=c.widthout+"px",o._val=i[1][1],t.supportsVML()?s.addEvent(o.rendNodeForm,"change",l.HTMLSliderInputEventHandler,o):s.addEvent(o.rendNodeForm,"input",l.HTMLSliderInputEventHandler,o),o.Value=function(){return this._val},o},t.registerElement("htmlslider",t.createHTMLSlider),{Text:t.Text,createText:t.createText,createHTMLSlider:t.createHTMLSlider}})),define("utils/uuid",["jxg"],(function(t){"use strict";var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=e.split("");return t.Util=t.Util||{},t.Util.genUUID=function(t){var e,r,s=[],n=0;for(t=t||"",""!==t&&"-"!==t.substr(t.length-1)&&(t+="-"),r=0;r<36;r++)8===r||13===r||18===r||23===r?s[r]="-":14===r?s[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,s[r]=i[19===r?3&e|8:e]);return t+s.join("")},t.Util})),define("parser/jessiecode",["jxg","base/constants","base/text","math/math","math/ia","math/geometry","math/statistics","utils/type","utils/uuid","utils/env"],(function(JXG,Const,Text,Mat,Interval,Geometry,Statistics,Type,UUID,Env){Object.create||(Object.create=function(t,e){function i(){}if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object prototype may only be an Object: "+t);if(null===t)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(void 0!==e)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");return i.prototype=t,new i});var priv={modules:{math:Mat,"math/geometry":Geometry,"math/statistics":Statistics,"math/numerics":Mat.Numerics}};JXG.JessieCode=function(t,e){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.board=null,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,JXG.CA&&(this.CA=new JXG.CA(this.node,this.createNode,this)),this.code="","string"==typeof t&&this.parse(t,e)},JXG.extend(JXG.JessieCode.prototype,{node:function(t,e,i){return{type:t,value:e,children:i}},createNode:function(t,e,i){var r,s=this.node(t,e,[]);for(r=2;r<arguments.length;r++)s.children.push(arguments[r]);return"node_const"==s.type&&Type.isNumber(s.value)&&(s.isMath=!0),s.line=this.parCurLine,s.col=this.parCurColumn,s},pushScope:function(t){var e={args:t,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=e,e.id=this.scopes.push(e)-1,e},popScope:function(){var t=this.scope.previous;return this.scope=null!==t?t:this.scope,this.scope},getElementById:function(t){return this.board.objects[t]},log:function(){this.$log.push(arguments),"object"==typeof console&&console.log&&console.log.apply(console,arguments)},creator:function(){var t,e={};return t=function(t){var i;return"function"==typeof e[this.board.id+t]?i=e[this.board.id+t]:(i=function(e){return function(i,r){var s;return s=Type.exists(r)?r:{},void 0===s.name&&void 0===s.id&&(s.name=0!==e.lhs[e.scope.id]?e.lhs[e.scope.id]:""),e.board.create(t,i,s)}}(this),i.creator=!0,e[this.board.id+t]=i),i},t.clearCache=function(){e={}},t}(),letvar:function(t,e){this.builtIn[t]&&this._warn('"'+t+'" is a predefined value.'),this.scope.locals[t]=e},isLocalVariable:function(t){for(var e=this.scope;null!==e;){if(Type.exists(e.locals[t]))return e;e=e.previous}return null},isParameter:function(t){for(var e=this.scope;null!==e;){if(Type.indexOf(e.args,t)>-1)return e;e=e.previous}return null},isCreator:function(t){return!!JXG.elements[t]},isMathMethod:function(t){return"E"!==t&&!!Math[t]},isBuiltIn:function(t){return!!this.builtIn[t]},getvar:function(t,e){var i;return e=Type.def(e,!1),i=this.isLocalVariable(t),null!==i?i.locals[t]:this.isCreator(t)?this.creator(t):this.isBuiltIn(t)?this.builtIn[t]:this.isMathMethod(t)?Math[t]:e||(i=this.board.select(t))===t?void 0:i},resolve:function(t){for(var e=this.scope;null!==e;){if(Type.exists(e.locals[t]))return e.locals[t];e=e.previous}},getvarJS:function(t,e,i){var r,s="";return e=Type.def(e,!1),i=Type.def(i,!1),null!==this.isParameter(t)?t:null===this.isLocalVariable(t)||i?this.isCreator(t)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(i?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+t+"'].concat([a, props])); })":(i&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(t)?(s=this.builtIn[t].src||this.builtIn[t],Type.isNumber(s)||s.match(/board\.select/)?s:(t=s.split(".").pop(),Type.exists(this.board.mathLib)&&(r=new RegExp("^Math."+t),null!==r.exec(s))?s.replace(r,"$jc$.board.mathLib."+t):Type.exists(this.board.mathLibJXG)?(r=new RegExp("^JXG.Math."),null!==r.exec(s)?s.replace(r,"$jc$.board.mathLibJXG."):s):s)):this.isMathMethod(t)?"$jc$.board.mathLib."+t:e?"":(Type.isId(this.board,t)?(s="$jc$.board.objects['"+t+"']","slider"===this.board.objects[t].elType&&(s+=".Value()")):Type.isName(this.board,t)?(s="$jc$.board.elementsByName['"+t+"']","slider"===this.board.elementsByName[t].elType&&(s+=".Value()")):Type.isGroup(this.board,t)&&(s="$jc$.board.groups['"+t+"']"),s)):"$jc$.resolve('"+t+"')"},makeMap:function(t){return t.isMap=!0,t},functionCodeJS:function(t){var e=t.children[0].join(", "),i="",r="";return"op_map"===t.value&&(i="{ return  ",r=" }"),"function ("+e+") {\nvar $oldscope$ = $jc$.scope;\n$jc$.scope = $jc$.scopes["+this.scope.id+"];\nvar r = (function () "+i+this.compile(t.children[1],!0)+r+")();\n$jc$.scope = $oldscope$;\nreturn r;\n}"},defineFunction:function(node){var fun,i,list=node.children[0],scope=this.pushScope(list);if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=function($jc$){var fun,str="var f = "+$jc$.functionCodeJS(node)+"; f;";try{return eval(str)}catch(t){return $jc$._warn("error compiling function\n\n"+str+"\n\n"+t.toString()),function(){}}}(this),this.popScope()}else fun=function(t,e,i){return function(){var r,s;for(s=e.scope,e.scope=e.scopes[i],r=0;r<t.length;r++)e.scope.locals[t[r]]=arguments[r];return r=e.execute(node.children[1]),e.scope=s,r}}(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=function(t){return function(){return t.compile(t.replaceIDs(Type.deepCopy(node)))}}(this),fun.deps={},this.collectDependencies(node.children[1],fun.deps),fun},mergeAttributes:function(t){var e,i={};for(e=0;e<arguments.length;e++)i=Type.deepCopy(i,arguments[e],!0);return i},setProp:function(t,e,i){var r,s,n={};t.elementClass!==Const.OBJECT_CLASS_POINT||"X"!==e&&"Y"!==e?t.elementClass!==Const.OBJECT_CLASS_TEXT||"X"!==e&&"Y"!==e?t.type&&t.elementClass&&t.visProp?Type.exists(t[t.methodMap[e]])&&"function"!=typeof t[t.methodMap[e]]?t[t.methodMap[e]]=i:(n[e]=i,t.setAttribute(n)):t[e]=i:("number"==typeof i?t[e]=function(){return i}:"function"==typeof i?(t.isDraggable=!1,t[e]=i):"string"==typeof i&&(t.isDraggable=!1,t[e]=Type.createFunction(i,this.board,null,!0),t[e+"jc"]=i),t[e].origin=i,this.board.update()):(e=e.toLowerCase(),t.isDraggable&&"number"==typeof i?(r="x"===e?i:t.X(),s="y"===e?i:t.Y(),t.setPosition(Const.COORDS_BY_USER,[r,s])):!t.isDraggable||"function"!=typeof i&&"string"!=typeof i?t.isDraggable||(r="x"===e?i:t.XEval.origin,s="y"===e?i:t.YEval.origin,t.addConstraint([r,s])):(r="x"===e?i:t.coords.usrCoords[1],s="y"===e?i:t.coords.usrCoords[2],t.addConstraint([r,s])),this.board.update())},_genericParse:function(t,e,i,r){var s,n,o,a,l=t.replace(/\r\n/g,"\n").split("\n"),c=[];r||(this.code+=t+"\n"),Text&&(n=Text.Text.prototype.setText,Text.Text.prototype.setText=Text.Text.prototype.setTextJessieCode);try{for(Type.exists(i)||(i=!1),s=0;s<l.length;s++)i&&(l[s]=JXG.GeonextParser.geonext2JS(l[s],this.board)),c.push(l[s]);switch(t=c.join("\n"),o=parser.parse(t),this.CA&&(o=this.CA.expandDerivatives(o,null,o),o=this.CA.removeTrivialNodes(o)),e){case"parse":a=this.execute(o);break;case"manipulate":a=this.compile(o);break;case"getAst":a=o;break;default:a=!1}}catch(t){throw t}finally{Text&&(Text.Text.prototype.setText=n)}return a},parse:function(t,e,i){return this._genericParse(t,"parse",e,i)},manipulate:function(t,e,i){return this._genericParse(t,"manipulate",e,i)},getAST:function(t,e,i){return this._genericParse(t,"getAst",e,i)},snippet:function(t,e,i,r){var s;return e=Type.def(e,!0),i=Type.def(i,""),r=Type.def(r,!1),s=(e?" function ("+i+") { return ":"")+t+(e?"; }":"")+";",this.parse(s,r,!0)},replaceIDs:function(t){var e,i;if(t.replaced&&(i=this.board.objects[t.children[1][0].value],Type.exists(i)&&""!==i.name&&(t.type="node_var",t.value=i.name,t.children.length=0,delete t.replaced)),t.children)for(e=t.children.length;e>0;e--)Type.exists(t.children[e-1])&&(t.children[e-1]=this.replaceIDs(t.children[e-1]));return t},replaceNames:function(t){var e,i;if(i=t.value,"node_op"===t.type&&"op_lhs"===i&&1===t.children.length?this.isLHS=!0:"node_var"===t.type&&(this.isLHS?this.letvar(i,!0):!Type.exists(this.getvar(i,!0))&&Type.exists(this.board.elementsByName[i])&&(t=this.createReplacementNode(t))),t.children)for(e=t.children.length;e>0;e--)Type.exists(t.children[e-1])&&(t.children[e-1]=this.replaceNames(t.children[e-1]));return"node_op"===t.type&&"op_lhs"===t.value&&1===t.children.length&&(this.isLHS=!1),t},createReplacementNode:function(t){var e=t.value,i=this.board.elementsByName[e];return t=this.createNode("node_op","op_execfun",this.createNode("node_var","$"),[this.createNode("node_str",i.id)]),t.replaced=!0,t},collectDependencies:function(t,e){var i,r,s,n;if(Type.isArray(t))for(n=t.length,i=0;i<n;i++)this.collectDependencies(t[i],e);else if(r=t.value,"node_var"===t.type&&(s=this.getvar(r))&&s.visProp&&s.type&&s.elementClass&&s.id&&(e[s.id]=s),"node_op"===t.type&&"op_execfun"===t.value&&t.children.length>1&&"$"===t.children[0].value&&t.children[1].length>0&&(s=t.children[1][0].value,e[s]=this.board.objects[s]),t.children)for(i=t.children.length;i>0;i--)Type.exists(t.children[i-1])&&this.collectDependencies(t.children[i-1],e)},resolveProperty:function(t,e,i){return i=Type.def(i,!1),t&&t.methodMap&&(Type.exists(t.subs)&&Type.exists(t.subs[e])?t=t.subs:Type.exists(t.methodMap[e])?e=t.methodMap[e]:(t=t.visProp,e=e.toLowerCase())),Type.isFunction(t)&&this._error("Accessing function properties is not allowed."),Type.exists(t)||this._error(t+" is not an object"),Type.exists(t[e])||this._error("unknown property "+e),i&&"function"==typeof t[e]?function(){return t[e].apply(t,arguments)}:t[e]},getLHS:function(t){var e;if("node_var"===t.type)e={o:this.scope.locals,what:t.value};else if("node_op"===t.type&&"op_property"===t.value)e={o:this.execute(t.children[0]),what:t.children[1]};else{if("node_op"!==t.type||"op_extvalue"!==t.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");e={o:this.execute(t.children[0]),what:this.execute(t.children[1])}}return e},getLHSCompiler:function(t,e){var i;if("node_var"===t.type)i=t.value;else if("node_op"===t.type&&"op_property"===t.value)i=[this.compile(t.children[0],e),"'"+t.children[1]+"'"];else{if("node_op"!==t.type||"op_extvalue"!==t.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");i=[this.compile(t.children[0],e),"node_const"===t.children[1].type?t.children[1].value:this.compile(t.children[1],e)]}return i},execute:function(t){var e,i,r,s,n,o,a,l,c,h,u=[];if(e=0,!t)return e;switch(this.line=t.line,this.col=t.col,t.type){case"node_op":switch(t.value){case"op_none":t.children[0]&&this.execute(t.children[0]),t.children[1]&&(e=this.execute(t.children[1]));break;case"op_assign":i=this.getLHS(t.children[0]),this.lhs[this.scope.id]=i.what,i.o.type&&i.o.elementClass&&i.o.methodMap&&"label"===i.what&&this._error("Left-hand side of assignment is read-only."),e=this.execute(t.children[1]),i.o!==this.scope.locals||Type.isArray(i.o)&&"number"==typeof i.what?this.setProp(i.o,i.what,e):this.letvar(i.what,e),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(t.children[0])&&(e=this.execute(t.children[1]));break;case"op_conditional":case"op_if_else":e=this.execute(t.children[0])?this.execute(t.children[1]):this.execute(t.children[2]);break;case"op_while":for(;this.execute(t.children[0]);)this.execute(t.children[1]);break;case"op_do":do{this.execute(t.children[0])}while(this.execute(t.children[1]));break;case"op_for":for(this.execute(t.children[0]);this.execute(t.children[1]);this.execute(t.children[2]))this.execute(t.children[3]);break;case"op_proplst":t.children[0]&&this.execute(t.children[0]),t.children[1]&&this.execute(t.children[1]);break;case"op_emptyobject":e={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(t.children[0]),e=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][t.children[0]]=this.execute(t.children[1]);break;case"op_array":for(e=[],n=t.children[0].length,r=0;r<n;r++)e.push(this.execute(t.children[0][r]));break;case"op_extvalue":e=this.execute(t.children[0]),r=this.execute(t.children[1]),e="number"==typeof r&&Math.abs(Math.round(r)-r)<Mat.eps?e[r]:void 0;break;case"op_return":if(0!==this.scope)return this.execute(t.children[0]);this._error("Unexpected return.");break;case"op_map":t.children[1].isMath||"node_var"===t.children[1].type||this._error("execute: In a map only function calls and mathematical expressions are allowed."),l=this.defineFunction(t),l.isMap=!0,e=l;break;case"op_function":l=this.defineFunction(t),l.isMap=!1,e=l;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,o=t.children[1],Type.exists(t.children[2]))if(t.children[3])for(a=t.children[2],c={},r=0;r<a.length;r++)c=Type.deepCopy(c,this.execute(a[r]),!0);else c=this.execute(t.children[2]);for(l=this.execute(t.children[0]),h=l&&l.sc?l.sc:this,!l.creator&&Type.exists(t.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),r=0;r<o.length;r++)u[r]=this.execute(o[r]),this.dpstack[this.pscope].push({line:t.children[1][r].line,col:t.children[1][r].ecol});if("function"!=typeof l||l.creator)if("function"==typeof l&&l.creator){s=this.line;try{for(e=l(u,c),e.jcLineStart=s,e.jcLineEnd=t.eline,r=s;r<=t.line;r++)this.lineToElement[r]=e;e.debugParents=this.dpstack[this.pscope]}catch(t){this._error(t.toString())}}else this._error("Function '"+l+"' is undefined.");else e=l.apply(h,u);this.dpstack.pop(),this.pscope--;break;case"op_property":s=this.execute(t.children[0]),i=t.children[1],e=this.resolveProperty(s,i,!1),Type.exists(e)&&(e.sc=s);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(t.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),i=this.getvar(t.children[0]),e=this.del(i);break;case"op_eq":e=this.execute(t.children[0])==this.execute(t.children[1]);break;case"op_neq":e=this.execute(t.children[0])!=this.execute(t.children[1]);break;case"op_approx":e=Math.abs(this.execute(t.children[0])-this.execute(t.children[1]))<Mat.eps;break;case"op_gt":e=this.execute(t.children[0])>this.execute(t.children[1]);break;case"op_lt":e=this.execute(t.children[0])<this.execute(t.children[1]);break;case"op_geq":e=this.execute(t.children[0])>=this.execute(t.children[1]);break;case"op_leq":e=this.execute(t.children[0])<=this.execute(t.children[1]);break;case"op_or":e=this.execute(t.children[0])||this.execute(t.children[1]);break;case"op_and":e=this.execute(t.children[0])&&this.execute(t.children[1]);break;case"op_not":e=!this.execute(t.children[0]);break;case"op_add":e=this.add(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_sub":e=this.sub(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_div":e=this.div(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_mod":e=this.mod(this.execute(t.children[0]),this.execute(t.children[1]),!0);break;case"op_mul":e=this.mul(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_exp":e=this.pow(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_neg":e=this.neg(this.execute(t.children[0]))}break;case"node_var":e=this.getvar(t.value);break;case"node_const":e=Number(t.value);break;case"node_const_bool":e=t.value;break;case"node_str":e=t.value.replace(/\\(.)/,"$1")}return e},compile:function(t,e){var i,r,s,n="";if(Type.exists(e)||(e=!1),!t)return n;switch(t.type){case"node_op":switch(t.value){case"op_none":t.children[0]&&(n=this.compile(t.children[0],e)),t.children[1]&&(n+=this.compile(t.children[1],e));break;case"op_assign":e?(i=this.getLHSCompiler(t.children[0],e),Type.isArray(i)?n="$jc$.setProp("+i[0]+", "+i[1]+", "+this.compile(t.children[1],e)+");\n":(this.isLocalVariable(i)!==this.scope&&(this.scope.locals[i]=!0),n="$jc$.scopes["+this.scope.id+"].locals['"+i+"'] = "+this.compile(t.children[1],e)+";\n")):(i=this.compile(t.children[0]),n=i+" = "+this.compile(t.children[1],e)+";\n");break;case"op_if":n=" if ("+this.compile(t.children[0],e)+") "+this.compile(t.children[1],e);break;case"op_if_else":n=" if ("+this.compile(t.children[0],e)+")"+this.compile(t.children[1],e),n+=" else "+this.compile(t.children[2],e);break;case"op_conditional":n="(("+this.compile(t.children[0],e)+")?("+this.compile(t.children[1],e),n+="):("+this.compile(t.children[2],e)+"))";break;case"op_while":n=" while ("+this.compile(t.children[0],e)+") {\n"+this.compile(t.children[1],e)+"}\n";break;case"op_do":n=" do {\n"+this.compile(t.children[0],e)+"} while ("+this.compile(t.children[1],e)+");\n";break;case"op_for":n=" for ("+this.compile(t.children[0],e)+this.compile(t.children[1],e)+"; "+this.compile(t.children[2],e).slice(0,-2)+") {\n"+this.compile(t.children[3],e)+"\n}\n";break;case"op_proplst":t.children[0]&&(n=this.compile(t.children[0],e)+", "),n+=this.compile(t.children[1],e);break;case"op_prop":n=t.children[0]+": "+this.compile(t.children[1],e);break;case"op_emptyobject":n=e?"{}":"<< >>";break;case"op_proplst_val":n=this.compile(t.children[0],e);break;case"op_array":for(s=[],r=0;r<t.children[0].length;r++)s.push(this.compile(t.children[0][r],e));n="["+s.join(", ")+"]";break;case"op_extvalue":n=this.compile(t.children[0],e)+"["+this.compile(t.children[1],e)+"]";break;case"op_return":n=" return "+this.compile(t.children[0],e)+";\n";break;case"op_map":t.children[1].isMath||"node_var"===t.children[1].type||this._error("compile: In a map only function calls and mathematical expressions are allowed."),s=t.children[0],n=e?" $jc$.makeMap(function ("+s.join(", ")+") { return "+this.compile(t.children[1],e)+"; })":"map ("+s.join(", ")+") -> "+this.compile(t.children[1],e);break;case"op_function":s=t.children[0],this.pushScope(s),n=e?this.functionCodeJS(t):" function ("+s.join(", ")+") "+this.compile(t.children[1],e),this.popScope();break;case"op_execfunmath":console.log("TODO"),n="-1";break;case"op_execfun":if(t.children[2]){for(s=[],r=0;r<t.children[2].length;r++)s.push(this.compile(t.children[2][r],e));e&&(i="$jc$.mergeAttributes("+s.join(", ")+")")}for(t.children[0].withProps=!!t.children[2],s=[],r=0;r<t.children[1].length;r++)s.push(this.compile(t.children[1][r],e));n=this.compile(t.children[0],e)+"("+s.join(", ")+(t.children[2]&&e?", "+i:"")+")"+(t.children[2]&&!e?i:""),e&&(n+="\n"),e&&"$"===t.children[0].value&&(n="$jc$.board.objects["+this.compile(t.children[1][0],e)+"]");break;case"op_property":n=e&&"X"!==t.children[1]&&"Y"!==t.children[1]?"$jc$.resolveProperty("+this.compile(t.children[0],e)+", '"+t.children[1]+"', true)":this.compile(t.children[0],e)+"."+t.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),n=e?"$jc$.use('":"use('",n+=t.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),n=e?"$jc$.del(":"remove(",n+=this.compile(t.children[0],e)+")";break;case"op_eq":n="("+this.compile(t.children[0],e)+" === "+this.compile(t.children[1],e)+")";break;case"op_neq":n="("+this.compile(t.children[0],e)+" !== "+this.compile(t.children[1],e)+")";break;case"op_approx":n="("+this.compile(t.children[0],e)+" ~= "+this.compile(t.children[1],e)+")";break;case"op_gt":n=e?"$jc$.gt("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" > "+this.compile(t.children[1],e)+")";break;case"op_lt":n=e?"$jc$.lt("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" < "+this.compile(t.children[1],e)+")";break;case"op_geq":n=e?"$jc$.geq("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" >= "+this.compile(t.children[1],e)+")";break;case"op_leq":n=e?"$jc$.leq("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" <= "+this.compile(t.children[1],e)+")";break;case"op_or":n="("+this.compile(t.children[0],e)+" || "+this.compile(t.children[1],e)+")";break;case"op_and":n="("+this.compile(t.children[0],e)+" && "+this.compile(t.children[1],e)+")";break;case"op_not":n="!("+this.compile(t.children[0],e)+")";break;case"op_add":n=e?"$jc$.add("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" + "+this.compile(t.children[1],e)+")";break;case"op_sub":n=e?"$jc$.sub("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" - "+this.compile(t.children[1],e)+")";break;case"op_div":n=e?"$jc$.div("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" / "+this.compile(t.children[1],e)+")";break;case"op_mod":n=e?"$jc$.mod("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+", true)":"("+this.compile(t.children[0],e)+" % "+this.compile(t.children[1],e)+")";break;case"op_mul":n=e?"$jc$.mul("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" * "+this.compile(t.children[1],e)+")";break;case"op_exp":n=e?"$jc$.pow("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+"^"+this.compile(t.children[1],e)+")";break;case"op_neg":n=e?"$jc$.neg("+this.compile(t.children[0],e)+")":"(-"+this.compile(t.children[0],e)+")"}break;case"node_var":n=e?this.getvarJS(t.value,!1,t.withProps):t.value;break;case"node_const":case"node_const_bool":n=t.value;break;case"node_str":n="'"+t.value+"'"}return t.needsBrackets&&(n="{\n"+n+"\n}\n"),n},X:function(t){return t.X()},Y:function(t){return t.Y()},V:function(t){return t.Value()},L:function(t){return t.L()},dist:function(t,e){return Type.exists(t)&&Type.exists(t.Dist)||this._error("Error: Can't calculate distance."),t.Dist(e)},add:function(t,e){var i,r,s;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Interval.isInterval(t)||Interval.isInterval(e))s=Interval.add(t,e);else if(Type.isArray(t)&&Type.isArray(e))for(r=Math.min(t.length,e.length),s=[],i=0;i<r;i++)s[i]=t[i]+e[i];else Type.isNumber(t)&&Type.isNumber(e)?s=t+e:Type.isString(t)||Type.isString(e)?s=t.toString()+e.toString():this._error("Operation + not defined on operands "+typeof t+" and "+typeof e);return s},sub:function(t,e){var i,r,s;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Interval.isInterval(t)||Interval.isInterval(e))s=Interval.sub(t,e);else if(Type.isArray(t)&&Type.isArray(e))for(r=Math.min(t.length,e.length),s=[],i=0;i<r;i++)s[i]=t[i]-e[i];else Type.isNumber(t)&&Type.isNumber(e)?s=t-e:this._error("Operation - not defined on operands "+typeof t+" and "+typeof e);return s},neg:function(t){var e,i,r;if(t=Type.evalSlider(t),Interval.isInterval(t))r=Interval.negative(t);else if(Type.isArray(t))for(i=t.length,r=[],e=0;e<i;e++)r[e]=-t[e];else Type.isNumber(t)?r=-t:this._error("Unary operation - not defined on operand "+typeof t);return r},mul:function(t,e){var i,r,s;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Type.isArray(t)&&Type.isNumber(e)&&(i=t,t=e,e=t),Interval.isInterval(t)||Interval.isInterval(e))s=Interval.mul(t,e);else if(Type.isArray(t)&&Type.isArray(e))r=Math.min(t.length,e.length),s=Mat.innerProduct(t,e,r);else if(Type.isNumber(t)&&Type.isArray(e))for(r=e.length,s=[],i=0;i<r;i++)s[i]=t*e[i];else Type.isNumber(t)&&Type.isNumber(e)?s=t*e:this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return s},div:function(t,e){var i,r,s;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Interval.isInterval(t)||Interval.isInterval(e))s=Interval.div(t,e);else if(Type.isArray(t)&&Type.isNumber(e))for(r=t.length,s=[],i=0;i<r;i++)s[i]=t[i]/e;else Type.isNumber(t)&&Type.isNumber(e)?s=t/e:this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return s},mod:function(t,e){var i,r,s;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Interval.isInterval(t)||Interval.isInterval(e))return Interval.fmod(t,e);if(Type.isArray(t)&&Type.isNumber(e))for(r=t.length,s=[],i=0;i<r;i++)s[i]=Mat.mod(t[i],e,!0);else Type.isNumber(t)&&Type.isNumber(e)?s=Mat.mod(t,e,!0):this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return s},pow:function(t,e){return t=Type.evalSlider(t),e=Type.evalSlider(e),Interval.isInterval(t)||Interval.isInterval(e)?Interval.pow(t,e):Mat.pow(t,e)},lt:function(t,e){return Interval.isInterval(t)||Interval.isInterval(e)?Interval.lt(t,e):t<e},leq:function(t,e){return Interval.isInterval(t)||Interval.isInterval(e)?Interval.leq(t,e):t<=e},gt:function(t,e){return Interval.isInterval(t)||Interval.isInterval(e)?Interval.gt(t,e):t>e},geq:function(t,e){return Interval.isInterval(t)||Interval.isInterval(e)?Intervalt.geq(t,e):t>=e},DDD:function(t){console.log("Dummy derivative function. This should never appear!")},ifthen:function(t,e,i){return t?e:i},del:function(t){"object"==typeof t&&JXG.exists(t.type)&&JXG.exists(t.elementClass)&&this.board.removeObject(t)},use:function(t){var e,i,r=!1;if("string"==typeof t){for(e in JXG.boards)if(JXG.boards.hasOwnProperty(e)&&JXG.boards[e].container===t){i=JXG.boards[e],r=!0;break}}else i=t,r=!0;r?(this.board=i,this.builtIn.$board=i,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+t+"' not found!")},findSymbol:function(t,e){var i,r;for(e=Type.def(e,-1),r=-1===e?this.scope:this.scopes[e];null!==r;){for(i in r.locals)if(r.locals.hasOwnProperty(i)&&r.locals[i]===t)return[i,r];r=r.previous}return[]},importModule:function(t){return priv.modules[t.toLowerCase()]},defineBuiltIn:function(){var t=this,e={PI:Math.PI,EULER:Math.E,D:t.DDD,X:t.X,Y:t.Y,V:t.V,L:t.L,acosh:Mat.acosh,acot:Mat.acot,asinh:Mat.asinh,binomial:Mat.binomial,cbrt:Mat.cbrt,cosh:Mat.cosh,cot:Mat.cot,deg:Geometry.trueAngle,dist:t.dist,erf:Mat.erf,erfc:Mat.erfc,erfi:Mat.erfi,factorial:Mat.factorial,gcd:Mat.gcd,lb:Mat.log2,lcm:Mat.lcm,ld:Mat.log2,lg:Mat.log10,ln:Math.log,log:Mat.log,log10:Mat.log10,log2:Mat.log2,ndtr:Mat.ndtr,ndtri:Mat.ndtri,nthroot:Mat.nthroot,pow:Mat.pow,rad:Geometry.rad,ratpow:Mat.ratpow,trunc:Type.trunc,sinh:Mat.sinh,IfThen:t.ifthen,import:t.importModule,use:t.use,remove:t.del,$:t.getElementById,$board:t.board,$log:t.log};return e.rad.sc=Geometry,e.deg.sc=Geometry,e.factorial.sc=Mat,e.X.src="$jc$.X",e.Y.src="$jc$.Y",e.V.src="$jc$.V",e.L.src="$jc$.L",e.acosh.src="JXG.Math.acosh",e.acot.src="JXG.Math.acot",e.asinh.src="JXG.Math.asinh",e.binomial.src="JXG.Math.binomial",e.cbrt.src="JXG.Math.cbrt",e.cot.src="JXG.Math.cot",e.cosh.src="JXG.Math.cosh",e.deg.src="JXG.Math.Geometry.trueAngle",e.erf.src="JXG.Math.erf",e.erfc.src="JXG.Math.erfc",e.erfi.src="JXG.Math.erfi",e.dist.src="$jc$.dist",e.factorial.src="JXG.Math.factorial",e.gcd.src="JXG.Math.gcd",e.lb.src="JXG.Math.log2",e.lcm.src="JXG.Math.lcm",e.ld.src="JXG.Math.log2",e.lg.src="JXG.Math.log10",e.ln.src="Math.log",e.log.src="JXG.Math.log",e.log10.src="JXG.Math.log10",e.log2.src="JXG.Math.log2",e.ndtr.src="JXG.Math.ndtr",e.ndtri.src="JXG.Math.ndtri",e.nthroot.src="JXG.Math.nthroot",e.pow.src="JXG.Math.pow",e.rad.src="JXG.Math.Geometry.rad",e.ratpow.src="JXG.Math.ratpow",e.trunc.src="JXG.trunc",e.sinh.src="JXG.Math.sinh",e.import.src="$jc$.importModule",e.use.src="$jc$.use",e.remove.src="$jc$.del",e.IfThen.src="$jc$.ifthen",e.$.src="(function (n) { return $jc$.board.select(n); })",e.$board&&(e.$board.src="$jc$.board"),e.$log.src="$jc$.log",e},_debug:function(t){"object"==typeof console?console.log(t):Env.isBrowser&&document&&null!==document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=t+"<br />")},_error:function(t){var e=new Error("Error("+this.line+"): "+t);throw e.line=this.line,e},_warn:function(t){"object"==typeof console?console.log("Warning("+this.line+"): "+t):Env.isBrowser&&document&&null!==document.getElementById(this.warnLog)&&(document.getElementById(this.warnLog).innerHTML+="Warning("+this.line+"): "+t+"<br />")},_log:function(t){"object"!=typeof window&&"object"==typeof self&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+t.toString()}):console.log("Log: ",arguments)}});var parser=function(){function t(){this.yy={}}var e=function(t,e,i,r){for(i=i||{},r=t.length;r--;i[t[r]]=e);return i},i=[2,14],r=[1,13],s=[1,37],n=[1,14],o=[1,15],a=[1,21],l=[1,16],c=[1,17],h=[1,33],u=[1,18],d=[1,19],p=[1,12],f=[1,59],m=[1,60],b=[1,58],v=[1,46],g=[1,48],y=[1,49],_=[1,50],C=[1,51],P=[1,52],O=[1,53],x=[1,54],E=[1,45],w=[1,38],S=[1,39],T=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],N=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],M=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],A=[2,48],R=[1,72],k=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],L=[1,78],j=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],I=[1,82],B=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],D=[1,83],Y=[1,84],X=[1,85],F=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],U=[1,89],G=[1,90],J=[1,91],z=[1,92],H=[1,97],V=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],$=[1,103],q=[1,104],W=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],Q=[1,105],Z=[1,106],K=[1,107],tt=[1,126],et=[1,139],it=[83,86],rt=[1,149],st=[10,66,86],nt=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],ot=[1,166],at=[10,86],lt={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,6],[92,1],[92,3]],performAction:function(t,e,i,r,s,n,o){var a=n.length-1;switch(s){case 1:return n[a-1];case 2:this.$=ct.createNode(ht(o[a-4]),"node_op","op_if",n[a-2],n[a]);break;case 3:this.$=ct.createNode(ht(o[a-6]),"node_op","op_if_else",n[a-4],n[a-2],n[a]);break;case 4:this.$=ct.createNode(ht(o[a-4]),"node_op","op_while",n[a-2],n[a]);break;case 5:this.$=ct.createNode(ht(o[a-8]),"node_op","op_for",n[a-6],n[a-4],n[a-2],n[a]);break;case 6:this.$=ct.createNode(ht(o[a-6]),"node_op","op_do",n[a-5],n[a-2]);break;case 7:this.$=ct.createNode(ht(o[a-1]),"node_op","op_use",n[a]);break;case 8:this.$=ct.createNode(ht(o[a-1]),"node_op","op_delete",n[a]);break;case 9:this.$=ct.createNode(ht(o[a-1]),"node_op","op_return",void 0);break;case 10:this.$=ct.createNode(ht(o[a-2]),"node_op","op_return",n[a-1]);break;case 11:case 14:this.$=ct.createNode(ht(o[a]),"node_op","op_none");break;case 12:this.$=n[a-1],this.$.needsBrackets=!0;break;case 13:this.$=ct.createNode(ht(o[a-1]),"node_op","op_none",n[a-1],n[a]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=n[a];break;case 22:case 65:case 93:this.$=n[a-1];break;case 25:this.$=ct.createNode(ht(o[a-2]),"node_op","op_assign",n[a-2],n[a]),this.$.isMath=!1;break;case 27:this.$=ct.createNode(ht(o[a-4]),"node_op","op_conditional",n[a-4],n[a-2],n[a]),this.$.isMath=!1;break;case 29:this.$=ct.createNode(ht(o[a-2]),"node_op","op_or",n[a-2],n[a]),this.$.isMath=!1;break;case 31:this.$=ct.createNode(ht(o[a-2]),"node_op","op_and",n[a-2],n[a]),this.$.isMath=!1;break;case 33:this.$=ct.createNode(ht(o[a-2]),"node_op","op_eq",n[a-2],n[a]),this.$.isMath=!1;break;case 34:this.$=ct.createNode(ht(o[a-2]),"node_op","op_neq",n[a-2],n[a]),this.$.isMath=!1;break;case 35:this.$=ct.createNode(ht(o[a-2]),"node_op","op_approx",n[a-2],n[a]),this.$.isMath=!1;break;case 37:this.$=ct.createNode(ht(o[a-2]),"node_op","op_lt",n[a-2],n[a]),this.$.isMath=!1;break;case 38:this.$=ct.createNode(ht(o[a-2]),"node_op","op_gt",n[a-2],n[a]),this.$.isMath=!1;break;case 39:this.$=ct.createNode(ht(o[a-2]),"node_op","op_leq",n[a-2],n[a]),this.$.isMath=!1;break;case 40:this.$=ct.createNode(ht(o[a-2]),"node_op","op_geq",n[a-2],n[a]),this.$.isMath=!1;break;case 42:this.$=ct.createNode(ht(o[a-2]),"node_op","op_add",n[a-2],n[a]),this.$.isMath=!0;break;case 43:this.$=ct.createNode(ht(o[a-2]),"node_op","op_sub",n[a-2],n[a]),this.$.isMath=!0;break;case 45:this.$=ct.createNode(ht(o[a-2]),"node_op","op_mul",n[a-2],n[a]),this.$.isMath=!0;break;case 46:this.$=ct.createNode(ht(o[a-2]),"node_op","op_div",n[a-2],n[a]),this.$.isMath=!0;break;case 47:this.$=ct.createNode(ht(o[a-2]),"node_op","op_mod",n[a-2],n[a]),this.$.isMath=!0;break;case 49:this.$=ct.createNode(ht(o[a-2]),"node_op","op_exp",n[a-2],n[a]),this.$.isMath=!0;break;case 51:this.$=ct.createNode(ht(o[a-1]),"node_op","op_not",n[a]),this.$.isMath=!1;break;case 53:this.$=ct.createNode(ht(o[a-1]),"node_op","op_neg",n[a]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=n[a],this.$.isMath=!1;break;case 59:case 91:this.$=ct.createNode(ht(o[a-2]),"node_op","op_property",n[a-2],n[a]),this.$.isMath=!0;break;case 60:case 90:this.$=ct.createNode(ht(o[a-3]),"node_op","op_extvalue",n[a-3],n[a-1]),this.$.isMath=!0;break;case 61:this.$=ct.createNode(ht(o[a]),"node_var",n[a]);break;case 69:this.$=n[a],this.$.isMath=!0;break;case 70:this.$=ct.createNode(ht(o[a]),"node_const",null);break;case 71:this.$=ct.createNode(ht(o[a]),"node_const_bool",!0);break;case 72:this.$=ct.createNode(ht(o[a]),"node_const_bool",!1);break;case 73:this.$=ct.createNode(ht(o[a]),"node_str",n[a].substring(1,n[a].length-1));break;case 74:this.$=ct.createNode(ht(o[a]),"node_const",parseFloat(n[a]));break;case 75:this.$=ct.createNode(ht(o[a]),"node_const",NaN);break;case 76:this.$=ct.createNode(ht(o[a]),"node_const",1/0);break;case 77:this.$=ct.createNode(ht(o[a-1]),"node_op","op_array",[]);break;case 78:this.$=ct.createNode(ht(o[a-2]),"node_op","op_array",n[a-1]);break;case 79:this.$=ct.createNode(ht(o[a-1]),"node_op","op_emptyobject",{}),this.$.needsBrackets=!0;break;case 80:this.$=ct.createNode(ht(o[a-2]),"node_op","op_proplst_val",n[a-1]),this.$.needsBrackets=!0;break;case 82:this.$=ct.createNode(ht(o[a-2]),"node_op","op_proplst",n[a-2],n[a]);break;case 83:this.$=ct.createNode(ht(o[a-2]),"node_op","op_prop",n[a-2],n[a]);break;case 87:case 89:this.$=ct.createNode(ht(o[a-1]),"node_op","op_execfun",n[a-1],n[a]),this.$.isMath=!0;break;case 88:this.$=ct.createNode(ht(o[a-2]),"node_op","op_execfun",n[a-2],n[a-1],n[a],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 103:this.$=[n[a]];break;case 95:case 99:case 104:this.$=n[a-2].concat(n[a]);break;case 96:this.$=ct.createNode(ht(o[a]),"node_var",n[a]),this.$.isMath=!0;break;case 100:this.$=ct.createNode(ht(o[a-3]),"node_op","op_function",[],n[a]),this.$.isMath=!1;break;case 101:this.$=ct.createNode(ht(o[a-4]),"node_op","op_function",n[a-2],n[a]),this.$.isMath=!1;break;case 102:this.$=ct.createNode(ht(o[a-5]),"node_op","op_map",n[a-3],n[a])}},table:[e([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],i,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:r,8:s,9:20,11:4,13:7,14:n,15:o,16:a,17:l,18:8,19:c,20:h,21:u,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{1:[2,1]},e(T,[2,13]),e(N,[2,15]),e(N,[2,16]),e(N,[2,17]),e(N,[2,18]),e(N,[2,19]),e(N,[2,20]),e(N,[2,21]),e([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],i,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:r,8:s,9:20,11:65,13:7,14:n,15:o,16:a,17:l,18:8,19:c,20:h,21:u,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{20:[1,66]},{20:[1,67]},{8:s,9:69,16:[1,68],20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{16:[1,70]},e(N,[2,11]),e(M,[2,23]),e(M,[2,24]),e([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],A,{32:[1,71],57:R}),e([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),e(k,[2,54],{88:77,8:L,64:[1,75],65:[1,76]}),e(k,[2,55],{88:79,8:L,64:[1,81],65:[1,80]}),e(j,[2,28],{39:I}),e(M,[2,56]),e(M,[2,57]),e(M,[2,58]),e(B,[2,30],{41:D,42:Y,43:X}),e(M,[2,61]),e(M,[2,62]),e(M,[2,63]),e(M,[2,64]),{8:s,9:86,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:[1,87]},{8:[1,88]},e(F,[2,32],{45:U,46:G,47:J,48:z}),e(M,[2,66]),e(M,[2,67]),e(M,[2,68]),e(M,[2,69]),{20:H,72:98,73:99,77:C,78:P,79:O,80:x,83:[1,93],84:94,85:95,87:96},{8:s,20:h,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,81:101,82:E,91:w,93:S},e(V,[2,36],{50:$,51:q}),e(M,[2,70]),e(M,[2,71]),e(M,[2,72]),e(M,[2,73]),e(M,[2,74]),e(M,[2,75]),e(M,[2,76]),e(W,[2,41],{53:Q,54:Z,55:K}),e(M,[2,44]),e(M,[2,50]),{8:s,20:h,31:109,50:f,51:m,52:108,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,50:f,51:m,52:110,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,50:f,51:m,52:111,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{6:6,7:r,8:s,9:20,11:4,13:7,14:n,15:o,16:a,17:l,18:8,19:c,20:h,21:u,22:9,23:d,24:11,25:5,26:p,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,9:113,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,9:114,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,9:115,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{14:[1,116]},e(N,[2,7]),e(N,[2,8]),e(N,[2,9]),{16:[1,117]},e(N,[2,22]),{8:s,20:h,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,50:f,51:m,52:119,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,36:121,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{20:[1,122]},{8:s,9:123,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},e(M,[2,87],{89:124,90:125,68:127,20:tt,82:E}),{8:s,10:[1,128],20:h,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,81:129,82:E,91:w,93:S},e(M,[2,89]),{8:s,9:130,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{20:[1,131]},{8:s,20:h,31:109,38:132,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,40:133,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,40:134,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,40:135,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{10:[1,136]},{10:[1,137],20:et,92:138},{20:et,92:140},{8:s,20:h,31:109,44:141,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,44:142,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,44:143,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,44:144,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},e(M,[2,79]),{83:[1,145],86:[1,146]},e(it,[2,81]),{35:[1,147]},{35:[2,84]},{35:[2,85]},{35:[2,86]},e(M,[2,77]),{66:[1,148],86:rt},e(st,[2,98]),{8:s,20:h,31:109,49:150,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,49:151,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,50:f,51:m,52:152,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,50:f,51:m,52:153,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,31:109,50:f,51:m,52:154,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},e(M,[2,51]),e([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],A,{57:R}),e(M,[2,52]),e(M,[2,53]),e([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,155]},{10:[1,156]},{16:[1,157]},{8:[1,158]},e(N,[2,10]),e(M,[2,25]),e(M,[2,49]),{35:[1,159]},e(j,[2,29],{39:I}),e(M,[2,59]),{66:[1,160]},e([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,161]}),e(M,[2,94]),e(M,[2,96]),e(M,[2,97]),e(nt,[2,92]),{10:[1,162],86:rt},{66:[1,163]},e(M,[2,91]),e(B,[2,31],{41:D,42:Y,43:X}),e(F,[2,33],{45:U,46:G,47:J,48:z}),e(F,[2,34],{45:U,46:G,47:J,48:z}),e(F,[2,35],{45:U,46:G,47:J,48:z}),e(M,[2,65]),{25:164,26:p},{10:[1,165],86:ot},e(at,[2,103]),{10:[1,167],86:ot},e(V,[2,37],{50:$,51:q}),e(V,[2,38],{50:$,51:q}),e(V,[2,39],{50:$,51:q}),e(V,[2,40],{50:$,51:q}),e(M,[2,80]),{20:H,72:98,73:99,77:C,78:P,79:O,80:x,85:168,87:96},{8:s,20:h,29:169,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},e(M,[2,78]),{8:s,20:h,29:170,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},e(W,[2,42],{53:Q,54:Z,55:K}),e(W,[2,43],{53:Q,54:Z,55:K}),e(M,[2,45]),e(M,[2,46]),e(M,[2,47]),{6:6,7:r,8:s,9:20,11:171,13:7,14:n,15:o,16:a,17:l,18:8,19:c,20:h,21:u,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{6:6,7:r,8:s,9:20,11:172,13:7,14:n,15:o,16:a,17:l,18:8,19:c,20:h,21:u,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,9:173,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,9:174,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,20:h,29:175,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},e(M,[2,60]),{20:tt,68:127,82:E,90:176},e(nt,[2,93]),e(M,[2,90]),e(M,[2,100]),{25:177,26:p},{20:[1,178]},{94:[1,179]},e(it,[2,82]),e(it,[2,83]),e(st,[2,99]),e(T,[2,2],{12:[1,180]}),e(N,[2,4]),{16:[1,181]},{10:[1,182]},e(M,[2,27]),e(M,[2,95]),e(M,[2,101]),e(at,[2,104]),{8:s,9:183,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{6:6,7:r,8:s,9:20,11:184,13:7,14:n,15:o,16:a,17:l,18:8,19:c,20:h,21:u,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{8:s,9:185,20:h,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},{16:[1,186]},e(M,[2,102]),e(N,[2,3]),{10:[1,187]},e(N,[2,6]),{6:6,7:r,8:s,9:20,11:188,13:7,14:n,15:o,16:a,17:l,18:8,19:c,20:h,21:u,22:9,23:d,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:b,59:26,60:27,61:29,62:30,63:31,65:v,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:g,75:y,76:_,77:C,78:P,79:O,80:x,82:E,91:w,93:S},e(N,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(t,e){if(!e.recoverable){var i=new Error(t);throw i.hash=e,i}this.trace(t)},parse:function(t){var e=this,i=[0],r=[null],s=[],n=this.table,o="",a=0,l=0,c=0,h=s.slice.call(arguments,1),u=Object.create(this.lexer),d={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(d.yy[p]=this.yy[p]);u.setInput(t,d.yy),d.yy.lexer=u,d.yy.parser=this,void 0===u.yylloc&&(u.yylloc={});var f=u.yylloc;s.push(f);var m=u.options&&u.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,v,g,y,_,C,P,O,x,E=function(){var t;return t=u.lex()||1,"number"!=typeof t&&(t=e.symbols_[t]||t),t},w={};;){if(g=i[i.length-1],this.defaultActions[g]?y=this.defaultActions[g]:(null!==b&&void 0!==b||(b=E()),y=n[g]&&n[g][b]),void 0===y||!y.length||!y[0]){var S="";for(C in x=[],n[g])this.terminals_[C]&&C>2&&x.push("'"+this.terminals_[C]+"'");S=u.showPosition?"Parse error on line "+(a+1)+":\n"+u.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(S,{text:u.match,token:this.terminals_[b]||b,line:u.yylineno,loc:f,expected:x})}if(y[0]instanceof Array&&y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+b);switch(y[0]){case 1:i.push(b),r.push(u.yytext),s.push(u.yylloc),i.push(y[1]),b=null,v?(b=v,v=null):(l=u.yyleng,o=u.yytext,a=u.yylineno,f=u.yylloc,c>0&&c--);break;case 2:if(P=this.productions_[y[1]][1],w.$=r[r.length-P],w._$={first_line:s[s.length-(P||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(P||1)].first_column,last_column:s[s.length-1].last_column},m&&(w._$.range=[s[s.length-(P||1)].range[0],s[s.length-1].range[1]]),void 0!==(_=this.performAction.apply(w,[o,l,a,d.yy,y[1],r,s].concat(h))))return _;P&&(i=i.slice(0,-1*P*2),r=r.slice(0,-1*P),s=s.slice(0,-1*P)),i.push(this.productions_[y[1]][0]),r.push(w.$),s.push(w._$),O=n[i[i.length-2]][i[i.length-1]],i.push(O);break;case 3:return!0}}return!0}},ct={node:function(t,e,i){return{type:t,value:e,children:i}},createNode:function(t,e,i,r){var s,n=this.node(e,i,[]);for(s=3;s<arguments.length;s++)n.children.push(arguments[s]);return n.line=t[0],n.col=t[1],n.eline=t[2],n.ecol=t[3],n}},ht=function(t){return[t.first_line,t.first_column,t.last_line,t.last_column]},ut=function(){return{EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===r.length?this.yylloc.first_column:0)+r[r.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,r,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var n in s)this[n]=s[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),n=0;n<s.length;n++)if((i=this._input.match(this.rules[s[n]]))&&(!e||i[0].length>e[0].length)){if(e=i,r=n,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,s[n])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,s[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,r){switch(i){case 0:break;case 1:case 2:return 78;case 3:case 4:return 77;case 5:case 6:break;case 7:return 7;case 8:return 12;case 9:return 14;case 10:return 17;case 11:return 15;case 12:return 91;case 13:return 93;case 14:return 19;case 15:return 23;case 16:return 21;case 17:return 75;case 18:return 76;case 19:return 74;case 20:return 80;case 21:return 94;case 22:return 82;case 23:return 83;case 24:return 26;case 25:return 27;case 26:return 16;case 27:return"#";case 28:return 34;case 29:return 35;case 30:return 79;case 31:return 64;case 32:return 65;case 33:return 66;case 34:return 8;case 35:return 10;case 36:return 58;case 37:return 57;case 38:return 53;case 39:return 54;case 40:return 55;case 41:return 50;case 42:return 51;case 43:return 47;case 44:return 45;case 45:return 48;case 46:return 46;case 47:return 41;case 48:return 43;case 49:return 42;case 50:return 39;case 51:return 37;case 52:return 32;case 53:return 86;case 54:return 5;case 55:return 20;case 56:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56],inclusive:!0}}}}();return lt.lexer=ut,t.prototype=lt,lt.Parser=t,new t}();return void 0!==require&&"undefined"!=typeof exports&&(exports.parser=parser,exports.Parser=parser.Parser,exports.parse=function(){return parser.parse.apply(parser,arguments)},exports.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var e=require("fs").readFileSync(require("path").normalize(t[1]),"utf8");return exports.parser.parse(e)},require.main===module&&exports.main(process.argv.slice(1))),parser.yy.parseError=parser.parseError,JXG.JessieCode})),define("base/composition",["jxg","utils/type"],(function(t,e){"use strict";return t.Composition=function(t){var i,r=this,s=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"];for(i=0;i<s.length;i++)this[s[i]]=function(t){return function(){var i;for(i in r.elements)r.elements.hasOwnProperty(i)&&e.exists(r.elements[i][t])&&r.elements[i][t].apply(r.elements[i],arguments);return r}}(s[i]);for(i in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},t)t.hasOwnProperty(i)&&this.add(i,t[i]);this.dump=!0,this.subs={}},t.extend(t.Composition.prototype,{add:function(t,i){return!(e.exists(this[t])||!e.exists(i))&&(e.exists(i.id)?this.elements[i.id]=i:this.elements[t]=i,e.exists(i.name)&&(this.elementsByName[i.name]=i),i.on("attribute:name",this.nameListener,this),this.objectsList.push(i),this[t]=i,this.methodMap[t]=i,!0)},remove:function(t){var e,i=!1;for(e in this.elements)if(this.elements.hasOwnProperty(e)&&this.elements[e].id===this[t].id){i=!0;break}return i&&(delete this.elements[this[t].id],delete this[t]),i},nameListener:function(t,e,i){delete this.elementsByName[t],this.elementsByName[e]=i},select:function(i){return e.exists(t.Board)?t.Board.prototype.select.call(this,i):new t.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var t,e={};for(t in this.subs)this.subs.hasOwnProperty(t)&&(e[t]=this.subs[t].visProp);return this.attr}}),t.Composition})),define("base/board",["jxg","base/constants","base/coords","options","math/numerics","math/math","math/geometry","math/complex","math/statistics","parser/jessiecode","utils/color","utils/type","utils/event","utils/env","base/composition"],(function(t,e,i,r,s,n,o,a,l,c,h,u,d,p,f){"use strict";return t.Board=function(i,s,n,o,a,l,h,f,m,b,v){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,u.exists(v.document)&&!1!==v.document?this.document=v.document:void 0!==document&&u.isObject(document)&&(this.document=document),this.container=i,this.containerObj=p.isBrowser?this.document.getElementById(this.container):null,p.isBrowser&&"no"!==s.type&&null===this.containerObj)throw new Error("\nJSXGraph: HTML container element '"+i+"' not found.");this.renderer=s,this.grids=[],this.options=u.deepCopy(r),this.attr=v,this.dimension=2,this.jc=new c,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,o[0],o[1]],this.zoomX=a,this.zoomY=l,this.unitX=h*this.zoomX,this.unitY=f*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=m,this.canvasHeight=b,u.exists(n)&&""!==n&&p.isBrowser&&!u.exists(this.document.getElementById(n))?this.id=n:this.id=this.generateId(),d.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.attr.showcopyright&&this.renderer.displayCopyright(e.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this.selectingBox=[[0,0],[0,0]],this.mathLib=Math,this.mathLibJXG=t.Math,this.attr.registerevents&&this.addEventHandlers(),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setView:"setBoundingBox",setBoundingBox:"setBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},t.extend(t.Board.prototype,{generateName:function(t){var i,r,s=this.attr.maxnamelength,n="",o="",a=[],l="";if(t.type===e.OBJECT_TYPE_TICKS)return"";for(i=u.isPoint(t)?["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:t.type===e.OBJECT_TYPE_ANGLE?["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],u.isPoint(t)||t.elementClass===e.OBJECT_CLASS_LINE||t.type===e.OBJECT_TYPE_ANGLE||(n=t.type===e.OBJECT_TYPE_POLYGON?"P_{":t.elementClass===e.OBJECT_CLASS_CIRCLE?"k_{":t.elementClass===e.OBJECT_CLASS_TEXT?"t_{":"s_{",o="}"),r=0;r<s;r++)a[r]=0;for(;a[s-1]<i.length;){for(a[0]=1;a[0]<i.length;a[0]++){for(l=n,r=s;r>0;r--)l+=i[a[r-1]];if(!u.exists(this.elementsByName[l+o]))return l+o}for(a[0]=i.length,r=1;r<s;r++)a[r-1]===i.length&&(a[r-1]=1,a[r]+=1)}return""},generateId:function(){for(var e=1;u.exists(t.boards["jxgBoard"+e]);)e=Math.round(65535*Math.random());return"jxgBoard"+e},setId:function(t,e){var i,r=this.numObjects,s=t.id;if(this.numObjects+=1,""===s||!u.exists(s))for(s=this.id+e+r;u.exists(this.objects[s]);)i=Math.round(65535*Math.random()),s=this.id+e+r+"-"+i;return t.id=s,this.objects[s]=t,t._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=t,s},finalizeAdding:function(t){!1===u.evaluate(t.visProp.visible)&&this.renderer.display(t,!1)},finalizeLabel:function(t){t.hasLabel&&!u.evaluate(t.label.visProp.islabel)&&!1===u.evaluate(t.label.visProp.visible)&&this.renderer.display(t.label,!1)},checkFrameRate:function(t){var e=!1,i=(new Date).getTime();return u.exists(t.pointerId)&&this.touchMoveLastId!==t.pointerId&&(e=!0,this.touchMoveLastId=t.pointerId),!e&&(i-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(e=!0),e&&(this.touchMoveLast=i),e},getCoordsTopLeftCorner:function(){var t,e,i,r,s,n=this.document.documentElement||this.document.body.parentNode,o=this.document.body,a=this.containerObj;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||(new Date).getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=(new Date).getTime(),a.getBoundingClientRect){for(i=a.getBoundingClientRect(),r=1,s=a;s&&u.exists(s.parentNode);)u.exists(s.style)&&u.exists(s.style.zoom)&&""!==s.style.zoom&&(r*=parseFloat(s.style.zoom)),s=s.parentNode;return t=[i.left*r,i.top*r],t[0]+=p.getProp(a,"border-left-width"),t[1]+=p.getProp(a,"border-top-width"),"vml"!==this.renderer.type&&(t[0]+=p.getProp(a,"padding-left"),t[1]+=p.getProp(a,"padding-top")),this.cPos=t.slice(),this.cPos}return t=p.getOffset(a),e=this.document.documentElement.ownerDocument,!this.containerObj.currentStyle&&e.defaultView&&(t[0]+=p.getProp(n,"margin-left"),t[1]+=p.getProp(n,"margin-top"),t[0]+=p.getProp(n,"border-left-width"),t[1]+=p.getProp(n,"border-top-width"),t[0]+=p.getProp(n,"padding-left"),t[1]+=p.getProp(n,"padding-top")),o&&(t[0]+=p.getProp(o,"left"),t[1]+=p.getProp(o,"top")),"object"==typeof google&&google.translate&&(t[0]+=10,t[1]+=25),t[0]+=p.getProp(a,"border-left-width"),t[1]+=p.getProp(a,"border-top-width"),"vml"!==this.renderer.type&&(t[0]+=p.getProp(a,"padding-left"),t[1]+=p.getProp(a,"padding-top")),t[0]+=this.attr.offsetx,t[1]+=this.attr.offsety,this.cPos=t.slice(),this.cPos},getMousePosition:function(t,e){var i,r,s=this.getCoordsTopLeftCorner();return i=p.getPosition(t,e,this.document),u.exists(this.cssTransMat)||this.updateCSSTransforms(),r=[1,i[0]-s[0],i[1]-s[1]],r=n.matVecMult(this.cssTransMat,r),r[1]/=r[0],r[2]/=r[0],[r[1],r[2]]},initMoveOrigin:function(t,e){this.drag_dx=t-this.origin.scrCoords[1],this.drag_dy=e-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(t,i,r,s){var n,o,a,c=[],h=[],d=this.objectsList.length,p={visProp:{layer:-1e4}};for(o=0;o<d;o++)n=this.objectsList[o],a=n.hasPoint&&n.hasPoint(t,i),n.visPropCalc.visible&&a&&(n.triggerEventHandlers([s+"down","down"],[r]),this.downObjects.push(n)),a&&n.isDraggable&&n.visPropCalc.visible&&(this.geonextCompatibilityMode&&(u.isPoint(n)||n.elementClass===e.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!u.evaluate(n.visProp.fixed)&&(n.visProp.layer>p.visProp.layer||n.visProp.layer===p.visProp.layer&&n.lastDragTime.getTime()>=p.lastDragTime.getTime())&&(this.attr.ignorelabels&&u.exists(p.label)&&n===p.label||(p=n,c.push(p),u.exists(p.coords)?h.push(l.subtract(p.coords.scrCoords.slice(1),[t,i])):h.push([0,0])));return this.attr.drag.enabled&&c.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(c.length=1,this._drag_offset=h[0]):(c=c.slice(-1),this._drag_offset=h[h.length-1]),this._drag_offset||(this._drag_offset=[0,0]),"svg"===this.renderer.type&&u.exists(c[0])&&u.evaluate(c[0].visProp.dragtotopoflayer)&&1===c.length&&u.exists(c[0].rendNode)&&c[0].rendNode.parentNode.appendChild(c[0].rendNode),this.previousRotation=0,this.previousScale=1,c.length>=1&&(c[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[r,c[0]])),c},moveObject:function(t,r,s,n,o){var a,c,h,d=new i(e.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(t,r),this);s&&s.obj&&(a=s.obj,a.coords&&(c=a.coords.scrCoords.slice()),this.drag_position=[d.scrCoords[1],d.scrCoords[2]],this.drag_position=l.add(this.drag_position,this._drag_offset),u.exists(a.coords)?a.setPositionDirectly(e.COORDS_BY_SCREEN,this.drag_position):(this.displayInfobox(!1),isNaN(s.targets[0].Xprev+s.targets[0].Yprev)||a.setPositionDirectly(e.COORDS_BY_SCREEN,[d.scrCoords[1],d.scrCoords[2]],[s.targets[0].Xprev,s.targets[0].Yprev]),s.targets[0].Xprev=d.scrCoords[1],s.targets[0].Yprev=d.scrCoords[2]),u.exists(a.coords)&&(a.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(a),a.prepareUpdate().update(!0).updateRenderer()),a.coords&&(h=a.coords.scrCoords),a.coords&&c[1]===h[1]&&c[2]===h[2]||(a.triggerEventHandlers([o+"drag","drag"],[n]),this.update()),a.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[n,a]),a.lastDragTime=new Date)},twoFingerMove:function(t,i,r){var s;u.exists(t)&&u.exists(t.obj)&&(s=t.obj,s.elementClass===e.OBJECT_CLASS_LINE||s.type===e.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(t.targets,s,i):s.elementClass===e.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(t.targets,s,i),r&&s.triggerEventHandlers(["touchdrag","drag"],[r]))},twoFingerTouchObject:function(t,r,s){var a,l,c,h,d,p,f,m,b,v,g,y,_,C,P,O,x;if(u.exists(t[0])&&u.exists(t[1])&&!isNaN(t[0].Xprev+t[0].Yprev+t[1].Xprev+t[1].Yprev)){if(s===t[0].num?(P=t[1],O=t[0]):(P=t[0],O=t[1]),x=new i(e.COORDS_BY_SCREEN,[P.Xprev,P.Yprev],this).usrCoords,l=new i(e.COORDS_BY_SCREEN,[O.Xprev,O.Yprev],this).usrCoords,a=new i(e.COORDS_BY_SCREEN,[O.X,O.Y],this).usrCoords,h=n.crossProduct(x,l),c=n.crossProduct(x,a),f=n.crossProduct(h,c),Math.abs(f[0])<n.eps)return;if(p=o.rad(l.slice(1),x.slice(1),a.slice(1)),m=this.create("transform",[p,[x[1],x[2]]],{type:"rotate"}),m.update(),u.evaluate(r.visProp.scalable)&&(d=o.distance(a,x)/o.distance(l,x),b=this.create("transform",[-x[1],-x[2]],{type:"translate"}),v=this.create("transform",[d,d],{type:"scale"}),g=this.create("transform",[x[1],x[2]],{type:"translate"}),m.melt(b).melt(v).melt(g)),r.elementClass===e.OBJECT_CLASS_LINE)y=[],r.point1.draggable()&&y.push(r.point1),r.point2.draggable()&&y.push(r.point2),m.applyOnce(y);else if(r.type===e.OBJECT_TYPE_POLYGON){for(y=[],C=r.vertices.length-1,_=0;_<C;++_)r.vertices[_].draggable()&&y.push(r.vertices[_]);m.applyOnce(y)}this.update(),r.highlight(!0)}},twoFingerTouchCircle:function(t,r,s){var n,a,l,c,h,d,p,f,m,b,v;"pointCircle"!==r.method&&"pointLine"!==r.method&&u.exists(t[0])&&u.exists(t[1])&&!isNaN(t[0].Xprev+t[0].Yprev+t[1].Xprev+t[1].Yprev)&&(s===t[0].num?(n=t[1],a=t[0]):(n=t[0],a=t[1]),h=new i(e.COORDS_BY_SCREEN,[n.Xprev,n.Yprev],this).usrCoords,c=new i(e.COORDS_BY_SCREEN,[a.Xprev,a.Yprev],this).usrCoords,l=new i(e.COORDS_BY_SCREEN,[a.X,a.Y],this).usrCoords,p=o.rad(c.slice(1),h.slice(1),l.slice(1)),f=this.create("transform",[-h[1],-h[2]],{type:"translate"}),m=this.create("transform",[p],{type:"rotate"}),f.melt(m),u.evaluate(r.visProp.scalable)&&(d=o.distance(h,l)/o.distance(h,c),b=this.create("transform",[d,d],{type:"scale"}),f.melt(b)),v=this.create("transform",[h[1],h[2]],{type:"translate"}),f.melt(v),r.center.draggable()&&f.applyOnce([r.center]),"twoPoints"===r.method?r.point2.draggable()&&f.applyOnce([r.point2]):"pointRadius"===r.method&&u.isNumber(r.updateRadius.origin)&&r.setRadius(r.radius*d),this.update(r.center),r.highlight(!0))},highlightElements:function(t,e,i,r){var s,n,o,a={},l=this.objectsList.length;for(s=0;s<l;s++)n=this.objectsList[s],o=n.id,u.exists(n.hasPoint)&&n.visPropCalc.visible&&n.hasPoint(t,e)&&(this.updateInfobox(n),u.exists(this.highlightedObjects[o])||(a[o]=n,n.highlight(),this.triggerEventHandlers(["mousehit","hit"],[i,n,r])),n.mouseover?n.triggerEventHandlers(["mousemove","move"],[i]):(n.triggerEventHandlers(["mouseover","over"],[i]),n.mouseover=!0));for(s=0;s<l;s++)n=this.objectsList[s],o=n.id,n.mouseover&&(a[o]||(n.triggerEventHandlers(["mouseout","out"],[i]),n.mouseover=!1))},saveStartPos:function(i,r){var s,n,o=[];if(i.type===e.OBJECT_TYPE_TICKS)o.push([1,NaN,NaN]);else if(i.elementClass===e.OBJECT_CLASS_LINE)o.push(i.point1.coords.usrCoords),o.push(i.point2.coords.usrCoords);else if(i.elementClass===e.OBJECT_CLASS_CIRCLE)o.push(i.center.coords.usrCoords),"twoPoints"===i.method&&o.push(i.point2.coords.usrCoords);else if(i.type===e.OBJECT_TYPE_POLYGON)for(n=i.vertices.length-1,s=0;s<n;s++)o.push(i.vertices[s].coords.usrCoords);else if(i.type===e.OBJECT_TYPE_SECTOR)o.push(i.point1.coords.usrCoords),o.push(i.point2.coords.usrCoords),o.push(i.point3.coords.usrCoords);else if(u.isPoint(i)||i.type===e.OBJECT_TYPE_GLIDER)o.push(i.coords.usrCoords);else if(i.elementClass===e.OBJECT_CLASS_CURVE)i.points.length>0&&o.push(i.points[0].usrCoords);else try{o.push(i.coords.usrCoords)}catch(e){t.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+e)}for(n=o.length,s=0;s<n;s++)r.Zstart.push(o[s][0]),r.Xstart.push(o[s][1]),r.Ystart.push(o[s][2])},mouseOriginMoveStart:function(t){var e,i;return e=this._isRequiredKeyPressed(t,"pan"),e&&(i=this.getMousePosition(t),this.initMoveOrigin(i[0],i[1])),e},mouseOriginMove:function(t){var e,i=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return i&&(e=this.getMousePosition(t),this.moveOrigin(e[0],e[1],!0)),i},touchStartMoveOriginOneFinger:function(e){var i,r,s=e[t.touchProperty];return i=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&1===s.length,i&&(r=this.getMousePosition(e,0),this.initMoveOrigin(r[0],r[1])),i},touchOriginMove:function(t){var e,i=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return i&&(e=this.getMousePosition(t,0),this.moveOrigin(e[0],e[1],!0)),i},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},addEventHandlers:function(){if(p.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),null!==this.containerObj&&(this.containerObj.oncontextmenu=function(t){return u.exists(t)&&t.preventDefault(),!1}),this.addFullscreenEventHandlers(),this.addKeyboardEventHandlers(),p.isBrowser){try{this.startResizeObserver()}catch(t){p.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver()}p.addEvent(window,"scroll",this.scrollListener,this)}},removeEventHandlers:function(){this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),p.isBrowser&&(u.exists(this.resizeObserver)?this.stopResizeObserver():(p.removeEvent(window,"resize",this.resizeListener,this),this.stopIntersectionObserver()),p.removeEvent(window,"scroll",this.scrollListener,this))},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&p.isBrowser){var t=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(p.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),p.addEvent(t,"MSPointerMove",this.pointerMoveListener,this)):(p.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),p.addEvent(t,"pointermove",this.pointerMoveListener,this)),p.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),p.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),null!==this.containerObj&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&p.isBrowser){var t=this.attr.movetarget||this.containerObj;p.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),p.addEvent(t,"mousemove",this.mouseMoveListener,this),p.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),p.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(t){if(!this.hasTouchHandlers&&p.isBrowser){var e=this.attr.movetarget||this.containerObj;p.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),p.addEvent(e,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addFullscreenEventHandlers:function(){var t,e=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],i=e.length;if(!this.hasFullsceenEventHandlers&&p.isBrowser){for(t=0;t<i;t++)p.addEvent(this.document,e[t],this.fullscreenListener,this);this.hasFullsceenEventHandlers=!0}},addKeyboardEventHandlers:function(){!this.hasKeyboardHandlers&&p.isBrowser&&(p.addEvent(this.containerObj,"keydown",this.keyDownListener,this),p.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),p.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&p.isBrowser&&(p.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),p.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),p.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var t,e=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],i=e.length;if(this.hasFullsceenEventHandlers&&p.isBrowser){for(t=0;t<i;t++)p.removeEvent(this.document,e[t],this.fullscreenListener,this);this.hasFullsceenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&p.isBrowser){var t=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(p.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),p.removeEvent(t,"MSPointerMove",this.pointerMoveListener,this)):(p.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),p.removeEvent(t,"pointermove",this.pointerMoveListener,this)),p.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),p.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasPointerUp&&(window.navigator.msPointerEnabled?p.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(p.removeEvent(this.document,"pointerup",this.pointerUpListener,this),p.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&p.isBrowser){var t=this.attr.movetarget||this.containerObj;p.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),p.removeEvent(t,"mousemove",this.mouseMoveListener,this),this.hasMouseUp&&(p.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),p.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),p.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&p.isBrowser){var t=this.attr.movetarget||this.containerObj;p.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),p.removeEvent(t,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(p.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),this},gestureChangeListener:function(t){var r,s,n,a,l,c,h,d,p,f,m=[],b=[],v=!1,g=this.attr.zoom.factorx,y=this.attr.zoom.factory;return this.mode!==this.BOARD_MODE_ZOOM||(t.preventDefault(),a=o.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),void 0===t.scale&&(t.scale=a/this.prevDist),!!u.exists(this.prevCoords)&&(m=[t.touches[0].clientX-this.prevCoords[0][0],t.touches[0].clientY-this.prevCoords[0][1]],b=[t.touches[1].clientX-this.prevCoords[1][0],t.touches[1].clientY-this.prevCoords[1][1]],!(m[0]*m[0]+m[1]*m[1]<100&&b[0]*b[0]+b[1]*b[1]<100)&&(s=o.rad(m,[0,0],b),"pan"!==this.isPreviousGesture&&Math.abs(s)>.2*Math.PI&&Math.abs(s)<1.8*Math.PI&&(v=!0),"pan"===this.isPreviousGesture||v||(Math.abs(t.scale)<.77||Math.abs(t.scale)>1.3)&&(v=!0),n=t.scale/this.prevScale,this.prevScale=t.scale,this.prevCoords=[[t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]],r=new i(e.COORDS_BY_SCREEN,this.getMousePosition(t,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!v?(this.isPreviousGesture="pan",this.moveOrigin(r.scrCoords[1],r.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(n-1)<.5&&((this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(l=Math.abs(t.touches[0].clientX-t.touches[1].clientX),c=Math.abs(t.touches[0].clientY-t.touches[1].clientY),h=Math.abs(Math.atan2(c,l)),f=Math.PI*this.attr.zoom.pinchsensitivity/90),this.attr.zoom.pinchhorizontal&&h<f?(this.attr.zoom.factorx=n,this.attr.zoom.factory=1,d=0,p=0):this.attr.zoom.pinchvertical&&Math.abs(h-.5*Math.PI)<f?(this.attr.zoom.factorx=1,this.attr.zoom.factory=n,d=0,p=0):(this.attr.zoom.factorx=n,this.attr.zoom.factory=n,d=r.usrCoords[1],p=r.usrCoords[2]),this.zoomIn(d,p),this.attr.zoom.factorx=g,this.attr.zoom.factory=y),!1)))},gestureStartListener:function(t){var e;return t.preventDefault(),this.prevScale=1,this.prevDist=o.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),this.prevCoords=[[t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]],this.isPreviousGesture="none",e=this.getMousePosition(t,0),this.initMoveOrigin(e[0],e[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(t,e){var i=this.attr[e];return!!i.enabled&&!(!(i.needshift&&t.shiftKey||!i.needshift&&!t.shiftKey)||!(i.needctrl&&t.ctrlKey||!i.needctrl&&!t.ctrlKey))},_isPointerRegistered:function(t){var e,i=this._board_touches.length;for(e=0;e<i;e++)if(this._board_touches[e].pointerId===t.pointerId)return!0;return!1},_pointerStorePosition:function(t){var e,i;for(e=0,i=!1;e<this._board_touches.length;e++)if(this._board_touches[e].pointerId===t.pointerId){this._board_touches[e].clientX=t.clientX,this._board_touches[e].clientY=t.clientY,i=!0;break}return!i&&this._board_touches.length<2&&this._board_touches.push({pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY}),this},_pointerRemoveTouches:function(t){var e;for(e=0;e<this._board_touches.length;e++)if(this._board_touches[e].pointerId===t.pointerId){this._board_touches.splice(e,1);break}return this},_pointerClearTouches:function(){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(t){if(p.isBrowser){if("touch"===t.pointerType||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if("mouse"===t.pointerType)return"mouse";if("pen"===t.pointerType)return"pen"}return"mouse"},pointerDownListener:function(t,e){var i,r,s,n,o,a,l,c,h,d="mouse";if(!e&&this._isPointerRegistered(t))return!1;if(!e&&t.isPrimary&&this._pointerClearTouches(),this.hasPointerUp||(window.navigator.msPointerEnabled?p.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(p.addEvent(this.document,"pointerup",this.pointerUpListener,this),p.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&u.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(a=window.getSelection(),a.removeAllRanges))try{a.removeAllRanges()}catch(t){}if(this._inputDevice=this._getPointerInputDevice(t),d=this._inputDevice,this.options.precision.hasPoint=this.options.precision[d],n=this.getMousePosition(t),this._testForSelection(t),this.selectingMode)return this._startSelecting(n),void this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[t]);if(this.attr.drag.enabled&&e?(o=[e],this.mode=this.BOARD_MODE_DRAG):o=this.initMoveObject(n[0],n[1],t,d),l={num:t.pointerId,X:n[0],Y:n[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},o.length>0){for(h=o[o.length-1],c=!1,i=0;i<this.touches.length;i++)if(this.touches[i].obj===h){r=i,s=this.touches[i].targets.push(l)-1,c=!0;break}c||(s=0,r=this.touches.push({obj:h,targets:[l]})-1),this.dehighlightAll(),h.highlight(!0),this.saveStartPos(h,this.touches[r].targets[s]),t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)}return this.touches.length>0&&(t.preventDefault(),t.stopPropagation()),!!p.isBrowser&&("touch"!==this._getPointerInputDevice(t)?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(t):(this._pointerStorePosition(t),t.touches=this._board_touches,1==t.touches.length&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(t)||2!=t.touches.length||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(t))),this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[t]),!1)},pointerMoveListener:function(t){var e,i,r,s,n="mouse";if("touch"===this._getPointerInputDevice(t)&&!this._isPointerRegistered(t))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(t))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(t.preventDefault(),t.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(t),n=this._inputDevice,this.options.precision.hasPoint=this.options.precision[n],this.selectingMode)r=this.getMousePosition(t),this._moveSelecting(r),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[t,this.mode]);else if(!this.mouseOriginMove(t))if(this.mode===this.BOARD_MODE_DRAG){for(e=0;e<this.touches.length;e++)for(s=this.touches[e].targets,i=0;i<s.length;i++)if(s[i].num===t.pointerId){r=this.getMousePosition(t),s[i].X=r[0],s[i].Y=r[1],1===s.length?this.moveObject(r[0],r[1],this.touches[e],t,n):2===s.length&&(this.twoFingerMove(this.touches[e],t.pointerId,t),s[i].Xprev=r[0],s[i].Yprev=r[1]);break}}else"touch"===this._getPointerInputDevice(t)&&(this._pointerStorePosition(t),2===this._board_touches.length&&(t.touches=this._board_touches,this.gestureChangeListener(t))),r=this.getMousePosition(t),this.highlightElements(r[0],r[1],t,-1);return this.triggerEventHandlers(["touchmove","move","pointermove","MSPointerMove"],[t,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(t){var e,i,r,s;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),this.displayInfobox(!1),t)for(e=0;e<this.touches.length;e++)for(s=this.touches[e].targets,i=0;i<s.length;i++)if(s[i].num===t.pointerId){s.splice(i,1),0===s.length&&this.touches.splice(e,1);break}if(this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[t]);else for(e=this.downObjects.length-1;e>-1;e--){for(r=!1,i=0;i<this.touches.length;i++)this.touches[i].obj.id===this.downObjects[e].id&&(r=!0);r||(this.downObjects[e].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),this.downObjects[e].snapToGrid(),this.downObjects[e].snapToPoints(),this.downObjects.splice(e,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?p.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(p.removeEvent(this.document,"pointerup",this.pointerUpListener,this),p.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.originMoveEnd(),this.update(),this._pointerClearTouches(),!0},touchStartListener:function(i){var s,n,o,a,l,c,h,d,f,m,b=this.options.precision.touch,v=i[t.touchProperty];for(this.hasTouchEnd||(p.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&u.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,s=0;s<v.length;s++)v[s].jxg_isused=!1;for(s=0;s<this.touches.length;s++)for(m=this.touches[s].targets,a=0;a<m.length;a++){m[a].num=-1,b=this.options.precision.touch;do{for(l=0;l<v.length;l++)if(Math.abs(Math.pow(v[l].screenX-m[a].X,2)+Math.pow(v[l].screenY-m[a].Y,2))<b*b){m[a].num=l,m[a].X=v[l].screenX,m[a].Y=v[l].screenY,v[l].jxg_isused=!0;break}b*=2}while(-1===m[a].num&&b<this.options.precision.touchMax);-1===m[a].num&&(t.debug("i couldn't find a targettouches for target no "+a+" on "+this.touches[s].obj.name+" ("+this.touches[s].obj.id+"). Removed the target."),t.debug("eps = "+b+", touchMax = "+r.precision.touchMax),m.splice(s,1))}for(s=0;s<v.length;s++)if(!v[s].jxg_isused){if(n=this.getMousePosition(i,s),this.selectingMode)return this._startSelecting(n),this.triggerEventHandlers(["touchstartselecting","startselecting"],[i]),i.preventDefault(),i.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if(o=this.initMoveObject(n[0],n[1],i,"touch"),0!==o.length)if(c=o[o.length-1],f={num:s,X:v[s].screenX,Y:v[s].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},u.isPoint(c)||c.elementClass===e.OBJECT_CLASS_TEXT||c.type===e.OBJECT_TYPE_TICKS||c.type===e.OBJECT_TYPE_IMAGE)d=[target_obj],this.saveStartPos(c,d[0]),this.touches.push({obj:c,targets:d}),c.highlight(!0);else if(c.elementClass===e.OBJECT_CLASS_LINE||c.elementClass===e.OBJECT_CLASS_CIRCLE||c.elementClass===e.OBJECT_CLASS_CURVE||c.type===e.OBJECT_TYPE_POLYGON){for(h=!1,a=0;a<this.touches.length;a++)c.id===this.touches[a].obj.id&&(h=!0,1===this.touches[a].targets.length&&(this.saveStartPos(c,f),this.touches[a].targets.push(f)),v[s].jxg_isused=!0);h||(d=[f],this.saveStartPos(c,d[0]),this.touches.push({obj:c,targets:d}),c.highlight(!0))}v[s].jxg_isused=!0}return this.touches.length>0&&(i.preventDefault(),i.stopPropagation()),1===v.length&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(i)||2!==v.length||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(i)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[i]),!1},touchMoveListener:function(e){var i,r,s,n,o=e[t.touchProperty];if(!this.checkFrameRate(e))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(e.preventDefault(),e.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(i=0;i<o.length;i++)if(!o[i].jxg_isused){r=this.getMousePosition(e,i),this._moveSelecting(r),this.triggerEventHandlers(["touchmoves","moveselecting"],[e,this.mode]);break}}else if(!this.touchOriginMove(e))if(this.mode===this.BOARD_MODE_DRAG){for(i=0;i<this.touches.length;i++)if(n=this.touches[i].targets,1===n.length){if(o[n[0].num]){if(r=this.getMousePosition(e,n[0].num),r[0]<0||r[0]>this.canvasWidth||r[1]<0||r[1]>this.canvasHeight)return;n[0].X=r[0],n[0].Y=r[1],this.moveObject(r[0],r[1],this.touches[i],e,"touch")}}else if(2===n.length&&n[0].num>-1&&n[1].num>-1&&o[n[0].num]&&o[n[1].num]){if(r=this.getMousePosition(e,n[0].num),s=this.getMousePosition(e,n[1].num),r[0]<0||r[0]>this.canvasWidth||r[1]<0||r[1]>this.canvasHeight||s[0]<0||s[0]>this.canvasWidth||s[1]<0||s[1]>this.canvasHeight)return;n[0].X=r[0],n[0].Y=r[1],n[1].X=s[0],n[1].Y=s[1],this.twoFingerMove(this.touches[i],n[0].num,e),this.twoFingerMove(this.touches[i],n[1].num),n[0].Xprev=r[0],n[0].Yprev=r[1],n[1].Xprev=s[0],n[1].Yprev=s[1]}}else 2===o.length&&this.gestureChangeListener(e),r=this.getMousePosition(e,0),this.highlightElements(r[0],r[1],e,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[e,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(i){var r,s,n,o,a,l,c=this.options.precision.touch,h=[],d=i&&i[t.touchProperty];if(this.triggerEventHandlers(["touchend","up"],[i]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(i),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[i]);else if(d&&d.length>0){for(r=0;r<this.touches.length;r++)h[r]=this.touches[r];for(this.touches.length=0,r=0;r<d.length;r++)d[r].jxg_isused=!1;for(r=0;r<h.length;r++){for(o=!1,a=0,l=h[r].targets,s=0;s<l.length;s++)for(l[s].found=!1,n=0;n<d.length;n++)if(Math.abs(Math.pow(d[n].screenX-l[s].X,2)+Math.pow(d[n].screenY-l[s].Y,2))<c*c){l[s].found=!0,l[s].num=n,l[s].X=d[n].screenX,l[s].Y=d[n].screenY,a+=1;break}if(u.isPoint(h[r].obj)?o=l[0]&&l[0].found:h[r].obj.elementClass===e.OBJECT_CLASS_LINE?o=l[0]&&l[0].found||l[1]&&l[1].found:h[r].obj.elementClass===e.OBJECT_CLASS_CIRCLE&&(o=1===a||3===a),o)for(this.touches.push({obj:h[r].obj,targets:[]}),s=0;s<l.length;s++)l[s].found&&this.touches[this.touches.length-1].targets.push({num:l[s].num,X:l[s].screenX,Y:l[s].screenY,Xprev:NaN,Yprev:NaN,Xstart:l[s].Xstart,Ystart:l[s].Ystart,Zstart:l[s].Zstart});else h[r].obj.noHighlight()}}else this.touches.length=0;for(r=this.downObjects.length-1;r>-1;r--){for(o=!1,s=0;s<this.touches.length;s++)this.touches[s].obj.id===this.downObjects[r].id&&(o=!0);o||(this.downObjects[r].triggerEventHandlers(["touchup","up"],[i]),this.downObjects[r].snapToGrid(),this.downObjects[r].snapToPoints(),this.downObjects.splice(r,1))}return d&&0!==d.length||(this.hasTouchEnd&&(p.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),this.update()),!0},mouseDownListener:function(t){var e,i,r;if(this.document.selection&&u.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)return p.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,e=this.getMousePosition(t),this._testForSelection(t),this.selectingMode?(this._startSelecting(e),void this.triggerEventHandlers(["mousestartselecting","startselecting"],[t])):(i=this.initMoveObject(e[0],e[1],t,"mouse"),0===i.length?(this.mode=this.BOARD_MODE_NONE,r=!0):(this.mouse={obj:null,targets:[{X:e[0],Y:e[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=i[i.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(r=this.mouseOriginMoveStart(t)),this.triggerEventHandlers(["mousedown","down"],[t]),r)},mouseMoveListener:function(t){var e;if(!this.checkFrameRate(t))return!1;e=this.getMousePosition(t),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(e),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[t,this.mode])):this.mouseOriginMove(t)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(e[0],e[1],this.mouse,t,"mouse"):this.highlightElements(e[0],e[1],t,-1),this.triggerEventHandlers(["mousemove","move"],[t,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(t){var e;if(!1===this.selectingMode&&this.triggerEventHandlers(["mouseup","up"],[t]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints()),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[t]);else for(e=0;e<this.downObjects.length;e++)this.downObjects[e].triggerEventHandlers(["mouseup","up"],[t]);this.downObjects.length=0,this.hasMouseUp&&(p.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(t){if(!this.attr.zoom.wheel||!this._isRequiredKeyPressed(t,"zoom"))return!0;t=t||window.event;var r=t.detail?-t.detail:t.wheelDelta/40,s=new i(e.COORDS_BY_SCREEN,this.getMousePosition(t),this);return r>0?this.zoomIn(s.usrCoords[1],s.usrCoords[2]):this.zoomOut(s.usrCoords[1],s.usrCoords[2]),this.triggerEventHandlers(["mousewheel"],[t]),t.preventDefault(),!1},keyDownListener:function(i){var r,s,n,o,a,l=i.target.id,c=0,h=0,d=u.evaluate(this.attr.keyboard.dx)/this.unitX,p=u.evaluate(this.attr.keyboard.dy)/this.unitY,f=!1;return!(!this.attr.keyboard.enabled||""===l)&&(r=l.replace(this.containerObj.id+"_",""),s=this.select(r),u.exists(s.coords)&&(a=s.coords.usrCoords.slice(1)),(u.evaluate(this.attr.keyboard.panshift)||u.evaluate(this.attr.keyboard.panctrl))&&(f=!0),u.evaluate(this.attr.keyboard.panshift)&&i.shiftKey||u.evaluate(this.attr.keyboard.panctrl)&&i.ctrlKey?38===i.keyCode?this.clickUpArrow():40===i.keyCode?this.clickDownArrow():37===i.keyCode?this.clickLeftArrow():39===i.keyCode&&this.clickRightArrow():(u.exists(s.visProp)&&(u.exists(s.visProp.snaptogrid)&&s.visProp.snaptogrid&&u.evaluate(s.visProp.snapsizex)&&u.evaluate(s.visProp.snapsizey)?(n=s.getSnapSizes(),c=n[0],h=n[1],d=Math.max(c,d),p=Math.max(h,p)):u.exists(s.visProp.attracttogrid)&&s.visProp.attracttogrid&&u.evaluate(s.visProp.attractordistance)&&u.evaluate(s.visProp.attractorunit)&&(c=1.1*u.evaluate(s.visProp.attractordistance),h=c,"screen"==u.evaluate(s.visProp.attractorunit)&&(c/=this.unitX,h/=this.unitX),d=Math.max(c,d),p=Math.max(h,p))),38===i.keyCode?o=[0,p]:40===i.keyCode?o=[0,-p]:37===i.keyCode?o=[-d,0]:39===i.keyCode?o=[d,0]:f&&"+"===i.key?this.zoomIn():f&&"-"===i.key?this.zoomOut():f&&"o"===i.key&&this.zoom100(),o&&s.isDraggable&&s.visPropCalc.visible&&(this.geonextCompatibilityMode&&(u.isPoint(s)||s.elementClass===e.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!u.evaluate(s.visProp.fixed)&&(u.exists(s.coords)&&(o[0]+=a[0],o[1]+=a[1]),s.setPosition(t.COORDS_BY_USER,o),u.exists(s.coords)&&this.updateInfobox(s),this.triggerEventHandlers(["hit"],[i,s]))),this.update(),!0)},keyFocusInListener:function(t){var e,i,r=t.target.id;if(!this.attr.keyboard.enabled||""===r)return!1;e=r.replace(this.containerObj.id+"_",""),i=this.select(e),u.exists(i.highlight)&&i.highlight(!0),u.exists(i.coords)&&this.updateInfobox(i),this.triggerEventHandlers(["hit"],[t,i])},keyFocusOutListener:function(t){if(!this.attr.keyboard.enabled)return!1;this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(){var t,e,i,r;i=this.containerObj.getBoundingClientRect(),t=i.width,e=i.height,window&&window.getComputedStyle&&(r=window.getComputedStyle(this.containerObj,null),t-=parseFloat(r.getPropertyValue("border-left-width"))+parseFloat(r.getPropertyValue("border-right-width")),e-=parseFloat(r.getPropertyValue("border-top-width"))+parseFloat(r.getPropertyValue("border-bottom-width"))),t<=0||e<=0||(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),u.exists(this._prevDim)&&this._prevDim.w===t&&this._prevDim.h===e||(this.resizeContainer(t,e,!0),this._prevDim={w:t,h:e}))},startResizeObserver:function(){var t=this;p.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this.resizeObserver=new ResizeObserver((function(e){t._isResizing||(t._isResizing=!0,window.setTimeout((function(){try{t.updateContainerDims()}catch(e){t.stopResizeObserver()}finally{t._isResizing=!1}}),t.attr.resize.throttle))})),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){p.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&u.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var t=this;p.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this._isScrolling||this._isResizing||(this._isResizing=!0,window.setTimeout((function(){t.updateContainerDims(),t._isResizing=!1}),this.attr.resize.throttle)))},scrollListener:function(t){var e=this;p.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout((function(){e._isScrolling=!1}),66)))},startIntersectionObserver:function(){var t=this,e={root:null,rootMargin:"0px",threshold:.8};try{this.intersectionObserver=new IntersectionObserver((function(e){isNaN(t.getBoundingBox()[0])&&t.updateContainerDims()}),e),this.intersectionObserver.observe(t.containerObj)}catch(t){console.log("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){u.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},initInfobox:function(){var t=u.copyAttributes({},this.options,"infobox");return t.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],t),this.infobox.distanceX=-20,this.infobox.distanceY=25,this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(t){var e,i,r,s,n,o=u.evaluate(t.visProp.showinfobox);return!u.evaluate(this.attr.showinfobox)&&"inherit"===o||!o||u.isPoint(t)&&(r=t.coords.usrCoords[1],s=t.coords.usrCoords[2],n=u.evaluate(t.visProp.infoboxdigits),this.infobox.setCoords(r+this.infobox.distanceX/this.unitX,s+this.infobox.distanceY/this.unitY),"string"!=typeof t.infoboxText?("auto"===n?(e=u.autoDigits(r),i=u.autoDigits(s)):u.isNumber(n)?(e=u.toFixed(r,n),i=u.toFixed(s,n)):(e=r,i=s),this.highlightInfobox(e,i,t)):this.highlightCustomInfobox(t.infoboxText,t),this.displayInfobox(!0)),this},displayInfobox:function(t){return this.infobox.hiddenByParent===t&&(this.infobox.hiddenByParent=!t,this.infobox.prepareUpdate().updateVisibility(t).updateRenderer()),this},showInfobox:function(t){return this.displayInfobox(t)},highlightInfobox:function(t,e,i){return this.highlightCustomInfobox("("+t+", "+e+")",i),this},highlightCustomInfobox:function(t,e){return this.infobox.setText(t),this},dehighlightAll:function(){var t,e,i=!1;for(t in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(t)&&(e=this.highlightedObjects[t],(this.hasMouseHandlers||this.hasPointerHandlers)&&e.noHighlight(),i=!0);return this.highlightedObjects={},"canvas"===this.renderer.type&&i&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(t,e){return[t,e]},getUsrCoordsOfMouse:function(t){var r=this.getCoordsTopLeftCorner(),s=p.getPosition(t,null,this.document),n=s[0]-r[0],o=s[1]-r[1];return new i(e.COORDS_BY_SCREEN,[n,o],this).usrCoords.slice(1)},getAllUnderMouse:function(t){var e=this.getAllObjectsUnderMouse(t);return e.push(this.getUsrCoordsOfMouse(t)),e},getAllObjectsUnderMouse:function(t){var e,i,r=this.getCoordsTopLeftCorner(),s=p.getPosition(t,null,this.document),n=s[0]-r[0],o=s[1]-r[1],a=[],l=this.objectsList.length;for(e=0;e<l;e++)i=this.objectsList[e],i.visPropCalc.visible&&i.hasPoint&&i.hasPoint(n,o)&&(a[a.length]=i);return a},updateCoords:function(){var t,e,i=this.objectsList.length;for(e=0;e<i;e++)t=this.objectsList[e],u.exists(t.coords)&&(u.evaluate(t.visProp.frozen)?t.coords.screen2usr():t.coords.usr2screen());return this},moveOrigin:function(t,r,s){var n,o,a,l;return u.exists(t)&&u.exists(r)&&(n=this.origin.scrCoords[1],o=this.origin.scrCoords[2],this.origin.scrCoords[1]=t,this.origin.scrCoords[2]=r,s&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),a=new i(e.COORDS_BY_SCREEN,[0,0],this).usrCoords,l=new i(e.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(a[1]<this.maxboundingbox[0]||a[2]>this.maxboundingbox[1]||l[1]>this.maxboundingbox[2]||l[2]<this.maxboundingbox[3])&&(this.origin.scrCoords[1]=n,this.origin.scrCoords[2]=o)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(i){var r,s,n,o,a,l,c,d=[],p=i.indexOf("<data>"),f=i.indexOf("</data>"),m=function(t,i,r,s){return function(){var n,o;n=t.select(i.id),o=n.coords.usrCoords[s],2===s?n.setPositionDirectly(e.COORDS_BY_USER,[r(),o]):n.setPositionDirectly(e.COORDS_BY_USER,[o,r()]),n.prepareUpdate().update()}},b=function(t,e,i,r){return function(){var s,n;s=t.select(e.id),n=i(),"strokewidth"===r?s.visProp.strokewidth=n:(n=h.rgba2rgbo(n),s.visProp[r+"color"]=n[0],s.visProp[r+"opacity"]=n[1])}};if(!(p<0)){for(;p>=0;){if(r=i.slice(p+6,f),s=r.indexOf("="),n=r.slice(0,s),o=r.slice(s+1),s=n.indexOf("."),a=n.slice(0,s),l=this.elementsByName[u.unescapeHTML(a)],c=n.slice(s+1).replace(/\s+/g,"").toLowerCase(),o=u.createFunction(o,this,"",!0),u.exists(this.elementsByName[a]))switch('el = this.objects["'+l.id+'"];\n',c){case"x":d.push(m(this,l,o,2));break;case"y":d.push(m(this,l,o,1));break;case"visible":d.push(function(t,e,i){return function(){var r,s;r=t.select(e.id),s=i(),r.setAttribute({visible:s})}}(this,l,o));break;case"position":d.push(function(t,e,i){return function(){t.select(e.id).position=i()}}(this,l,o));break;case"stroke":d.push(b(this,l,o,"stroke"));break;case"style":d.push(function(t,e,i){return function(){t.select(e.id).setStyle(i())}}(this,l,o));break;case"strokewidth":d.push(b(this,l,o,"strokewidth"));break;case"fill":d.push(b(this,l,o,"fill"));break;case"label":break;default:t.debug("property '"+c+"' in conditions not yet implemented:"+o)}else t.debug("debug conditions: |"+a+"| undefined");i=i.slice(f+7),p=i.indexOf("<data>"),f=i.indexOf("</data>")}this.updateConditions=function(){var t;for(t=0;t<d.length;t++)d[t]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var t=new i(e.COORDS_BY_USER,[0,0],this),r=new i(e.COORDS_BY_USER,[this.options.grid.gridX,this.options.grid.gridY],this),s=t.scrCoords[1]-r.scrCoords[1],n=t.scrCoords[2]-r.scrCoords[2];for(this.options.grid.snapSizeX=this.options.grid.gridX;Math.abs(s)>25;)this.options.grid.snapSizeX*=2,s/=2;for(this.options.grid.snapSizeY=this.options.grid.gridY;Math.abs(n)>25;)this.options.grid.snapSizeY*=2,n/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(t,e){var i=this.getBoundingBox(),r=this.attr.zoom.factorx,s=this.attr.zoom.factory,n=(i[2]-i[0])*(1-1/r),o=(i[1]-i[3])*(1-1/s),a=.5,l=.5,c=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX>this.attr.zoom.max&&r>1||this.zoomY>this.attr.zoom.max&&s>1||this.zoomX<c&&r<1||this.zoomY<c&&s<1?this:(u.isNumber(t)&&u.isNumber(e)&&(a=(t-i[0])/(i[2]-i[0]),l=(i[1]-e)/(i[1]-i[3])),this.setBoundingBox([i[0]+n*a,i[1]-o*l,i[2]-n*(1-a),i[3]+o*(1-l)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(t,e){var i=this.getBoundingBox(),r=this.attr.zoom.factorx,s=this.attr.zoom.factory,n=(i[2]-i[0])*(1-r),o=(i[1]-i[3])*(1-s),a=.5,l=.5,c=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX<c||this.zoomY<c?this:(u.isNumber(t)&&u.isNumber(e)&&(a=(t-i[0])/(i[2]-i[0]),l=(i[1]-e)/(i[1]-i[3])),this.setBoundingBox([i[0]+n*a,i[1]-o*l,i[2]-n*(1-a),i[3]+o*(1-l)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var t,e,i;return u.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(t=this.getBoundingBox(),e=(t[2]-t[0])*(1-this.zoomX)*.5,i=(t[1]-t[3])*(1-this.zoomY)*.5,this.setBoundingBox([t[0]+e,t[1]-i,t[2]-e,t[3]+i],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var t,e,i,r,s,n=0,o=0,a=0,l=0,c=this.objectsList.length;for(t=0;t<c;t++)s=this.objectsList[t],u.isPoint(s)&&s.visPropCalc.visible&&(s.coords.usrCoords[1]<n?n=s.coords.usrCoords[1]:s.coords.usrCoords[1]>o&&(o=s.coords.usrCoords[1]),s.coords.usrCoords[2]>l?l=s.coords.usrCoords[2]:s.coords.usrCoords[2]<a&&(a=s.coords.usrCoords[2]));return e=50,i=e/this.unitX,r=e/this.unitY,this.setBoundingBox([n-i,l+r,o+i,a-r],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(t){var e,i,r,s,n,o,a,l,c=[1/0,-1/0,-1/0,1/0];if(!u.isArray(t)||0===t.length)return this;for(e=0;e<t.length;e++)i=this.select(t[e]),r=i.bounds(),u.isArray(r)&&(r[0]<c[0]&&(c[0]=r[0]),r[1]>c[1]&&(c[1]=r[1]),r[2]>c[2]&&(c[2]=r[2]),r[3]<c[3]&&(c[3]=r[3]));return u.isArray(c)&&(s=.5*(c[0]+c[2]),n=.5*(c[1]+c[3]),o=1.5*(c[2]-c[0])*.5,a=1.5*(c[1]-c[3])*.5,l=Math.max(o,a),this.setBoundingBox([s-l,n+l,s+l,n-l],this.keepaspectratio,"update")),this},setZoom:function(t,e){var i=this.attr.zoom.factorx,r=this.attr.zoom.factory;return this.attr.zoom.factorx=t/this.zoomX,this.attr.zoom.factory=e/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=i,this.attr.zoom.factory=r,this},removeObject:function(i,r){var s,n;if(u.isArray(i)){for(n=0;n<i.length;n++)this.removeObject(i[n]);return this}if(i=this.select(i),!u.exists(i)||u.isString(i))return this;try{for(s in i.childElements)i.childElements.hasOwnProperty(s)&&i.childElements[s].board.removeObject(i.childElements[s]);for(s in i.objects)i.objects.hasOwnProperty(s)&&i.objects[s].board.removeObject(i.objects[s]);if(r)for(s in this.objects)this.objects.hasOwnProperty(s)&&u.exists(this.objects[s].childElements)&&u.exists(this.objects[s].childElements.hasOwnProperty(i.id))&&(delete this.objects[s].childElements[i.id],delete this.objects[s].descendants[i.id]);else if(u.exists(i.ancestors))for(s in i.ancestors)i.ancestors.hasOwnProperty(s)&&u.exists(i.ancestors[s].childElements)&&u.exists(i.ancestors[s].childElements.hasOwnProperty(i.id))&&(delete i.ancestors[s].childElements[i.id],delete i.ancestors[s].descendants[i.id]);if(i._pos>-1)for(this.objectsList.splice(i._pos,1),s=i._pos;s<this.objectsList.length;s++)this.objectsList[s]._pos--;else i.type!==e.OBJECT_TYPE_TURTLE&&t.debug("Board.removeObject: object "+i.id+" not found in list.");delete this.objects[i.id],delete this.elementsByName[i.name],i.visProp&&u.evaluate(i.visProp.trace)&&i.clearTrace(),u.exists(i.remove)&&i.remove()}catch(e){t.debug(i.id+": Could not be removed: "+e)}return this.update(),this},removeAncestors:function(t){var e;for(e in t.ancestors)t.ancestors.hasOwnProperty(e)&&this.removeAncestors(t.ancestors[e]);return this.removeObject(t),this},initGeonextBoard:function(){var t,e,i;return t=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),e=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),i=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[t,e],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[t,i],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(t,e,i,r){var s,n,o,a,l,c,h=0,u=0;return r||(s=this.getBoundingBox()),this.canvasWidth=parseFloat(t),this.canvasHeight=parseFloat(e),r||(n=this.attr.boundingbox,h=s[0]-n[0]/this.zoomX,u=s[1]-n[1]/this.zoomY,l=.5*(n[2]+n[0])+h,c=.5*(n[3]+n[1])+u,o=.5*(n[2]-n[0])/this.zoomX,a=.5*(n[1]-n[3])/this.zoomY,n=[l-o,c+a,l+o,c-a]),i||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),r||this.setBoundingBox(n,this.keepaspectratio,"keep"),this},showDependencies:function(){var t,e,i,r,s;for(t in e="<p>\n",this.objects)if(this.objects.hasOwnProperty(t)){for(i in s=0,this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(i)&&(s+=1);for(i in s>=0&&(e+="<strong>"+this.objects[t].id+":</strong> "),this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(i)&&(e+=this.objects[t].childElements[i].id+"("+this.objects[t].childElements[i].name+"), ");e+="<p>\n"}return e+="</p>\n",r=window.open(),r.document.open(),r.document.write(e),r.document.close(),this},showXML:function(){var t=window.open("");return t.document.open(),t.document.write("<pre>"+u.escapeHTML(this.xmlString)+"</pre>"),t.document.close(),this},prepareUpdate:function(){var t,e,i=this.objectsList.length;for(t=0;t<i;t++)e=this.objectsList[t],e.needsUpdate=e.needsRegularUpdate||this.needsFullUpdate;for(t in this.groups)this.groups.hasOwnProperty(t)&&(e=this.groups[t],e.needsUpdate=e.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(t){var i,r;for(t=this.select(t),i=0;i<this.objectsList.length;i++)r=this.objectsList[i],this.needsFullUpdate&&r.elementClass==e.OBJECT_CLASS_TEXT&&r.updateSize(),r.update(!u.exists(t)||r.id!==t.id).updateVisibility();for(i in this.groups)this.groups.hasOwnProperty(i)&&this.groups[i].update(t);return this},updateRenderer:function(){var t,e=this.objectsList.length;if("canvas"===this.renderer.type)this.updateRendererCanvas();else for(t=0;t<e;t++)this.objectsList[t].updateRenderer();return this},updateRendererCanvas:function(){var t,e,i,r,s,n=this.objectsList.length,o=this.options.layer,a=this.options.layer.numlayers,l=Number.NEGATIVE_INFINITY;for(i=0;i<a;i++){for(s in r=Number.POSITIVE_INFINITY,o)o.hasOwnProperty(s)&&o[s]>l&&o[s]<r&&(r=o[s]);for(l=r,t=0;t<n;t++)e=this.objectsList[t],e.visProp.layer===r&&e.prepareUpdate().updateRenderer()}return this},addHook:function(e,i,r){return t.deprecated("Board.addHook()","Board.on()"),i=u.def(i,"update"),r=u.def(r,this),this.hooks.push([i,e]),this.on(i,e,r),this.hooks.length-1},addEvent:t.shortcut(t.Board.prototype,"on"),removeHook:function(e){return t.deprecated("Board.removeHook()","Board.off()"),this.hooks[e]&&(this.off(this.hooks[e][0],this.hooks[e][1]),this.hooks[e]=null),this},removeEvent:t.shortcut(t.Board.prototype,"off"),updateHooks:function(e){var i=Array.prototype.slice.call(arguments,0);return t.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),i[0]=u.def(i[0],"update"),this.triggerEventHandlers([i[0]],arguments),this},addChild:function(t){return u.exists(t)&&u.exists(t.containerObj)&&(this.dependentBoards.push(t),this.update()),this},removeChild:function(t){var e;for(e=this.dependentBoards.length-1;e>=0;e--)this.dependentBoards[e]===t&&this.dependentBoards.splice(e,1);return this},update:function(t){var e,i,r,s,n;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,"all"===this.attr.minimizereflow&&this.containerObj&&"vml"!==this.renderer.type&&(n=document.activeElement,s=this.renderer.removeToInsertLater(this.containerObj)),"svg"===this.attr.minimizereflow&&"svg"===this.renderer.type&&(n=document.activeElement,s=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate().updateElements(t).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),s&&(s(),n.focus()),i=this.dependentBoards.length,e=0;e<i;e++)r=this.dependentBoards[e],u.exists(r)&&r!==this&&(r.updateQuality=this.updateQuality,r.prepareUpdate().updateElements().updateConditions(),r.renderer.suspendRedraw(),r.updateRenderer(),r.renderer.unsuspendRedraw(),r.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var t;for(t=0;t<this.grids.length;t++)this.removeObject(this.grids[t]);return this.grids.length=0,this.update(),this},create:function(e,i,r){var s,n;for(e=e.toLowerCase(),u.exists(i)||(i=[]),u.exists(r)||(r={}),n=0;n<i.length;n++)!u.isString(i[n])||"text"===e&&2===n||!("input"!==e&&"checkbox"!==e&&"button"!==e||2!==n&&3!==n)||"curve"===e&&n>0||(i[n]=this.select(i[n]));if(!u.isFunction(t.elements[e]))throw new Error("JSXGraph: create: Unknown element type given: "+e);return s=t.elements[e](this,i,r),u.exists(s)?(s.prepareUpdate&&s.update&&s.updateRenderer&&s.fullUpdate(),s):(t.debug("JSXGraph: create: failure creating "+e),s)},createElement:function(){return t.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var t;for(t=0;t<this.objectsList.length;t++)this.objectsList[t].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(t,e,i){var r,s,n,o,a=p.getDimensions(this.container,this.document);return u.isArray(t)?(t[0]<this.maxboundingbox[0]||t[1]>this.maxboundingbox[1]||t[2]>this.maxboundingbox[2]||t[3]<this.maxboundingbox[3]||(u.exists(i)||(i="reset"),n=this.unitX,o=this.unitY,this.canvasWidth=parseInt(a.width,10),this.canvasHeight=parseInt(a.height,10),s=this.canvasWidth,r=this.canvasHeight,e?(this.unitX=s/(t[2]-t[0]),this.unitY=r/(t[1]-t[3]),Math.abs(this.unitX)<Math.abs(this.unitY)?this.unitY=Math.abs(this.unitX)*this.unitY/Math.abs(this.unitY):this.unitX=Math.abs(this.unitY)*this.unitX/Math.abs(this.unitX),this.keepaspectratio=!0):(this.unitX=s/(t[2]-t[0]),this.unitY=r/(t[1]-t[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*t[0],this.unitY*t[1]),"update"===i?(this.zoomX*=this.unitX/n,this.zoomY*=this.unitY/o):"reset"===i&&(this.zoomX=u.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=u.exists(this.attr.zoomy)?this.attr.zoomy:1)),this):this},getBoundingBox:function(){var t=new i(e.COORDS_BY_SCREEN,[0,0],this).usrCoords,r=new i(e.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[t[1],t[2],r[1],r[2]]},addAnimation:function(t){var e=this;return this.animationObjects[t.id]=t,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval((function(){e.animate()}),t.board.attr.animationdelay)),this},stopAllAnimation:function(){var t;for(t in this.animationObjects)this.animationObjects.hasOwnProperty(t)&&u.exists(this.animationObjects[t])&&(this.animationObjects[t]=null,delete this.animationObjects[t]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var t,i,r,s,n,o,a,l,c=0,h=null;for(i in this.animationObjects)if(this.animationObjects.hasOwnProperty(i)&&u.exists(this.animationObjects[i])){if(c+=1,r=this.animationObjects[i],r.animationPath&&(s=u.isFunction(r.animationPath)?r.animationPath((new Date).getTime()-r.animationStart):r.animationPath.pop(),!u.exists(s)||!u.isArray(s)&&isNaN(s)?delete r.animationPath:(r.setPositionDirectly(e.COORDS_BY_USER,s),r.fullUpdate(),h=r)),r.animationData){for(n in a=0,r.animationData)r.animationData.hasOwnProperty(n)&&(o=r.animationData[n].pop(),u.exists(o)?(a+=1,t={},t[n]=o,r.setAttribute(t)):delete r.animationData[o]);0===a&&delete r.animationData}u.exists(r.animationData)||u.exists(r.animationPath)||(this.animationObjects[i]=null,delete this.animationObjects[i],u.exists(r.animationCallback)&&(l=r.animationCallback,r.animationCallback=null,l()))}return 0===c?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(h),this},migratePoint:function(t,e,i){var r,s,n,o,a,l,c=!1;for(s in t=this.select(t),e=this.select(e),u.exists(t.label)&&(l=t.label.id,c=!0,this.removeObject(t.label)),t.childElements)if(t.childElements.hasOwnProperty(s)){for(n in r=t.childElements[s],o=!1,r)r.hasOwnProperty(n)&&r[n]===t&&(r[n]=e,o=!0);for(o&&delete t.childElements[s],a=0;a<r.parents.length;a++)r.parents[a]===t.id&&(r.parents[a]=e.id);e.addChild(r)}return i&&(c&&(delete e.childElements[l],delete e.descendants[l]),e.label&&this.removeObject(e.label),delete this.elementsByName[e.name],e.name=t.name,c&&e.createLabel()),this.removeObject(t),u.exists(e.name)&&""!==e.name&&(this.elementsByName[e.name]=e),this.fullUpdate(),this},emulateColorblindness:function(e){var i,r;if(u.exists(e)||(e="none"),this.currentCBDef===e)return this;for(i in this.objects)this.objects.hasOwnProperty(i)&&(r=this.objects[i],"none"!==e?("none"===this.currentCBDef&&(r.visPropOriginal={strokecolor:r.visProp.strokecolor,fillcolor:r.visProp.fillcolor,highlightstrokecolor:r.visProp.highlightstrokecolor,highlightfillcolor:r.visProp.highlightfillcolor}),r.setAttribute({strokecolor:h.rgb2cb(u.evaluate(r.visPropOriginal.strokecolor),e),fillcolor:h.rgb2cb(u.evaluate(r.visPropOriginal.fillcolor),e),highlightstrokecolor:h.rgb2cb(u.evaluate(r.visPropOriginal.highlightstrokecolor),e),highlightfillcolor:h.rgb2cb(u.evaluate(r.visPropOriginal.highlightfillcolor),e)})):u.exists(r.visPropOriginal)&&t.extend(r.visProp,r.visPropOriginal));return this.currentCBDef=e,this.update(),this},select:function(t,e){var i,r,s,n,o=t;if(null===o)return o;if(u.isString(o)&&""!==o)u.exists(this.objects[o])?o=this.objects[o]:u.exists(this.elementsByName[o])?o=this.elementsByName[o]:u.exists(this.groups[o])&&(o=this.groups[o]);else if(!e&&(u.isFunction(o)||u.isObject(o)&&!u.isFunction(o.setAttribute))){for(i=u.filterElements(this.objectsList,o),r={},n=i.length,s=0;s<n;s++)r[i[s].id]=i[s];o=new f(r)}else u.isObject(o)&&u.exists(o.id)&&!u.exists(this.objects[o.id])&&(o=null);return o},hasPoint:function(t,e){var i=t,r=e,s=this.getBoundingBox();return u.exists(t)&&u.isArray(t.usrCoords)&&(i=t.usrCoords[1],r=t.usrCoords[2]),!!(u.isNumber(i)&&u.isNumber(r)&&s[0]<i&&i<s[2]&&s[1]>r&&r>s[3])},updateCSSTransforms:function(){var t=this.containerObj,e=t,i=t;for(this.cssTransMat=p.getCSSTransformMatrix(e),e=e.offsetParent;e;){for(this.cssTransMat=n.matMatMult(p.getCSSTransformMatrix(e),this.cssTransMat),i=i.parentNode;i!==e;)this.cssTransMat=n.matMatMult(p.getCSSTransformMatrix(e),this.cssTransMat),i=i.parentNode;e=e.offsetParent}return this.cssTransMat=n.inverse(this.cssTransMat),this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(t){this.isSelecting=!0,this.selectingBox=[[t[0],t[1]],[t[0],t[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(t){this.isSelecting&&(this.selectingBox[1]=[t[0],t[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(t){var e=this.getMousePosition(t);this.isSelecting=!1,this.selectingBox[1]=[e[0],e[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var e=this.selectingBox[0],i=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(t.COORDS_BY_SCREEN,[e[0],e[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(t.COORDS_BY_SCREEN,[e[0],i[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(t.COORDS_BY_SCREEN,[i[0],i[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(t.COORDS_BY_SCREEN,[i[0],e[1]])},_testForSelection:function(t){this._isRequiredKeyPressed(t,"selection")&&(u.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(t){var e;return u.exists(this.selectionPolygon)||(e=u.copyAttributes(t,r,"board","selection"),!0===e.enabled&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],e))),this},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pendown:function(t){},__evt__pointerdown:function(t){},__evt__touchstart:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__pointerup:function(t){},__evt__touchend:function(t){},__evt__move:function(t,e){},__evt__mousemove:function(t,e){},__evt__penmove:function(t,e){},__evt__pointermove:function(t,e){},__evt__touchmove:function(t,e){},__evt__hit:function(t,e,i){},__evt__mousehit:function(t,e,i){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(t){var e,i,r;return t=t||this.container,this._fullscreen_inner_id=t,r=document.getElementById(t),e="fullscreenwrap_"+t,i=document.createElement("div"),this.document.getElementById(e)||(i.classList.add("JXG_wrap_private"),i.setAttribute("id",e),r.parentNode.insertBefore(i,r),i.appendChild(r)),p.toFullscreen(e,t),this},fullscreenListener:function(t){var e,i,r;if(i=this._fullscreen_inner_id,u.exists(i)){if(r=document.getElementById(i),document.fullscreenElement)r.style.margin="",e=p._getScaleFactors(r),p.scaleJSXGraphDiv(document.fullscreenElement.id,i,e.scale,e.vshift),r._cssFullscreenStore={id:document.fullscreenElement.id,isFullscreen:!0,margin:r.style.margin,scale:e.scale,vshift:e.vshift};else if(u.exists(r._cssFullscreenStore)){try{document.styleSheets[document.styleSheets.length-1].deleteRule(0)}catch(t){console.log("JSXGraph: Could not remove CSS rules for full screen mode")}r._cssFullscreenStore.isFullscreen=!1,r.style.margin=r._cssFullscreenStore.margin}this.updateCSSTransforms()}},createRoulette:function(t,e,i,r,n,o,l){var c=this;return new function(){var h,u=0,d=0,p=0,f=i,m=s.root((function(i){var r=t.X(f),s=t.Y(f),n=e.X(i),o=e.Y(i);return(r-n)*(r-n)+(s-o)*(s-o)}),[0,2*Math.PI]),b=0,v=0,g=c.create("transform",[function(){return u}],{type:"rotate"}),y=c.create("transform",[function(){return u},function(){return t.X(f)},function(){return t.Y(f)}],{type:"rotate"}),_=c.create("transform",[function(){return d},function(){return p}],{type:"translate"}),C=function(t,e,i){var r=s.D(t.X)(e),n=s.D(t.Y)(e),o=s.D(t.X)(i),a=s.D(t.Y)(i),l=s.D(t.X)(.5*(e+i)),c=s.D(t.Y)(.5*(e+i)),h=Math.sqrt(r*r+n*n),u=Math.sqrt(o*o+a*a);return(h+4*Math.sqrt(l*l+c*c)+u)*(i-e)/6},P=function(t){return h-C(e,m,t)},O=Math.PI/18,x=9*O,E=null;return this.rolling=function(){var i,o,E,w,S;b=f+n*r,h=C(t,f,b),v=s.root(P,m),i=new a(t.X(b),t.Y(b)),o=new a(e.X(v),e.Y(v)),E=new a(s.D(t.X)(b),s.D(t.Y)(b)),w=new a(s.D(e.X)(v),s.D(e.Y)(v)),S=a.C.div(E,w),u=Math.atan2(S.imaginary,S.real),S.div(a.C.abs(S)),S.mult(o),d=i.real-S.real,p=i.imaginary-S.imaginary,u<-O&&u>-x?(u=-O,y.applyOnce(l)):u>O&&u<x?(u=O,y.applyOnce(l)):(g.applyOnce(l),_.applyOnce(l),f=b,m=v),c.update()},this.start=function(){return o>0&&(E=window.setInterval(this.rolling,o)),this},this.stop=function(){return window.clearInterval(E),this},this}}}),t.Board})),define("renderer/svg",["jxg","options","renderer/abstract","base/constants","utils/type","utils/color","utils/base64","math/numerics"],(function(t,e,i,r,s,n,o,a){"use strict";return t.SVGRenderer=function(t,i){var r;for(this.type="svg",this.isIE=-1!==navigator.appVersion.indexOf("MSIE")||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(i.width,i.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.filter=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter"),this.filter.setAttributeNS(null,"id",this.container.id+"_f1"),this.filter.setAttributeNS(null,"width","300%"),this.filter.setAttributeNS(null,"height","300%"),this.filter.setAttributeNS(null,"filterUnits","userSpaceOnUse"),this.feOffset=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset"),this.feOffset.setAttributeNS(null,"result","offOut"),this.feOffset.setAttributeNS(null,"in","SourceAlpha"),this.feOffset.setAttributeNS(null,"dx","5"),this.feOffset.setAttributeNS(null,"dy","5"),this.filter.appendChild(this.feOffset),this.feGaussianBlur=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur"),this.feGaussianBlur.setAttributeNS(null,"result","blurOut"),this.feGaussianBlur.setAttributeNS(null,"in","offOut"),this.feGaussianBlur.setAttributeNS(null,"stdDeviation","3"),this.filter.appendChild(this.feGaussianBlur),this.feBlend=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend"),this.feBlend.setAttributeNS(null,"in","SourceGraphic"),this.feBlend.setAttributeNS(null,"in2","blurOut"),this.feBlend.setAttributeNS(null,"mode","normal"),this.filter.appendChild(this.feBlend),this.defs.appendChild(this.filter),this.layer=[],r=0;r<e.layer.numlayers;r++)this.layer[r]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[r]);this.supportsForeignObject=document.implementation.hasFeature("http://w3.org/TR/SVG11/feature#Extensibility","1.1"),this.supportsForeignObject&&(this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.container.id+"_foreignObj"),this.svgRoot.appendChild(this.foreignObjLayer)),this.dashArray=["2, 2","5, 5","10, 10","20, 20","20, 10, 10, 10","20, 5, 10, 5"]},t.SVGRenderer.prototype=new i,t.extend(t.SVGRenderer.prototype,{_createArrowHead:function(t,e,i){var n,o,a,l,c=t.id+"Triangle";return s.exists(e)&&(c+=e),n=this.createPrim("marker",c),n.setAttributeNS(null,"stroke",s.evaluate(t.visProp.strokecolor)),n.setAttributeNS(null,"stroke-opacity",s.evaluate(t.visProp.strokeopacity)),n.setAttributeNS(null,"fill",s.evaluate(t.visProp.strokecolor)),n.setAttributeNS(null,"fill-opacity",s.evaluate(t.visProp.strokeopacity)),n.setAttributeNS(null,"stroke-width",0),n.setAttributeNS(null,"orient","auto"),n.setAttributeNS(null,"markerUnits","strokeWidth"),o=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),l=5,"End"===e?(a=0,2===i?o.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):3===i?o.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):4===i?(l=3.31,o.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):5===i?(l=3.28,o.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):6===i?(l=2.84,o.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):7===i?(l=5.2,o.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):o.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),t.elementClass===r.OBJECT_CLASS_LINE&&(a=2===i?4.9:3===i?3.3:4===i||5===i||6===i?6.66:7===i?0:10)):(a=10,2===i?o.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):3===i?(a=3.3,o.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):4===i?(l=3.31,o.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):5===i?(l=3.28,o.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):6===i?(l=2.84,o.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):7===i?(l=5.2,o.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):o.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),t.elementClass===r.OBJECT_CLASS_LINE&&(a=2===i?5.1:3===i?.02:4===i||5===i||6===i?3.33:7===i?10:.05)),7===i&&(n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"stroke-width",1)),n.setAttributeNS(null,"refY",l),n.setAttributeNS(null,"refX",a),n.appendChild(o),n},_setArrowColor:function(t,e,i,r,n){t&&(s.isString(e)&&(7!==n?this._setAttribute((function(){t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"fill",e),t.setAttributeNS(null,"stroke-opacity",i),t.setAttributeNS(null,"fill-opacity",i)}),r.visPropOld.fillcolor):this._setAttribute((function(){t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"stroke-opacity",i)}),r.visPropOld.fillcolor)),this.isIE&&r.rendNode.parentNode.insertBefore(r.rendNode,r.rendNode))},_setArrowWidth:function(t,e,i,r){var s,n;t&&(s=e,n=s*r,t.setAttributeNS(null,"viewBox","0 0 "+10*s+" "+10*s),t.setAttributeNS(null,"markerHeight",n),t.setAttributeNS(null,"markerWidth",n),t.setAttributeNS(null,"display","inherit"),this.isIE&&i.parentNode.insertBefore(i,i))},updateTicks:function(t){var e,i,r,n,o,a,l,c,h="",u=t.ticks.length,d=!0;for(e=0;e<u;e++){for(r=t.ticks[e],o=r[0],a=r[1],l=o.length,c=" M "+o[0]+" "+a[0],s.isNumber(o[0])||(d=!1),i=1;d&&i<l;++i)s.isNumber(o[i])?c+=" L "+o[i]+" "+a[i]:d=!1;d&&(h+=c)}n=t.rendNode,s.exists(n)||(n=this.createPrim("path",t.id),this.appendChildPrim(n,s.evaluate(t.visProp.layer)),t.rendNode=n),n.setAttributeNS(null,"stroke",s.evaluate(t.visProp.strokecolor)),n.setAttributeNS(null,"fill","none"),n.setAttributeNS(null,"stroke-opacity",s.evaluate(t.visProp.strokeopacity)),n.setAttributeNS(null,"stroke-width",s.evaluate(t.visProp.strokewidth)),this.updatePathPrim(n,h,t.board)},displayCopyright:function(t,e){var i,r=this.createPrim("text","licenseText");r.setAttributeNS(null,"x","20px"),r.setAttributeNS(null,"y",2+e+"px"),r.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+e+"px; fill:#356AA0;  opacity:0.3;"),i=this.container.ownerDocument.createTextNode(t),r.appendChild(i),this.appendChildPrim(r,0)},drawInternalText:function(t){var e=this.createPrim("text",t.id);return e.style.whiteSpace="nowrap",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,s.evaluate(t.visProp.layer)),e},updateInternalText:function(t){var e,i=t.plaintext,r=t.getAnchorX(),n=t.getAnchorY();t.rendNode.getAttributeNS(null,"class")!==t.visProp.cssclass&&(t.rendNode.setAttributeNS(null,"class",s.evaluate(t.visProp.cssclass)),t.needsSizeUpdate=!0),isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(e=t.coords.scrCoords[1],t.visPropOld.left!==r+e&&(t.rendNode.setAttributeNS(null,"x",e+"px"),"left"===r?t.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===r?t.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===r&&t.rendNode.setAttributeNS(null,"text-anchor","middle"),t.visPropOld.left=r+e),e=t.coords.scrCoords[2],t.visPropOld.top!==n+e&&(t.rendNode.setAttributeNS(null,"y",e+.5*this.vOffsetText+"px"),"bottom"===n?t.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):"top"===n?t.rendNode.setAttributeNS(null,"dy","1.6ex"):"middle"===n&&t.rendNode.setAttributeNS(null,"dy","0.6ex"),t.visPropOld.top=n+e)),t.htmlStr!==i&&(t.rendNodeText.data=i,t.htmlStr=i),this.transformImage(t,t.transformations)},updateInternalTextStyle:function(t,e,i,r){this.setObjectFillColor(t,e,i)},drawImage:function(t){var e=this.createPrim("image",t.id);e.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(e,s.evaluate(t.visProp.layer)),t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var i,r,s=t.rendNode,n="";e.length>0&&(r=this.joinTransforms(t,e),i=[r[1][1],r[2][1],r[1][2],r[2][2],r[1][0],r[2][0]].join(","),n+=" matrix("+i+") ",s.setAttributeNS(null,"transform",n))},updateImageURL:function(t){var e=s.evaluate(t.url);return t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",e),t._src=e,!0)},updateImageStyle:function(t,e){var i=s.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass);t.rendNode.setAttributeNS(null,"class",i)},drawForeignObject:function(t){t.rendNode=this.appendChildPrim(this.createPrim("foreignObject",t.id),s.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"foreignObject"),this.updateForeignObject(t)},updateForeignObject:function(t){t._useUserSize?t.rendNode.style.overflow="hidden":t.rendNode.style.overflow="visible",this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),t.rendNode.innerHTML=t.content,this._updateVisual(t,{stroke:!0,dash:!0},!0)},appendChildPrim:function(t,i){return s.exists(i)?i>=e.layer.numlayers&&(i=e.layer.numlayers-1):i=0,this.layer[i].appendChild(t),t},createPrim:function(t,e){var i=this.container.ownerDocument.createElementNS(this.svgNamespace,t);return i.setAttributeNS(null,"id",this.container.id+"_"+e),i.style.position="absolute","path"===t&&(i.setAttributeNS(null,"stroke-linecap","round"),i.setAttributeNS(null,"stroke-linejoin","round"),i.setAttributeNS(null,"fill-rule","evenodd")),i},remove:function(t){s.exists(t)&&s.exists(t.parentNode)&&t.parentNode.removeChild(t)},setLayer:function(t,i){s.exists(i)?i>=e.layer.numlayers&&(i=e.layer.numlayers-1):i=0,this.layer[i].appendChild(t.rendNode)},makeArrows:function(t,e){var i,r=e.evFirst,n=e.evLast;t.visPropOld.firstarrow!==r||t.visPropOld.lastarrow!==n?(r?(i=t.rendNodeTriangleStart,s.exists(i)?this.defs.appendChild(i):(i=this._createArrowHead(t,"End",e.typeFirst),this.defs.appendChild(i),t.rendNodeTriangleStart=i,t.rendNode.setAttributeNS(null,"marker-start","url(#"+this.container.id+"_"+t.id+"TriangleEnd)"))):(i=t.rendNodeTriangleStart,s.exists(i)&&this.remove(i)),n?(i=t.rendNodeTriangleEnd,s.exists(i)?this.defs.appendChild(i):(i=this._createArrowHead(t,"Start",e.typeLast),this.defs.appendChild(i),t.rendNodeTriangleEnd=i,t.rendNode.setAttributeNS(null,"marker-end","url(#"+this.container.id+"_"+t.id+"TriangleStart)"))):(i=t.rendNodeTriangleEnd,s.exists(i)&&this.remove(i)),t.visPropOld.firstarrow=r,t.visPropOld.lastarrow=n):this.isIE&&t.visPropCalc.visible&&(r||n)&&t.rendNode.parentNode.insertBefore(t.rendNode,t.rendNode)},updateEllipsePrim:function(t,e,i,r,s){var n=1e6;n=2e5,e=Math.abs(e)<n?e:n*e/Math.abs(e),i=Math.abs(i)<n?i:n*i/Math.abs(i),r=Math.abs(r)<n?r:n*r/Math.abs(r),s=Math.abs(s)<n?s:n*s/Math.abs(s),t.setAttributeNS(null,"cx",e),t.setAttributeNS(null,"cy",i),t.setAttributeNS(null,"rx",Math.abs(r)),t.setAttributeNS(null,"ry",Math.abs(s))},updateLinePrim:function(t,e,i,r,s){var n=1e6;n=2e5,isNaN(e+i+r+s)||(e=Math.abs(e)<n?e:n*e/Math.abs(e),i=Math.abs(i)<n?i:n*i/Math.abs(i),r=Math.abs(r)<n?r:n*r/Math.abs(r),s=Math.abs(s)<n?s:n*s/Math.abs(s),t.setAttributeNS(null,"x1",e),t.setAttributeNS(null,"y1",i),t.setAttributeNS(null,"x2",r),t.setAttributeNS(null,"y2",s))},updatePathPrim:function(t,e){""===e&&(e="M 0 0"),t.setAttributeNS(null,"d",e)},updatePathStringPoint:function(t,e,i){var r="",s=t.coords.scrCoords,n=e*Math.sqrt(3)*.5,o=.5*e;return"x"===i?r=" M "+(s[1]-e)+" "+(s[2]-e)+" L "+(s[1]+e)+" "+(s[2]+e)+" M "+(s[1]+e)+" "+(s[2]-e)+" L "+(s[1]-e)+" "+(s[2]+e):"+"===i?r=" M "+(s[1]-e)+" "+s[2]+" L "+(s[1]+e)+" "+s[2]+" M "+s[1]+" "+(s[2]-e)+" L "+s[1]+" "+(s[2]+e):"<>"===i?r=" M "+(s[1]-e)+" "+s[2]+" L "+s[1]+" "+(s[2]+e)+" L "+(s[1]+e)+" "+s[2]+" L "+s[1]+" "+(s[2]-e)+" Z ":"^"===i?r=" M "+s[1]+" "+(s[2]-e)+" L "+(s[1]-n)+" "+(s[2]+o)+" L "+(s[1]+n)+" "+(s[2]+o)+" Z ":"v"===i?r=" M "+s[1]+" "+(s[2]+e)+" L "+(s[1]-n)+" "+(s[2]-o)+" L "+(s[1]+n)+" "+(s[2]-o)+" Z ":">"===i?r=" M "+(s[1]+e)+" "+s[2]+" L "+(s[1]-o)+" "+(s[2]-n)+" L "+(s[1]-o)+" "+(s[2]+n)+" Z ":"<"===i&&(r=" M "+(s[1]-e)+" "+s[2]+" L "+(s[1]+o)+" "+(s[2]-n)+" L "+(s[1]+o)+" "+(s[2]+n)+" Z "),r},updatePathStringPrim:function(t){var e,i,r,s=" M ",n="";if(t.numberPoints<=0)return"";if(r=Math.min(t.points.length,t.numberPoints),1===t.bezierDegree)for(e=0;e<r;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?s=" M ":(i[1]=Math.max(Math.min(i[1],5e3),-5e3),i[2]=Math.max(Math.min(i[2],5e3),-5e3),n+=s+i[1]+" "+i[2],s=" L ");else if(3===t.bezierDegree)for(e=0;e<r;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?s=" M ":(n+=s+i[1]+" "+i[2]," C "===s&&(e+=1,i=t.points[e].scrCoords,n+=" "+i[1]+" "+i[2],e+=1,i=t.points[e].scrCoords,n+=" "+i[1]+" "+i[2]),s=" C "),e+=1;return n},updatePathStringBezierPrim:function(t){var e,i,r,n,o,l,c,h=" M ",u="",d=s.evaluate(t.visProp.strokewidth),p="plot"!==s.evaluate(t.visProp.curvetype);if(t.numberPoints<=0)return"";for(p&&t.board.options.curve.RDPsmoothing&&(t.points=a.RamerDouglasPeucker(t.points,.5)),c=Math.min(t.points.length,t.numberPoints),i=1;i<3;i++)for(h=" M ",e=0;e<c;e++)n=t.points[e].scrCoords,isNaN(n[1])||isNaN(n[2])?h=" M ":(n[1]=Math.max(Math.min(n[1],5e3),-5e3),n[2]=Math.max(Math.min(n[2],5e3),-5e3)," M "===h?u+=h+n[1]+" "+n[2]:(r=2*i,u+=[h,o+.333*(n[1]-o)+d*(r*Math.random()-i)," ",l+.333*(n[2]-l)+d*(r*Math.random()-i)," ",o+.666*(n[1]-o)+d*(r*Math.random()-i)," ",l+.666*(n[2]-l)+d*(r*Math.random()-i)," ",n[1]," ",n[2]].join("")),h=" C ",o=n[1],l=n[2]);return u},updatePolygonPrim:function(t,e){var i,r,s="",n=e.vertices.length;for(t.setAttributeNS(null,"stroke","none"),"polygonalchain"===e.elType&&n++,i=0;i<n-1;i++){if(!e.vertices[i].isReal)return void t.setAttributeNS(null,"points","");r=e.vertices[i].coords.scrCoords,s=s+r[1]+","+r[2],i<n-2&&(s+=" ")}-1===s.indexOf("NaN")&&t.setAttributeNS(null,"points",s)},updateRectPrim:function(t,e,i,r,s){t.setAttributeNS(null,"x",e),t.setAttributeNS(null,"y",i),t.setAttributeNS(null,"width",r),t.setAttributeNS(null,"height",s)},setPropertyPrim:function(t,e,i){"stroked"!==e&&t.setAttributeNS(null,e,i)},display:function(t,e){var i;t&&t.rendNode&&(t.visPropOld.visible=e,i=t.rendNode,e?(i.setAttributeNS(null,"display","inline"),i.style.visibility="inherit"):(i.setAttributeNS(null,"display","none"),i.style.visibility="hidden"))},show:function(e){t.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(e,!0)},hide:function(e){t.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(e,!1)},setBuffering:function(t,e){t.rendNode.setAttribute("buffered-rendering",e)},setDashStyle:function(t){var e=s.evaluate(t.visProp.dash),i=t.rendNode;e>0?i.setAttributeNS(null,"stroke-dasharray",this.dashArray[e-1]):i.hasAttributeNS(null,"stroke-dasharray")&&i.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(t){var e,i,r,n=t.rendNode,o=s.evaluate(t.visProp.gradient);"linear"===o||"radial"===o?(e=this.createPrim(o+"Gradient",t.id+"_gradient"),i=this.createPrim("stop",t.id+"_gradient1"),r=this.createPrim("stop",t.id+"_gradient2"),e.appendChild(i),e.appendChild(r),this.defs.appendChild(e),n.setAttributeNS(null,"style","fill:url(#"+this.container.id+"_"+t.id+"_gradient)"),t.gradNode1=i,t.gradNode2=r,t.gradNode=e):n.removeAttributeNS(null,"style")},updateGradientAngle:function(t,e){var i=1,r=Math.cos(e),s=Math.sin(e);Math.abs(r)>Math.abs(s)?i/=Math.abs(r):i/=Math.abs(s),r>=0?(t.setAttributeNS(null,"x1",0),t.setAttributeNS(null,"x2",r*i)):(t.setAttributeNS(null,"x1",-r*i),t.setAttributeNS(null,"x2",0)),s>=0?(t.setAttributeNS(null,"y1",0),t.setAttributeNS(null,"y2",s*i)):(t.setAttributeNS(null,"y1",-s*i),t.setAttributeNS(null,"y2",0))},updateGradientCircle:function(t,e,i,r,s,n,o){t.setAttributeNS(null,"cx",100*e+"%"),t.setAttributeNS(null,"cy",100*i+"%"),t.setAttributeNS(null,"r",100*r+"%"),t.setAttributeNS(null,"fx",100*s+"%"),t.setAttributeNS(null,"fy",100*n+"%"),t.setAttributeNS(null,"fr",100*o+"%")},updateGradient:function(t){var e,i,r=t.gradNode1,n=t.gradNode2,o=s.evaluate(t.visProp.gradient);s.exists(r)&&s.exists(n)&&(i=s.evaluate(t.visProp.fillopacity),i=i>0?i:0,e=s.evaluate(t.visProp.fillcolor),r.setAttributeNS(null,"style","stop-color:"+e+";stop-opacity:"+i),n.setAttributeNS(null,"style","stop-color:"+s.evaluate(t.visProp.gradientsecondcolor)+";stop-opacity:"+s.evaluate(t.visProp.gradientsecondopacity)),r.setAttributeNS(null,"offset",100*s.evaluate(t.visProp.gradientstartoffset)+"%"),n.setAttributeNS(null,"offset",100*s.evaluate(t.visProp.gradientendoffset)+"%"),"linear"===o?this.updateGradientAngle(t.gradNode,s.evaluate(t.visProp.gradientangle)):"radial"===o&&this.updateGradientCircle(t.gradNode,s.evaluate(t.visProp.gradientcx),s.evaluate(t.visProp.gradientcy),s.evaluate(t.visProp.gradientr),s.evaluate(t.visProp.gradientfx),s.evaluate(t.visProp.gradientfy),s.evaluate(t.visProp.gradientfr)))},setObjectTransition:function(t,e){var i,n,o,a,l=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(void 0===e&&(e=s.evaluate(t.visProp.transitionduration)),e!==t.visPropOld.transitionduration){for(n=t.elementClass===r.OBJECT_CLASS_TEXT&&"html"===s.evaluate(t.visProp.display)?" color "+e+"ms, opacity "+e+"ms":" fill "+e+"ms, fill-opacity "+e+"ms, stroke "+e+"ms, stroke-opacity "+e+"ms",a=l.length,o=0;o<a;++o)t[l[o]]&&(i=t[l[o]],i.style.transition=n);t.visPropOld.transitionduration=e}},_setAttribute:function(t,e){""===e?t():window.setTimeout(t,1)},setObjectFillColor:function(e,i,r,o){var a,l,c,h,u=s.evaluate(i),d=s.evaluate(r),p=s.evaluate(e.visProp.gradient);d=d>0?d:0,e.visPropOld.fillcolor===u&&e.visPropOld.fillopacity===d&&null===p||(s.exists(u)&&!1!==u&&(9!==u.length?(l=u,h=d):(c=n.rgba2rgbo(u),l=c[0],h=d*c[1]),a=void 0===o?e.rendNode:o,"none"!==l&&this._setAttribute((function(){a.setAttributeNS(null,"fill",l)}),e.visPropOld.fillcolor),e.type===t.OBJECT_TYPE_IMAGE?this._setAttribute((function(){a.setAttributeNS(null,"opacity",h)}),e.visPropOld.fillopacity):("none"===l?(h=0,a.setAttributeNS(null,"pointer-events","visibleStroke")):a.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute((function(){a.setAttributeNS(null,"fill-opacity",h)}),e.visPropOld.fillopacity)),"linear"!==p&&"radial"!==p||this.updateGradient(e)),e.visPropOld.fillcolor=u,e.visPropOld.fillopacity=d)},setObjectStrokeColor:function(t,e,i){var o,a,l,c,h=s.evaluate(e),u=s.evaluate(i);u=u>0?u:0,t.visPropOld.strokecolor===h&&t.visPropOld.strokeopacity===u||(s.exists(h)&&!1!==h&&(9!==h.length?(o=h,l=u):(a=n.rgba2rgbo(h),o=a[0],l=u*a[1]),c=t.rendNode,t.elementClass===r.OBJECT_CLASS_TEXT?"html"===s.evaluate(t.visProp.display)?this._setAttribute((function(){c.style.color=o,c.style.opacity=l}),t.visPropOld.strokecolor):this._setAttribute((function(){c.setAttributeNS(null,"style","fill:"+o),c.setAttributeNS(null,"style","fill-opacity:"+l)}),t.visPropOld.strokecolor):this._setAttribute((function(){c.setAttributeNS(null,"stroke",o),c.setAttributeNS(null,"stroke-opacity",l)}),t.visPropOld.strokecolor),t.elementClass!==r.OBJECT_CLASS_CURVE&&t.elementClass!==r.OBJECT_CLASS_LINE||(s.evaluate(t.visProp.firstarrow)&&this._setArrowColor(t.rendNodeTriangleStart,o,l,t,t.visPropCalc.typeFirst),s.evaluate(t.visProp.lastarrow)&&this._setArrowColor(t.rendNodeTriangleEnd,o,l,t,t.visPropCalc.typeLast))),t.visPropOld.strokecolor=h,t.visPropOld.strokeopacity=u)},setObjectStrokeWidth:function(t,e){var i,r=s.evaluate(e);isNaN(r)||t.visPropOld.strokewidth===r||(i=t.rendNode,this.setPropertyPrim(i,"stroked","true"),s.exists(r)&&this.setPropertyPrim(i,"stroke-width",r+"px"),t.visPropOld.strokewidth=r)},setLineCap:function(t){var e=s.evaluate(t.visProp.linecap);void 0!==e&&""!==e&&t.visPropOld.linecap!==e&&s.exists(t.rendNode)&&(this.setPropertyPrim(t.rendNode,"stroke-linecap",e),t.visPropOld.linecap=e)},setShadow:function(t){var e=s.evaluate(t.visProp.shadow);t.visPropOld.shadow!==e&&(s.exists(t.rendNode)&&(e?t.rendNode.setAttributeNS(null,"filter","url(#"+this.container.id+"_f1)"):t.rendNode.removeAttributeNS(null,"filter")),t.visPropOld.shadow=e)},suspendRedraw:function(){},unsuspendRedraw:function(){},resize:function(t,e){this.svgRoot.setAttribute("width",parseFloat(t)),this.svgRoot.setAttribute("height",parseFloat(e))},createTouchpoints:function(t){var e,i,r,s;for(this.touchpoints=[],e=0;e<t;e++)i="touchpoint1_"+e,s=this.createPrim("path",i),this.appendChildPrim(s,19),s.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(s),this.setPropertyPrim(s,"stroked","true"),this.setPropertyPrim(s,"stroke-width","1px"),s.setAttributeNS(null,"stroke","#000000"),s.setAttributeNS(null,"stroke-opacity",1),s.setAttributeNS(null,"display","none"),r="touchpoint2_"+e,s=this.createPrim("ellipse",r),this.appendChildPrim(s,19),this.updateEllipsePrim(s,0,0,0,0),this.touchpoints.push(s),this.setPropertyPrim(s,"stroked","true"),this.setPropertyPrim(s,"stroke-width","1px"),s.setAttributeNS(null,"stroke","#000000"),s.setAttributeNS(null,"stroke-opacity",1),s.setAttributeNS(null,"fill","#ffffff"),s.setAttributeNS(null,"fill-opacity",0),s.setAttributeNS(null,"display","none")},showTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","inline"),this.touchpoints[2*t+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","none"),this.touchpoints[2*t+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(t,e){var i,r;this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(i=e[0],r=e[1],this.touchpoints[2*t].setAttributeNS(null,"d","M "+(i-37)+" "+r+" L "+(i+37)+" "+r+" M "+i+" "+(r-37)+" L "+i+" "+(r+37)),this.updateEllipsePrim(this.touchpoints[2*t+1],e[0],e[1],25,25))},_getValuesOfDOMElements:function(t){var e=[];if(1===t.nodeType)for(t=t.firstChild;t;)void 0!==t.id&&void 0!==t.value&&e.push([t.id,t.value]),e=e.concat(this._getValuesOfDOMElements(t)),t=t.nextSibling;return e},_getDataUri:function(t,e){var i=new Image;i.onload=function(){var t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(this,0,0),e(t.toDataURL("image/png")),t.remove()},i.src=t},_getImgDataURL:function(t){var e,i,r,s,n,o;if(e=t.getElementsByTagName("image"),(i=e.length)>0)for(r=document.createElement("canvas"),o=0;o<i;o++){e[o].setAttribute("crossorigin","anonymous"),s=r.getContext("2d"),r.width=e[o].getAttribute("width"),r.height=e[o].getAttribute("height");try{s.drawImage(e[o],0,0,r.width,r.height),n=r.toDataURL(),e[o].setAttribute("xlink:href",n)}catch(t){console.log("CORS problem! Image can not be used",t)}}return!0},dumpToDataURI:function(t){var e,i,r,n=this.svgRoot,a=window.btoa||o.encode,l=[];if(this.container.hasChildNodes()&&s.exists(this.foreignObjLayer))for(t||this.foreignObjLayer.setAttribute("display","inline");n.nextSibling;)l=l.concat(this._getValuesOfDOMElements(n.nextSibling)),this.foreignObjLayer.appendChild(n.nextSibling);if(this._getImgDataURL(n),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),e=(new XMLSerializer).serializeToString(n),!0!==t)for(r=l.length,i=0;i<r;i++)e=e.replace('id="'+l[i][0]+'"','id="'+l[i][0]+'" value="'+l[i][1]+'"');if((e.match(/xmlns=\"http:\/\/www.w3.org\/2000\/svg\"/g)||[]).length>1&&(e=e.replace(/xmlns=\"http:\/\/www.w3.org\/2000\/svg\"/g,"")),e=e.replace(/&nbsp;/g," "),s.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+a(unescape(encodeURIComponent(e)))},dumpToCanvas:function(t,e,i,r){var s,n,o,a;return o=document.getElementById(t),o.width=o.width,a=o.getContext("2d"),void 0!==e&&void 0!==i&&(o.style.width=parseFloat(e)+"px",o.style.height=parseFloat(i)+"px",o.setAttribute("width",parseFloat(e)),o.setAttribute("height",parseFloat(i))),n=new Image,s=this.dumpToDataURI(r),n.src=s,"Promise"in window?new Promise((function(t,r){try{n.onload=function(){a.drawImage(n,0,0,e,i),t()}}catch(t){r(t)}})):(n.onload=function(){window.setTimeout((function(){try{a.drawImage(n,0,0,e,i)}catch(t){console.log("screenshots not longer supported on IE")}}),200)},this)},screenshot:function(t,e,i){var r,n,o,a,l,c,h,u,d,p,f,m=this.container.ownerDocument,b=this.container.parentNode,v=t.attr.screenshot,g=!1;return"no"===this.type||(h=v.scale*parseFloat(this.container.style.width),u=v.scale*parseFloat(this.container.style.height),void 0===e||""===e?(g=!0,a=new Image,a.style.width=h+"px",a.style.height=u+"px"):(g=!1,a=m.getElementById(e)),g&&(r=m.createElement("div"),r.style.cssText=v.css,r.style.width=h+"px",r.style.height=u+"px",r.style.zIndex=this.container.style.zIndex+120,r.style.position="absolute",r.style.top=this.container.offsetTop+"px",r.style.left=this.container.offsetLeft+"px"),n=m.createElement("canvas"),o=Math.random().toString(36).substr(2,5),n.setAttribute("id",o),n.setAttribute("width",h),n.setAttribute("height",u),n.style.width=h+"px",n.style.height=h+"px",n.style.display="none",b.appendChild(n),g&&(l=m.createElement("span"),c=m.createTextNode("✖"),l.style.cssText=v.cssButton,l.appendChild(c),l.onclick=function(){r.parentNode.removeChild(r)},r.appendChild(a),r.appendChild(l),b.insertBefore(r,this.container.nextSibling)),d=document.getElementById(this.container.id+"_navigationbar"),s.exists(d)&&(p=d.style.display,d.style.display="none"),f=function(){a.src=n.toDataURL("image/png"),b.removeChild(n)},"Promise"in window?this.dumpToCanvas(o,h,u,i).then(f):(this.dumpToCanvas(o,h,u,i),window.setTimeout(f,200)),s.exists(d)&&(d.style.display=p)),this}}),t.SVGRenderer})),define("renderer/vml",["jxg","renderer/abstract","base/constants","utils/type","utils/color","math/math","math/numerics"],(function(t,e,i,r,s,n,o){"use strict";return t.VMLRenderer=function(e){this.type="vml",this.container=e,this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,r.exists(t.vmlStylesheet)||(e.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),t.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),t.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{e.ownerDocument.namespaces.jxgvml||e.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(t){return e.ownerDocument.createElement("<jxgvml:"+t+' class="jxgvml">')}}catch(t){this.createNode=function(t){return e.ownerDocument.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},t.VMLRenderer.prototype=new e,t.extend(t.VMLRenderer.prototype,{_setAttr:function(e,i,r,s){try{8===this.container.ownerDocument.documentMode?e[i]=r:e.setAttribute(i,r,s)}catch(e){t.debug("_setAttr: "+i+" "+r+"<br>\n")}},updateTicks:function(t){var e,i,s,n,o,a=this.resolution,l=[];for(i=t.ticks.length,e=0;e<i;e++)s=t.ticks[e],n=s[0],o=s[1],r.isNumber(n[0])&&r.isNumber(n[1])&&l.push(" m "+Math.round(a*n[0])+", "+Math.round(a*o[0])+" l "+Math.round(a*n[1])+", "+Math.round(a*o[1])+" ");r.exists(t.rendNode)||(t.rendNode=this.createPrim("path",t.id),this.appendChildPrim(t.rendNode,r.evaluate(t.visProp.layer))),this._setAttr(t.rendNode,"stroked","true"),this._setAttr(t.rendNode,"strokecolor",r.evaluate(t.visProp.strokecolor),1),this._setAttr(t.rendNode,"strokeweight",r.evaluate(t.visProp.strokewidth)),this._setAttr(t.rendNodeStroke,"opacity",100*r.evaluate(t.visProp.strokeopacity)+"%"),this.updatePathPrim(t.rendNode,l,t.board)},displayCopyright:function(t,e){var i,r;i=this.createNode("textbox"),i.style.position="absolute",this._setAttr(i,"id",this.container.id+"_licenseText"),i.style.left=20,i.style.top=2,i.style.fontSize=e,i.style.color="#356AA0",i.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(i,"opacity","30%"),i.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",r=this.container.ownerDocument.createTextNode(t),i.appendChild(r),this.appendChildPrim(i,0)},drawInternalText:function(t){var e;return e=this.createNode("textbox"),e.style.position="absolute",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,9),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",e},updateInternalText:function(t){var e,i,r,s,o,a,l=t.plaintext,c=this.joinTransforms(t,t.transformations),h=[0,0],u=t.rendNode,d=[],p=t.getAnchorX(),f=t.getAnchorY();if(!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])){for("right"===p?h[0]=1:"middle"===p&&(h[0]=.5),"bottom"===f?h[1]=1:"middle"===f&&(h[1]=.5),d[0]=n.matVecMult(c,[1,t.coords.scrCoords[1]-h[0]*t.size[0],t.coords.scrCoords[2]+(1-h[1])*t.size[1]+this.vOffsetText]),d[0][1]/=d[0][0],d[0][2]/=d[0][0],d[1]=n.matVecMult(c,[1,t.coords.scrCoords[1]+(1-h[0])*t.size[0],t.coords.scrCoords[2]+(1-h[1])*t.size[1]+this.vOffsetText]),d[1][1]/=d[1][0],d[1][2]/=d[1][0],d[2]=n.matVecMult(c,[1,t.coords.scrCoords[1]+(1-h[0])*t.size[0],t.coords.scrCoords[2]-h[1]*t.size[1]+this.vOffsetText]),d[2][1]/=d[2][0],d[2][2]/=d[2][0],d[3]=n.matVecMult(c,[1,t.coords.scrCoords[1]-h[0]*t.size[0],t.coords.scrCoords[2]-h[1]*t.size[1]+this.vOffsetText]),d[3][1]/=d[3][0],d[3][2]/=d[3][0],i=d[0][1],s=d[0][1],r=d[0][2],o=d[0][2],a=1;a<4;a++)i=Math.max(i,d[a][1]),s=Math.min(s,d[a][1]),r=Math.max(r,d[a][2]),o=Math.min(o,d[a][2]);e=1===h[0]?Math.floor(t.board.canvasWidth-i):Math.floor(s),t.visPropOld.left!==p+e&&(1===h[0]?(t.rendNode.style.right=e+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=e+"px",t.rendNode.style.right="auto"),t.visPropOld.left=p+e),e=1===h[1]?Math.floor(t.board.canvasHeight-r):Math.floor(o),t.visPropOld.top!==f+e&&(1===h[1]?(t.rendNode.style.bottom=e+"px",t.rendNode.style.top="auto"):(t.rendNode.style.top=e+"px",t.rendNode.style.bottom="auto"),t.visPropOld.top=f+e)}t.htmlStr!==l&&(t.rendNodeText.data=l,t.htmlStr=l),u.filters.item(0).M11=c[1][1],u.filters.item(0).M12=c[1][2],u.filters.item(0).M21=c[2][1],u.filters.item(0).M22=c[2][2],u.filters.item(0).enabled=!0},drawImage:function(t){var e;e=this.container.ownerDocument.createElement("img"),e.style.position="absolute",this._setAttr(e,"id",this.container.id+"_"+t.id),this.container.appendChild(e),this.appendChildPrim(e,r.evaluate(t.visProp.layer)),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var i,r,s,o,a,l,c=t.rendNode,h=[];if(e.length>0){for(i=this.joinTransforms(t,e),h[0]=n.matVecMult(i,t.coords.scrCoords),h[0][1]/=h[0][0],h[0][2]/=h[0][0],h[1]=n.matVecMult(i,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]]),h[1][1]/=h[1][0],h[1][2]/=h[1][0],h[2]=n.matVecMult(i,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]-t.size[1]]),h[2][1]/=h[2][0],h[2][2]/=h[2][0],h[3]=n.matVecMult(i,[1,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1]]),h[3][1]/=h[3][0],h[3][2]/=h[3][0],r=h[0][1],o=h[0][1],s=h[0][2],a=h[0][2],l=1;l<4;l++)r=Math.max(r,h[l][1]),o=Math.min(o,h[l][1]),s=Math.max(s,h[l][2]),a=Math.min(a,h[l][2]);c.style.left=Math.floor(o)+"px",c.style.top=Math.floor(a)+"px",c.filters.item(0).M11=i[1][1],c.filters.item(0).M12=i[1][2],c.filters.item(0).M21=i[2][1],c.filters.item(0).M22=i[2][2],c.filters.item(0).enabled=!0}},updateImageURL:function(t){var e=r.evaluate(t.url);this._setAttr(t.rendNode,"src",e)},appendChildPrim:function(t,e){return r.exists(e)||(e=0),t.style.zIndex=e,this.container.appendChild(t),t},appendNodesToElement:function(t,e){"shape"!==e&&"path"!==e&&"polygon"!==e||(t.rendNodePath=this.getElementById(t.id+"_path")),t.rendNodeFill=this.getElementById(t.id+"_fill"),t.rendNodeStroke=this.getElementById(t.id+"_stroke"),t.rendNodeShadow=this.getElementById(t.id+"_shadow"),t.rendNode=this.getElementById(t.id)},createPrim:function(t,e){var i,r,s=this.createNode("fill"),n=this.createNode("stroke"),o=this.createNode("shadow");return this._setAttr(s,"id",this.container.id+"_"+e+"_fill"),this._setAttr(n,"id",this.container.id+"_"+e+"_stroke"),this._setAttr(o,"id",this.container.id+"_"+e+"_shadow"),"circle"===t||"ellipse"===t?(i=this.createNode("oval"),i.appendChild(s),i.appendChild(n),i.appendChild(o)):"polygon"===t||"path"===t||"shape"===t||"line"===t?(i=this.createNode("shape"),i.appendChild(s),i.appendChild(n),i.appendChild(o),r=this.createNode("path"),this._setAttr(r,"id",this.container.id+"_"+e+"_path"),i.appendChild(r)):(i=this.createNode(t),i.appendChild(s),i.appendChild(n),i.appendChild(o)),i.style.position="absolute",i.style.left="0px",i.style.top="0px",this._setAttr(i,"id",this.container.id+"_"+e),i},remove:function(t){r.exists(t)&&t.removeNode(!0)},makeArrows:function(t){var e,i=r.evaluate(t.visProp.firstarrow),s=r.evaluate(t.visProp.lastarrow);t.visPropOld.firstarrow===i&&t.visPropOld.lastarrow===s||(i?(e=t.rendNodeStroke,this._setAttr(e,"startarrow","block"),this._setAttr(e,"startarrowlength","long")):(e=t.rendNodeStroke,r.exists(e)&&this._setAttr(e,"startarrow","none")),s?(e=t.rendNodeStroke,this._setAttr(e,"id",this.container.id+"_"+t.id+"stroke"),this._setAttr(e,"endarrow","block"),this._setAttr(e,"endarrowlength","long")):(e=t.rendNodeStroke,r.exists(e)&&this._setAttr(e,"endarrow","none")),t.visPropOld.firstarrow=i,t.visPropOld.lastarrow=s)},updateEllipsePrim:function(t,e,i,r,s){t.style.left=Math.floor(e-r)+"px",t.style.top=Math.floor(i-s)+"px",t.style.width=Math.floor(2*Math.abs(r))+"px",t.style.height=Math.floor(2*Math.abs(s))+"px"},updateLinePrim:function(t,e,i,r,s,n){var o,a=this.resolution;isNaN(e+i+r+s)||(o=["m ",Math.floor(a*e),", ",Math.floor(a*i)," l ",Math.floor(a*r),", ",Math.floor(a*s)],this.updatePathPrim(t,o,n))},updatePathPrim:function(t,e,i){var r=i.canvasWidth,s=i.canvasHeight;e.length<=0&&(e=["m 0,0"]),t.style.width=r,t.style.height=s,this._setAttr(t,"coordsize",[Math.floor(this.resolution*r),Math.floor(this.resolution*s)].join(",")),this._setAttr(t,"path",e.join(""))},updatePathStringPoint:function(t,e,i){var r=[],s=Math.round,n=t.coords.scrCoords,o=e*Math.sqrt(3)*.5,a=.5*e,l=this.resolution;return"x"===i?r.push([" m ",s(l*(n[1]-e)),", ",s(l*(n[2]-e))," l ",s(l*(n[1]+e)),", ",s(l*(n[2]+e))," m ",s(l*(n[1]+e)),", ",s(l*(n[2]-e))," l ",s(l*(n[1]-e)),", ",s(l*(n[2]+e))].join("")):"+"===i?r.push([" m ",s(l*(n[1]-e)),", ",s(l*n[2])," l ",s(l*(n[1]+e)),", ",s(l*n[2])," m ",s(l*n[1]),", ",s(l*(n[2]-e))," l ",s(l*n[1]),", ",s(l*(n[2]+e))].join("")):"<>"===i?r.push([" m ",s(l*(n[1]-e)),", ",s(l*n[2])," l ",s(l*n[1]),", ",s(l*(n[2]+e))," l ",s(l*(n[1]+e)),", ",s(l*n[2])," l ",s(l*n[1]),", ",s(l*(n[2]-e))," x e "].join("")):"^"===i?r.push([" m ",s(l*n[1]),", ",s(l*(n[2]-e))," l ",s(l*(n[1]-o)),", ",s(l*(n[2]+a))," l ",s(l*(n[1]+o)),", ",s(l*(n[2]+a))," x e "].join("")):"v"===i?r.push([" m ",s(l*n[1]),", ",s(l*(n[2]+e))," l ",s(l*(n[1]-o)),", ",s(l*(n[2]-a))," l ",s(l*(n[1]+o)),", ",s(l*(n[2]-a))," x e "].join("")):">"===i?r.push([" m ",s(l*(n[1]+e)),", ",s(l*n[2])," l ",s(l*(n[1]-a)),", ",s(l*(n[2]-o))," l ",s(l*(n[1]-a)),", ",s(l*(n[2]+o))," l ",s(l*(n[1]+e)),", ",s(l*n[2])].join("")):"<"===i&&r.push([" m ",s(l*(n[1]-e)),", ",s(l*n[2])," l ",s(l*(n[1]+a)),", ",s(l*(n[2]-o))," l ",s(l*(n[1]+a)),", ",s(l*(n[2]+o))," x e "].join("")),r},updatePathStringPrim:function(t){var e,i,r=[],s=this.resolution,n=Math.round,o=" m ",a=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";if(a=Math.min(a,t.points.length),1===t.bezierDegree)for(e=0;e<a;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?o=" m ":(i[1]>2e4?i[1]=2e4:i[1]<-2e4&&(i[1]=-2e4),i[2]>2e4?i[2]=2e4:i[2]<-2e4&&(i[2]=-2e4),r.push([o,n(s*i[1]),", ",n(s*i[2])].join("")),o=" l ");else if(3===t.bezierDegree)for(e=0;e<a;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?o=" m ":(r.push([o,n(s*i[1]),", ",n(s*i[2])].join(""))," c "===o&&(e+=1,i=t.points[e].scrCoords,r.push([" ",n(s*i[1]),", ",n(s*i[2])].join("")),e+=1,i=t.points[e].scrCoords,r.push([" ",n(s*i[1]),", ",n(s*i[2])].join(""))),o=" c "),e+=1;return r.push(" e"),r},updatePathStringBezierPrim:function(t){var e,i,s,n,a,l,c=[],h=r.evaluate(t.visProp.strokewidth),u=this.resolution,d=Math.round,p=" m ",f="plot"!==r.evaluate(t.visProp.curvetype),m=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";for(f&&t.board.options.curve.RDPsmoothing&&(t.points=o.RamerDouglasPeucker(t.points,1)),m=Math.min(m,t.points.length),i=1;i<3;i++)for(p=" m ",e=0;e<m;e++)n=t.points[e].scrCoords,isNaN(n[1])||isNaN(n[2])?p=" m ":(n[1]>2e4?n[1]=2e4:n[1]<-2e4&&(n[1]=-2e4),n[2]>2e4?n[2]=2e4:n[2]<-2e4&&(n[2]=-2e4)," m "===p?c.push([p,d(u*n[1])," ",d(u*n[2])].join("")):(s=2*i,c.push([p,d(u*(a+.333*(n[1]-a)+h*(s*Math.random()-i)))," ",d(u*(l+.333*(n[2]-l)+h*(s*Math.random()-i)))," ",d(u*(a+.666*(n[1]-a)+h*(s*Math.random()-i)))," ",d(u*(l+.666*(n[2]-l)+h*(s*Math.random()-i)))," ",d(u*n[1])," ",d(u*n[2])].join(""))),p=" c ",a=n[1],l=n[2]);return c.push(" e"),c},updatePolygonPrim:function(t,e){var i,r,s=e.vertices.length,n=this.resolution,o=[];if(this._setAttr(t,"stroked","false"),r=e.vertices[0].coords.scrCoords,!isNaN(r[1]+r[2])){for(o.push(["m ",Math.floor(n*r[1]),",",Math.floor(n*r[2])," l "].join("")),i=1;i<s-1;i++){if(!e.vertices[i].isReal)return void this.updatePathPrim(t,"",e.board);if(r=e.vertices[i].coords.scrCoords,isNaN(r[1]+r[2]))return;o.push(Math.floor(n*r[1])+","+Math.floor(n*r[2])),i<s-2&&o.push(", ")}o.push(" x e"),this.updatePathPrim(t,o,e.board)}},updateRectPrim:function(t,e,i,r,s){t.style.left=Math.floor(e)+"px",t.style.top=Math.floor(i)+"px",r>=0&&(t.style.width=r+"px"),s>=0&&(t.style.height=s+"px")},setPropertyPrim:function(t,e,i){var s,n="";switch(e){case"stroke":n="strokecolor";break;case"stroke-width":n="strokeweight";break;case"stroke-dasharray":n="dashstyle"}""!==n&&(s=r.evaluate(i),this._setAttr(t,n,s))},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,t.rendNode.style.visibility=e?"inherit":"hidden")},show:function(e){t.deprecated("Board.renderer.show()","Board.renderer.display()"),e&&e.rendNode&&(e.rendNode.style.visibility="inherit")},hide:function(e){t.deprecated("Board.renderer.hide()","Board.renderer.display()"),e&&e.rendNode&&(e.rendNode.style.visibility="hidden")},setDashStyle:function(t,e){var i;e.dash>=0&&(i=t.rendNodeStroke,this._setAttr(i,"dashstyle",this.dashArray[e.dash]))},setGradient:function(t){var e=t.rendNodeFill,i=r.evaluate(t.visProp.gradient);"linear"===i?(this._setAttr(e,"type","gradient"),this._setAttr(e,"color2",r.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",r.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"angle",r.evaluate(t.visProp.gradientangle))):"radial"===i?(this._setAttr(e,"type","gradientradial"),this._setAttr(e,"color2",r.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",r.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"focusposition",100*r.evaluate(t.visProp.gradientpositionx)+"%,"+100*r.evaluate(t.visProp.gradientpositiony)+"%"),this._setAttr(e,"focussize","0,0")):this._setAttr(e,"type","solid")},setObjectFillColor:function(t,e,n){var o,a,l,c=r.evaluate(e),h=r.evaluate(n),u=t.rendNode;h=h>0?h:0,t.visPropOld.fillcolor===c&&t.visPropOld.fillopacity===h||(r.exists(c)&&!1!==c&&(9!==c.length?(o=c,l=h):(a=s.rgba2rgbo(c),o=a[0],l=h*a[1]),"none"===o||!1===o?this._setAttr(t.rendNode,"filled","false"):(this._setAttr(t.rendNode,"filled","true"),this._setAttr(t.rendNode,"fillcolor",o),r.exists(l)&&t.rendNodeFill&&this._setAttr(t.rendNodeFill,"opacity",100*l+"%")),t.type===i.OBJECT_TYPE_IMAGE&&u.filters.length>1&&(u.filters.item(1).opacity=Math.round(100*l),u.filters.item(1).enabled=!0)),t.visPropOld.fillcolor=c,t.visPropOld.fillopacity=h)},setObjectStrokeColor:function(t,e,s){var n,o,a,l,c=r.evaluate(e),h=r.evaluate(s),u=t.rendNode;h=h>0?h:0,t.visPropOld.strokecolor===c&&t.visPropOld.strokeopacity===h||(r.exists(c)&&!1!==c&&(9!==c.length?(n=c,a=h):(o=e.rgba2rgbo(c),n=o[0],a=h*o[1]),t.elementClass===i.OBJECT_CLASS_TEXT?(u.filters.length>1&&(u.filters.item(1).opacity=Math.round(100*a),u.filters.item(1).enabled=!0),u.style.color=n):(!1!==n&&(this._setAttr(u,"stroked","true"),this._setAttr(u,"strokecolor",n)),l=t.rendNodeStroke,r.exists(a)&&t.type!==i.OBJECT_TYPE_IMAGE&&this._setAttr(l,"opacity",100*a+"%"))),t.visPropOld.strokecolor=c,t.visPropOld.strokeopacity=h)},setObjectStrokeWidth:function(t,e){var i,s=r.evaluate(e);isNaN(s)||t.visPropOld.strokewidth===s||(i=t.rendNode,this.setPropertyPrim(i,"stroked","true"),r.exists(s)&&(this.setPropertyPrim(i,"stroke-width",s),0===s&&r.exists(t.rendNodeStroke)&&this._setAttr(i,"stroked","false")),t.visPropOld.strokewidth=s)},setShadow:function(t){var e=t.rendNodeShadow,i=r.evaluate(t.visProp.shadow);e&&t.visPropOld.shadow!==i&&(i?(this._setAttr(e,"On","True"),this._setAttr(e,"Offset","3pt,3pt"),this._setAttr(e,"Opacity","60%"),this._setAttr(e,"Color","#aaaaaa")):this._setAttr(e,"On","False"),t.visPropOld.shadow=i)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}}),t.VMLRenderer})),define("renderer/canvas",["jxg","renderer/abstract","base/constants","utils/env","utils/type","utils/uuid","utils/color","base/coords","math/math","math/geometry","math/numerics"],(function(t,e,i,r,s,n,o,a,l,c,h){"use strict";return t.CanvasRenderer=function(t,e){this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=n.genUUID(),this.canvasNamespace=null,r.isBrowser?(this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',e.width,'px" height="',e.height,'px"><',"/canvas>"].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.context=this.canvasRoot.getContext("2d"),this.canvasRoot.style.display="block"):r.isNode()&&(this.canvasId=__webpack_require__("d16f"),this.canvasRoot=new this.canvasId(500,500),this.context=this.canvasRoot.getContext("2d")),this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5]]},t.CanvasRenderer.prototype=new e,t.extend(t.CanvasRenderer.prototype,{_drawPolygon:function(t,e,i){var r,s=t.length,n=this.context;if(s>0){if(i&&(n.lineWidth=0),n.beginPath(),n.moveTo(t[0][0],t[0][1]),1===e)for(r=1;r<s;r++)n.lineTo(t[r][0],t[r][1]);else for(r=1;r<s;r+=3)n.bezierCurveTo(t[r][0],t[r][1],t[r+1][0],t[r+1][1],t[r+2][0],t[r+2][1]);i?(n.lineTo(t[0][0],t[0][1]),n.closePath(),n.fill()):n.stroke()}},_fill:function(t){var e=this.context;e.save(),this._setColor(t,"fill")&&e.fill(),e.restore()},_rotatePoint:function(t,e,i){return[e*Math.cos(t)-i*Math.sin(t),e*Math.sin(t)+i*Math.cos(t)]},_rotateShape:function(t,e){var i,r=[],s=t.length;if(s<=0)return t;for(i=0;i<s;i++)r.push(this._rotatePoint(e,t[i][0],t[i][1]));return r},updateGradientAngle:function(t,e){var r,s,n,o,l,c,h,u,d,p,f,m,b=1,v=Math.cos(-e),g=Math.sin(-e),y=t.getBoundingBox();return Math.abs(v)>Math.abs(g)?b/=Math.abs(v):b/=Math.abs(g),v>=0?(n=0,o=v*b):(n=-v*b,o=0),g>=0?(l=0,c=g*b):(l=-g*b,c=0),r=new a(i.COORDS_BY_USER,[y[0],y[1]],t.board),s=new a(i.COORDS_BY_USER,[y[2],y[3]],t.board),f=s.scrCoords[1]-r.scrCoords[1],m=s.scrCoords[2]-r.scrCoords[2],h=r.scrCoords[1]+f*n,d=r.scrCoords[2]+m*l,u=r.scrCoords[1]+f*o,p=r.scrCoords[2]+m*c,this.context.createLinearGradient(h,d,u,p)},updateGradientCircle:function(t,e,r,s,n,o,l){var c,h,u,d,p,f,m,b,v,g,y=t.getBoundingBox();return c=new a(i.COORDS_BY_USER,[y[0],y[1]],t.board),h=new a(i.COORDS_BY_USER,[y[2],y[3]],t.board),v=h.scrCoords[1]-c.scrCoords[1],g=c.scrCoords[2]-h.scrCoords[2],u=c.scrCoords[1]+v*e,d=h.scrCoords[2]+g*r,f=c.scrCoords[1]+v*n,m=h.scrCoords[2]+g*o,p=s*(v+g)*.5,b=l*(v+g)*.5,this.context.createRadialGradient(f,m,b,u,d,p)},updateGradient:function(t){var e,i,r,n=s.evaluate(t.visProp.gradient);return i=s.evaluate(t.visProp.fillopacity),i=i>0?i:0,e=s.evaluate(t.visProp.fillcolor),"linear"===n?r=this.updateGradientAngle(t,s.evaluate(t.visProp.gradientangle)):"radial"===n&&(r=this.updateGradientCircle(t,s.evaluate(t.visProp.gradientcx),s.evaluate(t.visProp.gradientcy),s.evaluate(t.visProp.gradientr),s.evaluate(t.visProp.gradientfx),s.evaluate(t.visProp.gradientfy),s.evaluate(t.visProp.gradientfr))),r.addColorStop(s.evaluate(t.visProp.gradientstartoffset),e),r.addColorStop(s.evaluate(t.visProp.gradientendoffset),s.evaluate(t.visProp.gradientsecondcolor)),r},_setColor:function(t,e,i){var r,n,a,l,c,h,u,d,p=!0,f=t.visProp;return e=e||"stroke",i=i||e,r=this._getHighlighted(t),"linear"===(d=s.evaluate(t.visProp.gradient))||"radial"===d?(this.context[i+"Style"]=this.updateGradient(t),p):(a=s.evaluate(f[r+e+"color"]),"none"!==a&&!1!==a?(h=s.evaluate(f[r+e+"opacity"]),h=h>0?h:0,9!==a.length?(c=a,u=h):(l=o.rgba2rgbo(a),c=l[0],u=h*l[1]),this.context.globalAlpha=u,this.context[i+"Style"]=c):p=!1,n=parseFloat(s.evaluate(f[r+"strokewidth"])),"stroke"!==e||isNaN(n)||(0===n?this.context.globalAlpha=0:this.context.lineWidth=n),"stroke"===e&&void 0!==f.linecap&&""!==f.linecap&&(this.context.lineCap=f.linecap),p)},_stroke:function(t){var e=this.context,i=s.evaluate(t.visProp.dash);e.save(),i>0?e.setLineDash&&e.setLineDash(this.dashArray[i]):this.context.lineDashArray=[],this._setColor(t,"stroke")&&e.stroke(),e.restore()},_translateShape:function(t,e,i){var r,s=[],n=t.length;if(n<=0)return t;for(r=0;r<n;r++)s.push([t[r][0]+e,t[r][1]+i]);return s},drawPoint:function(t){var e=s.evaluate(t.visProp.face),i=s.evaluate(t.visProp.size),r=t.coords.scrCoords,n=i*Math.sqrt(3)*.5,o=.5*i,a=parseFloat(s.evaluate(t.visProp.strokewidth))/2,l=this.context;if(t.visPropCalc.visible)switch(e){case"cross":case"x":l.beginPath(),l.moveTo(r[1]-i,r[2]-i),l.lineTo(r[1]+i,r[2]+i),l.moveTo(r[1]+i,r[2]-i),l.lineTo(r[1]-i,r[2]+i),l.lineCap="round",l.lineJoin="round",l.closePath(),this._stroke(t);break;case"circle":case"o":l.beginPath(),l.arc(r[1],r[2],i+1+a,0,2*Math.PI,!1),l.closePath(),this._fill(t),this._stroke(t);break;case"square":case"[]":if(i<=0)break;l.save(),this._setColor(t,"stroke","fill")&&l.fillRect(r[1]-i-a,r[2]-i-a,2*i+3*a,2*i+3*a),l.restore(),l.save(),this._setColor(t,"fill"),l.fillRect(r[1]-i+a,r[2]-i+a,2*i-a,2*i-a),l.restore();break;case"plus":case"+":l.beginPath(),l.moveTo(r[1]-i,r[2]),l.lineTo(r[1]+i,r[2]),l.moveTo(r[1],r[2]-i),l.lineTo(r[1],r[2]+i),l.lineCap="round",l.lineJoin="round",l.closePath(),this._stroke(t);break;case"diamond":case"<>":l.beginPath(),l.moveTo(r[1]-i,r[2]),l.lineTo(r[1],r[2]+i),l.lineTo(r[1]+i,r[2]),l.lineTo(r[1],r[2]-i),l.closePath(),this._fill(t),this._stroke(t);break;case"triangleup":case"a":case"^":l.beginPath(),l.moveTo(r[1],r[2]-i),l.lineTo(r[1]-n,r[2]+o),l.lineTo(r[1]+n,r[2]+o),l.closePath(),this._fill(t),this._stroke(t);break;case"triangledown":case"v":l.beginPath(),l.moveTo(r[1],r[2]+i),l.lineTo(r[1]-n,r[2]-o),l.lineTo(r[1]+n,r[2]-o),l.closePath(),this._fill(t),this._stroke(t);break;case"triangleleft":case"<":l.beginPath(),l.moveTo(r[1]-i,r[2]),l.lineTo(r[1]+o,r[2]-n),l.lineTo(r[1]+o,r[2]+n),l.closePath(),this._fill(t),this._stroke(t);break;case"triangleright":case">":l.beginPath(),l.moveTo(r[1]+i,r[2]),l.lineTo(r[1]-o,r[2]-n),l.lineTo(r[1]-o,r[2]+n),l.closePath(),this._fill(t),this._stroke(t)}},updatePoint:function(t){this.drawPoint(t)},drawArrows:function(t,e,r,n,o){var a,l,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w,S=this.context,T=6,N=1,M=1,A=1,R=o.evFirst,k=o.evLast;if("none"!==s.evaluate(t.visProp.strokecolor)&&(R||k)){if(t.elementClass===i.OBJECT_CLASS_LINE)a=e.scrCoords[1],l=e.scrCoords[2],c=r.scrCoords[1],h=r.scrCoords[2],E=w=Math.atan2(h-l,c-a);else{if(a=t.points[0].scrCoords[1],l=t.points[0].scrCoords[2],(x=t.points.length-1)<1)return;c=t.points[t.points.length-1].scrCoords[1],h=t.points[t.points.length-1].scrCoords[2],_=t.points[1].scrCoords[1]-t.points[0].scrCoords[1],C=t.points[1].scrCoords[2]-t.points[0].scrCoords[2],P=t.points[x].scrCoords[1]-t.points[x-1].scrCoords[1],O=t.points[x].scrCoords[2]-t.points[x-1].scrCoords[2],R&&(E=Math.atan2(C,_)),k&&(w=Math.atan2(O,P))}if(u=s.evaluate(t.visProp[n+"strokewidth"]),R)if(T=o.sizeFirst,d=u*T,N=o.typeFirst,m=N,2===N)f=[[d,.5*-d],[0,0],[d,.5*d],[.5*d,0]];else if(3===N)f=[[d/3,.5*-d],[0,.5*-d],[0,.5*d],[d/3,.5*d]];else if(4===N)for(d/=10,M=3,f=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]],y=f.length,g=0;g<y;g++)f[g][0]*=-d,f[g][1]*=d,f[g][0]+=10*d,f[g][1]-=3.31*d;else if(5===N)for(d/=10,M=3,f=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]],y=f.length,g=0;g<y;g++)f[g][0]*=-d,f[g][1]*=d,f[g][0]+=10*d,f[g][1]-=3.28*d;else if(6===N)for(d/=10,M=3,f=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]],y=f.length,g=0;g<y;g++)f[g][0]*=-d,f[g][1]*=d,f[g][0]+=10*d,f[g][1]-=2.84*d;else if(7===N)for(d=u,M=3,f=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]],y=f.length,g=0;g<y;g++)f[g][0]*=-d,f[g][1]*=d,f[g][0]+=10*d,f[g][1]-=5.2*d;else f=[[d,.5*-d],[0,0],[d,.5*d]];if(k)if(T=o.sizeLast,d=u*T,N=o.typeLast,b=N,2===N)p=[[-d,.5*-d],[0,0],[-d,.5*d],[.5*-d,0]];else if(3===N)p=[[-d/3,.5*-d],[0,.5*-d],[0,.5*d],[-d/3,.5*d]];else if(4===N)for(d/=10,A=3,p=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]],y=p.length,g=0;g<y;g++)p[g][0]*=d,p[g][1]*=d,p[g][0]-=10*d,p[g][1]-=3.31*d;else if(5===N)for(d/=10,A=3,p=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]],y=p.length,g=0;g<y;g++)p[g][0]*=d,p[g][1]*=d,p[g][0]-=10*d,p[g][1]-=3.28*d;else if(6===N)for(d/=10,A=3,p=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]],y=p.length,g=0;g<y;g++)p[g][0]*=d,p[g][1]*=d,p[g][0]-=10*d,p[g][1]-=2.84*d;else if(7===N)for(d=u,A=3,p=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]],y=p.length,g=0;g<y;g++)p[g][0]*=d,p[g][1]*=d,p[g][0]-=10*d,p[g][1]-=5.2*d;else p=[[-d,.5*-d],[0,0],[-d,.5*d]];S.save(),this._setColor(t,"stroke","fill")&&(this._setColor(t,"stroke"),R&&(v=7!==m,this._drawPolygon(this._translateShape(this._rotateShape(f,E),a,l),M,v)),k&&(v=7!==b,this._drawPolygon(this._translateShape(this._rotateShape(p,w),c,h),A,v))),S.restore()}},drawLine:function(t){var e,r,n,o,l,h=new a(i.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),u=new a(i.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),d=null;t.visPropCalc.visible&&(n=this._getHighlighted(t),o=s.evaluate(t.visProp[n+"strokewidth"]),l=this.getArrowHeadData(t,o,n),(l.evFirst||l.evLast)&&(d=-4),c.calcStraight(t,h,u,d),this.handleTouchpoints(t,h,u,l),e=new a(i.COORDS_BY_USER,h.usrCoords,t.board),r=new a(i.COORDS_BY_USER,u.usrCoords,t.board),this.getPositionArrowHead(t,h,u,l),this.context.beginPath(),this.context.moveTo(h.scrCoords[1],h.scrCoords[2]),this.context.lineTo(u.scrCoords[1],u.scrCoords[2]),this._stroke(t),(l.evFirst||l.evLast)&&this.drawArrows(t,e,r,n,l))},updateLine:function(t){this.drawLine(t)},drawTicks:function(){},updateTicks:function(t){var e,i,r,s,n,o,a=t.ticks.length,l=this.context;for(l.beginPath(),e=0;e<a;e++)for(i=t.ticks[e],r=i[0],s=i[1],n=r.length,l.moveTo(r[0],s[0]),o=1;o<n;++o)l.lineTo(r[o],s[o]);l.lineCap="round",this._stroke(t)},drawCurve:function(t){var e,i,r;s.evaluate(t.visProp.handdrawing)?this.updatePathStringBezierPrim(t):this.updatePathStringPrim(t),t.numberPoints>1&&(e=this._getHighlighted(t),i=s.evaluate(t.visProp[e+"strokewidth"]),r=this.getArrowHeadData(t,i,e),(r.evFirst||r.evLast)&&this.drawArrows(t,null,null,e,r))},updateCurve:function(t){this.drawCurve(t)},drawEllipse:function(t){var e=t.center.coords.scrCoords[1],i=t.center.coords.scrCoords[2],r=t.board.unitX,s=t.board.unitY,n=2*t.Radius(),o=2*t.Radius(),a=n*r,l=o*s,c=e-a/2,h=i-l/2,u=a/2*.5522848,d=l/2*.5522848,p=c+a,f=h+l,m=c+a/2,b=h+l/2,v=this.context;n>0&&o>0&&!isNaN(e+i)&&(v.beginPath(),v.moveTo(c,b),v.bezierCurveTo(c,b-d,m-u,h,m,h),v.bezierCurveTo(m+u,h,p,b-d,p,b),v.bezierCurveTo(p,b+d,m+u,f,m,f),v.bezierCurveTo(m-u,f,c,b+d,c,b),v.closePath(),this._fill(t),this._stroke(t))},updateEllipse:function(t){return this.drawEllipse(t)},displayCopyright:function(t,e){var i=this.context;i.save(),i.font=e+"px Arial",i.fillStyle="#aaa",i.lineWidth=.5,i.fillText(t,10,2+e),i.restore()},drawInternalText:function(t){var e=s.evaluate(t.visProp.fontsize),i=s.evaluate(t.visProp.fontunit),r=t.getAnchorX(),n=t.getAnchorY(),o=this.context;return o.save(),this._setColor(t,"stroke","fill")&&!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])&&(o.font=(e>0?e:0)+i+" Arial",this.transformImage(t,t.transformations),"left"===r?o.textAlign="left":"right"===r?o.textAlign="right":"middle"===r&&(o.textAlign="center"),"bottom"===n?o.textBaseline="bottom":"top"===n?o.textBaseline="top":"middle"===n&&(o.textBaseline="middle"),o.fillText(t.plaintext,t.coords.scrCoords[1],t.coords.scrCoords[2])),o.restore(),null},updateInternalText:function(t){this.drawInternalText(t)},setObjectStrokeColor:function(t,e,r){var n,a,l,c,h=s.evaluate(e),u=s.evaluate(r);u=u>0?u:0,t.visPropOld.strokecolor===h&&t.visPropOld.strokeopacity===u||(s.exists(h)&&!1!==h&&(9!==h.length?(n=h,l=u):(a=o.rgba2rgbo(h),n=a[0],l=u*a[1]),c=t.rendNode,t.elementClass===i.OBJECT_CLASS_TEXT&&"html"===s.evaluate(t.visProp.display)&&(c.style.color=n,c.style.opacity=l)),t.visPropOld.strokecolor=h,t.visPropOld.strokeopacity=u)},drawImage:function(t){t.rendNode=new Image,t._src="",this.updateImage(t)},updateImage:function(t){var e=this.context,i=s.evaluate(t.visProp.fillopacity),r=s.bind((function(){t.imgIsLoaded=!0,t.size[0]<=0||t.size[1]<=0||(e.save(),e.globalAlpha=i,this.transformImage(t,t.transformations),e.drawImage(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),e.restore())}),this);this.updateImageURL(t)?t.rendNode.onload=r:t.imgIsLoaded&&r()},transformImage:function(t,e){var i,r=e.length,s=this.context;r>0&&(i=this.joinTransforms(t,e),Math.abs(h.det(i))>=l.eps&&s.transform(i[1][1],i[2][1],i[1][2],i[2][2],i[1][0],i[2][0]))},updateImageURL:function(t){var e;return e=s.evaluate(t.url),t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.src=e,t._src=e,!0)},remove:function(t){s.exists(t)&&s.exists(t.parentNode)&&t.parentNode.removeChild(t)},updatePathStringPrim:function(t){var e,i,r,s,n,o="M",a=this.context;if(!(t.numberPoints<=0)){if(n=Math.min(t.points.length,t.numberPoints),a.beginPath(),1===t.bezierDegree)for(e=0;e<n;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?o="M":(i[1]>5e3?i[1]=5e3:i[1]<-5e3&&(i[1]=-5e3),i[2]>5e3?i[2]=5e3:i[2]<-5e3&&(i[2]=-5e3),"M"===o?a.moveTo(i[1],i[2]):a.lineTo(i[1],i[2]),o="L");else if(3===t.bezierDegree)for(e=0;e<n;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?o="M":("M"===o?a.moveTo(i[1],i[2]):(e+=1,r=t.points[e].scrCoords,e+=1,s=t.points[e].scrCoords,a.bezierCurveTo(i[1],i[2],r[1],r[2],s[1],s[2])),o="C"),e+=1;a.lineCap="round",this._fill(t),this._stroke(t)}},updatePathStringBezierPrim:function(t){var e,i,r,n,o,a,l,c="M",u=s.evaluate(t.visProp.strokewidth),d="plot"!==s.evaluate(t.visProp.curvetype),p=this.context;if(!(t.numberPoints<=0)){for(d&&t.board.options.curve.RDPsmoothing&&(t.points=h.RamerDouglasPeucker(t.points,.5)),l=Math.min(t.points.length,t.numberPoints),p.beginPath(),i=1;i<3;i++)for(c="M",e=0;e<l;e++)n=t.points[e].scrCoords,isNaN(n[1])||isNaN(n[2])?c="M":(n[1]>5e3?n[1]=5e3:n[1]<-5e3&&(n[1]=-5e3),n[2]>5e3?n[2]=5e3:n[2]<-5e3&&(n[2]=-5e3),"M"===c?p.moveTo(n[1],n[2]):(r=2*i,p.bezierCurveTo(o+.333*(n[1]-o)+u*(r*Math.random()-i),a+.333*(n[2]-a)+u*(r*Math.random()-i),o+.666*(n[1]-o)+u*(r*Math.random()-i),a+.666*(n[2]-a)+u*(r*Math.random()-i),n[1],n[2])),c="C",o=n[1],a=n[2]);p.lineCap="round",this._fill(t),this._stroke(t)}},updatePolygonPrim:function(t,e){var i,r,s,n=e.vertices.length,o=this.context,a=!0;if(!(n<=0)&&e.visPropCalc.visible){for("polygonalchain"===e.elType&&n++,o.beginPath(),r=0;!e.vertices[r].isReal&&r<n-1;)r++,a=!1;for(i=e.vertices[r].coords.scrCoords,o.moveTo(i[1],i[2]),s=r;s<n-1;s++)e.vertices[s].isReal||(a=!1),i=e.vertices[s].coords.scrCoords,o.lineTo(i[1],i[2]);o.closePath(),a&&this._fill(e)}},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,t.rendNode.style.visibility=e?"inherit":"hidden")},show:function(e){t.deprecated("Board.renderer.show()","Board.renderer.display()"),s.exists(e.rendNode)&&(e.rendNode.style.visibility="inherit")},hide:function(e){t.deprecated("Board.renderer.hide()","Board.renderer.display()"),s.exists(e.rendNode)&&(e.rendNode.style.visibility="hidden")},setGradient:function(t){var e;e=s.evaluate(t.visProp.fillopacity),e=e>0?e:0},setShadow:function(t){t.visPropOld.shadow!==t.visProp.shadow&&(t.visPropOld.shadow=t.visProp.shadow)},highlight:function(t){return t.elementClass===i.OBJECT_CLASS_TEXT&&"html"===s.evaluate(t.visProp.display)?this.updateTextStyle(t,!0):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},noHighlight:function(t){return t.elementClass===i.OBJECT_CLASS_TEXT&&"html"===s.evaluate(t.visProp.display)?this.updateTextStyle(t,!1):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(e){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),e&&e.attr.showcopyright&&this.displayCopyright(t.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(t,e){this.container?(this.canvasRoot.style.width=parseFloat(t)+"px",this.canvasRoot.style.height=parseFloat(e)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(t)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(e)+"px")):(this.canvasRoot.width=2*parseFloat(t),this.canvasRoot.height=2*parseFloat(e)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}}),t.CanvasRenderer})),define("renderer/no",["jxg","renderer/abstract"],(function(t,e){"use strict";return t.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},t.extend(t.NoRenderer.prototype,{drawPoint:function(t){},updatePoint:function(t){},changePointStyle:function(t){},drawLine:function(t){},updateLine:function(t){},drawTicks:function(t){},updateTicks:function(t){},drawCurve:function(t){},updateCurve:function(t){},drawEllipse:function(t){},updateEllipse:function(t){},drawPolygon:function(t){},updatePolygon:function(t){},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){},updateText:function(t){},updateTextStyle:function(t,e){},updateInternalTextStyle:function(t,e,i){},drawImage:function(t){},updateImage:function(t){},transformImage:function(t,e){},updateImageURL:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t){},updateEllipsePrim:function(t,e,i,r,s){},updateLinePrim:function(t,e,i,r,s,n){},updatePathPrim:function(t,e,i){},updatePathStringPoint:function(t,e,i){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,i,r,s){},setPropertyPrim:function(t,e,i){},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){},removeDraft:function(t){},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectFillColor:function(t,e,i){},setObjectStrokeColor:function(t,e,i){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t){},noHighlight:function(t){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(t){},getElementById:function(t){return null},resize:function(t,e){},removeToInsertLater:function(){return function(){}}}),t.NoRenderer.prototype=new e,t.NoRenderer})),define("jsxgraph",["jxg","utils/env","utils/type","base/board","reader/file","options","renderer/svg","renderer/vml","renderer/canvas","renderer/no"],(function(t,e,i,r,s,n,o,a,l,c){"use strict";return t.JSXGraph={rendererType:function(){return n.board.renderer="no",e.supportsVML()&&(n.board.renderer="vml",document.onmousemove=function(){var t;return document.body&&(t=document.body.scrollLeft,t+=document.body.scrollTop),t}),e.supportsCanvas()&&(n.board.renderer="canvas"),e.supportsSVG()&&(n.board.renderer="svg"),e.isNode()&&e.supportsCanvas()&&(n.board.renderer="canvas"),(e.isNode()||"no"===n.renderer)&&(n.text.display="internal",n.infobox.display="internal"),n.board.renderer}(),initRenderer:function(t,e,r,s){var n;if(i.exists(r)&&!1!==r||"object"!=typeof document||(r=document),"object"==typeof r&&null!==t)for(n=r.getElementById(t);n.firstChild;)n.removeChild(n.firstChild);else n=t;return void 0!==s&&"auto"!==s||(s=this.rendererType),"svg"===s?new o(n,e):"vml"===s?new a(n):"canvas"===s?new l(n,e):new c},_setAttributes:function(t){var e=i.copyAttributes(t,n,"board");return e.zoom=i.copyAttributes(e,n,"board","zoom"),e.pan=i.copyAttributes(e,n,"board","pan"),e.drag=i.copyAttributes(e,n,"board","drag"),e.keyboard=i.copyAttributes(e,n,"board","keyboard"),e.selection=i.copyAttributes(e,n,"board","selection"),e.navbar=i.copyAttributes(e.navbar,n,"navbar"),e.screenshot=i.copyAttributes(e,n,"board","screenshot"),e.resize=i.copyAttributes(e,n,"board","resize"),e.fullscreen=i.copyAttributes(e,n,"board","fullscreen"),e.movetarget=t.moveTarget||t.movetarget||n.board.moveTarget,e},_fillBoard:function(e,i,r){e.initInfobox(),e.maxboundingbox=i.maxboundingbox,e.resizeContainer(r.width,r.height,!0,!0),e._createSelectionPolygon(i),e.renderer.drawZoomBar(e,i.navbar),t.boards[e.id]=e},_setARIA:function(t,e){var i,r,s,n,o,a=e.document||document;"object"==typeof a&&(i=a.getElementById(t),s=i.parentNode,n=t+"_ARIAlabel",o=t+"_ARIAdescription",r=a.createElement("div"),r.innerHTML=e.title,r.setAttribute("id",n),r.style.display="none",s.insertBefore(r,i),r=a.createElement("div"),r.innerHTML=e.description,r.setAttribute("id",o),r.style.display="none",s.insertBefore(r,i),i.setAttribute("aria-labelledby",n),i.setAttribute("aria-describedby",o))},_removeARIANodes:function(t){var e,i;"object"==typeof(t.document||document)&&(i=t.containerObj.getAttribute("aria-labelledby"),e=document.getElementById(i),e&&e.parentNode&&e.parentNode.removeChild(e),i=t.containerObj.getAttribute("aria-describedby"),(e=document.getElementById(i))&&e.parentNode&&e.parentNode.removeChild(e))},initBoard:function(t,s){var o,a,l,c,h,u,d,p,f,m,b,v,g,y;return s=s||{},m=this._setAttributes(s),p=e.getDimensions(t,m.document),m.unitx||m.unity?(o=i.def(m.originx,150),a=i.def(m.originy,150),l=i.def(m.unitx,50),c=i.def(m.unity,50)):(f=m.boundingbox,f[0]<m.maxboundingbox[0]&&(f[0]=m.maxboundingbox[0]),f[1]>m.maxboundingbox[1]&&(f[1]=m.maxboundingbox[1]),f[2]>m.maxboundingbox[2]&&(f[2]=m.maxboundingbox[2]),f[3]<m.maxboundingbox[3]&&(f[3]=m.maxboundingbox[3]),u=parseInt(p.width,10),d=parseInt(p.height,10),i.exists(f)&&m.keepaspectratio?(l=u/(f[2]-f[0]),c=d/(f[1]-f[3]),Math.abs(l)<Math.abs(c)?c=Math.abs(l)*c/Math.abs(c):l=Math.abs(c)*l/Math.abs(l)):(l=u/(f[2]-f[0]),c=d/(f[1]-f[3])),o=-l*f[0],a=c*f[1]),h=this.initRenderer(t,p,m.document,m.renderer),this._setARIA(t,m),y=new r(t,h,m.id,[o,a],m.zoomfactor*m.zoomx,m.zoomfactor*m.zoomy,l,c,p.width,p.height,m),y.keepaspectratio=m.keepaspectratio,this._fillBoard(y,m,p),y.suspendUpdate(),m.axis&&(b="object"==typeof m.axis?m.axis:{},v=i.deepCopy(n.board.defaultAxes.x,b),g=i.deepCopy(n.board.defaultAxes.y,b),m.defaultaxes.x&&(v=i.deepCopy(v,m.defaultaxes.x)),m.defaultaxes.y&&(g=i.deepCopy(g,m.defaultaxes.y)),y.defaultAxes={},y.defaultAxes.x=y.create("axis",[[0,0],[1,0]],v),y.defaultAxes.y=y.create("axis",[[0,0],[0,1]],g)),m.grid&&y.create("grid",[],"object"==typeof m.grid?m.grid:{}),y.unsuspendUpdate(),y},loadBoardFromFile:function(t,i,n,o,a){var l,c,h,u,d;return o=o||{},l=this._setAttributes(o),u=e.getDimensions(t,l.document),c=this.initRenderer(t,u,l.document,l.renderer),this._setARIA(t,l),h=new r(t,c,"",[150,150],1,1,50,50,u.width,u.height,l),this._fillBoard(h,l,u),d=l.encoding||"iso-8859-1",s.parseFileContent(i,h,n,!0,d,a),h},loadBoardFromString:function(t,i,n,o,a){var l,c,h,u;return o=o||{},l=this._setAttributes(o),u=e.getDimensions(t,l.document),c=this.initRenderer(t,u,l.document),this._setARIA(t,l),h=new r(t,c,"",[150,150],1,1,50,50,u.width,u.height,l),this._fillBoard(h,l,u),s.parseString(i,h,n,!0,a),h},freeBoard:function(e){var i;for(i in"string"==typeof e&&(e=t.boards[e]),this._removeARIANodes(e),e.removeEventHandlers(),e.suspendUpdate(),e.objects)e.objects.hasOwnProperty(i)&&e.objects[i].remove();for(;e.containerObj.firstChild;)e.containerObj.removeChild(e.containerObj.firstChild);for(i in e.objects)e.objects.hasOwnProperty(i)&&delete e.objects[i];delete e.renderer,e.jc.creator.clearCache(),delete e.jc,delete t.boards[e.id]},registerElement:function(e,i){t.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),t.registerElement(e,i)}},e.isBrowser&&"object"==typeof window&&"object"==typeof document&&e.addEvent(window,"load",(function(){var e,r,s,n,o,a,l,c,h,u,d,p,f,m,b,v,g,y,_=!1,C=document.getElementsByTagName("script"),P=function(e,i,r){var s=t.JSXGraph.initBoard(o,{boundingbox:r,keepaspectratio:!0,grid:b,axis:m,showReload:!0});if(i.toLowerCase().indexOf("script")>-1)s.construct(e);else try{s.jc.parse(e)}catch(e){t.debug(e)}return s},O=function(e,i,r,s){return function(){var n;t.JSXGraph.freeBoard(e),n=P(i,r,s),n.reload=O(n,i,r,s)}};for(r=0;r<C.length;r++)if(e=C[r].getAttribute("type",!1),i.exists(e)&&("text/jessiescript"===e.toLowerCase()||"jessiescript"===e.toLowerCase()||"text/jessiecode"===e.toLowerCase()||"jessiecode"===e.toLowerCase())){if(p=C[r].getAttribute("class",!1)||"",c=C[r].getAttribute("width",!1)||"",h=C[r].getAttribute("height",!1)||"",u=C[r].getAttribute("maxwidth",!1)||"100%",d=C[r].getAttribute("aspectratio",!1)||"1/1",f=C[r].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",o=C[r].getAttribute("container",!1),g=C[r].getAttribute("src",!1),f=f.split(","),4!==f.length)f=[-5,5,5,-5];else for(s=0;s<f.length;s++)f[s]=parseFloat(f[s]);if(m=i.str2Bool(C[r].getAttribute("axis",!1)||"false"),b=i.str2Bool(C[r].getAttribute("grid",!1)||"false"),i.exists(o))n=document.getElementById(o);else{o="jessiescript_autgen_jxg_"+r,n=document.createElement("div"),n.setAttribute("id",o),l=""!==c?"width:"+c+";":"",l+=""!==h?"height:"+h+";":"",l+=""!==u?"max-width:"+u+";":"",l+=""!==d?"aspect-ratio:"+d+";":"",n.setAttribute("style",l),n.setAttribute("class","jxgbox "+p);try{document.body.insertBefore(n,C[r])}catch(t){"object"==typeof jQuery&&jQuery(n).insertBefore(C[r])}}v="",i.exists(g)?(_=!0,y=new XMLHttpRequest,y.open("GET",g),y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("load",(function(){if(!(this.status<400))throw new Error("\nJSXGraph: failed to load file",g,":",this.responseText);v=this.responseText+"\n"+v,a=P(v,e,f),a.reload=O(a,v,e,f)})),y.addEventListener("error",(function(t){throw new Error("\nJSXGraph: failed to load file",g,":",t)})),y.send()):_=!1,document.getElementById(o)?(v=C[r].innerHTML,v=v.replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),C[r].innerHTML=v,_||(a=P(v,e,f),a.reload=O(a,v,e,f))):t.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}}),window),t.JSXGraph})),define("base/point",["jxg","options","math/math","math/geometry","base/constants","base/element","utils/type","base/coordselement"],(function(t,e,i,r,s,n,o,a){"use strict";return t.Point=function(t,e,i){this.constructor(t,i,s.OBJECT_TYPE_POINT,s.OBJECT_CLASS_POINT),this.element=this.board.select(i.anchor),this.coordsConstructor(e),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createLabel()},t.Point.prototype=new n,o.copyPrototypeMethods(t.Point,a,"coordsConstructor"),t.extend(t.Point.prototype,{hasPoint:function(t,e){var i,r,s,n=this.coords.scrCoords,a=o.evaluate(this.visProp.sizeunit);return o.isObject(o.evaluate(this.visProp.precision))?(s=this.board._inputDevice,r=o.evaluate(this.visProp.precision[s])):r=this.board.options.precision.hasPoint,i=parseFloat(o.evaluate(this.visProp.size)),"user"===a&&(i*=Math.sqrt(this.board.unitX*this.board.unitY)),i+=.5*parseFloat(o.evaluate(this.visProp.strokewidth)),i<r&&(i=r),Math.abs(n[1]-t)<i+2&&Math.abs(n[2]-e)<i+2},update:function(t){return this.needsUpdate?(this.updateCoords(t),o.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateTransform:function(t){var e,i;if(0===this.transformations.length||null===this.baseElement)return this;for(this===this.baseElement?(e=this.transformations[0].apply(this.baseElement,"self"),this.coords.setCoordinates(s.COORDS_BY_USER,e)):e=this.transformations[0].apply(this.baseElement),this.coords.setCoordinates(s.COORDS_BY_USER,e),i=1;i<this.transformations.length;i++)this.coords.setCoordinates(s.COORDS_BY_USER,this.transformations[i].apply(this));return this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(t,e,i,n){var a;t=this.board.select(t),e=this.board.select(e),a=r.intersectionFunction(this.board,t,e,i,n,o.evaluate(this.visProp.alwaysintersect)),this.addConstraint([a]);try{t.addChild(this),e.addChild(this)}catch(i){throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof t+"' and '"+typeof e+"'.")}this.type=s.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[t.id,e.id,i,n],this.generatePolynomial=function(){var i=t.generatePolynomial(this),r=e.generatePolynomial(this);return 0===i.length||0===r.length?[]:[i[0],r[0]]},this.prepareUpdate().update()},setStyle:function(t){var e=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"],i=[2,3,4,1,2,3,4,2,3,4,2,3,4];return this.visProp.face=e[t],this.visProp.size=i[t],this.board.renderer.changePointStyle(this),this},normalizeFace:function(i){return t.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),e.normalizePointFace(i)},face:function(e){t.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:e})},size:function(e){t.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:e})},isOn:function(e,n){var a,l;return n=n||i.eps,o.isPoint(e)?this.Dist(e)<n:e.elementClass===s.OBJECT_CLASS_LINE?"segment"!==e.elType||o.evaluate(this.visProp.alwaysintersect)?r.distPointLine(this.coords.usrCoords,e.stdform)<n:(a=t.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords),a[1]>=0&&a[1]<=1&&r.distPointLine(this.coords.usrCoords,e.stdform)<n):e.elementClass===s.OBJECT_CLASS_CIRCLE?o.evaluate(e.visProp.hasinnerpoints)?this.Dist(e.center)<e.Radius()+n:Math.abs(this.Dist(e.center)-e.Radius())<n:e.elementClass===s.OBJECT_CLASS_CURVE?(l=r.projectPointToCurve(this,e,this.board)[0],r.distance(this.coords.usrCoords,l.usrCoords,3)<n):e.type===s.OBJECT_TYPE_POLYGON?!(!o.evaluate(e.visProp.hasinnerpoints)||!e.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],t.COORDS_BY_USER))||(a=r.projectCoordsToPolygon(this.coords.usrCoords,e),r.distance(this.coords.usrCoords,a,3)<n):e.type===s.OBJECT_TYPE_TURTLE&&(l=r.projectPointToTurtle(this,e,this.board),r.distance(this.coords.usrCoords,l.usrCoords,3)<n)},cloneToBackground:function(){var t={};return t.id=this.id+"T"+this.numTraces,this.numTraces+=1,t.coords=this.coords,t.visProp=o.deepCopy(this.visProp,this.visProp.traceattributes,!0),t.visProp.layer=this.board.options.layer.trace,t.elementClass=s.OBJECT_CLASS_POINT,t.board=this.board,o.clearVisPropOld(t),t.visPropCalc={visible:o.evaluate(t.visProp.visible)},this.board.renderer.drawPoint(t),this.traces[t.id]=t.rendNode,this}}),t.createPoint=function(e,i,r){var s,n;if(n=o.copyAttributes(r,e.options,"point"),!(s=a.create(t.Point,e,i,n)))throw new Error("JSXGraph: Can't create point with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return s},t.createGlider=function(t,e,i){var r,s,n=o.copyAttributes(i,t.options,"glider");return s=1===e.length?[0,0]:e.slice(0,2),r=t.create("point",s,n),r.makeGlider(e[e.length-1]),r},t.createIntersectionPoint=function(t,e,i){var n,a,l,c,h,u,d=o.copyAttributes(i,t.options,"intersection");e.push(0,0),a=t.select(e[0]),l=t.select(e[1]),h=e[2]||0,u=e[3]||0,n=t.create("point",[0,0,0],d),c=r.intersectionFunction(t,a,l,h,u,n.visProp.alwaysintersect),n.addConstraint([c]);try{a.addChild(n),l.addChild(n)}catch(t){throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.")}return n.type=s.OBJECT_TYPE_INTERSECTION,n.elType="intersection",n.setParents([a.id,l.id]),n.intersectionNumbers=[h,u],n.getParents=function(){return this.parents.concat(this.intersectionNumbers)},n.generatePolynomial=function(){var t=a.generatePolynomial(n),e=l.generatePolynomial(n);return 0===t.length||0===e.length?[]:[t[0],e[0]]},n},t.createOtherIntersectionPoint=function(t,e,n){var a,l,c,h;if(3!==e.length||!o.isPoint(e[2])||e[0].elementClass!==s.OBJECT_CLASS_LINE&&e[0].elementClass!==s.OBJECT_CLASS_CIRCLE||e[1].elementClass!==s.OBJECT_CLASS_LINE&&e[1].elementClass!==s.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof e[0]+"',  '"+typeof e[1]+"'and  '"+typeof e[2]+"'.\nPossible parent types: [circle|line,circle|line,point]");return l=t.select(e[0]),c=t.select(e[1]),h=t.select(e[2]),a=t.create("point",[function(){var t=r.meet(l.stdform,c.stdform,0,l.board);return Math.abs(h.X()-t.usrCoords[1])>i.eps||Math.abs(h.Y()-t.usrCoords[2])>i.eps||Math.abs(h.Z()-t.usrCoords[0])>i.eps?t:r.meet(l.stdform,c.stdform,1,l.board)}],n),a.type=s.OBJECT_TYPE_INTERSECTION,a.elType="otherintersection",a.setParents([l.id,c.id,h]),l.addChild(a),c.addChild(a),a.generatePolynomial=function(){var t=l.generatePolynomial(a),e=c.generatePolynomial(a);return 0===t.length||0===e.length?[]:[t[0],e[0]]},a},t.createPolePoint=function(e,i,r){var n,o,a,l,c,h,u;if(i.length>1&&(l=i[0].type===s.OBJECT_TYPE_CONIC||i[0].elementClass===s.OBJECT_CLASS_CIRCLE,c=i[1].type===s.OBJECT_TYPE_CONIC||i[1].elementClass===s.OBJECT_CLASS_CIRCLE,h=i[0].elementClass===s.OBJECT_CLASS_LINE,u=i[1].elementClass===s.OBJECT_CLASS_LINE),2!==i.length||!(l&&u||h&&c))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent type: [conic|circle,line], [line,conic|circle]");return u?(o=e.select(i[0]),a=e.select(i[1])):(o=e.select(i[1]),a=e.select(i[0])),n=e.create("point",[function(){var e=o.quadraticform,i=a.stdform.slice(0,3);return[t.Math.Numerics.det([i,e[1],e[2]]),t.Math.Numerics.det([e[0],i,e[2]]),t.Math.Numerics.det([e[0],e[1],i])]}],r),n.elType="polepoint",n.setParents([o.id,a.id]),o.addChild(n),a.addChild(n),n},t.registerElement("point",t.createPoint),t.registerElement("glider",t.createGlider),t.registerElement("intersection",t.createIntersectionPoint),t.registerElement("otherintersection",t.createOtherIntersectionPoint),t.registerElement("polepoint",t.createPolePoint),{Point:t.Point,createPoint:t.createPoint,createGlider:t.createGlider,createIntersection:t.createIntersectionPoint,createOtherIntersection:t.createOtherIntersectionPoint,createPolePoint:t.createPolePoint}})),define("base/line",["jxg","math/math","math/geometry","math/numerics","math/statistics","base/constants","base/coords","base/element","utils/type","base/point"],(function(t,e,i,r,s,n,o,a,l,c){"use strict";return t.Line=function(e,i,r,s){this.constructor(e,s,n.OBJECT_TYPE_LINE,n.OBJECT_CLASS_LINE),this.point1=this.board.select(i),this.point2=this.board.select(r),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=t.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"getSlope",getRise:"getRise",getYIntersect:"getRise",getAngle:"getAngle",L:"L",length:"L"})},t.Line.prototype=new a,t.extend(t.Line.prototype,{hasPoint:function(t,r){var s,a,c,h,u,d,p,f,m,b=[],v=[1,t,r],g=l.evaluate(this.visProp.strokewidth);return l.isObject(l.evaluate(this.visProp.precision))?(m=this.board._inputDevice,f=l.evaluate(this.visProp.precision[m])):f=this.board.options.precision.hasPoint,f+=.5*g,b[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,b[1]=this.stdform[1]/this.board.unitX,b[2]=this.stdform[2]/-this.board.unitY,s=i.distPointLine(v,b),!(isNaN(s)||s>f)&&(!(!l.evaluate(this.visProp.straightfirst)||!l.evaluate(this.visProp.straightlast))||(c=this.point1.coords,h=this.point2.coords,a=[0,b[1],b[2]],a=e.crossProduct(a,v),a=e.crossProduct(a,b),a[1]/=a[0],a[2]/=a[0],a[0]=1,a=new o(n.COORDS_BY_SCREEN,a.slice(1),this.board).usrCoords,u=c.distance(n.COORDS_BY_USER,h),c=c.usrCoords.slice(0),h=h.usrCoords.slice(0),u<e.eps?d=0:(u===Number.POSITIVE_INFINITY&&(u=1/e.eps,Math.abs(h[0])<e.eps?(u/=i.distance([0,0,0],h),h=[1,c[1]+h[1]*u,c[2]+h[2]*u]):(u/=i.distance([0,0,0],c),c=[1,h[1]+c[1]*u,h[2]+c[2]*u])),p=1,u=h[p]-c[p],Math.abs(u)<e.eps&&(p=2,u=h[p]-c[p]),d=(a[p]-c[p])/u),!(!l.evaluate(this.visProp.straightfirst)&&d<0)&&!(!l.evaluate(this.visProp.straightlast)&&d>1)))},update:function(){var t;return this.needsUpdate?(this.constrained&&(l.isFunction(this.funps)?(t=this.funps())&&t.length&&2===t.length&&(this.point1=t[0],this.point2=t[1]):(l.isFunction(this.funp1)&&(t=this.funp1(),l.isPoint(t)?this.point1=t:t&&t.length&&2===t.length&&this.point1.setPositionDirectly(n.COORDS_BY_USER,t)),l.isFunction(this.funp2)&&(t=this.funp2(),l.isPoint(t)?this.point2=t:t&&t.length&&2===t.length&&this.point2.setPositionDirectly(n.COORDS_BY_USER,t)))),this.updateSegmentFixedLength(),this.updateStdform(),l.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var t,i,r,s,o,a,c,h;return this.hasFixedLength?(t=this.point1.Dist(this.point2),i=this.fixedLength(),r=this.fixedLengthOldCoords[0].distance(n.COORDS_BY_USER,this.point1.coords),s=this.fixedLengthOldCoords[1].distance(n.COORDS_BY_USER,this.point2.coords),(r>e.eps||s>e.eps||t!==i)&&(o=this.point1.isDraggable&&this.point1.type!==n.OBJECT_TYPE_GLIDER&&!l.evaluate(this.point1.visProp.fixed),a=this.point2.isDraggable&&this.point2.type!==n.OBJECT_TYPE_GLIDER&&!l.evaluate(this.point2.visProp.fixed),t>e.eps?r>s&&a||r<=s&&a&&!o?(this.point2.setPositionDirectly(n.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*i/t,this.point1.Y()+(this.point2.Y()-this.point1.Y())*i/t]),this.point2.fullUpdate()):(r<=s&&o||r>s&&o&&!a)&&(this.point1.setPositionDirectly(n.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*i/t,this.point2.Y()+(this.point1.Y()-this.point2.Y())*i/t]),this.point1.fullUpdate()):(c=Math.random()-.5,h=Math.random()-.5,t=Math.sqrt(c*c+h*h),a?(this.point2.setPositionDirectly(n.COORDS_BY_USER,[this.point1.X()+c*i/t,this.point1.Y()+h*i/t]),this.point2.fullUpdate()):o&&(this.point1.setPositionDirectly(n.COORDS_BY_USER,[this.point2.X()+c*i/t,this.point2.Y()+h*i/t]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(n.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(n.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var t=e.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=t[0],this.stdform[1]=t[1],this.stdform[2]=t[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&e.innerProduct(this.stdform,this.stdform,3)>=e.eps*e.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(t){var e=this.point1.symbolic.x,i=this.point1.symbolic.y,r=this.point2.symbolic.x,s=this.point2.symbolic.y,n=t.symbolic.x,o=t.symbolic.y;return[["(",i,")*(",n,")-(",i,")*(",r,")+(",o,")*(",r,")-(",e,")*(",o,")+(",e,")*(",s,")-(",n,")*(",s,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=e.eps?-this.stdform[0]/this.stdform[2]:1/0},getSlope:function(){return Math.abs(this.stdform[2])>=e.eps?-this.stdform[1]/this.stdform[2]:1/0},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},setStraight:function(t,e){return this.visProp.straightfirst=t,this.visProp.straightlast=e,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new o(n.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(t){l.exists(this.label)&&(this.label.relativeCoords=new o(n.COORDS_BY_SCREEN,[t[0],-t[1]],this.board))},getLabelAnchor:function(){var t,r,s=0,a=new o(n.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),c=new o(n.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),h=l.evaluate(this.visProp.straightfirst),u=l.evaluate(this.visProp.straightlast);if((h||u)&&i.calcStraight(this,a,c,0),a=a.scrCoords,c=c.scrCoords,!l.exists(this.label))return new o(n.COORDS_BY_SCREEN,[NaN,NaN],this.board);switch(l.evaluate(this.label.visProp.position)){case"lft":case"llft":case"ulft":a[1]<=c[1]?(t=a[1],r=a[2]):(t=c[1],r=c[2]);break;case"rt":case"lrt":case"urt":a[1]>c[1]?(t=a[1],r=a[2]):(t=c[1],r=c[2]);break;default:t=.5*(a[1]+c[1]),r=.5*(a[2]+c[2])}return(h||u)&&(l.exists(this.label)&&(s=l.evaluate(this.label.visProp.fontsize)),Math.abs(t)<e.eps?t=s:this.board.canvasWidth+e.eps>t&&t>this.board.canvasWidth-s-e.eps&&(t=this.board.canvasWidth-s),e.eps+s>r&&r>-e.eps?r=s:this.board.canvasHeight+e.eps>r&&r>this.board.canvasHeight-s-e.eps&&(r=this.board.canvasHeight-s)),new o(n.COORDS_BY_SCREEN,[t,r],this.board)},cloneToBackground:function(){var t,e,i,r={};return r.id=this.id+"T"+this.numTraces,r.elementClass=n.OBJECT_CLASS_LINE,this.numTraces++,r.point1=this.point1,r.point2=this.point2,r.stdform=this.stdform,r.board=this.board,r.visProp=l.deepCopy(this.visProp,this.visProp.traceattributes,!0),r.visProp.layer=this.board.options.layer.trace,l.clearVisPropOld(r),r.visPropCalc={visible:l.evaluate(r.visProp.visible)},e=this.getSlope(),t=this.getRise(),r.getSlope=function(){return e},r.getRise=function(){return t},i=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(r),this.board.renderer.enhancedRendering=i,this.traces[r.id]=r.rendNode,this},addTransform:function(t){var e,i=l.isArray(t)?t:[t],r=i.length;for(e=0;e<r;e++)this.point1.transformations.push(i[e]),this.point2.transformations.push(i[e]);return this},snapToGrid:function(t){var e,r,a,c,h,u,d,p,f;return l.evaluate(this.visProp.snaptogrid)?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):l.exists(t)&&(p=l.evaluate(this.visProp.snapsizex),f=l.evaluate(this.visProp.snapsizey),e=new o(n.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this.board),u=e.usrCoords[1],d=e.usrCoords[2],p<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(h=this.board.defaultAxes.x.defaultTicks,p=h.ticksDelta*(l.evaluate(h.visProp.minorticks)+1)),f<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(h=this.board.defaultAxes.y.defaultTicks,f=h.ticksDelta*(l.evaluate(h.visProp.minorticks)+1)),p>0&&f>0&&(r=i.projectPointToLine({coords:e},this,this.board),a=s.subtract([1,Math.round(u/p)*p,Math.round(d/f)*f],r.usrCoords),c=this.board.create("transform",a.slice(1),{type:"translate"}),c.applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var t=l.evaluate(this.visProp.snaptopoints);return this.parents.length<3&&(this.point1.handleSnapToPoints(t),this.point2.handleSnapToPoints(t)),this},X:function(t){var i,r=this.stdform[2];return i=Math.abs(this.point1.coords.usrCoords[0])>e.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1],t=2*(t-.5),(1-Math.abs(t))*i-t*r},Y:function(t){var i,r=this.stdform[1];return i=Math.abs(this.point1.coords.usrCoords[0])>e.eps?this.point1.coords.usrCoords[2]:this.point2.coords.usrCoords[2],t=2*(t-.5),(1-Math.abs(t))*i+t*r},Z:function(t){var i=Math.abs(this.point1.coords.usrCoords[0])>e.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0];return t=2*(t-.5),(1-Math.abs(t))*i},L:function(){return this.point1.Dist(this.point2)},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var t=this.point1.coords.usrCoords,e=this.point2.coords.usrCoords;return[Math.min(t[1],e[1]),Math.max(t[2],e[2]),Math.max(t[1],e[1]),Math.min(t[2],e[2])]},remove:function(){this.removeAllTicks(),a.prototype.remove.call(this)}}),t.createLine=function(e,i,r){var s,n,o,a,h,u,d,p=[],f=!1,m=!1;if(2===i.length){if(l.isArray(i[0])&&i[0].length>1)u=l.copyAttributes(r,e.options,"line","point1"),o=e.create("point",i[0],u);else if(l.isString(i[0])||l.isPoint(i[0]))o=e.select(i[0]);else if(l.isFunction(i[0])&&l.isPoint(i[0]()))o=i[0](),m=!0;else if(l.isFunction(i[0])&&i[0]().length&&i[0]().length>=2)u=l.copyAttributes(r,e.options,"line","point1"),o=c.createPoint(e,i[0](),u),m=!0;else{if(!l.isObject(i[0])||!l.isTransformationOrArray(i[1]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");f=!0,u=l.copyAttributes(r,e.options,"line","point1"),o=e.create("point",[i[0].point1,i[1]],u)}if(f)u=l.copyAttributes(r,e.options,"line","point2"),a=e.create("point",[i[0].point2,i[1]],u);else if(l.isArray(i[1])&&i[1].length>1)u=l.copyAttributes(r,e.options,"line","point2"),a=e.create("point",i[1],u);else if(l.isString(i[1])||l.isPoint(i[1]))a=e.select(i[1]);else if(l.isFunction(i[1])&&l.isPoint(i[1]()))a=i[1](),m=!0;else{if(!(l.isFunction(i[1])&&i[1]().length&&i[1]().length>=2))throw new Error("JSXGraph: Can't create line with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");u=l.copyAttributes(r,e.options,"line","point2"),a=c.createPoint(e,i[1](),u),m=!0}u=l.copyAttributes(r,e.options,"line"),n=new t.Line(e,o,a,u),m?(n.constrained=!0,n.funp1=i[0],n.funp2=i[1]):f||(n.isDraggable=!0),n.setParents([o.id,a.id])}else if(3===i.length){for(d=!0,h=0;h<3;h++)if(l.isNumber(i[h]))p[h]=l.createFunction(i[h]);else{if(!l.isFunction(i[h]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");p[h]=i[h],d=!1}u=l.copyAttributes(r,e.options,"line","point1"),o=d?e.create("point",[p[2]()*p[2]()+p[1]()*p[1](),p[2]()-p[1]()*p[0]()+p[2](),-p[1]()-p[2]()*p[0]()-p[1]()],u):e.create("point",[function(){return.5*(p[2]()*p[2]()+p[1]()*p[1]())},function(){return.5*(p[2]()-p[1]()*p[0]()+p[2]())},function(){return.5*(-p[1]()-p[2]()*p[0]()-p[1]())}],u),u=l.copyAttributes(r,e.options,"line","point2"),a=d?e.create("point",[p[2]()*p[2]()+p[1]()*p[1](),-p[1]()*p[0]()+p[2](),-p[2]()*p[0]()-p[1]()],u):e.create("point",[function(){return p[2]()*p[2]()+p[1]()*p[1]()},function(){return-p[1]()*p[0]()+p[2]()},function(){return-p[2]()*p[0]()-p[1]()}],u),o.prepareUpdate().update(),a.prepareUpdate().update(),u=l.copyAttributes(r,e.options,"line"),n=new t.Line(e,o,a,u),n.isDraggable=d,n.setParents([o,a])}else if(1===i.length&&l.isFunction(i[0])&&2===i[0]().length&&l.isPoint(i[0]()[0])&&l.isPoint(i[0]()[1]))s=i[0](),u=l.copyAttributes(r,e.options,"line"),n=new t.Line(e,s[0],s[1],u),n.constrained=!0,n.funps=i[0],n.setParents(s);else{if(!(1===i.length&&l.isFunction(i[0])&&3===i[0]().length&&l.isNumber(i[0]()[0])&&l.isNumber(i[0]()[1])&&l.isNumber(i[0]()[2])))throw new Error("JSXGraph: Can't create line with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");s=i[0],u=l.copyAttributes(r,e.options,"line","point1"),o=e.create("point",[function(){var t=s();return[.5*(t[2]*t[2]+t[1]*t[1]),.5*(t[2]-t[1]*t[0]+t[2]),.5*(-t[1]-t[2]*t[0]-t[1])]}],u),u=l.copyAttributes(r,e.options,"line","point2"),a=e.create("point",[function(){var t=s();return[t[2]*t[2]+t[1]*t[1],-t[1]*t[0]+t[2],-t[2]*t[0]-t[1]]}],u),u=l.copyAttributes(r,e.options,"line"),n=new t.Line(e,o,a,u),n.constrained=!0,n.funps=i[0],n.setParents([o,a])}return n},t.registerElement("line",t.createLine),t.createSegment=function(t,e,i){var r,s;if(i.straightFirst=!1,i.straightLast=!1,s=l.copyAttributes(i,t.options,"segment"),r=t.create("line",e.slice(0,2),s),3===e.length){if(r.hasFixedLength=!0,l.isNumber(e[2]))r.fixedLength=function(){return e[2]};else{if(!l.isFunction(e[2]))throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof e[2]+"'.\nPossible third parent types: number or function");r.fixedLength=e[2]}r.getParents=function(){return this.parents.concat(this.fixedLength())},r.fixedLengthOldCoords=[],r.fixedLengthOldCoords[0]=new o(n.COORDS_BY_USER,r.point1.coords.usrCoords.slice(1,3),t),r.fixedLengthOldCoords[1]=new o(n.COORDS_BY_USER,r.point2.coords.usrCoords.slice(1,3),t)}return r.elType="segment",r},t.registerElement("segment",t.createSegment),t.createArrow=function(t,e,i){var r,s;return i.straightFirst=!1,i.straightLast=!1,s=l.copyAttributes(i,t.options,"arrow"),r=t.create("line",e,s),r.type=n.OBJECT_TYPE_VECTOR,r.elType="arrow",r},t.registerElement("arrow",t.createArrow),t.createAxis=function(t,e,i){var r,s,o,a,c;if(!l.isArray(e[0])&&!l.isPoint(e[0])||!l.isArray(e[1])&&!l.isPoint(e[1]))throw new Error("JSXGraph: Can't create axis with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");for(a in r=l.copyAttributes(i,t.options,"axis"),o=t.create("line",e,r),o.type=n.OBJECT_TYPE_AXIS,o.isDraggable=!1,o.point1.isDraggable=!1,o.point2.isDraggable=!1,o.ancestors)o.ancestors.hasOwnProperty(a)&&(o.ancestors[a].type=n.OBJECT_TYPE_AXISPOINT);return s=l.copyAttributes(i,t.options,"axis","ticks"),c=l.exists(s.ticksdistance)?s.ticksdistance:l.isArray(s.ticks)?s.ticks:1,o.defaultTicks=t.create("ticks",[o,c],s),o.defaultTicks.dump=!1,o.elType="axis",o.subs={ticks:o.defaultTicks},o.inherits.push(o.defaultTicks),o},t.registerElement("axis",t.createAxis),t.createTangent=function(t,i,s){var o,a,c,h,u;if(1===i.length)o=i[0],a=o.slideObject;else{if(2!==i.length)throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");if(l.isPoint(i[0]))o=i[0],a=i[1];else{if(!l.isPoint(i[1]))throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");a=i[0],o=i[1]}}if(a.elementClass===n.OBJECT_CLASS_LINE?(u=t.create("line",[a.point1,a.point2],s),u.glider=o):a.elementClass===n.OBJECT_CLASS_CURVE&&a.type!==n.OBJECT_TYPE_CONIC?"plot"!==l.evaluate(a.visProp.curvetype)?(u=t.create("line",[function(){var t=a.X,e=a.Y;return-o.X()*r.D(e)(o.position)+o.Y()*r.D(t)(o.position)},function(){return r.D(a.Y)(o.position)},function(){return-r.D(a.X)(o.position)}],s),o.addChild(u),u.glider=o):(u=t.create("line",[function(){var t,e,i,r,s,n,l,c,h,u,d=Math.floor(o.position);if(1===a.bezierDegree)d===a.numberPoints-1&&d--;else{if(3!==a.bezierDegree)return 0;d=3*Math.floor(o.position*(a.numberPoints-1)/3),i=(o.position*(a.numberPoints-1)-d)/3,d>=a.numberPoints-1&&(d=a.numberPoints-4,i=1)}return d<0?1:(1===a.bezierDegree?(t=a.points[d].usrCoords,e=a.points[d+1].usrCoords):(r=a.points[d].usrCoords,s=a.points[d+1].usrCoords,n=a.points[d+2].usrCoords,l=a.points[d+3].usrCoords,c=(1-i)*(1-i)*(s[1]-r[1])+2*(1-i)*i*(n[1]-s[1])+i*i*(l[1]-n[1]),h=(1-i)*(1-i)*(s[2]-r[2])+2*(1-i)*i*(n[2]-s[2])+i*i*(l[2]-n[2]),u=Math.sqrt(c*c+h*h),c/=u,h/=u,t=o.coords.usrCoords,e=[1,t[1]+c,t[2]+h]),t[2]*e[1]-t[1]*e[2])},function(){var t,e,i,r,s,n,l,c,h,u,d=Math.floor(o.position);if(1===a.bezierDegree)d===a.numberPoints-1&&d--;else{if(3!==a.bezierDegree)return 0;d=3*Math.floor(o.position*(a.numberPoints-1)/3),i=(o.position*(a.numberPoints-1)-d)/3,d>=a.numberPoints-1&&(d=a.numberPoints-4,i=1)}return d<0?0:(1===a.bezierDegree?(t=a.points[d].usrCoords,e=a.points[d+1].usrCoords):(r=a.points[d].usrCoords,s=a.points[d+1].usrCoords,n=a.points[d+2].usrCoords,l=a.points[d+3].usrCoords,c=(1-i)*(1-i)*(s[1]-r[1])+2*(1-i)*i*(n[1]-s[1])+i*i*(l[1]-n[1]),h=(1-i)*(1-i)*(s[2]-r[2])+2*(1-i)*i*(n[2]-s[2])+i*i*(l[2]-n[2]),u=Math.sqrt(c*c+h*h),c/=u,h/=u,t=o.coords.usrCoords,e=[1,t[1]+c,t[2]+h]),e[2]-t[2])},function(){var t,e,i,r,s,n,l,c,h,u,d=Math.floor(o.position);if(1===a.bezierDegree)d===a.numberPoints-1&&d--;else{if(3!==a.bezierDegree)return 0;d=3*Math.floor(o.position*(a.numberPoints-1)/3),i=(o.position*(a.numberPoints-1)-d)/3,d>=a.numberPoints-1&&(d=a.numberPoints-4,i=1)}return d<0?0:(1===a.bezierDegree?(t=a.points[d].usrCoords,e=a.points[d+1].usrCoords):(r=a.points[d].usrCoords,s=a.points[d+1].usrCoords,n=a.points[d+2].usrCoords,l=a.points[d+3].usrCoords,c=(1-i)*(1-i)*(s[1]-r[1])+2*(1-i)*i*(n[1]-s[1])+i*i*(l[1]-n[1]),h=(1-i)*(1-i)*(s[2]-r[2])+2*(1-i)*i*(n[2]-s[2])+i*i*(l[2]-n[2]),u=Math.sqrt(c*c+h*h),c/=u,h/=u,t=o.coords.usrCoords,e=[1,t[1]+c,t[2]+h]),t[1]-e[1])}],s),o.addChild(u),u.glider=o):a.type===n.OBJECT_TYPE_TURTLE?(u=t.create("line",[function(){var t=Math.floor(o.position);for(c=0;c<a.objects.length;c++)if(h=a.objects[c],h.type===n.OBJECT_TYPE_CURVE){if(t<h.numberPoints)break;t-=h.numberPoints}return t===h.numberPoints-1&&t--,t<0?1:h.Y(t)*h.X(t+1)-h.X(t)*h.Y(t+1)},function(){var t=Math.floor(o.position);for(c=0;c<a.objects.length;c++)if(h=a.objects[c],h.type===n.OBJECT_TYPE_CURVE){if(t<h.numberPoints)break;t-=h.numberPoints}return t===h.numberPoints-1&&t--,t<0?0:h.Y(t+1)-h.Y(t)},function(){var t=Math.floor(o.position);for(c=0;c<a.objects.length;c++)if(h=a.objects[c],h.type===n.OBJECT_TYPE_CURVE){if(t<h.numberPoints)break;t-=h.numberPoints}return t===h.numberPoints-1&&t--,t<0?0:h.X(t)-h.X(t+1)}],s),o.addChild(u),u.glider=o):a.elementClass!==n.OBJECT_CLASS_CIRCLE&&a.type!==n.OBJECT_TYPE_CONIC||(u=t.create("line",[function(){return e.matVecMult(a.quadraticform,o.coords.usrCoords)[0]},function(){return e.matVecMult(a.quadraticform,o.coords.usrCoords)[1]},function(){return e.matVecMult(a.quadraticform,o.coords.usrCoords)[2]}],s),o.addChild(u),u.glider=o),!l.exists(u))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return u.elType="tangent",u.type=n.OBJECT_TYPE_TANGENT,u.setParents(i),u},t.createRadicalAxis=function(t,i,r){var s,o,a;if(2!==i.length||i[0].elementClass!==n.OBJECT_CLASS_CIRCLE||i[1].elementClass!==n.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent type: [circle,circle]");return o=t.select(i[0]),a=t.select(i[1]),s=t.create("line",[function(){var t=o.stdform,i=a.stdform;return e.matVecMult(e.transpose([t.slice(0,3),i.slice(0,3)]),[i[3],-t[3]])}],r),s.elType="radicalaxis",s.setParents([o.id,a.id]),o.addChild(s),a.addChild(s),s},t.createPolarLine=function(t,e,i){var r,s,o,a,c,h,u;if(e.length>1&&(a=e[0].type===n.OBJECT_TYPE_CONIC||e[0].elementClass===n.OBJECT_CLASS_CIRCLE,c=e[1].type===n.OBJECT_TYPE_CONIC||e[1].elementClass===n.OBJECT_CLASS_CIRCLE,h=l.isPoint(e[0]),u=l.isPoint(e[1])),2!==e.length||!(a&&u||h&&c))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent type: [conic|circle,point], [point,conic|circle]");return u?(s=t.select(e[0]),o=t.select(e[1])):(s=t.select(e[1]),o=t.select(e[0])),r=t.create("tangent",[s,o],i),r.elType="polarline",r},t.registerElement("tangent",t.createTangent),t.registerElement("polar",t.createTangent),t.registerElement("radicalaxis",t.createRadicalAxis),t.registerElement("polarline",t.createPolarLine),{Line:t.Line,createLine:t.createLine,createTangent:t.createTangent,createPolar:t.createTangent,createSegment:t.createSegment,createAxis:t.createAxis,createArrow:t.createArrow,createRadicalAxis:t.createRadicalAxis,createPolarLine:t.createPolarLine}})),define("base/group",["jxg","base/constants","math/math","math/geometry","utils/type"],(function(t,e,i,r,s){"use strict";return t.Group=function(t,i,r,n,o){var a,l,c,h;for(this.board=t,this.objects={},a=this.board.numObjects,this.board.numObjects+=1,""!==i&&s.exists(i)?this.id=i:this.id=this.board.id+"Group"+a,this.board.groups[this.id]=this,this.type=e.OBJECT_TYPE_POINT,this.elementClass=e.OBJECT_CLASS_POINT,""!==r&&s.exists(r)?this.name=r:this.name="group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=o.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],l=s.isArray(n)?n:Array.prototype.slice.call(arguments,3),c=0;c<l.length;c++)h=this.board.select(l[c]),!s.evaluate(h.visProp.fixed)&&s.exists(h.coords)&&this.addPoint(h);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},t.extend(t.Group.prototype,{ungroup:function(){var t,e,i;for(t in this.objects)this.objects.hasOwnProperty(t)&&(e=this.objects[t].point,s.isArray(e.groups)&&(i=s.indexOf(e.groups,this.id))>=0&&delete e.groups[i]);return this.objects={},this},addParents:function(t){var e,i,r;for(r=s.isArray(t)?t:arguments,i=r.length,e=0;e<i;++e)s.isId(this.board,r[e])?this.parents.push(r[e]):s.exists(r[e].id)&&this.parents.push(r[e].id);this.parents=s.uniqueArray(this.parents)},setParents:function(t){return this.parents=[],this.addParents(t),this},getParents:function(){return s.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(t){var e;""!==t&&s.exists(this.objects[t])&&(e=this.objects[t].point,this.coords[e.id]={usrCoords:e.coords.usrCoords.slice(0)})},update:function(){var t,e,n,o,a,l,c,h,u,d,p=null;if(!this.needsUpdate)return this;if(t=this._update_find_drag_type(),"nothing"===t.action)return this._updateCoordsCache(t.id),this;if(p=this.objects[t.id].point,"translation"===t.action)u=[p.coords.usrCoords[1]-this.coords[t.id].usrCoords[1],p.coords.usrCoords[2]-this.coords[t.id].usrCoords[2]];else if("rotation"===t.action||"scaling"===t.action){if(n="rotation"===t.action?"rotationCenter":"scaleCenter",s.isPoint(this[n]))d=this[n].coords.usrCoords.slice(1);else if("centroid"===this[n])d=this._update_centroid_center();else if(s.isArray(this[n]))d=this[n];else{if(!s.isFunction(this[n]))return this;d=this[n]()}if("rotation"===t.action)h=r.rad(this.coords[t.id].usrCoords.slice(1),d,this.objects[t.id].point),u=this.board.create("transform",[h,d[0],d[1]],{type:"rotate"}),u.update();else{if("scaling"!==t.action)return this;if(a=r.distance(this.coords[t.id].usrCoords.slice(1),d),Math.abs(a)<i.eps)return this;a=r.distance(p.coords.usrCoords.slice(1),d)/a,l=this.scaleDirections[t.id].indexOf("x")>=0?a:1,c=this.scaleDirections[t.id].indexOf("y")>=0?a:1,u=this.board.create("transform",[1,0,0,d[0]*(1-l),l,0,d[1]*(1-c),0,c],{type:"generic"}),u.update()}}for(e in this._update_apply_transformation(t,u),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(e))for(o in this.objects[e].descendants)this.objects[e].descendants.hasOwnProperty(o)&&(this.objects[e].descendants.needsUpdate=this.objects[e].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(e in this.board.updateElements(t),this.objects)this.objects.hasOwnProperty(e)&&this._updateCoordsCache(e);return this},_update_find_drag_type:function(){var t,r,n,o="nothing",a=[];for(t in this.objects)this.objects.hasOwnProperty(t)&&(r=this.objects[t].point,r.coords.distance(e.COORDS_BY_USER,this.coords[t])>i.eps&&a.push(r.id));return 0===a.length?{action:o,id:"",changed:a}:(n=a[0],r=this.objects[n].point,a.length>1?o="translation":s.isInArray(this.rotationPoints,r)&&s.exists(this.rotationCenter)?o="rotation":s.isInArray(this.scalePoints,r)&&s.exists(this.scaleCenter)?o="scaling":s.isInArray(this.translationPoints,r)&&(o="translation"),{action:o,id:n,changed:a})},_update_centroid_center:function(){var t,e,i;for(i in t=[0,0],e=0,this.coords)this.coords.hasOwnProperty(i)&&(t[0]+=this.coords[i].usrCoords[1],t[1]+=this.coords[i].usrCoords[2],++e);return e>0&&(t[0]/=e,t[1]/=e),t},_update_apply_transformation:function(t,r){var n,o;for(n in this.objects)this.objects.hasOwnProperty(n)&&(s.exists(this.board.objects[n])?(o=this.objects[n].point,o.id!==t.id?"translation"===t.action?s.isInArray(t.changed,o.id)||o.coords.setCoordinates(e.COORDS_BY_USER,[this.coords[n].usrCoords[1]+r[0],this.coords[n].usrCoords[2]+r[1]]):"rotation"!==t.action&&"scaling"!==t.action||r.applyOnce([o]):"rotation"!==t.action&&"scaling"!==t.action||o.coords.setCoordinates(e.COORDS_BY_USER,i.matVecMult(r.matrix,this.coords[o.id].usrCoords))):delete this.objects[n])},addPoint:function(t){return this.objects[t.id]={point:this.board.select(t)},this._updateCoordsCache(t.id),this.translationPoints.push(t),t.groups.push(this.id),t.groups=s.uniqueArray(t.groups),this},addPoints:function(t){var e;for(e=0;e<t.length;e++)this.addPoint(t[e]);return this},addGroup:function(t){var e;for(e in t.objects)t.objects.hasOwnProperty(e)&&this.addPoint(t.objects[e].point);return this},removePoint:function(t){return delete this.objects[t.id],this},setRotationCenter:function(t){return this.rotationCenter=t,this},setRotationPoints:function(t){return this._setActionPoints("rotation",t)},addRotationPoint:function(t){return this._addActionPoint("rotation",t)},removeRotationPoint:function(t){return this._removeActionPoint("rotation",t)},setTranslationPoints:function(t){return this._setActionPoints("translation",t)},addTranslationPoint:function(t){return this._addActionPoint("translation",t)},removeTranslationPoint:function(t){return this._removeActionPoint("translation",t)},setScaleCenter:function(t){return this.scaleCenter=t,this},setScalePoints:function(t,e){var i,r,n;for(i=s.isArray(t)?t:arguments,n=i.length,r=0;r<n;++r)this.scaleDirections[this.board.select(i[r]).id]=e||"xy";return this._setActionPoints("scale",t)},addScalePoint:function(t,e){return this._addActionPoint("scale",t),this.scaleDirections[this.board.select(t).id]=e||"xy",this},removeScalePoint:function(t){return this._removeActionPoint("scale",t)},_setActionPoints:function(t,e){var i,r,n;for(i=s.isArray(e)?e:arguments,n=i.length,this[t+"Points"]=[],r=0;r<n;++r)this._addActionPoint(t,i[r]);return this},_addActionPoint:function(t,e){return this[t+"Points"].push(this.board.select(e)),this},_removeActionPoint:function(t,e){var i=this[t+"Points"].indexOf(this.board.select(e));return i>-1&&this[t+"Points"].splice(i,1),this},setProperty:function(){t.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var t;for(t in this.objects)this.objects.hasOwnProperty(t)&&this.objects[t].point.setAttribute.apply(this.objects[t].point,arguments);return this}}),t.createGroup=function(e,i,r){var n=s.copyAttributes(r,e.options,"group"),o=new t.Group(e,n.id,n.name,i,n);return o.elType="group",o.setParents(i),o},t.registerElement("group",t.createGroup),{Group:t.Group,createGroup:t.createGroup}})),define("element/conic",["jxg","base/constants","base/coords","math/math","math/numerics","math/geometry","utils/type"],(function(t,e,i,r,s,n,o){"use strict";return t.createEllipse=function(t,r,s){var n,a,l,c,h,u,d,p=[],f=o.copyAttributes(s,t.options,"conic","foci"),m=o.copyAttributes(s,t.options,"conic","center"),b=o.copyAttributes(s,t.options,"conic");for(u=0;u<2;u++)if(r[u].length>1)p[u]=t.create("point",r[u],f);else if(o.isPoint(r[u]))p[u]=t.select(r[u]);else if(o.isFunction(r[u])&&o.isPoint(r[u]()))p[u]=r[u]();else{if(!o.isString(r[u]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");p[u]=t.select(r[u])}if(o.isNumber(r[2]))h=o.createFunction(r[2],t);else if(o.isFunction(r[2])&&o.isNumber(r[2]()))h=r[2];else{if(o.isPoint(r[2]))c=t.select(r[2]);else if(r[2].length>1)c=t.create("point",r[2],f);else if(o.isFunction(r[2])&&o.isPoint(r[2]()))c=r[2]();else{if(!o.isString(r[2]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");c=t.select(r[2])}h=function(){return c.Dist(p[0])+c.Dist(p[1])}}for(o.exists(r[4])||(r[4]=2*Math.PI),o.exists(r[3])||(r[3]=0),l=t.create("point",[function(){return.5*(p[0].X()+p[1].X())},function(){return.5*(p[0].Y()+p[1].Y())}],m),a=t.create("curve",[function(t){return 0},function(t){return 0},r[3],r[4]],b),a.majorAxis=h,d=a.hasPoint,n=function(t,e){var i,r,s,n,o,l,c,u,d;e||(i=h(),r=i*i,s=p[0].X(),n=p[0].Y(),o=p[1].X(),l=p[1].Y(),c=s-o,u=n-l,d=(r-s*s-n*n+o*o+l*l)/(2*i),a.quadraticform=[[d*d-o*o-l*l,d*c/i+o,d*u/i+l],[d*c/i+o,c*c/r-1,c*u/r],[d*u/i+l,c*u/r,u*u/r-1]])},a.X=function(t,e){var i=h(),r=p[1].Dist(p[0]),s=.5*(r*r-i*i)/(r*Math.cos(t)-i),o=Math.atan2(p[1].Y()-p[0].Y(),p[1].X()-p[0].X());return e||n(t,e),p[0].X()+Math.cos(o+t)*s},a.Y=function(t,e){var i=h(),r=p[1].Dist(p[0]),s=.5*(r*r-i*i)/(r*Math.cos(t)-i),n=Math.atan2(p[1].Y()-p[0].Y(),p[1].X()-p[0].X());return p[0].Y()+Math.sin(n+t)*s},a.midpoint=a.center=l,a.type=e.OBJECT_TYPE_CONIC,a.subs={center:a.center},a.inherits.push(a.center,p[0],p[1]),o.isPoint(c)&&a.inherits.push(c),a.hasPoint=function(t,r){var s,n,a,l;return o.evaluate(this.visProp.hasinnerpoints)?(s=p[0].coords,n=p[1].coords,a=this.majorAxis(),l=new i(e.COORDS_BY_SCREEN,[t,r],this.board),l.distance(e.COORDS_BY_USER,s)+l.distance(e.COORDS_BY_USER,n)<=a):d.apply(this,arguments)},l.addChild(a),u=0;u<2;u++)o.isPoint(p[u])&&p[u].addChild(a);return o.isPoint(c)&&c.addChild(a),a.setParents(r),a},t.createHyperbola=function(t,i,r){var s,n,a,l,c,h,u=[],d=o.copyAttributes(r,t.options,"conic","foci"),p=o.copyAttributes(r,t.options,"conic","center"),f=o.copyAttributes(r,t.options,"conic");for(h=0;h<2;h++)if(i[h].length>1)u[h]=t.create("point",i[h],d);else if(o.isPoint(i[h]))u[h]=t.select(i[h]);else if(o.isFunction(i[h])&&o.isPoint(i[h]()))u[h]=i[h]();else{if(!o.isString(i[h]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");u[h]=t.select(i[h])}if(o.isNumber(i[2]))c=o.createFunction(i[2],t);else if(o.isFunction(i[2])&&o.isNumber(i[2]()))c=i[2];else{if(o.isPoint(i[2]))l=t.select(i[2]);else if(i[2].length>1)l=t.create("point",i[2],d);else if(o.isFunction(i[2])&&o.isPoint(i[2]()))l=i[2]();else{if(!o.isString(i[2]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");l=t.select(i[2])}c=function(){return l.Dist(u[0])-l.Dist(u[1])}}for(o.exists(i[4])||(i[4]=1.0001*Math.PI),o.exists(i[3])||(i[3]=-1.0001*Math.PI),a=t.create("point",[function(){return.5*(u[0].X()+u[1].X())},function(){return.5*(u[0].Y()+u[1].Y())}],p),n=t.create("curve",[function(t){return 0},function(t){return 0},i[3],i[4]],f),n.majorAxis=c,s=function(t,e){var i,r,s,o,a,l,h,d,p;e||(i=c(),r=i*i,s=u[0].X(),o=u[0].Y(),a=u[1].X(),l=u[1].Y(),h=s-a,d=o-l,p=(r-s*s-o*o+a*a+l*l)/(2*i),n.quadraticform=[[p*p-a*a-l*l,p*h/i+a,p*d/i+l],[p*h/i+a,h*h/r-1,h*d/r],[p*d/i+l,h*d/r,d*d/r-1]])},n.X=function(t,e){var i=c(),r=u[1].Dist(u[0]),n=.5*(r*r-i*i)/(r*Math.cos(t)+i),o=Math.atan2(u[1].Y()-u[0].Y(),u[1].X()-u[0].X());return e||s(t,e),u[0].X()+Math.cos(o+t)*n},n.Y=function(t,e){var i=c(),r=u[1].Dist(u[0]),s=.5*(r*r-i*i)/(r*Math.cos(t)+i),n=Math.atan2(u[1].Y()-u[0].Y(),u[1].X()-u[0].X());return u[0].Y()+Math.sin(n+t)*s},n.midpoint=n.center=a,n.subs={center:n.center},n.inherits.push(n.center,u[0],u[1]),o.isPoint(l)&&n.inherits.push(l),n.type=e.OBJECT_TYPE_CONIC,a.addChild(n),h=0;h<2;h++)o.isPoint(u[h])&&u[h].addChild(n);return o.isPoint(l)&&l.addChild(n),n.setParents(i),n},t.createParabola=function(t,i,r){var s,a,l,c,h=i[0],u=i[1],d=o.copyAttributes(r,t.options,"conic","foci"),p=o.copyAttributes(r,t.options,"conic","center"),f=o.copyAttributes(r,t.options,"conic");if(i[0].length>1)h=t.create("point",i[0],d);else if(o.isPoint(i[0]))h=t.select(i[0]);else if(o.isFunction(i[0])&&o.isPoint(i[0]()))h=i[0]();else{if(!o.isString(i[0]))throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,line]");h=t.select(i[0])}return o.isArray(u)&&2==u.length&&(c=o.copyAttributes(r,t.options,"conic","line"),u=t.create("line",u,c)),o.exists(i[3])||(i[3]=2*Math.PI),o.exists(i[2])||(i[2]=0),l=t.create("point",[function(){return n.projectPointToLine(h,u,t).usrCoords}],p),a=t.create("curve",[function(t){return 0},function(t){return 0},i[2],i[3]],f),a.midpoint=a.center=l,a.subs={center:a.center},a.inherits.push(a.center),s=function(t,e){var i,r,s,n,o,l;e||(i=u.stdform[1],r=u.stdform[2],s=u.stdform[0],n=i*i+r*r,o=h.X(),l=h.Y(),a.quadraticform=[[s*s-n*(o*o+l*l),s*i+n*o,s*r+n*l],[s*i+n*o,-r*r,i*r],[s*r+n*l,i*r,-i*i]])},a.X=function(t,e){var i,r,o=u.getAngle(),a=n.distPointLine(h.coords.usrCoords,u.stdform),l=u.point1.coords.usrCoords,c=u.point2.coords.usrCoords,d=h.coords.usrCoords;return 0===l[0]?l=[1,c[1]+u.stdform[2],c[2]-u.stdform[1]]:0===c[0]&&(c=[1,l[1]+u.stdform[2],l[2]-u.stdform[1]]),r=(c[1]-l[1])*(d[2]-l[2])-(c[2]-l[2])*(d[1]-l[1])>=0?1:-1,i=r*a/(1-Math.sin(t)),e||s(t,e),h.X()+Math.cos(t+o)*i},a.Y=function(t,e){var i,r,s=u.getAngle(),o=n.distPointLine(h.coords.usrCoords,u.stdform),a=u.point1.coords.usrCoords,l=u.point2.coords.usrCoords,c=h.coords.usrCoords;return 0===a[0]?a=[1,l[1]+u.stdform[2],l[2]-u.stdform[1]]:0===l[0]&&(l=[1,a[1]+u.stdform[2],a[2]-u.stdform[1]]),r=(l[1]-a[1])*(c[2]-a[2])-(l[2]-a[2])*(c[1]-a[1])>=0?1:-1,i=r*o/(1-Math.sin(t)),h.Y()+Math.sin(t+s)*i},a.type=e.OBJECT_TYPE_CONIC,l.addChild(a),o.isPoint(h)&&(h.addChild(a),a.inherits.push(h)),u.addChild(a),a.setParents(i),a},t.createConic=function(t,i,n){var a,l,c,h,u,d,p,f,m,b,v,g,y,_,C=[[1,0,0],[0,1,0],[0,0,1]],P=[[1,0,0],[0,1,0],[0,0,1]],O=[],x=[],E=o.copyAttributes(n,t.options,"conic","point"),w=o.copyAttributes(n,t.options,"conic","center"),S=o.copyAttributes(n,t.options,"conic");if(5===i.length)_=!0;else{if(6!==i.length)throw new Error("JSXGraph: Can't create generic Conic with "+i.length+" parameters.");_=!1}if(_)for(g=0;g<5;g++)if(i[g].length>1)O[g]=t.create("point",i[g],E);else if(o.isPoint(i[g]))O[g]=t.select(i[g]);else if(o.isFunction(i[g])&&o.isPoint(i[g]()))O[g]=i[g]();else{if(!o.isString(i[g]))throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof i[g]+"'.\nPossible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]");O[g]=t.select(i[g])}else y=[[0,0,0],[0,0,0],[0,0,0]],y[0][0]=o.isFunction(i[2])?function(){return i[2]()}:function(){return i[2]},y[0][1]=o.isFunction(i[4])?function(){return i[4]()}:function(){return i[4]},y[0][2]=o.isFunction(i[5])?function(){return i[5]()}:function(){return i[5]},y[1][1]=o.isFunction(i[0])?function(){return i[0]()}:function(){return i[0]},y[1][2]=o.isFunction(i[3])?function(){return i[3]()}:function(){return i[3]},y[2][2]=o.isFunction(i[1])?function(){return i[1]()}:function(){return i[1]};if(u=function(t){var e,i;for(e=0;e<3;e++)for(i=e;i<3;i++)t[e][i]+=t[i][e];for(e=0;e<3;e++)for(i=0;i<e;i++)t[e][i]=t[i][e];return t},h=function(t,e){var i,r,s=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i++)for(r=0;r<3;r++)s[i][r]=t[i]*e[r];return u(s)},c=function(t,e,i){var s,n,o,a,l,c=[[0,0,0],[0,0,0],[0,0,0]];for(l=r.matVecMult(e,i),o=r.innerProduct(i,l),l=r.matVecMult(t,i),a=r.innerProduct(i,l),s=0;s<3;s++)for(n=0;n<3;n++)c[s][n]=o*t[s][n]-a*e[s][n];return c},l=t.create("curve",[function(t){return 0},function(t){return 0},0,2*Math.PI],S),a=function(t,e){var i,n,a,u;if(!e){if(_){for(i=0;i<5;i++)x[i]=O[i].coords.usrCoords;b=h(r.crossProduct(x[0],x[1]),r.crossProduct(x[2],x[3])),v=h(r.crossProduct(x[0],x[2]),r.crossProduct(x[1],x[3])),P=c(b,v,x[4])}else for(i=0;i<3;i++)for(n=i;n<3;n++)P[i][n]=y[i][n](),n>i&&(P[n][i]=P[i][n]);for(l.quadraticform=P,d=s.Jacobi(P),d[0][0][0]<0&&(d[0][0][0]*=-1,d[0][1][1]*=-1,d[0][2][2]*=-1),i=0;i<3;i++){for(a=0,n=0;n<3;n++)a+=d[1][n][i]*d[1][n][i];a=Math.sqrt(a)}C=d[1],m=Math.sqrt(Math.abs(d[0][0][0])),p=Math.sqrt(Math.abs(d[0][1][1])),f=Math.sqrt(Math.abs(d[0][2][2]))}return d[0][1][1]<=0&&d[0][2][2]<=0?u=r.matVecMult(C,[1/m,Math.cos(t)/p,Math.sin(t)/f]):d[0][1][1]<=0&&d[0][2][2]>0?u=r.matVecMult(C,[Math.cos(t)/m,1/p,Math.sin(t)/f]):d[0][2][2]<0&&(u=r.matVecMult(C,[Math.sin(t)/m,Math.cos(t)/p,1/f])),o.exists(u)?(u[1]/=u[0],u[2]/=u[0],u[0]=1):u=[1,NaN,NaN],u},l.X=function(t,e){return a(t,e)[1]},l.Y=function(t,e){return a(t,e)[2]},l.midpoint=t.create("point",[function(){var t=l.quadraticform;return[t[1][1]*t[2][2]-t[1][2]*t[1][2],t[1][2]*t[0][2]-t[2][2]*t[0][1],t[0][1]*t[1][2]-t[1][1]*t[0][2]]}],w),l.type=e.OBJECT_TYPE_CONIC,l.center=l.midpoint,l.subs={center:l.center},l.inherits.push(l.center),l.inherits=l.inherits.concat(O),_){for(g=0;g<5;g++)o.isPoint(O[g])&&O[g].addChild(l);l.setParents(i)}return l.addChild(l.center),l},t.registerElement("ellipse",t.createEllipse),t.registerElement("hyperbola",t.createHyperbola),t.registerElement("parabola",t.createParabola),t.registerElement("conic",t.createConic),{createEllipse:t.createEllipse,createHyperbola:t.createHyperbola,createParabola:t.createParabola,createConic:t.createConic}})),define("base/circle",["jxg","base/element","base/coords","base/constants","element/conic","parser/geonext","utils/type"],(function(t,e,i,r,s,n,o){"use strict";return t.Circle=function(t,e,i,s,n){this.constructor(t,n,r.OBJECT_TYPE_CIRCLE,r.OBJECT_CLASS_CIRCLE),this.method=e,this.midpoint=this.board.select(i),this.center=this.board.select(i),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],"twoPoints"===e?(this.point2=t.select(s),this.radius=this.Radius()):"pointRadius"===e?(this.gxtterm=s,this.updateRadius=o.createFunction(s,this.board,null,!0),this.updateRadius()):"pointLine"===e?(this.line=t.select(s),this.radius=this.line.point1.coords.distance(r.COORDS_BY_USER,this.line.point2.coords)):"pointCircle"===e&&(this.circle=t.select(s),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),o.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),"pointRadius"===e?this.notifyParents(s):"pointLine"===e?this.line.addChild(this):"pointCircle"===e?this.circle.addChild(this):"twoPoints"===e&&(o.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=o.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",radius:"Radius",center:"center",line:"line",point2:"point2"})},t.Circle.prototype=new e,t.extend(t.Circle.prototype,{hasPoint:function(t,e){var s,n,a,l,c,h=this.center.coords.usrCoords,u=new i(r.COORDS_BY_SCREEN,[t,e],this.board),d=this.Radius();return o.isObject(o.evaluate(this.visProp.precision))?(n=this.board._inputDevice,s=o.evaluate(this.visProp.precision[n])):s=this.board.options.precision.hasPoint,a=h[1]-u.usrCoords[1],l=h[2]-u.usrCoords[2],c=Math.sqrt(a*a+l*l),s+=.5*o.evaluate(this.visProp.strokewidth),s/=Math.sqrt(this.board.unitX*this.board.unitY),o.evaluate(this.visProp.hasinnerpoints)?c<d+s:Math.abs(c-d)<s},generatePolynomial:function(t){var e=this.center.symbolic.x,i=this.center.symbolic.y,r=t.symbolic.x,s=t.symbolic.y,n=this.generateRadiusSquared();return""===n?[]:["(("+r+")-("+e+"))^2 + (("+s+")-("+i+"))^2 - ("+n+")"]},generateRadiusSquared:function(){var t,e,i,r,s,n,a="";return"twoPoints"===this.method?(t=this.center.symbolic.x,e=this.center.symbolic.y,i=this.point2.symbolic.x,r=this.point2.symbolic.y,a="(("+i+")-("+t+"))^2 + (("+r+")-("+e+"))^2"):"pointRadius"===this.method?o.isNumber(this.radius)&&(a=(this.radius*this.radius).toString()):"pointLine"===this.method?(i=this.line.point1.symbolic.x,r=this.line.point1.symbolic.y,s=this.line.point2.symbolic.x,n=this.line.point2.symbolic.y,a="(("+i+")-("+s+"))^2 + (("+r+")-("+n+"))^2"):"pointCircle"===this.method&&(a=this.circle.Radius()),a},update:function(){var t,e,s,n,a,l;if(this.needsUpdate)for(o.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),"pointLine"===this.method?this.radius=this.line.point1.coords.distance(r.COORDS_BY_USER,this.line.point2.coords):"pointCircle"===this.method?this.radius=this.circle.Radius():"pointRadius"===this.method&&(this.radius=this.updateRadius()),this.updateStdform(),this.updateQuadraticform(),s=this.center.coords.usrCoords[0],t=this.center.coords.usrCoords[1]/s,e=this.center.coords.usrCoords[2]/s,s/=s,n=this.Radius(),a=.551915024494,this.numberPoints=13,this.dataX=[t+n,t+n,t+n*a,t,t-n*a,t-n,t-n,t-n,t-n*a,t,t+n*a,t+n,t+n],this.dataY=[e,e+n*a,e+n,e+n,e+n,e+n*a,e,e-n*a,e-n,e-n,e-n,e-n*a,e],this.bezierDegree=3,l=0;l<this.numberPoints;l++)this.points[l]=new i(r.COORDS_BY_USER,[this.dataX[l],this.dataY[l]],this.board);return this},updateQuadraticform:function(){var t=this.center,e=t.X(),i=t.Y(),r=this.Radius();this.quadraticform=[[e*e+i*i-r*r,-e,-i],[-e,1,0],[-i,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=o.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(t){o.isString(t)&&n.findDependencies(this,t,this.board)},setRadius:function(t){return this.updateRadius=o.createFunction(t,this.board,null,!0),this.board.update(),this},Radius:function(t){return o.exists(t)?(this.setRadius(t),this.Radius()):"twoPoints"===this.method?o.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||o.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):"pointLine"===this.method||"pointCircle"===this.method?this.radius:"pointRadius"===this.method?this.updateRadius():NaN},getRadius:function(){return t.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var t,e,s=this.Radius(),n=this.center.coords.usrCoords,a=.7071067811865476;switch(o.evaluate(this.visProp.label.position)){case"lft":t=n[1]-s,e=n[2];break;case"llft":t=n[1]-a*s,e=n[2]-a*s;break;case"rt":t=n[1]+s,e=n[2];break;case"lrt":t=n[1]+a*s,e=n[2]-a*s;break;case"urt":t=n[1]+a*s,e=n[2]+a*s;break;case"top":t=n[1],e=n[2]+s;break;case"bot":t=n[1],e=n[2]-s;break;default:t=n[1]-a*s,e=n[2]+a*s}return new i(r.COORDS_BY_USER,[t,e],this.board)},cloneToBackground:function(){var t,e=this.Radius(),i={id:this.id+"T"+this.numTraces,elementClass:r.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return e},getRadius:function(){return e},board:this.board,visProp:o.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return i.visProp.layer=this.board.options.layer.trace,this.numTraces++,o.clearVisPropOld(i),i.visPropCalc={visible:o.evaluate(i.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(i),this.board.renderer.enhancedRendering=t,this.traces[i.id]=i.rendNode,this},addTransform:function(t){var e,i=o.isArray(t)?t:[t],r=i.length;for(e=0;e<r;e++)this.center.transformations.push(i[e]),"twoPoints"===this.method&&this.point2.transformations.push(i[e]);return this},snapToGrid:function(){var t=o.evaluate(this.visProp.snaptogrid);return this.center.handleSnapToGrid(t,!0),"twoPoints"===this.method&&this.point2.handleSnapToGrid(t,!0),this},snapToPoints:function(){var t=o.evaluate(this.visProp.snaptopoints);return this.center.handleSnapToPoints(t),"twoPoints"===this.method&&this.point2.handleSnapToPoints(t),this},X:function(t){return this.Radius()*Math.cos(2*t*Math.PI)+this.center.coords.usrCoords[1]},Y:function(t){return this.Radius()*Math.sin(2*t*Math.PI)+this.center.coords.usrCoords[2]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var t=this.Radius();return t*t*Math.PI},bounds:function(){var t=this.center.coords.usrCoords,e=this.Radius();return[t[1]-e,t[2]+e,t[1]+e,t[2]-e]},getParents:function(){return 1===this.parents.length?this.parents.concat(this.radius):this.parents}}),t.createCircle=function(e,i,n){var a,l,c,h,u,d=["center","point2"];if(l=[],u=e.select(i[0]),o.isObject(u)&&u.elementClass===r.OBJECT_CLASS_CIRCLE&&o.isTransformationOrArray(i[1]))return h=o.copyAttributes(n,e.options,"circle"),a=s.createEllipse(e,[u.center,u.center,function(){return 2*u.Radius()}],h),a.addTransform(i[1]),a;for(c=0;c<i.length;c++)if(o.isPointType(e,i[c])){if(l=l.concat(o.providePoints(e,[i[c]],n,"circle",[d[c]])),!1===l[l.length-1])throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else l.push(i[c]);if(h=o.copyAttributes(n,e.options,"circle"),2===l.length&&o.isPoint(l[0])&&o.isPoint(l[1]))a=new t.Circle(e,"twoPoints",l[0],l[1],h);else if((o.isNumber(l[0])||o.isFunction(l[0])||o.isString(l[0]))&&o.isPoint(l[1]))a=new t.Circle(e,"pointRadius",l[1],l[0],h);else if((o.isNumber(l[1])||o.isFunction(l[1])||o.isString(l[1]))&&o.isPoint(l[0]))a=new t.Circle(e,"pointRadius",l[0],l[1],h);else if(l[0].elementClass===r.OBJECT_CLASS_CIRCLE&&o.isPoint(l[1]))a=new t.Circle(e,"pointCircle",l[1],l[0],h);else if(l[1].elementClass===r.OBJECT_CLASS_CIRCLE&&o.isPoint(l[0]))a=new t.Circle(e,"pointCircle",l[0],l[1],h);else if(l[0].elementClass===r.OBJECT_CLASS_LINE&&o.isPoint(l[1]))a=new t.Circle(e,"pointLine",l[1],l[0],h);else if(l[1].elementClass===r.OBJECT_CLASS_LINE&&o.isPoint(l[0]))a=new t.Circle(e,"pointLine",l[0],l[1],h);else{if(!(3===i.length&&o.isPoint(l[0])&&o.isPoint(l[1])&&o.isPoint(l[2])))throw new Error("JSXGraph: Can't create circle with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]");if(!t.elements.circumcircle)throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");a=t.elements.circumcircle(e,l,h)}for(a.isDraggable=!0,a.setParents(l),a.elType="circle",c=0;c<l.length;c++)o.isPoint(l[c])&&a.inherits.push(l[c]);return a},t.registerElement("circle",t.createCircle),{Circle:t.Circle,createCircle:t.createCircle}})),define("base/polygon",["jxg","base/constants","base/coords","math/statistics","math/geometry","utils/type","base/element"],(function(t,e,i,r,s,n,o){"use strict";return t.Polygon=function(i,r,s){this.constructor(i,s,e.OBJECT_TYPE_POLYGON,e.OBJECT_CLASS_AREA);var o,a,l,c,h,u=n.copyAttributes(s,i.options,"polygon","borders");for(this.withLines=s.withlines,this.attr_line=u,this.vertices=[],o=0;o<r.length;o++)this.vertices[o]=this.board.select(r[o]);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(l=this.vertices.length-1,c=0;c<l;c++)o=(c+1)%l,u.id=u.ids&&u.ids[o],u.name=u.names&&u.names[o],u.strokecolor=n.isArray(u.colors)&&u.colors[o%u.colors.length]||u.strokecolor,u.visible=n.exists(s.borders.visible)?s.borders.visible:s.visible,!1===u.strokecolor&&(u.strokecolor="none"),a=i.create("segment",[this.vertices[o],this.vertices[o+1]],u),a.dump=!1,this.borders[o]=a,a.parentPolygon=this;for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),o=0;o<this.vertices.length-1;o++)h=this.board.select(this.vertices[o]),n.exists(h._is_new)?(this.addChild(h),delete h._is_new):h.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=t.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",Length:"Perimeter",boundingBox:"boundingBox",bounds:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints"})},t.Polygon.prototype=new o,t.extend(t.Polygon.prototype,{pnpoly:function(t,r,s){var n,o,a,l,c,h,u=this.vertices,d=!1;for(s===e.COORDS_BY_USER?(h=new i(e.COORDS_BY_USER,[t,r],this.board),l=h.scrCoords[1],c=h.scrCoords[2]):(l=t,c=r),a=this.vertices.length,n=0,o=a-2;n<a-1;o=n++)u[n].coords.scrCoords[2]>c!=u[o].coords.scrCoords[2]>c&&l<(u[o].coords.scrCoords[1]-u[n].coords.scrCoords[1])*(c-u[n].coords.scrCoords[2])/(u[o].coords.scrCoords[2]-u[n].coords.scrCoords[2])+u[n].coords.scrCoords[1]&&(d=!d);return d},hasPoint:function(t,e){var i,r;if(n.evaluate(this.visProp.hasinnerpoints)&&this.pnpoly(t,e))return!0;for(r=this.borders.length,i=0;i<r;i++)if(this.borders[i].hasPoint(t,e))return!0;return!1},updateRenderer:function(){var t,e;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(e=this.vertices.length,this.isReal=!0,t=0;t<e;++t)if(!this.vertices[t].isReal){this.isReal=!1;break}this.isReal||this.updateVisibility(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var t,r,s,n,o;if(0===this.vertices.length)return new i(e.COORDS_BY_USER,[1,0,0],this.board);for(t=this.vertices[0].X(),r=this.vertices[0].Y(),s=t,n=r,o=0;o<this.vertices.length;o++)this.vertices[o].X()<t&&(t=this.vertices[o].X()),this.vertices[o].X()>s&&(s=this.vertices[o].X()),this.vertices[o].Y()>r&&(r=this.vertices[o].Y()),this.vertices[o].Y()<n&&(n=this.vertices[o].Y());return new i(e.COORDS_BY_USER,[.5*(t+s),.5*(r+n)],this.board)},getLabelAnchor:t.shortcut(t.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var t,e={};return e.id=this.id+"T"+this.numTraces,this.numTraces++,e.vertices=this.vertices,e.visProp=n.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,e.board=this.board,n.clearVisPropOld(e),e.visPropCalc={visible:n.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},hideElement:function(e){var i;if(t.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!e)for(i=0;i<this.borders.length;i++)this.borders[i].hideElement();this.hasLabel&&n.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(e){var i;if(t.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!e)for(i=0;i<this.borders.length;i++)this.borders[i].showElement().updateRenderer();return n.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(s.signedPolygon(this.vertices,!0))},Perimeter:function(){var t,e=this.vertices.length,i=0;for(t=1;t<e;++t)i+=this.vertices[t].Dist(this.vertices[t-1]);return i},boundingBox:function(){var t,e,i=[0,0,0,0],r=this.vertices.length-1;if(0===r)return i;for(i[0]=this.vertices[0].X(),i[2]=i[0],i[1]=this.vertices[0].Y(),i[3]=i[1],t=1;t<r;++t)e=this.vertices[t].X(),e<i[0]?i[0]=e:e>i[2]&&(i[2]=e),e=this.vertices[t].Y(),e>i[1]?i[1]=e:e<i[3]&&(i[3]=e);return i},bounds:function(){return this.boundingBox()},remove:function(){var t;for(t=0;t<this.borders.length;t++)this.board.removeObject(this.borders[t]);o.prototype.remove.call(this)},findPoint:function(t){var e;if(!n.isPoint(t))return-1;for(e=0;e<this.vertices.length;e++)if(this.vertices[e].id===t.id)return e;return-1},addPoints:function(t){var e=Array.prototype.slice.call(arguments);return this.insertPoints.apply(this,[this.vertices.length-2].concat(e))},insertPoints:function(t,e){var i,r,s=[];if(0===arguments.length)return this;if(t<0||t>this.vertices.length-2)return this;for(i=1;i<arguments.length;i++)n.isPoint(arguments[i])&&s.push(arguments[i]);if(r=this.vertices.slice(0,t+1).concat(s),this.vertices=r.concat(this.vertices.slice(t+1)),this.withLines){for(r=this.borders.slice(0,t),this.board.removeObject(this.borders[t]),i=0;i<s.length;i++)r.push(this.board.create("segment",[this.vertices[t+i],this.vertices[t+i+1]],this.attr_line));r.push(this.board.create("segment",[this.vertices[t+s.length],this.vertices[t+s.length+1]],this.attr_line)),this.borders=r.concat(this.borders.slice(t+1))}return this.board.update(),this},removePoints:function(t){var e,i,r,s=[],o=[],a=[],l=[];for(this.vertices=this.vertices.slice(0,this.vertices.length-1),e=0;e<arguments.length;e++)r=arguments[e],n.isPoint(r)&&(r=this.findPoint(r)),n.isNumber(r)&&r>-1&&r<this.vertices.length&&-1===n.indexOf(a,r)&&a.push(r);for(e=0;e<a.length;e++)this.vertices[a[e]].removeChild(this);for(a=a.sort(),s=this.vertices.slice(),o=this.borders.slice(),this.withLines&&l.push([a[a.length-1]]),e=a.length-1;e>-1;e--)s[a[e]]=-1,this.withLines&&a[e]-1>a[e-1]&&(l[l.length-1][1]=a[e],l.push([a[e-1]]));for(this.withLines&&(l[l.length-1][1]=a[0]),this.vertices=[],e=0;e<s.length;e++)n.isPoint(s[e])&&this.vertices.push(s[e]);if(this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(e=0;e<l.length;e++){for(i=l[e][1]-1;i<l[e][0]+1;i++)i<0?(i=0,this.board.removeObject(this.borders[o.length-1]),o[o.length-1]=-1):i>o.length-1&&(i=o.length-1),this.board.removeObject(this.borders[i]),o[i]=-1;0!==l[e][1]&&l[e][0]!==s.length-1&&(o[l[e][0]-1]=this.board.create("segment",[s[Math.max(l[e][1]-1,0)],s[Math.min(l[e][0]+1,this.vertices.length-1)]],this.attr_line))}for(this.borders=[],e=0;e<o.length;e++)-1!==o[e]&&this.borders.push(o[e]);l[0][1]!==this.vertices.length-1&&0!==l[l.length-1][1]||this.borders.push(this.board.create("segment",[this.vertices[0],this.vertices[this.vertices.length-2]],this.attr_line))}return this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var t,e=o.prototype.getAttributes.call(this);if(this.withLines)for(e.lines=e.lines||{},e.lines.ids=[],e.lines.colors=[],t=0;t<this.borders.length;t++)e.lines.ids.push(this.borders[t].id),e.lines.colors.push(this.borders[t].visProp.strokecolor);return e},snapToGrid:function(){var t,e;for(e=!!n.evaluate(this.visProp.snaptogrid),t=0;t<this.vertices.length;t++)this.vertices[t].handleSnapToGrid(e,!0)},setPositionDirectly:function(t,e,s){var n,o,a,l,c=new i(t,e,this.board),h=new i(t,s,this.board);for(l=this.vertices.length-1,a=0;a<l;a++)if(!this.vertices[a].draggable())return this;return n=r.subtract(c.usrCoords,h.usrCoords),o=this.board.create("transform",n.slice(1),{type:"translate"}),o.applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(e){var i,r,s,n,o,a,l,c=t.Math.Geometry.sortVertices(this.vertices),h=t.Math.Geometry.sortVertices(e.vertices),u=c.length-1,d=h.length-1,p=[],f=function(t,e,i){return(e[1]-t[1])*(i[2]-t[2])-(e[2]-t[2])*(i[1]-t[1])>=0};for(s=0;s<d;s++)p.push(h[s]);for(s=0;s<u;s++)for(r=p.slice(0),i=r.length,p=[],o=r[i-1],n=0;n<i;n++)a=r[n],f(c[s],c[s+1],a)?(f(c[s],c[s+1],o)||(l=t.Math.Geometry.meetSegmentSegment(o,a,c[s],c[s+1]),l[0][1]/=l[0][0],l[0][2]/=l[0][0],l[0][0]=1,p.push(l[0])),p.push(a)):f(c[s],c[s+1],o)&&(l=t.Math.Geometry.meetSegmentSegment(o,a,c[s],c[s+1]),l[0][1]/=l[0][0],l[0][2]/=l[0][0],l[0][0]=1,p.push(l[0])),o=a;return p},intersect:function(t){return this.sutherlandHodgman(t)}}),t.createPolygon=function(i,r,s){var o,a,l,c,h,u,d=[],p=!1;if(h=n.copyAttributes(s,i.options,"polygon"),c=i.select(r[0]),null===c&&(c=r[0]),n.isObject(c)&&c.type===e.OBJECT_TYPE_POLYGON&&n.isTransformationOrArray(r[1]))for(p=!0,l=c.vertices.length-1,u=n.copyAttributes(s,i.options,"polygon","vertices"),a=0;a<l;a++)u.withlabel&&(u.name=""===c.vertices[a].name?"":c.vertices[a].name+"'"),d.push(i.create("point",[c.vertices[a],r[1]],u));else if(!1===(d=n.providePoints(i,r,s,"polygon",["vertices"])))throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(h=n.copyAttributes(s,i.options,"polygon"),o=new t.Polygon(i,d,h),o.isDraggable=!0,p)for(o.prepareUpdate().update().updateVisibility().updateRenderer(),l=c.vertices.length-1,a=0;a<l;a++)d[a].prepareUpdate().update().updateVisibility().updateRenderer();return o},t.createRegularPolygon=function(t,i,r){var s,o,a,l,c,h,u,d=[];if(c=i.length,a=i[c-1],n.isNumber(a)&&(3!==i.length||a<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(n.isNumber(t.select(a))?(c--,h=!1):(a=c,h=!0),!1===(d=n.providePoints(t,i.slice(0,c),r,"regularpolygon",["vertices"])))throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(u=n.copyAttributes(r,t.options,"regularpolygon","vertices"),o=2;o<a;o++)l=t.create("transform",[Math.PI*(2-(a-2)/a),d[o-1]],{type:"rotate"}),h?(d[o].addTransform(d[o-2],l),d[o].fullUpdate()):(n.isArray(u.ids)&&u.ids.length>=a-2&&(u.id=u.ids[o-2]),d[o]=t.create("point",[d[o-2],l],u),d[o].type=e.OBJECT_TYPE_CAS,d[o].isDraggable=!0,d[o].visProp.fixed=!1);return u=n.copyAttributes(r,t.options,"regularpolygon"),s=t.create("polygon",d,u),s.elType="regularpolygon",s},t.createPolygonalChain=function(t,e,i){var r,s;return r=n.copyAttributes(i,t.options,"polygonalchain"),s=t.create("polygon",e,r),s.elType="polygonalchain",s.vertices.pop(),t.removeObject(s.borders[s.borders.length-1]),s.borders.pop(),s},t.registerElement("polygon",t.createPolygon),t.registerElement("regularpolygon",t.createRegularPolygon),t.registerElement("polygonalchain",t.createPolygonalChain),{Polygon:t.Polygon,createPolygon:t.createPolygon,createRegularPolygon:t.createRegularPolygon}})),define("base/curve",["jxg","base/constants","base/coords","base/element","math/math","math/numerics","math/plot","math/geometry","parser/geonext","utils/type","math/qdt"],(function(t,e,i,r,s,n,o,a,l,c,h){"use strict";return t.Curve=function(t,i,r){this.constructor(t,r,e.OBJECT_TYPE_CURVE,e.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=c.evaluate(this.visProp.numberpointshigh),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,c.exists(i[0])?this.varname=i[0]:this.varname="x",this.xterm=i[1],this.yterm=i[2],this.generateTerm(this.varname,this.xterm,this.yterm,i[3],i[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),c.isString(this.xterm)&&this.notifyParents(this.xterm),c.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=c.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo"})},t.Curve.prototype=new r,t.extend(t.Curve.prototype,{minX:function(){var t;return"polar"===c.evaluate(this.visProp.curvetype)?0:(t=new i(e.COORDS_BY_SCREEN,[.1*-this.board.canvasWidth,0],this.board,!1),t.usrCoords[1])},maxX:function(){var t;return"polar"===c.evaluate(this.visProp.curvetype)?2*Math.PI:(t=new i(e.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1),t.usrCoords[1])},X:function(t){return NaN},Y:function(t){return NaN},Z:function(t){return 1},hasPoint:function(t,r,n){var o,l,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E=[],w=c.evaluate(this.visProp.numberpointslow),S=(this.maxX()-this.minX())/w,T=1/0;if(c.isObject(c.evaluate(this.visProp.precision))?(y=this.board._inputDevice,g=c.evaluate(this.visProp.precision[y])):g=this.board.options.precision.hasPoint,l=new i(e.COORDS_BY_SCREEN,[t,r],this.board,!1),t=l.usrCoords[1],r=l.usrCoords[2],g+=.5*c.evaluate(this.visProp.strokewidth),g*=g,_=this.board.unitX*this.board.unitX,C=this.board.unitY*this.board.unitY,O=this.minX(),x=this.maxX(),c.exists(this._visibleArea)&&(O=this._visibleArea[0],x=this._visibleArea[1],S=(x-O)/w),"parameter"===(P=c.evaluate(this.visProp.curvetype))||"polar"===P)for(this.transformations.length>0&&(this.updateTransformMatrix(),u=s.inverse(this.transformMat),d=s.matVecMult(u,[1,t,r]),t=d[1],r=d[2]),p=0,o=O;p<w;p++){if(f=this.X(o,!0),m=this.Y(o,!0),(T=(t-f)*(t-f)*_+(r-m)*(r-m)*C)<=g)return!0;o+=S}else if("plot"===P||"functiongraph"===P){for((!c.exists(n)||n<0)&&(n=0),c.exists(this.qdt)&&c.evaluate(this.visProp.useqdt)&&3!==this.bezierDegree?(v=this.qdt.query(new i(e.COORDS_BY_USER,[t,r],this.board)),b=v.points,h=b.length):(b=this.points,h=this.numberPoints-1),p=n;p<h;p++)if(3===this.bezierDegree?E.push(a.projectCoordsToBeziersegment([1,t,r],this,p)):v?(b[p].prev&&(E=a.projectCoordsToSegment([1,t,r],b[p].prev.usrCoords,b[p].usrCoords)),b[p].next&&b[p+1]!==b[p].next&&(E=a.projectCoordsToSegment([1,t,r],b[p].usrCoords,b[p].next.usrCoords))):E=a.projectCoordsToSegment([1,t,r],b[p].usrCoords,b[p+1].usrCoords),E[1]>=0&&E[1]<=1&&(t-E[0][1])*(t-E[0][1])*_+(r-E[0][2])*(r-E[0][2])*C<=g)return!0;return!1}return T<g},allocatePoints:function(){var t,r;if(r=this.numberPoints,this.points.length<this.numberPoints)for(t=this.points.length;t<r;t++)this.points[t]=new i(e.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(c.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=o.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var t,i,r,s,a,l,u=this.visProp.plotversion,d=!1;if(this.updateTransformMatrix(),this.updateDataArray(),i=this.minX(),r=this.maxX(),c.exists(this.dataX))for(this.numberPoints=this.dataX.length,t=this.numberPoints,this.allocatePoints(),l=0;l<t;l++)s=l,c.exists(this.dataY)?(a=l,this.points[l].setCoordinates(e.COORDS_BY_USER,[this.dataX[l],this.dataY[l]],!1)):(a=this.X(s),this.points[l].setCoordinates(e.COORDS_BY_USER,[this.dataX[l],this.Y(a,d)],!1)),this.points[l]._t=l,d=!0;else if(c.evaluate(this.visProp.doadvancedplot)?1===u||c.evaluate(this.visProp.doadvancedplotold)?o.updateParametricCurveOld(this,i,r):2===u?o.updateParametricCurve_v2(this,i,r):3===u?o.updateParametricCurve_v3(this,i,r):4===u?o.updateParametricCurve_v4(this,i,r):o.updateParametricCurve_v2(this,i,r):(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.numberPoints=c.evaluate(this.visProp.numberpointshigh):this.numberPoints=c.evaluate(this.visProp.numberpointslow),this.allocatePoints(),o.updateParametricCurveNaive(this,i,r,this.numberPoints)),t=this.numberPoints,c.evaluate(this.visProp.useqdt)&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new h(this.board.getBoundingBox()),l=0;l<this.points.length;l++)this.qdt.insert(this.points[l]),l>0&&(this.points[l].prev=this.points[l-1]),l<t-1&&(this.points[l].next=this.points[l+1]);for("plot"!==c.evaluate(this.visProp.curvetype)&&c.evaluate(this.visProp.rdpsmoothing)&&(this.points=n.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),t=this.numberPoints,l=0;l<t;l++)this.updateTransform(this.points[l]);return this},updateTransformMatrix:function(){var t,e,i=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],e=0;e<i;e++)t=this.transformations[e],t.update(),this.transformMat=s.matMatMult(t.matrix,this.transformMat);return this},updateTransform:function(t){var i;return this.transformations.length>0&&(i=s.matVecMult(this.transformMat,t.usrCoords),t.setCoordinates(e.COORDS_BY_USER,i,!1,!0)),t},addTransform:function(t){var e,i=c.isArray(t)?t:[t],r=i.length;for(e=0;e<r;e++)this.transformations.push(i[e]);return this},interpolationFunctionFromArray:function(t){var e="data"+t,i=this;return function(t,r){var s,n,o,a,l,h=i[e],u=h.length,d=[];if(isNaN(t))return NaN;if(t<0)return c.isFunction(h[0])?h[0]():h[0];if(3===i.bezierDegree){if(l=(u-1)/3,t>=l)return c.isFunction(h[h.length-1])?h[h.length-1]():h[h.length-1];for(s=3*Math.floor(t),o=t%1,a=1-o,n=0;n<4;n++)c.isFunction(h[s+n])?d[n]=h[s+n]():d[n]=h[s+n];return a*a*(a*d[0]+3*o*d[1])+(3*a*d[2]+o*d[3])*o*o}if((s=t>u-2?u-2:parseInt(Math.floor(t),10))===t)return c.isFunction(h[s])?h[s]():h[s];for(n=0;n<2;n++)c.isFunction(h[s+n])?d[n]=h[s+n]():d[n]=h[s+n];return d[0]+(d[1]-d[0])*(t-s)}},generateTerm:function(t,e,i,r,s){var n,o;c.isArray(e)?(this.dataX=e,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=c.createFunction(e,this.board,t),c.isString(e)?this.visProp.curvetype="functiongraph":(c.isFunction(e)||c.isNumber(e))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),c.isArray(i)?(this.dataY=i,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):this.Y=c.createFunction(i,this.board,t),c.isFunction(e)&&c.isArray(i)&&(n=c.createFunction(i[0],this.board,""),o=c.createFunction(i[1],this.board,""),this.X=function(t){return e(t)*Math.cos(t)+n()},this.Y=function(t){return e(t)*Math.sin(t)+o()},this.visProp.curvetype="polar"),c.exists(r)&&(this.minX=c.createFunction(r,this.board,"")),c.exists(s)&&(this.maxX=c.createFunction(s,this.board,""))},notifyParents:function(t){var e,i,r,s=!1;for(e in r={xterm:1,yterm:1},r)if(r.hasOwnProperty(e)&&this.hasOwnProperty(e)&&this[e].origin)for(i in s=!0,this[e].origin.deps)this[e].origin.deps.hasOwnProperty(i)&&this[e].origin.deps[i].addChild(this);s||l.findDependencies(this,t,this.board)},getLabelAnchor:function(){var t,r,s,n=.05*this.board.canvasWidth,o=.05*this.board.canvasHeight,l=.95*this.board.canvasWidth,h=.95*this.board.canvasHeight;switch(c.evaluate(this.visProp.label.position)){case"ulft":r=n,s=o;break;case"llft":r=n,s=h;break;case"rt":r=l,s=.5*h;break;case"lrt":r=l,s=h;break;case"urt":r=l,s=o;break;case"top":r=.5*l,s=o;break;case"bot":r=.5*l,s=h;break;default:r=n,s=.5*h}return t=new i(e.COORDS_BY_SCREEN,[r,s],this.board,!1),a.projectCoordsToCurve(t.usrCoords[1],t.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var t,i={id:this.id+"T"+this.numTraces,elementClass:e.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:c.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return i.visProp.layer=this.board.options.layer.trace,i.visProp.curvetype=this.visProp.curvetype,this.numTraces++,c.clearVisPropOld(i),i.visPropCalc={visible:c.evaluate(i.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(i),this.board.renderer.enhancedRendering=t,this.traces[i.id]=i.rendNode,this},bounds:function(){var t,e,i,r=1/0,s=-1/0,o=1/0,a=-1/0,l=this.points.length;if(3===this.bezierDegree){for(t=0;t<l;t++)this.points[t].X=c.bind((function(){return this.usrCoords[1]}),this.points[t]),this.points[t].Y=c.bind((function(){return this.usrCoords[2]}),this.points[t]);return e=n.bezier(this.points),i=e[3](),r=n.fminbr((function(t){return e[0](t)}),[0,i]),s=n.fminbr((function(t){return-e[0](t)}),[0,i]),o=n.fminbr((function(t){return e[1](t)}),[0,i]),a=n.fminbr((function(t){return-e[1](t)}),[0,i]),r=e[0](r),s=e[0](s),o=e[1](o),a=e[1](a),[r,a,s,o]}for(t=0;t<l;t++)r>this.points[t].usrCoords[1]&&(r=this.points[t].usrCoords[1]),s<this.points[t].usrCoords[1]&&(s=this.points[t].usrCoords[1]),o>this.points[t].usrCoords[2]&&(o=this.points[t].usrCoords[2]),a<this.points[t].usrCoords[2]&&(a=this.points[t].usrCoords[2]);return[r,a,s,o]},getParents:function(){var t=[this.xterm,this.yterm,this.minX(),this.maxX()];return 0!==this.parents.length&&(t=this.parents),t},moveTo:function(t){var i,r=[];return this.points.length>0&&!c.evaluate(this.visProp.fixed)&&(i=this.points[0],r=3===t.length?[t[0]-i.usrCoords[0],t[1]-i.usrCoords[1],t[2]-i.usrCoords[2]]:[t[0]-i.usrCoords[1],t[1]-i.usrCoords[2]],this.setPosition(e.COORDS_BY_USER,r)),this},getTransformationSource:function(){var t,i;return c.exists(this._transformationSource)&&(i=this._transformationSource,i.elementClass===e.OBJECT_CLASS_CURVE&&(t=!0)),[t,i]}}),t.createCurve=function(i,r,s){var n,o,a=c.copyAttributes(s,i.options,"curve");return n=i.select(r[0],!0),c.isObject(n)&&(n.type===e.OBJECT_TYPE_CURVE||n.type===e.OBJECT_TYPE_ANGLE||n.type===e.OBJECT_TYPE_ARC||n.type===e.OBJECT_TYPE_CONIC||n.type===e.OBJECT_TYPE_SECTOR)&&c.isTransformationOrArray(r[1])?(n.type===e.OBJECT_TYPE_SECTOR?a=c.copyAttributes(s,i.options,"sector"):n.type===e.OBJECT_TYPE_ARC?a=c.copyAttributes(s,i.options,"arc"):n.type===e.OBJECT_TYPE_ANGLE?(c.exists(s.withLabel)||(s.withLabel=!1),a=c.copyAttributes(s,i.options,"angle")):a=c.copyAttributes(s,i.options,"curve"),a=c.copyAttributes(a,i.options,"curve"),o=new t.Curve(i,["x",[],[]],a),o.updateDataArray=function(){var t,e=n.numberPoints;for(this.bezierDegree=n.bezierDegree,this.dataX=[],this.dataY=[],t=0;t<e;t++)this.dataX.push(n.points[t].usrCoords[1]),this.dataY.push(n.points[t].usrCoords[2]);return this},o.addTransform(r[1]),n.addChild(o),o.setParents([n]),o._transformationSource=n,o):(a=c.copyAttributes(s,i.options,"curve"),new t.Curve(i,["x"].concat(r),a))},t.registerElement("curve",t.createCurve),t.createFunctiongraph=function(e,i,r){var s,n=["x","x"].concat(i);return s=c.copyAttributes(r,e.options,"curve"),s.curvetype="functiongraph",new t.Curve(e,n,s)},t.registerElement("functiongraph",t.createFunctiongraph),t.registerElement("plot",t.createFunctiongraph),t.createSpline=function(e,i,r){var s,o,a;return o=function(){var t,e=[],r=[];return[function(s,o){var a,l,h;if(!o){if(e=[],r=[],2===i.length&&c.isArray(i[0])&&c.isArray(i[1])&&i[0].length===i[1].length)for(a=0;a<i[0].length;a++)c.isFunction(i[0][a])?e.push(i[0][a]()):e.push(i[0][a]),c.isFunction(i[1][a])?r.push(i[1][a]()):r.push(i[1][a]);else for(a=0;a<i.length;a++)if(c.isPoint(i[a]))e.push(i[a].X()),r.push(i[a].Y());else if(c.isArray(i[a])&&2===i[a].length)for(l=0;l<i.length;l++)c.isFunction(i[l][0])?e.push(i[l][0]()):e.push(i[l][0]),c.isFunction(i[l][1])?r.push(i[l][1]()):r.push(i[l][1]);else c.isFunction(i[a])&&2===i[a]().length&&(h=i[a](),e.push(h[0]),r.push(h[1]));t=n.splineDef(e,r)}return n.splineEval(s,e,r,t)},function(){return e[0]},function(){return e[e.length-1]}]},r=c.copyAttributes(r,e.options,"curve"),r.curvetype="functiongraph",a=o(),s=new t.Curve(e,["x","x",a[0],a[1],a[2]],r),s.setParents(i),s.elType="spline",s},t.registerElement("spline",t.createSpline),t.createCardinalSpline=function(e,i,r){var s,o,a,l,h,u,d,p,f,m,b="\nPossible parent types: [points:array, tau:number|function, type:string]";if(!c.exists(i[0])||!c.isArray(i[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+b);if(!c.exists(i[1])||!c.isNumber(i[1])&&!c.isFunction(i[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+b);if(!c.exists(i[2])||!c.isString(i[2]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 3 'type' has to be string 'uniform' or 'centripetal'"+b);if(r=c.copyAttributes(r,e.options,"curve"),r=c.copyAttributes(r,e.options,"cardinalspline"),r.curvetype="parameter",u=i[0],d=[],!r.isarrayofcoordinates&&2===u.length&&c.isArray(u[0])&&c.isArray(u[1])&&u[0].length===u[1].length)for(p=0;p<u[0].length;p++)d[p]=[],c.isFunction(u[0][p])?d[p].push(u[0][p]()):d[p].push(u[0][p]),c.isFunction(u[1][p])?d[p].push(u[1][p]()):d[p].push(u[1][p]);else for(p=0;p<u.length;p++)c.isString(u[p])?d.push(e.select(u[p])):c.isPoint(u[p])?d.push(u[p]):c.isArray(u[p])&&2===u[p].length?(d[p]=[],c.isFunction(u[p][0])?d[p].push(u[p][0]()):d[p].push(u[p][0]),c.isFunction(u[p][1])?d[p].push(u[p][1]()):d[p].push(u[p][1])):c.isFunction(u[p])&&2===u[p]().length&&d.push(i[p]());if(!0===r.createpoints)a=c.providePoints(e,d,r,"cardinalspline",["points"]);else for(a=[],o=function(t){return{X:function(){return d[t][0]},Y:function(){return d[t][1]},Dist:function(t){var e=this.X()-t.X(),i=this.Y()-t.Y();return Math.sqrt(e*e+i*i)}}},p=0;p<d.length;p++)c.isPoint(d[p])?a.push(d[p]):a.push(o(p));for(l=i[1],h=i[2],m=["x"].concat(n.CardinalSpline(a,l,h)),s=new t.Curve(e,m,r),f=a.length,s.setParents(a),p=0;p<f;p++)u=a[p],c.isPoint(u)&&(c.exists(u._is_new)?(s.addChild(u),delete u._is_new):u.addChild(s));return s.elType="cardinalspline",s},t.registerElement("cardinalspline",t.createCardinalSpline),t.createMetapostSpline=function(e,i,r){var s,n,o,a,l,h,u,d,p="\nPossible parent types: [points:array, controls:object";if(!c.exists(i[0])||!c.isArray(i[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+p);if(!c.exists(i[1])||!c.isObject(i[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+p);if(r=c.copyAttributes(r,e.options,"curve"),r=c.copyAttributes(r,e.options,"metapostspline"),r.curvetype="parameter",l=i[0],h=[],!r.isarrayofcoordinates&&2===l.length&&c.isArray(l[0])&&c.isArray(l[1])&&l[0].length===l[1].length)for(u=0;u<l[0].length;u++)h[u]=[],c.isFunction(l[0][u])?h[u].push(l[0][u]()):h[u].push(l[0][u]),c.isFunction(l[1][u])?h[u].push(l[1][u]()):h[u].push(l[1][u]);else for(u=0;u<l.length;u++)c.isString(l[u])?h.push(e.select(l[u])):c.isPoint(l[u])?h.push(l[u]):c.isArray(l[u])&&2===l[u].length?(h[u]=[],c.isFunction(l[u][0])?h[u].push(l[u][0]()):h[u].push(l[u][0]),c.isFunction(l[u][1])?h[u].push(l[u][1]()):h[u].push(l[u][1])):c.isFunction(l[u])&&2===l[u]().length&&h.push(i[u]());if(!0===r.createpoints)o=c.providePoints(e,h,r,"metapostspline",["points"]);else for(o=[],n=function(t){return{X:function(){return h[t][0]},Y:function(){return h[t][1]}}},u=0;u<h.length;u++)c.isPoint(h[u])?o.push(h[u]):o.push(n);for(a=i[1],s=new t.Curve(e,["t",[],[],0,l.length-1],r),s.updateDataArray=function(){var e,i,r=o.length,s=[];for(i=0;i<r;i++)s.push([o[i].X(),o[i].Y()]);e=t.Math.Metapost.curve(s,a),this.dataX=e[0],this.dataY=e[1]},s.bezierDegree=3,d=o.length,s.setParents(o),u=0;u<d;u++)c.isPoint(o[u])&&o[u].addChild(s);return s.elType="metapostspline",s},t.registerElement("metapostspline",t.createMetapostSpline),t.createRiemannsum=function(t,e,i){var r,s,o,a,l,h;if(h=c.copyAttributes(i,t.options,"riemannsum"),h.curvetype="plot",o=e[0],r=c.createFunction(e[1],t,""),!c.exists(r))throw new Error("JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");if(s=c.createFunction(e[2],t,"",!1),!c.exists(s))throw new Error("JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");return a=[[0],[0]].concat(e.slice(3)),l=t.create("curve",a,h),l.sum=0,l.Value=function(){return this.sum},l.updateDataArray=function(){var t=n.riemann(o,r(),s(),this.minX(),this.maxX());this.dataX=t[0],this.dataY=t[1],this.sum=t[2]},l},t.registerElement("riemannsum",t.createRiemannsum),t.createTracecurve=function(t,i,r){var s,n,o,a;if(2!==i.length)throw new Error("JSXGraph: Can't create trace curve with given parent'\nPossible parent types: [glider, point]");if(n=t.select(i[0]),o=t.select(i[1]),n.type!==e.OBJECT_TYPE_GLIDER||!c.isPoint(o))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [glider, point]");return a=c.copyAttributes(r,t.options,"tracecurve"),a.curvetype="plot",s=t.create("curve",[[0],[0]],a),s.updateDataArray=function(){var t,i,r,s,l,c,h,u,d,p=a.numberpoints,f=n.position,m=n.slideObject,b=m.minX(),v=m.maxX();for(i=(v-b)/p,this.dataX=[],this.dataY=[],m.elementClass!==e.OBJECT_CLASS_CURVE&&p++,t=0;t<p;t++){for(s in r=b+t*i,c=m.X(r)/m.Z(r),h=m.Y(r)/m.Z(r),n.setPositionDirectly(e.COORDS_BY_USER,[c,h]),u=!1,this.board.objects)if(this.board.objects.hasOwnProperty(s)&&(l=this.board.objects[s],l===n&&(u=!0),u&&l.needsRegularUpdate&&(d=l.visProp.trace,l.visProp.trace=!1,l.needsUpdate=!0,l.update(!0),l.visProp.trace=d,l===o)))break;this.dataX[t]=o.X(),this.dataY[t]=o.Y()}for(s in n.position=f,u=!1,this.board.objects)if(this.board.objects.hasOwnProperty(s)&&(l=this.board.objects[s],l===n&&(u=!0),u&&l.needsRegularUpdate&&(d=l.visProp.trace,l.visProp.trace=!1,l.needsUpdate=!0,l.update(!0),l.visProp.trace=d,l===o)))break},s},t.registerElement("tracecurve",t.createTracecurve),t.createStepfunction=function(t,e,i){var r,s;if(2!==e.length)throw new Error("JSXGraph: Can't create step function with given parent'\nPossible parent types: [array, array|function]");return s=c.copyAttributes(i,t.options,"stepfunction"),r=t.create("curve",e,s),r.updateDataArray=function(){var t,e=0,i=this.xterm.length;if(this.dataX=[],this.dataY=[],0!==i)for(this.dataX[e]=this.xterm[0],this.dataY[e]=this.yterm[0],++e,t=1;t<i;++t)this.dataX[e]=this.xterm[t],this.dataY[e]=this.dataY[e-1],++e,this.dataX[e]=this.xterm[t],this.dataY[e]=this.yterm[t],++e},r},t.registerElement("stepfunction",t.createStepfunction),t.createDerivative=function(t,i,r){var s,o,a,l,h;if(1!==i.length&&i[0].class!==e.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create derivative curve with given parent'\nPossible parent types: [curve]");return h=c.copyAttributes(r,t.options,"curve"),o=i[0],a=n.D(o.X),l=n.D(o.Y),s=t.create("curve",[function(t){return o.X(t)},function(t){return l(t)/a(t)},o.minX(),o.maxX()],h),s.setParents(o),s},t.registerElement("derivative",t.createDerivative),t.createCurveIntersection=function(e,i,r){var s;if(2!==i.length)throw new Error("JSXGraph: Can't create curve intersection with given parent'\nPossible parent types: [array, array|function]");return s=e.create("curve",[[],[]],r),s.updateDataArray=function(){var e=t.Math.Clip.intersection(i[0],i[1],this.board);this.dataX=e[0],this.dataY=e[1]},s},t.createCurveUnion=function(e,i,r){var s;if(2!==i.length)throw new Error("JSXGraph: Can't create curve union with given parent'\nPossible parent types: [array, array|function]");return s=e.create("curve",[[],[]],r),s.updateDataArray=function(){var e=t.Math.Clip.union(i[0],i[1],this.board);this.dataX=e[0],this.dataY=e[1]},s},t.createCurveDifference=function(e,i,r){var s;if(2!==i.length)throw new Error("JSXGraph: Can't create curve difference with given parent'\nPossible parent types: [array, array|function]");return s=e.create("curve",[[],[]],r),s.updateDataArray=function(){var e=t.Math.Clip.difference(i[0],i[1],this.board);this.dataX=e[0],this.dataY=e[1]},s},t.registerElement("curvedifference",t.createCurveDifference),t.registerElement("curveintersection",t.createCurveIntersection),t.registerElement("curveunion",t.createCurveUnion),t.createBoxPlot=function(t,e,i){var r,s,n,o=c.copyAttributes(i,t.options,"boxplot");if(3!==e.length)throw new Error("JSXGraph: Can't create box plot with given parent'\nPossible parent types: [array, number|function, number|function] containing quantiles, axis, width");if(e[0].length<5)throw new Error("JSXGraph: Can't create box plot with given parent[0]'\nparent[0] has to conatin at least 5 quantiles.");for(r=t.create("curve",[[],[]],o),n=e[0].length,r.Q=[],s=0;s<n;s++)r.Q[s]=c.createFunction(e[0][s],t,null,!0);return r.x=c.createFunction(e[1],t,null,!0),r.w=c.createFunction(e[2],t,null,!0),r.updateDataArray=function(){var t,e,i,r,s,n,o,a,l;o=c.evaluate(this.visProp.smallwidth),a=c.evaluate(this.visProp.dir),l=this.x(),i=l-.5*this.w(),r=l-.5*this.w()*o,s=l+.5*this.w(),n=l+.5*this.w()*o,t=[l,r,n,l,l,i,i,s,s,l,NaN,i,s,NaN,l,l,r,n,l],e=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],"vertical"===a?(this.dataX=t,this.dataY=e):(this.dataX=e,this.dataY=t)},r},t.registerElement("boxplot",t.createBoxPlot),{Curve:t.Curve,createCardinalSpline:t.createCardinalSpline,createCurve:t.createCurve,createCurveDifference:t.createCurveDifference,createCurveIntersection:t.createCurveIntersection,createCurveUnion:t.createCurveUnion,createDerivative:t.createDerivative,createFunctiongraph:t.createFunctiongraph,createMetapostSpline:t.createMetapostSpline,createPlot:t.createFunctiongraph,createSpline:t.createSpline,createRiemannsum:t.createRiemannsum,createStepfunction:t.createStepfunction,createTracecurve:t.createTracecurve}})),define("element/arc",["jxg","math/geometry","math/math","base/coords","base/circle","utils/type","base/constants"],(function(t,e,i,r,s,n,o){"use strict";return t.createArc=function(a,l,c){var h,u,d;if(!1===(d=n.providePoints(a,l,c,"arc",["center","radiusPoint","anglePoint"]))||d.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"' and '"+typeof l[2]+"'.\nPossible parent types: [point,point,point], [arc, transformation]");return u=n.copyAttributes(c,a.options,"arc"),h=a.create("curve",[[0],[0]],u),h.elType="arc",h.setParents(d),h.type=o.OBJECT_TYPE_ARC,h.center=d[0],h.radiuspoint=d[1],h.point2=h.radiuspoint,h.anglepoint=d[2],h.point3=h.anglepoint,n.exists(h.center._is_new)?(h.addChild(h.center),delete h.center._is_new):h.center.addChild(h),n.exists(h.radiuspoint._is_new)?(h.addChild(h.radiuspoint),delete h.radiuspoint._is_new):h.radiuspoint.addChild(h),n.exists(h.anglepoint._is_new)?(h.addChild(h.anglepoint),delete h.anglepoint._is_new):h.anglepoint.addChild(h),h.useDirection=u.usedirection,h.updateDataArray=function(){var t,i,r,s,o,a,l=1,c=this.radiuspoint,h=this.center,u=this.anglepoint,p=n.evaluate(this.visProp.selection);i=e.rad(c,h,u),("minor"===p&&i>Math.PI||"major"===p&&i<Math.PI)&&(l=-1),this.useDirection&&(s=d[1].coords.usrCoords,o=d[3].coords.usrCoords,a=d[2].coords.usrCoords,r=(s[1]-a[1])*(s[2]-o[2])-(s[2]-a[2])*(s[1]-o[1]),r<0?(this.radiuspoint=d[1],this.anglepoint=d[2]):(this.radiuspoint=d[2],this.anglepoint=d[1])),c=c.coords.usrCoords,h=h.coords.usrCoords,u=u.coords.usrCoords,t=e.bezierArc(c,h,u,!1,l),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},h.Radius=function(){return this.radiuspoint.Dist(this.center)},h.getRadius=function(){return t.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},h.Value=function(){return this.Radius()*e.rad(this.radiuspoint,this.center,this.anglepoint)},h.hasPoint=function(t,s){var a,l,c,h,u,d,p,f=this.Radius();return n.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(t,s):(n.isObject(n.evaluate(this.visProp.precision))?(p=this.board._inputDevice,d=n.evaluate(this.visProp.precision[p])):d=this.board.options.precision.hasPoint,d/=Math.min(this.board.unitX,this.board.unitY),l=new r(o.COORDS_BY_SCREEN,[t,s],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),h=i.inverse(this.transformMat),u=i.matVecMult(h,l.usrCoords),l=new r(o.COORDS_BY_USER,u,this.board)),a=this.center.coords.distance(o.COORDS_BY_USER,l),c=Math.abs(a-f)<d,c&&(c=e.coordsOnArc(this,l)),c)},h.hasPointSector=function(t,i){var s=new r(o.COORDS_BY_SCREEN,[t,i],this.board),n=this.Radius(),a=this.center.coords.distance(o.COORDS_BY_USER,s),l=a<n;return l&&(l=e.coordsOnArc(this,s)),l},h.getTextAnchor=function(){return this.center.coords},h.getLabelAnchor=function(){var t,i,s,a,l,c=e.rad(this.radiuspoint,this.center,this.anglepoint),h=10/this.board.unitX,u=10/this.board.unitY,d=this.point2.coords.usrCoords,p=this.center.coords.usrCoords,f=d[1]-p[1],m=d[2]-p[2],b=n.evaluate(this.visProp.selection),v=this.label?this.label.visProp:this.visProp.label;return("minor"===b&&c>Math.PI||"major"===b&&c<Math.PI)&&(c=-(2*Math.PI-c)),t=new r(o.COORDS_BY_USER,[p[1]+Math.cos(.5*c)*f-Math.sin(.5*c)*m,p[2]+Math.sin(.5*c)*f+Math.cos(.5*c)*m],this.board),s=t.usrCoords[1]-p[1],a=t.usrCoords[2]-p[2],l=Math.sqrt(s*s+a*a),s=s*(l+h)/l,a=a*(l+u)/l,i=[p[1]+s,p[2]+a],v.position=e.calcLabelQuadrant(e.rad([1,0],[0,0],i)),new r(o.COORDS_BY_USER,i,this.board)},h.updateQuadraticform=s.Circle.prototype.updateQuadraticform,h.updateStdform=s.Circle.prototype.updateStdform,h.methodMap=t.deepCopy(h.methodMap,{getRadius:"getRadius",radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value"}),h.prepareUpdate().update(),h},t.registerElement("arc",t.createArc),t.createSemicircle=function(t,e,i){var r,s,o,a;if(!1===(a=n.providePoints(t,e,i,"point"))||2!==a.length)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point]");return o=n.copyAttributes(i,t.options,"semicircle","center"),s=t.create("midpoint",a,o),s.dump=!1,o=n.copyAttributes(i,t.options,"semicircle"),r=t.create("arc",[s,a[1],a[0]],o),r.elType="semicircle",r.setParents([a[0].id,a[1].id]),r.subs={midpoint:s},r.inherits.push(s),r.midpoint=r.center=s,r},t.registerElement("semicircle",t.createSemicircle),t.createCircumcircleArc=function(t,e,i){var r,s,o,a;if(!1===(a=n.providePoints(t,e,i,"point"))||3!==a.length)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");return o=n.copyAttributes(i,t.options,"circumcirclearc","center"),s=t.create("circumcenter",a,o),s.dump=!1,o=n.copyAttributes(i,t.options,"circumcirclearc"),o.usedirection=!0,r=t.create("arc",[s,a[0],a[2],a[1]],o),r.elType="circumcirclearc",r.setParents([a[0].id,a[1].id,a[2].id]),r.subs={center:s},r.inherits.push(s),r.center=s,r},t.registerElement("circumcirclearc",t.createCircumcircleArc),t.createMinorArc=function(e,i,r){return r.selection="minor",t.createArc(e,i,r)},t.registerElement("minorarc",t.createMinorArc),t.createMajorArc=function(e,i,r){return r.selection="major",t.createArc(e,i,r)},t.registerElement("majorarc",t.createMajorArc),{createArc:t.createArc,createSemicircle:t.createSemicircle,createCircumcircleArc:t.createCircumcircleArc,createMinorArc:t.createMinorArc,createMajorArc:t.createMajorArc}})),define("element/sector",["jxg","math/geometry","math/math","math/statistics","base/coords","base/constants","utils/type"],(function(t,e,i,r,s,n,o){"use strict";return t.createSector=function(a,l,c){var h,u,d,p,f,m,b="invalid",v=["center","radiusPoint","anglePoint"];if(l[0].elementClass===n.OBJECT_CLASS_LINE&&l[1].elementClass===n.OBJECT_CLASS_LINE&&(o.isArray(l[2])||o.isNumber(l[2]))&&(o.isArray(l[3])||o.isNumber(l[3]))&&(o.isNumber(l[4])||o.isFunction(l[4])||o.isString(l[4])))b="2lines";else{if(!1===(m=o.providePoints(a,l,c,"sector",v)))throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"' and '"+typeof l[2]+"'.");b="3points"}if(u=o.copyAttributes(c,a.options,"sector"),h=a.create("curve",[[0],[0]],u),h.type=n.OBJECT_TYPE_SECTOR,h.elType="sector",h.autoRadius=function(){var t=20/h.board.unitX,e=1/0,i=50/h.board.unitX;return o.isPoint(h.center)&&(e=.3333*h.center.Dist(h.point2)),Math.max(t,Math.min(e,i))},"2lines"===b)h.Radius=function(){var t=o.evaluate(l[4]);return"auto"===t?this.autoRadius():t},h.line1=a.select(l[0]),h.line2=a.select(l[1]),h.line1.addChild(h),h.line2.addChild(h),h.setParents(l),h.point1={visProp:{}},h.point2={visProp:{}},h.point3={visProp:{}},p=e.meetLineLine(h.line1.stdform,h.line2.stdform,0,a),o.isArray(l[2])?(2===l[2].length&&(l[2]=[1].concat(l[2])),f=e.projectPointToLine({coords:{usrCoords:l[2]}},h.line1,a),f=r.subtract(f.usrCoords,p.usrCoords),h.direction1=i.innerProduct(f,[0,h.line1.stdform[2],-h.line1.stdform[1]],3)>=0?1:-1):h.direction1=l[2]>=0?1:-1,o.isArray(l[3])?(2===l[3].length&&(l[3]=[1].concat(l[3])),f=e.projectPointToLine({coords:{usrCoords:l[3]}},h.line2,a),f=r.subtract(f.usrCoords,p.usrCoords),h.direction2=i.innerProduct(f,[0,h.line2.stdform[2],-h.line2.stdform[1]],3)>=0?1:-1):h.direction2=l[3]>=0?1:-1,h.updateDataArray=function(){var t,o,a,l,c=[0,0,0],u=[0,0,0],d=[0,0,0];if(o=this.line1,a=this.line2,u=i.crossProduct(o.stdform,a.stdform),Math.abs(u[0])>i.eps*i.eps&&(u[1]/=u[0],u[2]/=u[0],u[0]/=u[0]),t=this.direction1*this.Radius(),c=r.add(u,[0,t*o.stdform[2],-t*o.stdform[1]]),t=this.direction2*this.Radius(),d=r.add(u,[0,t*a.stdform[2],-t*a.stdform[1]]),this.point2.coords=new s(n.COORDS_BY_USER,c,h.board),this.point1.coords=new s(n.COORDS_BY_USER,u,h.board),this.point3.coords=new s(n.COORDS_BY_USER,d,h.board),Math.abs(c[0])<i.eps||Math.abs(u[0])<i.eps||Math.abs(d[0])<i.eps)return this.dataX=[NaN],void(this.dataY=[NaN]);l=e.bezierArc(c,u,d,!0,1),this.dataX=l[0],this.dataY=l[1],this.bezierDegree=3},h.methodMap=t.deepCopy(h.methodMap,{radius:"Radius",getRadius:"Radius",setRadius:"setRadius"});else if("3points"===b){for(h.point1=m[0],h.point2=m[1],h.point3=m[2],d=0;d<3;d++)o.exists(m[d]._is_new)?(h.addChild(m[d]),delete m[d]._is_new):m[d].addChild(h);h.useDirection=c.usedirection,h.setParents(m),o.exists(m[3])&&(h.point4=m[3],h.point4.addChild(h)),h.methodMap=t.deepCopy(h.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",radius:"Radius",getRadius:"Radius",setRadius:"setRadius"}),h.updateDataArray=function(){var t,i,r,s,n,a=this.point2,l=this.point1,c=this.point3,h=1,u=o.evaluate(this.visProp.selection);if(!a.isReal||!l.isReal||!c.isReal)return this.dataX=[NaN],void(this.dataY=[NaN]);n=e.rad(a,l,c),("minor"===u&&n>Math.PI||"major"===u&&n<Math.PI)&&(h=-1),this.useDirection&&o.exists(this.point4)&&(i=this.point2.coords.usrCoords,r=this.point4.coords.usrCoords,s=this.point3.coords.usrCoords,(i[1]-s[1])*(i[2]-r[2])-(i[2]-s[2])*(i[1]-r[1])>=0&&(c=this.point2,a=this.point3)),a=a.coords.usrCoords,l=l.coords.usrCoords,c=c.coords.usrCoords,t=e.bezierArc(a,l,c,!0,h),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3},h.Radius=function(){return this.point2.Dist(this.point1)},u=o.copyAttributes(c,a.options,"sector","arc"),u.withLabel=!1,u.name+="_arc",h.arc=a.create("arc",[h.point1,h.point2,h.point3],u),h.addChild(h.arc)}return h.center=h.point1,h.radiuspoint=h.point2,h.anglepoint=h.point3,h.hasPointCurve=function(t,i){var r,a,l,c,h,u,d=new s(n.COORDS_BY_SCREEN,[t,i],this.board),p=this.Radius(),f=this.center.coords.distance(n.COORDS_BY_USER,d),m=o.evaluate(this.visProp.selection);return o.isObject(o.evaluate(this.visProp.precision))?(h=this.board._inputDevice,c=o.evaluate(this.visProp.precision[h])):c=this.board.options.precision.hasPoint,c/=Math.min(this.board.unitX,this.board.unitY),u=Math.abs(f-p)<c,u&&(r=e.rad(this.point2,this.center,d.usrCoords.slice(1)),a=0,l=e.rad(this.point2,this.center,this.point3),("minor"===m&&l>Math.PI||"major"===m&&l<Math.PI)&&(a=l,l=2*Math.PI),(r<a||r>l)&&(u=!1)),u},h.hasPointSector=function(t,i){var r,a,l,c=new s(n.COORDS_BY_SCREEN,[t,i],this.board),h=this.Radius(),u=this.point1.coords.distance(n.COORDS_BY_USER,c),d=u<h,p=o.evaluate(this.visProp.selection);return d&&(r=e.rad(this.radiuspoint,this.center,c.usrCoords.slice(1)),a=0,l=e.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===p&&l>Math.PI||"major"===p&&l<Math.PI)&&(a=l,l=2*Math.PI),(r<a||r>l)&&(d=!1)),d},h.hasPoint=function(t,e){return o.evaluate(this.visProp.highlightonsector)||o.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(t,e):this.hasPointCurve(t,e)},h.getTextAnchor=function(){return this.point1.coords},h.getLabelAnchor=function(){var t,i,r,a,l,c=e.rad(this.point2,this.point1,this.point3),h=13/this.board.unitX,u=13/this.board.unitY,d=this.point2.coords.usrCoords,p=this.point1.coords.usrCoords,f=d[1]-p[1],m=d[2]-p[2],b=o.evaluate(this.visProp.selection),v=this.label?this.label.visProp:this.visProp.label;return("minor"===b&&c>Math.PI||"major"===b&&c<Math.PI)&&(c=-(2*Math.PI-c)),t=new s(n.COORDS_BY_USER,[p[1]+Math.cos(.5*c)*f-Math.sin(.5*c)*m,p[2]+Math.sin(.5*c)*f+Math.cos(.5*c)*m],this.board),r=t.usrCoords[1]-p[1],a=t.usrCoords[2]-p[2],l=Math.sqrt(r*r+a*a),r=r*(l+h)/l,a=a*(l+u)/l,i=[p[1]+r,p[2]+a],v.position=e.calcLabelQuadrant(e.rad([1,0],[0,0],i)),new s(n.COORDS_BY_USER,i,this.board)},h.setRadius=function(t){h.Radius=function(){var e=o.evaluate(t);return"auto"===e?this.autoRadius():e}},h.getRadius=function(){return t.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},"3points"===b&&(h.setPositionDirectly=function(t,e,i){var n,o,a=new s(t,e,this.board),l=new s(t,i,this.board);return h.point1.draggable()&&h.point2.draggable()&&h.point3.draggable()?(n=r.subtract(a.usrCoords,l.usrCoords),o=this.board.create("transform",n.slice(1),{type:"translate"}),o.applyOnce([h.point1,h.point2,h.point3]),this):this}),h.prepareUpdate().update(),h},t.registerElement("sector",t.createSector),t.createCircumcircleSector=function(t,e,i){var r,s,n,a;if(!1===(a=o.providePoints(t,e,i,"point")))throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");return s=t.create("circumcenter",a.slice(0,3),n),s.dump=!1,n=o.copyAttributes(i,t.options,"circumcirclesector"),r=t.create("sector",[s,a[0],a[2],a[1]],n),r.elType="circumcirclesector",r.setParents(a),r.center=s,r.subs={center:s},r},t.registerElement("circumcirclesector",t.createCircumcircleSector),t.createMinorSector=function(e,i,r){return r.selection="minor",t.createSector(e,i,r)},t.registerElement("minorsector",t.createMinorSector),t.createMajorSector=function(e,i,r){return r.selection="major",t.createSector(e,i,r)},t.registerElement("majorsector",t.createMajorSector),t.createAngle=function(t,r,a){var l,c,h,u,d,p,f="invalid";if(r[0].elementClass===n.OBJECT_CLASS_LINE&&r[1].elementClass===n.OBJECT_CLASS_LINE&&(o.isArray(r[2])||o.isNumber(r[2]))&&(o.isArray(r[3])||o.isNumber(r[3])))f="2lines";else{if(!1===(p=o.providePoints(t,r,a,"point")))throw new Error("JSXGraph: Can't create angle with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"' and '"+typeof r[2]+"'.");f="3points"}if(h=o.copyAttributes(a,t.options,"angle"),o.exists(h.name)&&""!==h.name||(h.name=t.generateName({type:n.OBJECT_TYPE_ANGLE})),c=o.exists(h.radius)?h.radius:0,"2lines"===f?(r.push(c),l=t.create("sector",r,h),l.updateDataArraySector=l.updateDataArray,l.setAngle=function(t){},l.free=function(t){}):(l=t.create("sector",[p[1],p[0],p[2]],h),l.arc.visProp.priv=!0,l.point=l.point2=l.radiuspoint=p[0],l.pointsquare=l.point3=l.anglepoint=p[2],l.Radius=function(){var t=o.evaluate(c);return"auto"===t?l.autoRadius():t},l.updateDataArraySector=function(){var t,i,r=this.point2,s=this.point1,n=this.point3,a=this.Radius(),l=s.Dist(r),c=1,h=o.evaluate(this.visProp.selection);i=e.rad(r,s,n),("minor"===h&&i>Math.PI||"major"===h&&i<Math.PI)&&(c=-1),r=r.coords.usrCoords,s=s.coords.usrCoords,n=n.coords.usrCoords,r=[1,s[1]+(r[1]-s[1])*a/l,s[2]+(r[2]-s[2])*a/l],n=[1,s[1]+(n[1]-s[1])*a/l,s[2]+(n[2]-s[2])*a/l],t=e.bezierArc(r,s,n,!0,c),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3},l.setAngle=function(t){var e,r,s,n=this.anglepoint,a=this.radiuspoint;return n.draggable()&&(e=this.board.create("transform",[t,this.center],{type:"rotate"}),n.addTransform(a,e),e.update(),n.moveTo(i.matVecMult(e.matrix,a.coords.usrCoords)),s=o.isFunction(t)?function(){return 2*Math.PI-t()}:function(){return 2*Math.PI-t},r=this.board.create("transform",[s,this.center],{type:"rotate"}),n.coords.on("update",(function(){r.update(),a.moveTo(i.matVecMult(r.matrix,n.coords.usrCoords))})),n.setParents(a)),this},l.free=function(){var t=this.anglepoint;return t.transformations.length>0&&(t.transformations.pop(),t.isDraggable=!0,t.parents=[],t.coords.off("update")),this},l.setParents(p)),o.exists(l.visProp.text)&&l.label.setText(o.evaluate(l.visProp.text)),l.elType="angle",l.type=n.OBJECT_TYPE_ANGLE,l.subs={},l.updateDataArraySquare=function(){var t,r,s,n,o,a,l,c,h=this.Radius();"2lines"===f&&this.updateDataArraySector(),t=this.point2,r=this.point1,s=this.point3,t=t.coords.usrCoords,r=r.coords.usrCoords,s=s.coords.usrCoords,n=e.distance(t,r,3),o=e.distance(s,r,3),t=[1,r[1]+(t[1]-r[1])*h/n,r[2]+(t[2]-r[2])*h/n],s=[1,r[1]+(s[1]-r[1])*h/o,r[2]+(s[2]-r[2])*h/o],a=i.crossProduct(s,r),l=[-t[1]*a[1]-t[2]*a[2],t[0]*a[1],t[0]*a[2]],a=i.crossProduct(t,r),c=[-s[1]*a[1]-s[2]*a[2],s[0]*a[1],s[0]*a[2]],a=i.crossProduct(l,c),a[1]/=a[0],a[2]/=a[0],this.dataX=[r[1],t[1],a[1],s[1],r[1]],this.dataY=[r[2],t[2],a[2],s[2],r[2]],this.bezierDegree=1},l.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},l.updateDataArray=function(){var t=o.evaluate(this.visProp.type),r=e.trueAngle(this.point2,this.point1,this.point3),s=o.evaluate(this.visProp.selection);("minor"===s&&r>180||"major"===s&&r<180)&&(r=360-r),Math.abs(r-90)<o.evaluate(this.visProp.orthosensitivity)+i.eps&&(t=o.evaluate(this.visProp.orthotype)),"none"===t?this.updateDataArrayNone():"square"===t?this.updateDataArraySquare():"sector"===t?this.updateDataArraySector():"sectordot"===t&&(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||"sectordot"!==t&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},u=o.copyAttributes(a,t.options,"angle","dot"),l.dot=t.create("point",[function(){var t,r,s,n,a,c,h,u,d;return o.exists(l.dot)&&!l.dot.visProp.visible?[0,0]:(t=l.point2.coords.usrCoords,r=l.point1.coords.usrCoords,s=l.Radius(),n=e.distance(t,r,3),a=e.rad(l.point2,l.point1,l.point3),d=o.evaluate(l.visProp.selection),("minor"===d&&a>Math.PI||"major"===d&&a<Math.PI)&&(a=-(2*Math.PI-a)),a*=.5,c=Math.cos(a),h=Math.sin(a),t=[1,r[1]+(t[1]-r[1])*s/n,r[2]+(t[2]-r[2])*s/n],u=[[1,0,0],[r[1]-.5*r[1]*c+.5*r[2]*h,.5*c,.5*-h],[r[2]-.5*r[1]*h-.5*r[2]*c,.5*h,.5*c]],i.matVecMult(u,t))}],u),l.dot.dump=!1,l.subs.dot=l.dot,"2lines"===f)for(d=0;d<2;d++)t.select(r[d]).addChild(l.dot);else for(d=0;d<3;d++)t.select(p[d]).addChild(l.dot);return l.getLabelAnchor=function(){var t,r,a,c,h,u,d,p,f,m=12,b=o.evaluate(l.visProp.selection),v=this.label?this.label.visProp:this.visProp.label;return o.exists(this.label.visProp.fontSize)&&(m=o.evaluate(this.label.visProp.fontSize)),m/=this.board.unitX,r=l.point2.coords.usrCoords,a=l.point1.coords.usrCoords,c=l.Radius(),h=e.distance(r,a,3),u=e.rad(l.point2,l.point1,l.point3),("minor"===b&&u>Math.PI||"major"===b&&u<Math.PI)&&(u=-(2*Math.PI-u)),u*=.5,d=Math.cos(u),p=Math.sin(u),r=[1,a[1]+(r[1]-a[1])*c/h,a[2]+(r[2]-a[2])*c/h],f=[[1,0,0],[a[1]-.5*a[1]*d+.5*a[2]*p,.5*d,.5*-p],[a[2]-.5*a[1]*p-.5*a[2]*d,.5*p,.5*d]],t=i.matVecMult(f,r),t[1]/=t[0],t[2]/=t[0],t[0]/=t[0],h=e.distance(t,a,3),t=[t[0],a[1]+(t[1]-a[1])*(c+m)/h,a[2]+(t[2]-a[2])*(c+m)/h],v.position=e.calcLabelQuadrant(e.rad([1,0],[0,0],t)),new s(n.COORDS_BY_USER,t,this.board)},l.Value=function(){return e.rad(this.point2,this.point1,this.point3)},l.methodMap=o.deepCopy(l.methodMap,{Value:"Value",setAngle:"setAngle",free:"free"}),l},t.registerElement("angle",t.createAngle),t.createNonreflexAngle=function(i,r,s){var n;return s.selection="minor",n=t.createAngle(i,r,s),n.Value=function(){var t=e.rad(this.point2,this.point1,this.point3);return t<Math.PI?t:2*Math.PI-t},n},t.registerElement("nonreflexangle",t.createNonreflexAngle),t.createReflexAngle=function(i,r,s){var n;return s.selection="major",n=t.createAngle(i,r,s),n.Value=function(){var t=e.rad(this.point2,this.point1,this.point3);return t>=Math.PI?t:2*Math.PI-t},n},t.registerElement("reflexangle",t.createReflexAngle),{createSector:t.createSector,createCircumcircleSector:t.createCircumcircleSector,createMinorSector:t.createMinorSector,createMajorSector:t.createMajorSector,createAngle:t.createAngle,createReflexAngle:t.createReflexAngle,createNonreflexAngle:t.createNonreflexAngle}})),define("base/transformation",["jxg","base/constants","math/math","utils/type"],(function(t,e,i,r){"use strict";return t.Transformation=function(t,i,r){this.elementClass=e.OBJECT_CLASS_OTHER,this.type=e.OBJECT_TYPE_TRANSFORMATION,this.matrix=[[1,0,0],[0,1,0],[0,0,1]],this.board=t,this.isNumericMatrix=!1,this.setMatrix(t,i,r),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt"}},t.Transformation.prototype={},t.extend(t.Transformation.prototype,{update:function(){return this},setMatrix:function(t,e,s){var n;for(this.isNumericMatrix=!0,n=0;n<s.length;n++)if("number"!=typeof s[n]){this.isNumericMatrix=!1;break}if("translate"===e){if(2!==s.length)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=r.createEvalFunction(t,s,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if("scale"===e){if(2!==s.length)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=r.createEvalFunction(t,s,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if("reflect"===e)s.length<4&&(s[0]=t.select(s[0])),2===s.length&&(s[1]=t.select(s[1])),4===s.length&&(this.evalParam=r.createEvalFunction(t,s,4)),this.update=function(){var t,e,r,n,o,a,l,c;1===s.length?l=s[0].stdform:2===s.length?l=i.crossProduct(s[1].coords.usrCoords,s[0].coords.usrCoords):4===s.length&&(l=i.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),t=l[1],e=l[2],r=l[0],c=[-r*t,-r*e,t*t+e*e],a=c[2],n=c[0]/c[2],o=c[1]/c[2],t=-l[2],e=l[1],this.matrix[1][1]=(t*t-e*e)/a,this.matrix[1][2]=2*t*e/a,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=n*(1-this.matrix[1][1])-o*this.matrix[1][2],this.matrix[2][0]=o*(1-this.matrix[2][2])-n*this.matrix[2][1]};else if("rotate"===e)3===s.length?this.evalParam=r.createEvalFunction(t,s,3):s.length>0&&s.length<=2&&(this.evalParam=r.createEvalFunction(t,s,1),2!==s.length||r.isArray(s[1])||(s[1]=t.select(s[1]))),this.update=function(){var t,e,i=this.evalParam(0),n=Math.cos(i),o=Math.sin(i);this.matrix[1][1]=n,this.matrix[1][2]=-o,this.matrix[2][1]=o,this.matrix[2][2]=n,s.length>1&&(3===s.length?(t=this.evalParam(1),e=this.evalParam(2)):r.isArray(s[1])?(t=s[1][0],e=s[1][1]):(t=s[1].X(),e=s[1].Y()),this.matrix[1][0]=t*(1-n)+e*o,this.matrix[2][0]=e*(1-n)-t*o)};else if("shear"===e){if(2!==s.length)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=r.createEvalFunction(t,s,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if("generic"===e){if(9!==s.length)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=r.createEvalFunction(t,s,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}},apply:function(t,e){return this.update(),r.exists(e)?i.matVecMult(this.matrix,t.initialCoords.usrCoords):i.matVecMult(this.matrix,t.coords.usrCoords)},applyOnce:function(t){var s,n,o;for(r.isArray(t)||(t=[t]),n=t.length,o=0;o<n;o++)this.update(),s=i.matVecMult(this.matrix,t[o].coords.usrCoords),t[o].coords.setCoordinates(e.COORDS_BY_USER,s)},bindTo:function(t){var e,i;if(r.isArray(t))for(i=t.length,e=0;e<i;e++)t[e].transformations.push(this);else t.transformations.push(this)},setProperty:function(e){t.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(t){},melt:function(t){var e,i,r,s,n,o,a=[];for(i=t.matrix.length,r=this.matrix[0].length,e=0;e<i;e++)a[e]=[];for(this.update(),t.update(),e=0;e<i;e++)for(o=0;o<r;o++){for(n=0,s=0;s<i;s++)n+=t.matrix[e][s]*this.matrix[s][o];a[e][o]=n}return this.update=function(){var t=this.matrix.length,i=this.matrix[0].length;for(e=0;e<t;e++)for(o=0;o<i;o++)this.matrix[e][o]=a[e][o]},this},getParents:function(){var t=[[].concat.apply([],this.matrix)];return 0!==this.parents.length&&(t=this.parents),t}}),t.createTransform=function(e,i,r){return new t.Transformation(e,r.type,i)},t.registerElement("transform",t.createTransform),{Transformation:t.Transformation,createTransform:t.createTransform}})),define("element/composition",["jxg","math/math","math/geometry","math/numerics","base/coords","utils/type","base/constants","base/point","base/line","base/circle","base/transformation","base/composition","base/curve","base/polygon"],(function(t,e,i,r,s,n,o,a,l,c,h,u,d,p){"use strict";return t.createOrthogonalProjection=function(t,e,r){var s,a,l,c;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),n.isPointType(t,e[0])&&e[1].elementClass===o.OBJECT_CLASS_LINE)a=n.providePoints(t,[e[0]],r,"point")[0],s=e[1];else{if(!n.isPointType(t,e[1])||e[0].elementClass!==o.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");a=n.providePoints(t,[e[1]],r,"point")[0],s=e[0]}return c=n.copyAttributes(r,t.options,"orthogonalprojection"),l=t.create("point",[function(){return i.projectPointToLine(a,s,t)}],c),n.exists(a._is_new)?(l.addChild(a),delete a._is_new):a.addChild(l),s.addChild(l),l.elType="orthogonalprojection",l.setParents([a.id,l.id]),l.update(),l.generatePolynomial=function(){var t=s.point1.symbolic.x,e=s.point1.symbolic.y,i=s.point2.symbolic.x,r=s.point2.symbolic.y,n=a.symbolic.x,o=a.symbolic.y,c=l.symbolic.x,h=l.symbolic.y;return["("+e+")*("+c+")-("+e+")*("+i+")+("+h+")*("+i+")-("+t+")*("+h+")+("+t+")*("+r+")-("+c+")*("+r+")","("+o+")*("+e+")-("+o+")*("+r+")-("+h+")*("+e+")+("+h+")*("+r+")+("+n+")*("+t+")-("+n+")*("+i+")-("+c+")*("+t+")+("+c+")*("+i+")"]},l},t.createPerpendicular=function(t,e,i){var r,s,a,c;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),n.isPointType(t,e[0])&&e[1].elementClass===o.OBJECT_CLASS_LINE)s=e[1],r=n.providePoints(t,[e[0]],i,"point")[0];else{if(!n.isPointType(t,e[1])||e[0].elementClass!==o.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,point]");s=e[0],r=n.providePoints(t,[e[1]],i,"point")[0]}return c=n.copyAttributes(i,t.options,"perpendicular"),a=l.createLine(t,[function(){return s.stdform[2]*r.X()-s.stdform[1]*r.Y()},function(){return-s.stdform[2]*r.Z()},function(){return s.stdform[1]*r.Z()}],c),a.elType="perpendicular",a.setParents([s.id,r.id]),n.exists(r._is_new)?(a.addChild(r),delete r._is_new):r.addChild(a),s.addChild(a),a},t.createPerpendicularPoint=function(t,e,r){var s,a,l;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),n.isPointType(t,e[0])&&e[1].elementClass===o.OBJECT_CLASS_LINE)a=n.providePoints(t,[e[0]],r,"point")[0],s=e[1];else{if(!n.isPointType(t,e[1])||e[0].elementClass!==o.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");a=n.providePoints(t,[e[1]],r,"point")[0],s=e[0]}return l=t.create("point",[function(){return i.perpendicular(s,a,t)[0]}],r),n.exists(a._is_new)?(l.addChild(a),delete a._is_new):a.addChild(l),s.addChild(l),l.elType="perpendicularpoint",l.setParents([a.id,s.id]),l.update(),l.generatePolynomial=function(){var t=s.point1.symbolic.x,e=s.point1.symbolic.y,i=s.point2.symbolic.x,r=s.point2.symbolic.y,n=a.symbolic.x,o=a.symbolic.y,c=l.symbolic.x,h=l.symbolic.y;return["("+e+")*("+c+")-("+e+")*("+i+")+("+h+")*("+i+")-("+t+")*("+h+")+("+t+")*("+r+")-("+c+")*("+r+")","("+o+")*("+e+")-("+o+")*("+r+")-("+h+")*("+e+")+("+h+")*("+r+")+("+n+")*("+t+")-("+n+")*("+i+")-("+c+")*("+t+")+("+c+")*("+i+")"]},l},t.createPerpendicularSegment=function(e,r,s){var a,c,h,u,d;if(r[0]=e.select(r[0]),r[1]=e.select(r[1]),n.isPointType(e,r[0])&&r[1].elementClass===o.OBJECT_CLASS_LINE)c=r[1],a=n.providePoints(e,[r[0]],s,"point")[0];else{if(!n.isPointType(e,r[1])||r[0].elementClass!==o.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'.\nPossible parent types: [line,point]");c=r[0],a=n.providePoints(e,[r[1]],s,"point")[0]}return d=n.copyAttributes(s,e.options,"perpendicularsegment","point"),u=t.createPerpendicularPoint(e,[c,a],d),u.dump=!1,n.exists(s.layer)||(s.layer=e.options.layer.line),d=n.copyAttributes(s,e.options,"perpendicularsegment"),h=l.createLine(e,[function(){return i.perpendicular(c,a,e)[1]?[u,a]:[a,u]}],d),h.point=u,n.exists(a._is_new)?(h.addChild(a),delete a._is_new):a.addChild(h),c.addChild(h),h.elType="perpendicularsegment",h.setParents([a.id,c.id]),h.subs={point:u},h.inherits.push(u),h},t.createMidpoint=function(t,i,r){var s,a,l,c,h;for(c=0;c<i.length;++c)i[c]=t.select(i[c]);if(2===i.length&&n.isPointType(t,i[0])&&n.isPointType(t,i[1]))i=n.providePoints(t,i,r,"point"),s=i[0],a=i[1];else{if(1!==i.length||i[0].elementClass!==o.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create midpoint.\nPossible parent types: [point,point], [line]");s=i[0].point1,a=i[0].point2}return h=n.copyAttributes(r,t.options,"midpoint"),l=t.create("point",[function(){var t=s.coords.usrCoords[1]+a.coords.usrCoords[1];return isNaN(t)||Math.abs(s.coords.usrCoords[0])<e.eps||Math.abs(a.coords.usrCoords[0])<e.eps?NaN:.5*t},function(){var t=s.coords.usrCoords[2]+a.coords.usrCoords[2];return isNaN(t)||Math.abs(s.coords.usrCoords[0])<e.eps||Math.abs(a.coords.usrCoords[0])<e.eps?NaN:.5*t}],h),n.exists(s._is_new)?(l.addChild(s),delete s._is_new):s.addChild(l),n.exists(a._is_new)?(l.addChild(a),delete a._is_new):a.addChild(l),l.elType="midpoint",l.setParents([s.id,a.id]),l.prepareUpdate().update(),l.generatePolynomial=function(){var t=s.symbolic.x,e=s.symbolic.y,i=a.symbolic.x,r=a.symbolic.y,n=l.symbolic.x,o=l.symbolic.y;return["("+e+")*("+n+")-("+e+")*("+i+")+("+o+")*("+i+")-("+t+")*("+o+")+("+t+")*("+r+")-("+n+")*("+r+")","("+t+")^2 - 2*("+t+")*("+n+")+("+e+")^2-2*("+e+")*("+o+")-("+i+")^2+2*("+i+")*("+n+")-("+r+")^2+2*("+r+")*("+o+")"]},l},t.createParallelPoint=function(t,e,i){var r,s,a,l,c;for(c=0;c<e.length;++c)e[c]=t.select(e[c]);if(3===e.length&&n.isPointType(t,e[0])&&n.isPointType(t,e[1])&&n.isPointType(t,e[2]))e=n.providePoints(t,e,i,"point"),r=e[0],s=e[1],a=e[2];else if(n.isPointType(t,e[0])&&e[1].elementClass===o.OBJECT_CLASS_LINE)a=n.providePoints(t,[e[0]],i,"point")[0],r=e[1].point1,s=e[1].point2;else{if(!n.isPointType(t,e[1])||e[0].elementClass!==o.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [line,point], [point,point,point]");a=n.providePoints(t,[e[1]],i,"point")[0],r=e[0].point1,s=e[0].point2}return l=t.create("point",[function(){return a.coords.usrCoords[1]+s.coords.usrCoords[1]-r.coords.usrCoords[1]},function(){return a.coords.usrCoords[2]+s.coords.usrCoords[2]-r.coords.usrCoords[2]}],i),n.exists(r._is_new)?(l.addChild(r),delete r._is_new):r.addChild(l),n.exists(s._is_new)?(l.addChild(s),delete s._is_new):s.addChild(l),n.exists(a._is_new)?(l.addChild(a),delete a._is_new):a.addChild(l),l.elType="parallelpoint",l.setParents([r.id,s.id,a.id]),l.prepareUpdate().update(),l.generatePolynomial=function(){var t=r.symbolic.x,e=r.symbolic.y,i=s.symbolic.x,n=s.symbolic.y,o=a.symbolic.x,c=a.symbolic.y,h=l.symbolic.x,u=l.symbolic.y;return["("+n+")*("+h+")-("+n+")*("+o+")-("+e+")*("+h+")+("+e+")*("+o+")-("+u+")*("+i+")+("+u+")*("+t+")+("+c+")*("+i+")-("+c+")*("+t+")","("+u+")*("+t+")-("+u+")*("+o+")-("+n+")*("+t+")+("+n+")*("+o+")-("+h+")*("+e+")+("+h+")*("+c+")+("+i+")*("+e+")-("+i+")*("+c+")"]},l},t.createParallel=function(t,i,r){var s,o,a,l,c,h;for(c=0;c<i.length;++c)i[c]=t.select(i[c]);return s=null,3===i.length?(i=n.providePoints(t,i,r,"point"),s=i[2],l=function(){return e.crossProduct(i[0].coords.usrCoords,i[1].coords.usrCoords)}):n.isPointType(t,i[0])?(s=n.providePoints(t,[i[0]],r,"point")[0],l=function(){return i[1].stdform}):n.isPointType(t,i[1])&&(s=n.providePoints(t,[i[1]],r,"point")[0],l=function(){return i[0].stdform}),n.exists(r.layer)||(r.layer=t.options.layer.line),h=n.copyAttributes(r,t.options,"parallel","point"),o=t.create("point",[function(){return e.crossProduct([1,0,0],l())}],h),o.isDraggable=!0,h=n.copyAttributes(r,t.options,"parallel"),a=t.create("line",[s,o],h),a.elType="parallel",a.subs={point:o},a.inherits.push(o),a.setParents([i[0].id,i[1].id]),3===i.length&&a.addParents(i[2].id),a.point=o,a},t.createArrowParallel=function(e,i,r){var s;try{return r.firstArrow=!1,r.lastArrow=!0,s=t.createParallel(e,i,r).setAttribute({straightFirst:!1,straightLast:!1}),s.elType="arrowparallel",s}catch(t){throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [line,point], [point,point,point]")}},t.createNormal=function(t,i,s){var a,l,c,h,u,d,p,f,m;for(h=0;h<i.length;++h)i[h]=t.select(i[h]);if(1===i.length)a=i[0],l=a.slideObject;else{if(2!==i.length)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");if(n.isPointType(t,i[0]))a=n.providePoints(t,[i[0]],s,"point")[0],l=i[1];else{if(!n.isPointType(t,i[1]))throw new Error("JSXGraph: Can't create normal with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");l=i[0],a=n.providePoints(t,[i[1]],s,"point")[0]}}if(p=n.copyAttributes(s,t.options,"normal"),l.elementClass===o.OBJECT_CLASS_LINE)m=n.copyAttributes(s,t.options,"normal","point"),f=t.create("point",[function(){var t=e.crossProduct([1,0,0],l.stdform);return[t[0],-t[2],t[1]]}],m),f.isDraggable=!0,c=t.create("line",[a,f],p),c.point=f,c.subs={point:f},c.inherits.push(f);else if(l.elementClass===o.OBJECT_CLASS_CIRCLE)c=t.create("line",[l.midpoint,a],p);else if(l.elementClass===o.OBJECT_CLASS_CURVE)"plot"!==n.evaluate(l.visProp.curvetype)?(u=l.X,d=l.Y,c=t.create("line",[function(){return-a.X()*r.D(u)(a.position)-a.Y()*r.D(d)(a.position)},function(){return r.D(u)(a.position)},function(){return r.D(d)(a.position)}],p)):c=t.create("line",[function(){var t,e,i,r,s,n,o,c,h,u,d=Math.floor(a.position),p=a.position-d;if(1===l.bezierdegree)d===l.numberPoints-1&&(d-=1,p=1);else{if(3!==l.bezierDegree)return 0;d=3*Math.floor(a.position*(l.numberPoints-1)/3),i=(a.position*(l.numberPoints-1)-d)/3,d>=l.numberPoints-1&&(d=l.numberPoints-4,i=1)}return d<0?1:1===l.bezierDegree?(l.Y(d)+p*(l.Y(d+1)-l.Y(d)))*(l.Y(d)-l.Y(d+1))-(l.X(d)+p*(l.X(d+1)-l.X(d)))*(l.X(d+1)-l.X(d)):(r=l.points[d].usrCoords,s=l.points[d+1].usrCoords,n=l.points[d+2].usrCoords,o=l.points[d+3].usrCoords,c=(1-i)*(1-i)*(s[1]-r[1])+2*(1-i)*i*(n[1]-s[1])+i*i*(o[1]-n[1]),h=(1-i)*(1-i)*(s[2]-r[2])+2*(1-i)*i*(n[2]-s[2])+i*i*(o[2]-n[2]),u=Math.sqrt(c*c+h*h),c/=u,h/=u,t=a.coords.usrCoords,e=[1,t[1]-h,t[2]+c],t[2]*e[1]-t[1]*e[2])},function(){var t,e,i,r,s,n,o,c,h,u,d=Math.floor(a.position);if(1===l.bezierdegree)d===l.numberPoints-1&&(d-=1);else{if(3!==l.bezierDegree)return 0;d=3*Math.floor(a.position*(l.numberPoints-1)/3),i=(a.position*(l.numberPoints-1)-d)/3,d>=l.numberPoints-1&&(d=l.numberPoints-4,i=1)}return d<0?0:1===l.bezierDegree?l.X(d+1)-l.X(d):(r=l.points[d].usrCoords,s=l.points[d+1].usrCoords,n=l.points[d+2].usrCoords,o=l.points[d+3].usrCoords,c=(1-i)*(1-i)*(s[1]-r[1])+2*(1-i)*i*(n[1]-s[1])+i*i*(o[1]-n[1]),h=(1-i)*(1-i)*(s[2]-r[2])+2*(1-i)*i*(n[2]-s[2])+i*i*(o[2]-n[2]),u=Math.sqrt(c*c+h*h),c/=u,h/=u,t=a.coords.usrCoords,e=[1,t[1]-h,t[2]+c],e[2]-t[2])},function(){var t,e,i,r,s,n,o,c,h,u,d=Math.floor(a.position);if(1===l.bezierdegree)d===l.numberPoints-1&&(d-=1);else{if(3!==l.bezierDegree)return 0;d=3*Math.floor(a.position*(l.numberPoints-1)/3),i=(a.position*(l.numberPoints-1)-d)/3,d>=l.numberPoints-1&&(d=l.numberPoints-4,i=1)}return d<0?0:1===l.bezierDegree?l.Y(d+1)-l.Y(d):(r=l.points[d].usrCoords,s=l.points[d+1].usrCoords,n=l.points[d+2].usrCoords,o=l.points[d+3].usrCoords,c=(1-i)*(1-i)*(s[1]-r[1])+2*(1-i)*i*(n[1]-s[1])+i*i*(o[1]-n[1]),h=(1-i)*(1-i)*(s[2]-r[2])+2*(1-i)*i*(n[2]-s[2])+i*i*(o[2]-n[2]),u=Math.sqrt(c*c+h*h),c/=u,h/=u,t=a.coords.usrCoords,e=[1,t[1]-h,t[2]+c],t[1]-e[1])}],p);else{if(l.type!==o.OBJECT_TYPE_TURTLE)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");c=t.create("line",[function(){var t,e,i=Math.floor(a.position),r=a.position-i;for(e=0;e<l.objects.length;e++)if(t=l.objects[e],t.type===o.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1,r=1),i<0?1:(t.Y(i)+r*(t.Y(i+1)-t.Y(i)))*(t.Y(i)-t.Y(i+1))-(t.X(i)+r*(t.X(i+1)-t.X(i)))*(t.X(i+1)-t.X(i))},function(){var t,e,i=Math.floor(a.position);for(e=0;e<l.objects.length;e++)if(t=l.objects[e],t.type===o.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1),i<0?0:t.X(i+1)-t.X(i)},function(){var t,e,i=Math.floor(a.position);for(e=0;e<l.objects.length;e++)if(t=l.objects[e],t.type===o.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1),i<0?0:t.Y(i+1)-t.Y(i)}],p)}return c.elType="normal",c.setParents(i),n.exists(a._is_new)?(c.addChild(a),delete a._is_new):a.addChild(c),l.addChild(c),c},t.createBisector=function(t,e,r){var s,o,a,c;if(e=n.providePoints(t,e,r,"point"),n.isPoint(e[0])&&n.isPoint(e[1])&&n.isPoint(e[2])){for(c=n.copyAttributes(r,t.options,"bisector","point"),c.snapToGrid=!1,s=t.create("point",[function(){return i.angleBisector(e[0],e[1],e[2],t)}],c),s.dump=!1,a=0;a<3;a++)n.exists(e[a]._is_new)?(s.addChild(e[a]),delete e[a]._is_new):e[a].addChild(s);return n.exists(r.layer)||(r.layer=t.options.layer.line),c=n.copyAttributes(r,t.options,"bisector"),o=l.createLine(t,[e[1],s],c),o.point=s,o.elType="bisector",o.setParents(e),o.subs={point:s},o.inherits.push(s),o}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point,point]")},t.createAngularBisectorsOfTwoLines=function(t,e,i){var r,s,a,l,c=t.select(e[0]),h=t.select(e[1]);if(c.elementClass!==o.OBJECT_CLASS_LINE||h.elementClass!==o.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,line]");return n.exists(i.layer)||(i.layer=t.options.layer.line),a=n.copyAttributes(i,t.options,"bisectorlines","line1"),r=t.create("line",[function(){var t=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]),e=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]);return c.stdform[0]/t-h.stdform[0]/e},function(){var t=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]),e=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]);return c.stdform[1]/t-h.stdform[1]/e},function(){var t=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]),e=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]);return c.stdform[2]/t-h.stdform[2]/e}],a),n.exists(i.layer)||(i.layer=t.options.layer.line),a=n.copyAttributes(i,t.options,"bisectorlines","line2"),s=t.create("line",[function(){var t=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]),e=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]);return c.stdform[0]/t+h.stdform[0]/e},function(){var t=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]),e=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]);return c.stdform[1]/t+h.stdform[1]/e},function(){var t=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]),e=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]);return c.stdform[2]/t+h.stdform[2]/e}],a),l=new u({line1:r,line2:s}),r.dump=!1,s.dump=!1,l.elType="bisectorlines",l.setParents([c.id,h.id]),l.subs={line1:r,line2:s},l},t.createCircumcenter=function(t,e,r){var s,o,l,c,h;if(e=n.providePoints(t,e,r,"point"),n.isPoint(e[0])&&n.isPoint(e[1])&&n.isPoint(e[2])){for(l=e[0],c=e[1],h=e[2],s=a.createPoint(t,[function(){return i.circumcenter(l,c,h,t)}],r),o=0;o<3;o++)n.exists(e[o]._is_new)?(s.addChild(e[o]),delete e[o]._is_new):e[o].addChild(s);return s.elType="circumcenter",s.setParents(e),s.generatePolynomial=function(){var t=l.symbolic.x,e=l.symbolic.y,i=c.symbolic.x,r=c.symbolic.y,n=h.symbolic.x,o=h.symbolic.y,a=s.symbolic.x,u=s.symbolic.y;return[["((",a,")-(",t,"))^2+((",u,")-(",e,"))^2-((",a,")-(",i,"))^2-((",u,")-(",r,"))^2"].join(""),["((",a,")-(",t,"))^2+((",u,")-(",e,"))^2-((",a,")-(",n,"))^2-((",u,")-(",o,"))^2"].join("")]},s}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]")},t.createIncenter=function(t,e,i){var r,a,l,c,h;if(e=n.providePoints(t,e,i,"point"),!(e.length>=3&&n.isPoint(e[0])&&n.isPoint(e[1])&&n.isPoint(e[2])))throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");for(a=e[0],l=e[1],c=e[2],r=t.create("point",[function(){var e,i,r;return e=Math.sqrt((l.X()-c.X())*(l.X()-c.X())+(l.Y()-c.Y())*(l.Y()-c.Y())),i=Math.sqrt((a.X()-c.X())*(a.X()-c.X())+(a.Y()-c.Y())*(a.Y()-c.Y())),r=Math.sqrt((l.X()-a.X())*(l.X()-a.X())+(l.Y()-a.Y())*(l.Y()-a.Y())),new s(o.COORDS_BY_USER,[(e*a.X()+i*l.X()+r*c.X())/(e+i+r),(e*a.Y()+i*l.Y()+r*c.Y())/(e+i+r)],t)}],i),h=0;h<3;h++)n.exists(e[h]._is_new)?(r.addChild(e[h]),delete e[h]._is_new):e[h].addChild(r);return r.elType="incenter",r.setParents(e),r},t.createCircumcircle=function(e,i,r){var s,o,a,l;if(!1===(i=n.providePoints(e,i,r,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]");try{for(a=n.copyAttributes(r,e.options,"circumcircle","center"),s=t.createCircumcenter(e,i,a),s.dump=!1,n.exists(r.layer)||(r.layer=e.options.layer.circle),a=n.copyAttributes(r,e.options,"circumcircle"),o=c.createCircle(e,[s,i[0]],a),o.elType="circumcircle",o.setParents(i),o.subs={center:s},o.inherits.push(o),l=0;l<3;l++)n.exists(i[l]._is_new)?(o.addChild(i[l]),delete i[l]._is_new):i[l].addChild(o)}catch(t){throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]")}return o},t.createIncircle=function(e,i,r){var s,o,a,l;if(!1===(i=n.providePoints(e,i,r,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]");try{for(l=n.copyAttributes(r,e.options,"incircle","center"),o=t.createIncenter(e,i,l),o.dump=!1,n.exists(r.layer)||(r.layer=e.options.layer.circle),l=n.copyAttributes(r,e.options,"incircle"),a=c.createCircle(e,[o,function(){var t=Math.sqrt((i[1].X()-i[2].X())*(i[1].X()-i[2].X())+(i[1].Y()-i[2].Y())*(i[1].Y()-i[2].Y())),e=Math.sqrt((i[0].X()-i[2].X())*(i[0].X()-i[2].X())+(i[0].Y()-i[2].Y())*(i[0].Y()-i[2].Y())),r=Math.sqrt((i[1].X()-i[0].X())*(i[1].X()-i[0].X())+(i[1].Y()-i[0].Y())*(i[1].Y()-i[0].Y())),s=(t+e+r)/2;return Math.sqrt((s-t)*(s-e)*(s-r)/s)}],l),a.elType="incircle",a.setParents(i),s=0;s<3;s++)n.exists(i[s]._is_new)?(a.addChild(i[s]),delete i[s]._is_new):i[s].addChild(a);a.center=o,a.subs={center:a.center},a.inherits.push(o)}catch(t){throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]")}return a},t.createReflection=function(t,e,i){var r,s,u,f,m,b,v,g,y="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, line]";for(b=0;b<e.length;++b)e[b]=t.select(e[b]);if(v=n.copyAttributes(i,t.options,"reflection"),n.isPoint(e[0]))s=n.providePoints(t,[e[0]],g)[0];else{if(e[0].elementClass!==o.OBJECT_CLASS_CURVE&&e[0].elementClass!==o.OBJECT_CLASS_LINE&&e[0].type!==o.OBJECT_TYPE_POLYGON&&e[0].elementClass!==o.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+y);s=e[0]}if(e[1].elementClass!==o.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+y);if(r=e[1],m=h.createTransform(t,[r],{type:"reflect"}),n.isPoint(s))u=a.createPoint(t,[s,m],v);else if(s.elementClass===o.OBJECT_CLASS_CURVE)u=d.createCurve(t,[s,m],v);else if(s.elementClass===o.OBJECT_CLASS_LINE)u=l.createLine(t,[s,m],v);else if(s.type===o.OBJECT_TYPE_POLYGON)u=p.createPolygon(t,[s,m],v);else{if(s.elementClass!==o.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+y);"euclidean"===v.type.toLowerCase()?(g=n.copyAttributes(i,t.options,"reflection","center"),f=a.createPoint(t,[s.center,m],g),f.prepareUpdate().update().updateVisibility(n.evaluate(f.visProp.visible)).updateRenderer(),u=c.createCircle(t,[f,function(){return s.Radius()}],v)):u=c.createCircle(t,[s,m],v)}return n.exists(s._is_new)&&(u.addChild(s),delete s._is_new),r.addChild(u),u.elType="reflection",u.addParents(r),u.prepareUpdate().update(),n.isPoint(u)&&(u.generatePolynomial=function(){var t=r.point1.symbolic.x,e=r.point1.symbolic.y,i=r.point2.symbolic.x,n=r.point2.symbolic.y,o=s.symbolic.x,a=s.symbolic.y,l=u.symbolic.x,c=u.symbolic.y;return[["((",c,")-(",a,"))*((",e,")-(",n,"))+((",t,")-(",i,"))*((",l,")-(",o,"))"].join(""),["((",l,")-(",t,"))^2+((",c,")-(",e,"))^2-((",o,")-(",t,"))^2-((",a,")-(",e,"))^2"].join("")]}),u},t.createMirrorElement=function(t,e,i){var r,s,u,f,m,b,v,g,y="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, point]";for(s=0;s<e.length;++s)e[s]=t.select(e[s]);if(v=n.copyAttributes(i,t.options,"mirrorelement"),n.isPoint(e[0]))r=n.providePoints(t,[e[0]],v)[0];else{if(e[0].elementClass!==o.OBJECT_CLASS_CURVE&&e[0].elementClass!==o.OBJECT_CLASS_LINE&&e[0].type!==o.OBJECT_TYPE_POLYGON&&e[0].elementClass!==o.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+y);r=e[0]}if(!n.isPoint(e[1]))throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+y);if(g=n.copyAttributes(i,t.options,"mirrorelement","point"),u=n.providePoints(t,[e[1]],g)[0],b=h.createTransform(t,[Math.PI,u],{type:"rotate"}),n.isPoint(r))f=a.createPoint(t,[r,b],v);else if(r.elementClass===o.OBJECT_CLASS_CURVE)f=d.createCurve(t,[r,b],v);else if(r.elementClass===o.OBJECT_CLASS_LINE)f=l.createLine(t,[r,b],v);else if(r.type===o.OBJECT_TYPE_POLYGON)f=p.createPolygon(t,[r,b],v);else{if(r.elementClass!==o.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+y);"euclidean"===v.type.toLowerCase()?(g=n.copyAttributes(i,t.options,"mirrorelement","center"),m=a.createPoint(t,[r.center,b],g),m.prepareUpdate().update().updateVisibility(n.evaluate(m.visProp.visible)).updateRenderer(),f=c.createCircle(t,[m,function(){return r.Radius()}],v)):f=c.createCircle(t,[r,b],v)}return n.exists(r._is_new)&&(f.addChild(r),delete r._is_new),u.addChild(f),f.elType="mirrorelement",f.addParents(u),f.prepareUpdate().update(),f},t.createMirrorPoint=function(e,i,r){var s=t.createMirrorElement(e,i,r);return s.elType="mirrorpoint",s},t.createIntegral=function(e,i,a){var l,c,h,u,d,p,f,m,b,v,g,y,_,C,P=null;if(n.isArray(i[0])&&i[1].elementClass===o.OBJECT_CLASS_CURVE)l=i[0],c=i[1];else{if(!n.isArray(i[1])||i[0].elementClass!==o.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create integral with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [[number|function,number|function],curve]");l=i[1],c=i[0]}return h=n.copyAttributes(a,e.options,"integral"),h.withLabel=!1,C=e.create("curve",[[0],[0]],h),u=l[0],d=l[1],n.isFunction(u)?(p=u,f=function(){return c.Y(p())},u=p()):(p=u,f=c.Y(u)),n.isFunction(d)?(m=d,b=function(){return c.Y(m())},d=m()):(m=d,b=c.Y(d)),h=n.copyAttributes(a,e.options,"integral","curveLeft"),v=e.create("glider",[p,f,c],h),n.isFunction(p)&&v.hideElement(),h=n.copyAttributes(a,e.options,"integral","baseLeft"),g=e.create("point",[function(){return"y"===n.evaluate(C.visProp.axis)?0:v.X()},function(){return"y"===n.evaluate(C.visProp.axis)?v.Y():0}],h),h=n.copyAttributes(a,e.options,"integral","curveRight"),y=e.create("glider",[m,b,c],h),n.isFunction(m)&&y.hideElement(),h=n.copyAttributes(a,e.options,"integral","baseRight"),_=e.create("point",[function(){return"y"===n.evaluate(C.visProp.axis)?0:y.X()},function(){return"y"===n.evaluate(C.visProp.axis)?y.Y():0}],h),h=n.copyAttributes(a,e.options,"integral"),!1!==h.withlabel&&"y"!==h.axis&&(h=n.copyAttributes(a,e.options,"integral","label"),h=n.copyAttributes(h,e.options,"label"),P=e.create("text",[function(){var t=new s(o.COORDS_BY_SCREEN,[n.evaluate(this.visProp.offset[0])+this.board.origin.scrCoords[1],0],this.board,!1),e=this.board.getBoundingBox(),i=.1*(e[2]-e[0]),r=y.X();return r<e[0]?r=e[0]+i:r>e[2]&&(r=e[2]-i),r+t.usrCoords[1]},function(){var t=new s(o.COORDS_BY_SCREEN,[0,n.evaluate(this.visProp.offset[1])+this.board.origin.scrCoords[2]],this.board,!1),e=this.board.getBoundingBox(),i=.1*(e[1]-e[3]),r=y.Y();return r>e[1]?r=e[1]-i:r<e[3]&&(r=e[3]+i),r+t.usrCoords[2]},function(){var t=r.NewtonCotes([g.X(),_.X()],c.Y);return"&int; = "+n.toFixed(t,4)}],h),P.dump=!1,v.addChild(P),y.addChild(P)),v.dump=!1,g.dump=!1,y.dump=!1,_.dump=!1,C.elType="integral",C.setParents([c.id,l]),C.subs={curveLeft:v,baseLeft:g,curveRight:y,baseRight:_},C.inherits.push(v,g,y,_),h.withLabel&&(C.subs.label=P,C.inherits.push(P)),C.Value=function(){return r.I([g.X(),_.X()],c.Y)},C.updateDataArray=function(){var t,e,i,r,s,o,a,l,h;if("y"===n.evaluate(this.visProp.axis)){for(v.Y()<y.Y()?(o=v.X(),l=v.Y(),a=y.X(),h=y.Y()):(o=y.X(),l=y.Y(),a=v.X(),h=v.Y()),r=Math.min(o,a),s=Math.max(o,a),t=[0,o],e=[l,l],i=0;i<c.numberPoints;i++)l<=c.points[i].usrCoords[2]&&r<=c.points[i].usrCoords[1]&&c.points[i].usrCoords[2]<=h&&c.points[i].usrCoords[1]<=s&&(t.push(c.points[i].usrCoords[1]),e.push(c.points[i].usrCoords[2]));t.push(a),e.push(h),t.push(0),e.push(h),t.push(0),e.push(l)}else{for(g.X()<_.X()?(r=g.X(),s=_.X()):(r=_.X(),s=g.X()),t=[r,r],e=[0,c.Y(r)],i=0;i<c.numberPoints;i++)r<=c.points[i].usrCoords[1]&&c.points[i].usrCoords[1]<=s&&(t.push(c.points[i].usrCoords[1]),e.push(c.points[i].usrCoords[2]));t.push(s),e.push(c.Y(s)),t.push(s),e.push(0),t.push(r),e.push(0)}this.dataX=t,this.dataY=e},v.addChild(C),y.addChild(C),g.addChild(C),_.addChild(C),C.baseLeft=g,C.baseRight=_,C.curveLeft=v,C.curveRight=y,C.methodMap=t.deepCopy(C.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),C.label=P,C},t.createGrid=function(t,e,i){var r,a;return a=n.copyAttributes(i,t.options,"grid"),r=t.create("curve",[[null],[null]],a),r.elType="grid",r.type=o.OBJECT_TYPE_GRID,r.updateDataArray=function(){var e,i,a,l,c,h=n.evaluate(this.visProp.gridx),u=n.evaluate(this.visProp.gridy);for(l=n.isArray(this.visProp.topleft)?new s(n.evaluate(this.visProp.tltype)||o.COORDS_BY_USER,this.visProp.topleft,t):new s(o.COORDS_BY_SCREEN,[0,0],t),c=n.isArray(this.visProp.bottomright)?new s(n.evaluate(this.visProp.brtype)||o.COORDS_BY_USER,this.visProp.bottomright,t):new s(o.COORDS_BY_SCREEN,[t.canvasWidth,t.canvasHeight],t),t.options.grid.hasGrid=!0,r.dataX=[],r.dataY=[],e=Math.floor(l.usrCoords[2]/u)*u,i=Math.ceil(c.usrCoords[2]/u)*u,l.usrCoords[2]<c.usrCoords[2]&&(e=Math.ceil(c.usrCoords[2]/u)*u,i=Math.floor(l.usrCoords[2]/u)*u),a=e;a>i-u;a-=u)r.dataX.push(l.usrCoords[1],c.usrCoords[1],NaN),r.dataY.push(a,a,NaN);for(e=Math.ceil(l.usrCoords[1]/h)*h,i=Math.floor(c.usrCoords[1]/h)*h,l.usrCoords[1]>c.usrCoords[1]&&(e=Math.floor(c.usrCoords[1]/h)*h,i=Math.ceil(l.usrCoords[1]/h)*h),a=e;a<i+h;a+=h)r.dataX.push(a,a,NaN),r.dataY.push(l.usrCoords[2],c.usrCoords[2],NaN)},r.hasPoint=function(){return!1},t.grids.push(r),r},t.createInequality=function(t,r,s){var a,l,c;if(c=n.copyAttributes(s,t.options,"inequality"),r[0].elementClass===o.OBJECT_CLASS_LINE)l=t.create("curve",[[],[]],c),l.hasPoint=function(){return!1},l.updateDataArray=function(){var s,n,a,l=t.getBoundingBox(),h=c.inverse?-1:1,u=1.5*Math.max(l[2]-l[0],l[1]-l[3]),d={coords:{usrCoords:[1,(l[0]+l[2])/2,c.inverse?l[1]:l[3]]}},p=r[0].stdform.slice(1),f=p;a=1.5*Math.max(i.perpendicular(r[0],d,t)[0].distance(o.COORDS_BY_USER,d.coords),u),a*=h,d={coords:{usrCoords:[1,(l[0]+l[2])/2,(l[1]+l[3])/2]}},d=Math.abs(e.innerProduct(d.coords.usrCoords,r[0].stdform,3))>=e.eps?i.perpendicular(r[0],d,t)[0].usrCoords:d.coords.usrCoords,s=[1,d[1]+p[1]*u,d[2]-p[0]*u],n=[1,d[1]-f[1]*u,d[2]+f[0]*u],this.dataX=[s[1],s[1]+p[0]*a,n[1]+f[0]*a,n[1],s[1]],this.dataY=[s[2],s[2]+p[1]*a,n[2]+f[1]*a,n[2],s[2]]};else if(r[0].elementClass===o.OBJECT_CLASS_CURVE&&"functiongraph"===r[0].visProp.curvetype)l=t.create("curve",[[],[]],c),l.updateDataArray=function(){var t,e,i,s,o,a,l,c,h,u=this.board.getBoundingBox(),d=[],p=r[0].minX(),f=r[0].maxX(),m=.3*(u[1]-u[3]);if(t=n.evaluate(this.visProp.inverse)?1:3,this.dataX=[],this.dataY=[],0!==(s=r[0].points.length))for(u[1]+=m,u[3]-=m,i=-1;i<s-1;){for(o=i+1,e=s;o<s;o++)if(r[0].points[o].isReal()){e=o;break}if(e>=s)break;for(o=e,i=s-1;o<s-1;o++)if(!r[0].points[o+1].isReal()){i=o;break}for(c=r[0].points[e].usrCoords[1],h=r[0].points[i].usrCoords[1],a=u[0]<p?p:u[0],l=u[2]>f?f:u[2],a=0===e?a:Math.max(a,c),l=i===s-1?l:Math.min(l,h),a=0===e?p:c,l=i===s-1?f:h,d=[],d.push([1,a,u[t]]),d.push([1,a,r[0].points[e].usrCoords[2]]),o=e;o<=i;o++)d.push(r[0].points[o].usrCoords);for(d.push([1,l,r[0].points[i].usrCoords[2]]),d.push([1,l,u[t]]),d.push(d[0]),o=0;o<d.length;o++)this.dataX.push(d[o][1]),this.dataY.push(d[o][2]);i<s-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},l.hasPoint=function(){return!1};else if(a=n.createFunction(r[0]),!n.exists(a))throw new Error("JSXGraph: Can't create area with the given parents.\nPossible parent types: [line], [function]");return l.addParents(r[0]),l},t.registerElement("arrowparallel",t.createArrowParallel),t.registerElement("bisector",t.createBisector),t.registerElement("bisectorlines",t.createAngularBisectorsOfTwoLines),t.registerElement("msector",t.createMsector),t.registerElement("circumcircle",t.createCircumcircle),t.registerElement("circumcirclemidpoint",t.createCircumcenter),t.registerElement("circumcenter",t.createCircumcenter),t.registerElement("incenter",t.createIncenter),t.registerElement("incircle",t.createIncircle),t.registerElement("integral",t.createIntegral),t.registerElement("midpoint",t.createMidpoint),t.registerElement("mirrorelement",t.createMirrorElement),t.registerElement("mirrorpoint",t.createMirrorPoint),t.registerElement("normal",t.createNormal),t.registerElement("orthogonalprojection",t.createOrthogonalProjection),t.registerElement("parallel",t.createParallel),t.registerElement("parallelpoint",t.createParallelPoint),t.registerElement("perpendicular",t.createPerpendicular),t.registerElement("perpendicularpoint",t.createPerpendicularPoint),t.registerElement("perpendicularsegment",t.createPerpendicularSegment),t.registerElement("reflection",t.createReflection),t.registerElement("grid",t.createGrid),t.registerElement("inequality",t.createInequality),{createArrowParallel:t.createArrowParallel,createBisector:t.createBisector,createAngularBisectorOfTwoLines:t.createAngularBisectorsOfTwoLines,createCircumcircle:t.createCircumcircle,createCircumcenter:t.createCircumcenter,createIncenter:t.createIncenter,createIncircle:t.createIncircle,createIntegral:t.createIntegral,createMidpoint:t.createMidpoint,createMirrorElement:t.createMirrorElement,createMirrorPoint:t.createMirrorPoint,createNormal:t.createNormal,createOrthogonalProjection:t.createOrthogonalProjection,createParallel:t.createParallel,createParallelPoint:t.createParallelPoint,createPerpendicular:t.createPerpendicular,createPerpendicularPoint:t.createPerpendicularPoint,createPerpendicularSegmen:t.createPerpendicularSegment,createReflection:t.createReflection,createGrid:t.createGrid,createInequality:t.createInequality}})),define("element/locus",["jxg","math/symbolic","utils/type"],(function(t,e,i){"use strict";return t.createLocus=function(t,r,s){var n,o;if(!i.isArray(r)||1!==r.length||!i.isPoint(r[0]))throw new Error("JSXGraph: Can't create locus with parent of type other than point.\nPossible parent types: [point]");return o=r[0],n=t.create("curve",[[null],[null]],s),n.dontCallServer=!1,n.elType="locus",n.setParents([o.id]),n.updateDataArray=function(){var i,r,s;n.board.mode>0||(i=e.generatePolynomials(t,o,!0).join("|"))!==n.spe&&(n.spe=i,r=function(t,e,i,r){n.dataX=t,n.dataY=e,n.eq=i,n.ctime=r,n.generatePolynomial=function(t){return function(e){var i,r="("+e.symbolic.x+")",s="("+e.symbolic.y+")",n=[];for(i=0;i<t.length;i++)n[i]=t[i].replace(/\*\*/g,"^").replace(/x/g,r).replace(/y/g,s);return n}}(i)},s=e.geometricLocusByGroebnerBase(t,o,r),r(s.datax,s.datay,s.polynomial,s.exectime))},n},t.registerElement("locus",t.createLocus),{createLocus:t.createLocus}})),define("base/image",["jxg","base/constants","base/coords","base/element","math/math","utils/type","base/coordselement"],(function(t,e,i,r,s,n,o){"use strict";return t.Image=function(i,r,s,o,a){this.constructor(i,s,e.OBJECT_TYPE_IMAGE,e.OBJECT_CLASS_OTHER),this.element=this.board.select(s.anchor),this.coordsConstructor(r),this.W=n.createFunction(a[0],this.board,""),this.H=n.createFunction(a[1],this.board,""),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*i.unitX),Math.abs(this.usrSize[1]*i.unitY)],this.url=o,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=t.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},t.Image.prototype=new r,n.copyPrototypeMethods(t.Image,o,"coordsConstructor"),t.extend(t.Image.prototype,{hasPoint:function(t,r){var o,a,l,c,h,u,d,p,f,m=this.transformations.length;return n.isObject(n.evaluate(this.visProp.precision))?(c=this.board._inputDevice,h=n.evaluate(this.visProp.precision[c])):h=this.board.options.precision.hasPoint,0===m?(o=t-this.coords.scrCoords[1],a=this.coords.scrCoords[2]-r,l=h,o>=-l&&o-this.size[0]<=l&&a>=-l&&a-this.size[1]<=l):(u=new i(e.COORDS_BY_SCREEN,[t,r],this.board),u=u.usrCoords,d=[u[0]-this.span[0][0],u[1]-this.span[0][1],u[2]-this.span[0][2]],f=s.innerProduct,0<=(p=f(d,this.span[1]))&&p<=f(this.span[1],this.span[1])&&0<=(p=f(d,this.span[2]))&&p<=f(this.span[2],this.span[2]))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var t,e,i=this.transformations.length,r=[];if(0===i)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(r[0]=[this.Z(),this.X(),this.Y()],r[1]=[this.Z(),this.X()+this.W(),this.Y()],r[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<i;t++)for(e=0;e<3;e++)r[e]=s.matVecMult(this.transformations[t].matrix,r[e]);for(e=0;e<3;e++)r[e][1]/=r[e][0],r[e][2]/=r[e][0],r[e][0]/=r[e][0];for(e=1;e<3;e++)r[e][0]-=r[0][0],r[e][1]-=r[0][1],r[e][2]-=r[0][2];this.span=r}return this},addTransform:function(t){var e;if(n.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(t=this.parents),t},setSize:function(t,e){return this.W=n.createFunction(t,this.board,""),this.H=n.createFunction(e,this.board,""),this},W:function(){},H:function(){}}),t.createImage=function(e,i,r){var s,a,l=i[0],c=i[1],h=i[2];if(s=n.copyAttributes(r,e.options,"image"),!(a=o.create(t.Image,e,c,s,l,h)))throw new Error("JSXGraph: Can't create image with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==s.rotate&&a.addRotation(s.rotate),a},t.registerElement("image",t.createImage),{Image:t.Image,createImage:t.createImage}})),define("element/slider",["jxg","math/math","base/constants","base/coords","utils/type","base/point"],(function(t,e,i,r,s,n){"use strict";return t.createSlider=function(t,o,a){var l,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w,S,T,N,M;return N=s.copyAttributes(a,t.options,"slider"),E=N.withticks,x=N.withlabel,w=N.snapwidth,M=N.precision,N=s.copyAttributes(a,t.options,"slider","point1"),f=t.create("point",o[0],N),N=s.copyAttributes(a,t.options,"slider","point2"),m=t.create("point",o[1],N),N=s.copyAttributes(a,t.options,"slider","baseline"),b=t.create("segment",[f,m],N),b.updateStdform(),l=f.coords.usrCoords.slice(1),c=m.coords.usrCoords.slice(1),h=o[2][0],u=o[2][1],d=o[2][2],p=d-h,S=s.evaluate(w),T=-1===S?u:Math.round(u/S)*S,y=l[0]+(c[0]-l[0])*(T-h)/(d-h),_=l[1]+(c[1]-l[1])*(T-h)/(d-h),N=s.copyAttributes(a,t.options,"slider"),N.withLabel=!1,C=t.create("glider",[y,_,b],N),C.setAttribute({snapwidth:w}),N=s.copyAttributes(a,t.options,"slider","highline"),P=t.create("segment",[f,C],N),C.Value=function(){var t=this._smax-this._smin,e=s.evaluate(this.visProp.snapwidth);return-1===e?this.position*t+this._smin:Math.round((this.position*t+this._smin)/e)*e},C.methodMap=s.deepCopy(C.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin"}),C._smax=d,C._smin=h,C.setMax=function(t){return this._smax=t,this},C.setValue=function(t){var i=this._smax-this._smin;return Math.abs(i)>e.eps?this.position=(t-this._smin)/i:this.position=0,this.position=Math.max(0,Math.min(1,this.position)),this},C.setMin=function(t){return this._smin=t,this},x&&(N=s.copyAttributes(a,t.options,"slider","label"),O=t.create("text",[function(){return.05*(m.X()-f.X())+m.X()},function(){return.05*(m.Y()-f.Y())+m.Y()},function(){var t,e=s.evaluate(C.visProp.suffixlabel),i=s.evaluate(C.visProp.unitlabel),r=s.evaluate(C.visProp.postlabel);return t=null!==e?e:C.name&&""!==C.name?C.name+" = ":"",t+=s.toFixed(C.Value(),M),null!==i&&(t+=i),null!==r&&(t+=r),t}],N),C.label=O,C.visProp.withlabel=!0,C.hasLabel=!0),C.point1=f,C.point2=m,C.baseline=b,C.highline=P,E&&(N=s.copyAttributes(a,t.options,"slider","ticks"),s.exists(N.generatelabeltext)||(N.generateLabelText=function(t,i,r){var s=C.point1.Dist(C.point2),n=C._smin,o=C._smax,a=this.getDistanceFromZero(i,t)*(o-n)/s+n;return s<e.eps||Math.abs(a)<e.eps?"0":this.formatLabelText(a)}),v=2,g=t.create("ticks",[C.baseline,C.point1.Dist(f)/v,function(t){var r=C.point1.Dist(C.point2),s=C.point1.coords.distance(i.COORDS_BY_USER,t);return r<e.eps?0:s/r*p+h}],N),C.ticks=g),C.remove=function(){x&&t.removeObject(O),t.removeObject(P),t.removeObject(b),t.removeObject(m),t.removeObject(f),n.Point.prototype.remove.call(C)},f.dump=!1,m.dump=!1,b.dump=!1,P.dump=!1,C.elType="slider",C.parents=o,C.subs={point1:f,point2:m,baseLine:b,highLine:P},C.inherits.push(f,m,b,P),E&&(g.dump=!1,C.subs.ticks=g,C.inherits.push(g)),C.baseline.on("up",(function(t){var e,n;s.evaluate(C.visProp.moveonup)&&!s.evaluate(C.visProp.fixed)&&(e=b.board.getMousePosition(t,0),n=new r(i.COORDS_BY_SCREEN,e,this.board),C.moveTo([n.usrCoords[1],n.usrCoords[2]]))})),C.prepareUpdate().update(),t.isSuspendedUpdate||(C.updateVisibility().updateRenderer(),C.baseline.updateVisibility().updateRenderer(),C.highline.updateVisibility().updateRenderer(),E&&C.ticks.updateVisibility().updateRenderer()),C},t.registerElement("slider",t.createSlider),{createSlider:t.createSlider}})),define("element/measure",["jxg","utils/type","base/element"],(function(t,e,i){"use strict";return t.createTapemeasure=function(r,s,n){var o,a,l,c,h,u,d,p,f,m,b;return o=s[0],a=s[1],l=e.copyAttributes(n,r.options,"tapemeasure","point1"),p=r.create("point",o,l),l=e.copyAttributes(n,r.options,"tapemeasure","point2"),f=r.create("point",a,l),p.setAttribute({ignoredSnapToPoints:[f]}),f.setAttribute({ignoredSnapToPoints:[p]}),l=e.copyAttributes(n,r.options,"tapemeasure"),c=l.withticks,h=l.withlabel,u=l.precision,h&&(l.withlabel=!0),d=r.create("segment",[p,f],l),h&&(m=n.name&&""!==n.name?n.name+" = ":"",d.label.setText((function(){return m+e.toFixed(p.Dist(f),u)}))),c&&(l=e.copyAttributes(n,r.options,"tapemeasure","ticks"),b=r.create("ticks",[d,.1],l),d.inherits.push(b)),d.remove=function(){c&&d.removeTicks(b),r.removeObject(f),r.removeObject(p),i.prototype.remove.call(this)},d.Value=function(){return p.Dist(f)},p.dump=!1,f.dump=!1,d.elType="tapemeasure",d.getParents=function(){return[[p.X(),p.Y()],[f.X(),f.Y()]]},d.subs={point1:p,point2:f},c&&(b.dump=!1),d.methodMap=t.deepCopy(d.methodMap,{Value:"Value"}),d.prepareUpdate().update(),r.isSuspendedUpdate||(d.updateVisibility().updateRenderer(),d.point1.updateVisibility().updateRenderer(),d.point2.updateVisibility().updateRenderer()),d},t.registerElement("tapemeasure",t.createTapemeasure),{createTapemeasure:t.createTapemeasure}})),define("parser/datasource",["jxg","utils/type"],(function(t,e){"use strict";return t.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},t.extend(t.DataSource.prototype,{loadFromArray:function(t,i,r){var s,n,o;if(e.isArray(i)&&(this.columnHeaders=i,i=!1),e.isArray(r)&&(this.rowHeaders=r,r=!1),this.data=[],i&&(this.columnHeaders=[]),r&&(this.rowHeaders=[]),e.exists(t)){for(this.data=[],s=0;s<t.length;s++)for(this.data[s]=[],n=0;n<t[s].length;n++)o=t[s][n],parseFloat(o).toString()===o?this.data[s][n]=parseFloat(o):this.data[s][n]="-"!==o?o:NaN;if(i&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),r)for(this.rowHeaders=[],s=0;s<this.data.length;s++)this.rowHeaders.push(this.data[s][0]),this.data[s]=this.data[s].slice(1)}return this},loadFromTable:function(t,i,r){var s,n,o,a,l;if(e.isArray(i)&&(this.columnHeaders=i,i=!1),e.isArray(r)&&(this.rowHeaders=r,r=!1),this.data=[],i&&(this.columnHeaders=[]),r&&(this.rowHeaders=[]),t=document.getElementById(t),e.exists(t)){for(s=t.getElementsByTagName("tr"),this.data=[],n=0;n<s.length;n++)for(a=s[n].getElementsByTagName("td"),this.data[n]=[],o=0;o<a.length;o++)l=a[o].innerHTML,parseFloat(l).toString()===l?this.data[n][o]=parseFloat(l):this.data[n][o]="-"!==l?l:NaN;if(i&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),r)for(this.rowHeaders=[],n=0;n<this.data.length;n++)this.rowHeaders.push(this.data[n][0]),this.data[n]=this.data[n].slice(1)}return this},addColumn:function(t,e,i){throw new Error("not implemented")},addRow:function(t,e,i){throw new Error("not implemented")},getColumn:function(t){var i,r=[];if(e.isString(t))for(i=0;i<this.columnHeaders.length;i++)if(t===this.columnHeaders[i]){t=i;break}for(i=0;i<this.data.length;i++)this.data[i].length>t&&(r[i]=parseFloat(this.data[i][t]));return r},getRow:function(t){var i,r;if(e.isString(t))for(r=0;r<this.rowHeaders.length;r++)if(t===this.rowHeaders[r]){t=r;break}for(i=[],r=0;r<this.data[t].length;r++)i[r]=this.data[t][r];return i}}),t.DataSource})),define("base/chart",["jxg","math/numerics","math/statistics","base/constants","base/coords","base/element","parser/datasource","utils/color","utils/type","utils/env","base/curve","base/point","base/text","base/polygon","element/sector","base/transformation","base/line","base/circle"],(function(t,e,i,r,s,n,o,a,l,c,h,u,d,p,f,m,b,v){"use strict";return t.Chart=function(t,e,i){var r,s,n,o,a,c;if(this.constructor(t,i),!l.isArray(e)||0===e.length)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],l.isNumber(e[0]))for(s=e,r=[],n=0;n<s.length;n++)r[n]=n+1;else if(1===e.length&&l.isArray(e[0]))for(s=e[0],r=[],c=l.evaluate(s).length,n=0;n<c;n++)r[n]=n+1;else 2===e.length&&(c=Math.min(e[0].length,e[1].length),r=e[0].slice(0,c),s=e[1].slice(0,c));if(l.isArray(s)&&0===s.length)throw new Error("JSXGraph: Can't create charts without data.");for(a=i.chartstyle.replace(/ /g,"").split(","),n=0;n<a.length;n++){switch(a[n]){case"bar":o=this.drawBar(t,r,s,i);break;case"line":o=this.drawLine(t,r,s,i);break;case"fit":o=this.drawFit(t,r,s,i);break;case"spline":o=this.drawSpline(t,r,s,i);break;case"pie":o=this.drawPie(t,s,i);break;case"point":o=this.drawPoints(t,r,s,i);break;case"radar":o=this.drawRadar(t,e,i)}this.elements.push(o)}return this.id=this.board.setId(this,"Chart"),this.elements},t.Chart.prototype=new n,t.extend(t.Chart.prototype,{drawLine:function(t,e,i,r){return r.fillcolor="none",r.highlightfillcolor="none",t.create("curve",[e,i],r)},drawSpline:function(t,e,i,r){return r.fillColor="none",r.highlightfillcolor="none",t.create("spline",[e,i],r)},drawFit:function(t,i,r,s){var n=s.degree;return n=Math.max(parseInt(n,10),1)||1,s.fillcolor="none",s.highlightfillcolor="none",t.create("functiongraph",[e.regressionPolynomial(n,i,r)],s)},drawBar:function(t,e,i,r){var s,n,o,a,c,h,u,d,p,f,m=[],b=[],v=function(t,i){return function(){return e[t]()-i*o}},g={fixed:!0,withLabel:!1,visible:!1,name:""};if((p=l.copyAttributes(r,t.options,"chart"))&&p.width)o=p.width;else{if(e.length<=1)o=1;else for(o=e[1]-e[0],s=1;s<e.length-1;s++)o=e[s+1]-e[s]<o?e[s+1]-e[s]:o;o*=.8}for(f=l.copyAttributes(r,t.options,"chart","label"),s=0;s<e.length;s++)l.isFunction(e[s])?(a=v(s,-.5),c=v(s,0),h=v(s,.5)):(a=e[s]-.5*o,c=e[s],h=e[s]+.5*o),u=l.isFunction(i[s])?i[s]():i[s],u=i[s],"horizontal"===p.dir?(b[0]=t.create("point",[0,a],g),b[1]=t.create("point",[u,a],g),b[2]=t.create("point",[u,h],g),b[3]=t.create("point",[0,h],g),l.exists(p.labels)&&l.exists(p.labels[s])&&(f.anchorY="middle",n=t.create("text",[u,c,p.labels[s]],f),n.visProp.anchorx=function(t){return function(){return t.X()>=0?"left":"right"}}(n))):(b[0]=t.create("point",[a,0],g),b[1]=t.create("point",[a,u],g),b[2]=t.create("point",[h,u],g),b[3]=t.create("point",[h,0],g),l.exists(p.labels)&&l.exists(p.labels[s])&&(f.anchorX="middle",n=t.create("text",[c,u,p.labels[s]],f),n.visProp.anchory=function(t){return function(){return t.Y()>=0?"bottom":"top"}}(n))),l.isArray(p.colors)&&(d=p.colors,p.fillcolor=d[s%d.length]),m[s]=t.create("polygon",b,p),l.exists(p.labels)&&l.exists(p.labels[s])&&(m[s].text=n);return m},drawPoints:function(t,e,i,r){var s,n=[],o=r.infoboxarray;for(r.fixed=!0,r.name="",s=0;s<e.length;s++)r.infoboxtext=!!o&&o[s%o.length],n[s]=t.create("point",[e[s],i[s]],r);return n},drawPie:function(t,e,n){var o,a,c=[],h=[],u=(i.sum(e),n.colors),d=n.highlightcolors,p=n.labels,f=n.radius||4,m=f,b=n.center||[0,0],v=b[0],g=b[1],y=function(t,i,r){return function(){var s,n,o,a=0;for(n=0;n<=t;n++)a+=parseFloat(l.evaluate(e[n]));for(s=a,n=t+1;n<e.length;n++)s+=parseFloat(l.evaluate(e[n]));return o=0!==s?2*Math.PI*a/s:0,m()*Math[i](o)+r}},_=function(t,e){var i=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],n=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];l.exists(this.label)&&(this.label.rendNode.style.fontSize=e*l.evaluate(this.label.visProp.fontsize)+"px",this.label.fullUpdate()),this.point2.coords=new s(r.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+i*t,this.point1.coords.usrCoords[2]+n*t],this.board),this.fullUpdate()},C=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),_.call(this,1.1,2))},P=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),_.call(this,.9090909,1))},O={fixed:!0,withLabel:!1,visible:!1,name:""};if(!l.isArray(p))for(p=[],o=0;o<e.length;o++)p[o]="";for(l.isFunction(f)||(m=function(){return f}),n.highlightonsector=n.highlightonsector||!1,n.straightfirst=!1,n.straightlast=!1,a=t.create("point",[v,g],O),c[0]=t.create("point",[function(){return m()+v},function(){return g}],O),o=0;o<e.length;o++)c[o+1]=t.create("point",[y(o,"cos",v),y(o,"sin",g)],O),n.name=p[o],n.withlabel=""!==n.name,n.fillcolor=u&&u[o%u.length],n.labelcolor=u&&u[o%u.length],n.highlightfillcolor=d&&d[o%d.length],h[o]=t.create("sector",[a,c[o],c[o+1]],n),n.highlightonsector&&(h[o].hasPoint=h[o].hasPointSector),n.highlightbysize&&(h[o].highlight=C,h[o].noHighlight=P);return{sectors:h,points:c,midpoint:a}},drawRadar:function(e,i,n){var o,a,c,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x,E,w,S,T,N,M,A,R,k,L,j,I,B,D,Y,X,F,U,G,J,z,H,V,$,q,W=i.length,Q=function(){var t,e,i,n,o=l.evaluate(this.visProp.label.offset).slice(0);return t=this.point1.X(),e=this.point2.X(),i=this.point1.Y(),n=this.point2.Y(),e<t&&(o[0]=-o[0]),n<i&&(o[1]=-o[1]),this.setLabelRelativeCoords(o),new s(r.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},Z=function(t,i){var r,s,n;return r=e.create("transform",[-(C[i]-y[i]),0],{type:"translate"}),s=e.create("transform",[E/(P[i]+_[i]-(C[i]-y[i])),1],{type:"scale"}),r.melt(s),n=e.create("transform",[t],{type:"rotate"}),r.melt(n),r};if(W<=0)throw new Error("JSXGraph radar chart: no data");if(c=n.paramarray,!l.exists(c))throw new Error("JSXGraph radar chart: need paramArray attribute");if((h=c.length)<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(o=0;o<W;o++)if(h!==i[o].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+i[o].length+" != "+h+")");for(u=[],d=[],a=0;a<h;a++)u[a]=i[0][a],d[a]=u[a];for(o=1;o<W;o++)for(a=0;a<h;a++)i[o][a]>u[a]&&(u[a]=i[o][a]),i[o][a]<d[a]&&(d[a]=i[o][a]);for(p=[],f=[],o=0;o<W;o++)p[o]="",f[o]=[];for(m=[],b=[],v=n.startshiftratio||0,g=n.endshiftratio||0,o=0;o<h;o++)m[o]=(u[o]-d[o])*v,b[o]=(u[o]-d[o])*g;if(y=n.startshiftarray||m,_=n.endshiftarray||b,C=n.startarray||d,l.exists(n.start))for(o=0;o<h;o++)C[o]=n.start;if(P=n.endarray||u,l.exists(n.end))for(o=0;o<h;o++)P[o]=n.end;if(y.length!==h)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(_.length!==h)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(C.length!==h)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(P.length!==h)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(O=n.labelarray||p,x=n.colors,n.highlightcolors,E=n.radius||10,$=n.strokewidth||1,l.exists(n.highlightonsector)||(n.highlightonsector=!1),w={name:n.name,id:n.id,strokewidth:$,polystrokewidth:n.polystrokewidth||$,strokecolor:n.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:n.fillColor||"#FFFF88",fillopacity:n.fillOpacity||.4,highlightfillcolor:n.highlightFillColor||"#FF7400",highlightstrokecolor:n.highlightStrokeColor||"black",gradient:n.gradient||"none"},S=n.center||[0,0],T=S[0],N=S[1],M=e.create("point",[T,N],{name:"",fixed:!0,withlabel:!1,visible:!1}),A=Math.PI/2-Math.PI/h,A=n.startangle||0,R=A,k=[],L=[],o=0;o<h;o++)for(R+=2*Math.PI/h,I=E*Math.cos(R)+T,B=E*Math.sin(R)+N,k[o]=e.create("point",[I,B],{name:"",fixed:!0,withlabel:!1,visible:!1}),L[o]=e.create("line",[M,k[o]],{name:c[o],strokeColor:w.strokecolor,strokeWidth:w.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:w.highlightstrokecolor}),L[o].getLabelAnchor=Q,j=Z(R,o),a=0;a<i.length;a++)q=i[a][o],f[a][o]=e.create("point",[q,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),f[a][o].addTransform(f[a][o],j);for(D=[],o=0;o<W;o++)for(w.labelcolor=x&&x[o%x.length],w.strokecolor=x&&x[o%x.length],w.fillcolor=x&&x[o%x.length],D[o]=e.create("polygon",f[o],{withLines:!0,withLabel:!1,fillColor:w.fillcolor,fillOpacity:w.fillopacity,highlightFillColor:w.highlightfillcolor}),a=0;a<h;a++)D[o].borders[a].setAttribute("strokecolor:"+x[o%x.length]),D[o].borders[a].setAttribute("strokewidth:"+w.polystrokewidth);switch(n.legendposition||"none"){case"right":X=n.legendleftoffset||2,F=n.legendtopoffset||1,this.legend=e.create("legend",[T+E+X,N+E-F],{labels:O,colors:x});break;case"none":break;default:t.debug("Unknown legend position")}if(Y=[],n.showcircles){for(U=[],o=0;o<6;o++)U[o]=20*o;if(U[0]="0",G=n.circlelabelarray||U,(J=G.length)<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(z=[],H=A+Math.PI/h,j=Z(H,0),w.fillcolor="none",w.highlightfillcolor="none",w.strokecolor=n.strokecolor||"black",w.strokewidth=n.circlestrokewidth||.5,w.layer=0,V=(P[0]-C[0])/(J-1),o=0;o<J;o++)z[o]=e.create("point",[C[0]+o*V,0],{name:G[o],size:0,fixed:!0,withLabel:!0,visible:!0}),z[o].addTransform(z[o],j),Y[o]=e.create("circle",[M,z[o]],w)}return this.rendNode=D[0].rendNode,{circles:Y,lines:L,points:f,midpoint:M,polygons:D}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),t.createChart=function(e,i,r){var s,n,h,u,d,p,f,m,b,v,g,y,_,C,P,O,x=[],E=c.isBrowser?e.document.getElementById(i[0]):null;if(1===i.length&&l.isString(i[0])){if(l.exists(E)){if(b=l.copyAttributes(r,e.options,"chart"),E=(new o).loadFromTable(i[0],b.withheaders,b.withheaders),s=E.data,d=E.columnHeaders,n=E.rowHeaders,v=b.width,g=b.name,y=b.strokecolor,_=b.fillcolor,C=b.highlightstrokecolor,P=b.highlightfillcolor,e.suspendUpdate(),O=s.length,m=[],b.rows&&l.isArray(b.rows)){for(h=0;h<O;h++)for(u=0;u<b.rows.length;u++)if(b.rows[u]===h||b.withheaders&&b.rows[u]===n[h]){m.push(s[h]);break}}else m=s;for(O=m.length,h=0;h<O;h++){if(f=[],b.chartstyle&&-1!==b.chartstyle.indexOf("bar")){for(p=v||.8,f.push(1-p/2+(h+.5)*p/O),u=1;u<m[h].length;u++)f.push(f[u-1]+1);b.width=p/O}g&&g.length===O?b.name=g[h]:b.withheaders&&(b.name=d[h]),y&&y.length===O?b.strokecolor=y[h]:b.strokecolor=a.hsv2rgb((h+1)/O*360,.9,.6),_&&_.length===O?b.fillcolor=_[h]:b.fillcolor=a.hsv2rgb((h+1)/O*360,.9,1),C&&C.length===O?b.highlightstrokecolor=C[h]:b.highlightstrokecolor=a.hsv2rgb((h+1)/O*360,.9,1),P&&P.length===O?b.highlightfillcolor=P[h]:b.highlightfillcolor=a.hsv2rgb((h+1)/O*360,.9,.6),b.chartstyle&&-1!==b.chartstyle.indexOf("bar")?x.push(new t.Chart(e,[f,m[h]],b)):x.push(new t.Chart(e,[m[h]],b))}e.unsuspendUpdate()}return x}return b=l.copyAttributes(r,e.options,"chart"),new t.Chart(e,i,b)},t.registerElement("chart",t.createChart),t.Legend=function(t,e,i){var n;if(this.constructor(),n=l.copyAttributes(i,t.options,"legend"),this.board=t,this.coords=new s(r.COORDS_BY_USER,e,this.board),this.myAtts={},this.label_array=n.labelarray||n.labels,this.color_array=n.colorarray||n.colors,this.lines=[],this.myAtts.strokewidth=n.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=n.legendstyle||n.style,"vertical"!==this.style)throw new Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(t,n)},t.Legend.prototype=new n,t.Legend.prototype.drawVerticalLegend=function(t,e){var i,n=e.linelength||1,o=(e.rowheight||20)/this.board.unitY,a=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new s(r.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(i=0;i<this.label_array.length;i++)this.myAtts.name=this.label_array[i],this.myAtts.strokecolor=this.color_array[i%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[i%this.color_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[i%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[i]=t.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-i*o],[this.coords.usrCoords[1]+n,this.coords.usrCoords[2]-i*o]],this.myAtts),this.lines[i].getLabelAnchor=a,this.lines[i].prepareUpdate().update().updateVisibility(l.evaluate(this.lines[i].visProp.visible)).updateRenderer()},t.createLegend=function(e,i,r){var s=[0,0];if(!l.exists(i)||2!==i.length)throw new Error("JSXGraph: Legend element needs two numbers as parameters");return s=i,new t.Legend(e,s,r)},t.registerElement("legend",t.createLegend),{Chart:t.Chart,Legend:t.Legend,createChart:t.createChart,createLegend:t.createLegend}})),define("base/turtle",["jxg","base/constants","base/element","utils/type"],(function(t,e,i,r){"use strict";return t.Turtle=function(t,i,s){var n,o,a;return this.constructor(t,s,e.OBJECT_TYPE_TURTLE,e.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=t,this.visProp.curveType="plot",this._attributes=r.copyAttributes(this.visProp,t.options,"turtle"),delete this._attributes.id,n=0,o=0,a=90,0!==i.length&&(3===i.length?(n=i[0],o=i[1],a=i[2]):2===i.length?r.isArray(i[0])?(n=i[0][0],o=i[0][1],a=i[1]):(n=i[0],o=i[1]):(n=i[0][0],o=i[0][1])),this.init(n,o,a),this.methodMap=r.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",penDown:"penDown",pd:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",penSize:"setPenSize",penColor:"setPenColor",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},t.Turtle.prototype=new i,t.extend(t.Turtle.prototype,{init:function(t,e,i){var r={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/Math.sqrt(this.board.unitX*this.board.unitX+this.board.unitY*this.board.unitY),this.pos=[t,e],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,r),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],r),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-i),this.board.update()},forward:function(t){if(0===t)return this;var e,i=t*Math.cos(this.dir*Math.PI/180),r=t*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||(e=this.board.create("transform",[i,r],{type:"translate"}),e.applyOnce(this.turtle),e.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=i,this.pos[1]+=r,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(t){return this.forward(-t)},right:function(t){return this.dir-=t,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-t*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(t){return this.right(-t)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var t,i;for(t=0;t<this.objects.length;t++)i=this.objects[t],i.type===e.OBJECT_TYPE_CURVE&&(this.board.removeObject(i),this.objects.splice(t,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var t,e,i=this.objects.length;for(t=0;t<i;t++)e=this.objects[t],this.board.removeObject(e);return this.init(0,0,90),this},setPos:function(t,i){var s;return r.isArray(t)?this.pos=t:this.pos=[t,i],this.turtleIsHidden||(this.turtle.setPositionDirectly(e.COORDS_BY_USER,[t,i]),this.turtle2.setPositionDirectly(e.COORDS_BY_USER,[t,i+this.arrowLen]),s=this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}),s.applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",t)),this.objects.push(this.curve),this},setPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",t)),this.objects.push(this.curve),this},setHighlightPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",t)),this.objects.push(this.curve),this},setAttribute:function(t){var i,s,n,o=this.objects.length;for(i=0;i<o;i++)s=this.objects[i],s.type===e.OBJECT_TYPE_CURVE&&s.setAttribute(t);return n=this.visProp.id,this.visProp=r.deepCopy(this.curve.visProp),this.visProp.id=n,this._attributes=r.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(t,e){return this._attributes[t.toLowerCase()]=e,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var t=this.stack.pop();return this.pos[0]=t[0],this.pos[1]=t[1],this.dir=t[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(t){var e,i,s,n,o;return r.isArray(t)?(e=this.pos[0],i=this.pos[1],s=t[0],n=t[1],o=Math.atan2(n-i,s-e),this.right(this.dir-180*o/Math.PI)):r.isNumber(t)&&this.right(this.dir-t),this},moveTo:function(t){var e,i,s;return r.isArray(t)&&(e=t[0]-this.pos[0],i=t[1]-this.pos[1],this.turtleIsHidden||(s=this.board.create("transform",[e,i],{type:"translate"}),s.applyOnce(this.turtle),s.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=t[0],this.pos[1]=t[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(t){return this.forward(t)},bk:function(t){return this.back(t)},lt:function(t){return this.left(t)},rt:function(t){return this.right(t)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(t,i){var r,s,n,o,a=this.objects.length;for(r=0,s=0;r<a;r++)if(n=this.objects[r],n.elementClass===e.OBJECT_CLASS_CURVE){if(s<=t&&t<s+n.numberPoints)return o=t-s,n[i](o);s+=n.numberPoints}return this[i]()},X:function(t){return r.exists(t)?this.evalAt(t,"X"):this.pos[0]},Y:function(t){return r.exists(t)?this.evalAt(t,"Y"):this.pos[1]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){var t,i,r=this.objects.length,s=0;for(t=0;t<r;t++)i=this.objects[t],i.elementClass===e.OBJECT_CLASS_CURVE&&(s+=this.objects[t].numberPoints);return s},hasPoint:function(t,i){var r,s;for(r=0;r<this.objects.length;r++)if(s=this.objects[r],s.type===e.OBJECT_TYPE_CURVE&&s.hasPoint(t,i))return!0;return!1}}),t.createTurtle=function(e,i,s){var n;return i=i||[],n=r.copyAttributes(s,e.options,"turtle"),new t.Turtle(e,i,n)},t.registerElement("turtle",t.createTurtle),{Turtle:t.Turtle,createTurtle:t.createTurtle}})),define("base/ticks",["jxg","math/math","math/geometry","math/numerics","base/constants","base/element","base/coords","utils/type","base/text"],(function(t,e,i,r,s,n,o,a,l){"use strict";return t.Ticks=function(t,i,r){if(this.constructor(t.board,r,s.OBJECT_TYPE_TICKS,s.OBJECT_CLASS_OTHER),this.line=t,this.board=this.line.board,this.ticksFunction=null,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],a.isFunction(i))throw this.ticksFunction=i,new Error("Function arguments are no longer supported.");a.isArray(i)?this.fixedTicks=i:((Math.abs(i)<e.eps||i<0)&&(i=r.defaultdistance),this.ticksFunction=this.makeTicksFunction(i),this.equidistant=!0),this.minTicksDistance=r.minticksdistance,this.ticks=[],this.ticksDelta=1,this.labels=[],this.labelData=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},t.Ticks.prototype=new n,t.extend(t.Ticks.prototype,{makeTicksFunction:function(t){return function(){var e,i,r;return a.evaluate(this.visProp.insertticks)?(i=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"ticksdistance"),r=i.upper-i.lower,e=Math.pow(10,Math.floor(Math.log(.6*r)/Math.LN10)),r<=6*e&&(e*=.5),e):t}},hasPoint:function(t,i){var r,n,o,l,c=this.ticks&&this.ticks.length||0;if(a.isObject(a.evaluate(this.visProp.precision))?(l=this.board._inputDevice,o=a.evaluate(this.visProp.precision[l])):o=this.board.options.precision.hasPoint,o+=.5*a.evaluate(this.visProp.strokewidth),!a.evaluate(this.line.visProp.scalable)||this.line.elementClass===s.OBJECT_CLASS_CURVE)return!1;if(0!==this.line.stdform[1]&&0!==this.line.stdform[2]&&this.line.type!==s.OBJECT_TYPE_AXIS)return!1;for(r=0;r<c;r++)if(n=this.ticks[r],n[2]&&!(0===this.line.stdform[1]&&Math.abs(n[0][0]-this.line.point1.coords.scrCoords[1])<e.eps||0===this.line.stdform[2]&&Math.abs(n[1][0]-this.line.point1.coords.scrCoords[2])<e.eps)&&(Math.abs(n[0][0]-n[0][1])>=1||Math.abs(n[1][0]-n[1][1])>=1))if(0===this.line.stdform[1]){if(Math.abs(i-.5*(n[1][0]+n[1][1]))<2*o&&n[0][0]-o<t&&t<n[0][1]+o)return!0}else if(0===this.line.stdform[2]&&Math.abs(t-.5*(n[0][0]+n[0][1]))<2*o&&n[1][0]-o<i&&i<n[1][1]+o)return!0;return!1},setPositionDirectly:function(t,i,r){var n,l,c=new o(t,i,this.board),h=new o(t,r,this.board),u=this.board.getBoundingBox();return this.line.type===s.OBJECT_TYPE_AXIS&&a.evaluate(this.line.visProp.scalable)?(Math.abs(this.line.stdform[1])<e.eps&&Math.abs(c.usrCoords[1]*h.usrCoords[1])>e.eps?(n=h.usrCoords[1]/c.usrCoords[1],u[0]*=n,u[2]*=n,this.board.setBoundingBox(u,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<e.eps&&Math.abs(c.usrCoords[2]*h.usrCoords[2])>e.eps&&(l=h.usrCoords[2]/c.usrCoords[2],u[3]*=l,u[1]*=l,this.board.setBoundingBox(u,this.board.keepaspectratio,"update")),this):this},calculateTicksCoordinates:function(){var t,i,r,n;if(!(this.line.elementClass===s.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<e.eps&&Math.abs(this.dy)<e.eps)))return t=this.getZeroCoordinates(),i=this.line.elementClass===s.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(t):{lower:this.line.minX(),upper:this.line.maxX()},"polar"===a.evaluate(this.visProp.type)&&(n=this.board.getBoundingBox(),r=Math.max(Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.sqrt(n[2]*n[2]+n[3]*n[3])),i.upper=r),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(t,i):this.generateFixedTicks(t,i),this},setTicksSizeVariables:function(t){var i,s,n,o,l=.5*a.evaluate(this.visProp.majorheight),c=.5*a.evaluate(this.visProp.minorheight);a.exists(t)?(s=this.line.minX(),n=this.line.maxX(),o=this.line.points.length,o<2?(this.dxMaj=0,this.dyMaj=0):e.relDif(t,s)<e.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):e.relDif(t,n)<e.eps?(this.dxMaj=this.line.points[o-2].usrCoords[2]-this.line.points[o-1].usrCoords[2],this.dyMaj=this.line.points[o-1].usrCoords[1]-this.line.points[o-2].usrCoords[1]):(this.dxMaj=-r.D(this.line.Y)(t),this.dyMaj=r.D(this.line.X)(t))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,i=Math.sqrt(this.dxMaj*this.dxMaj*this.board.unitX*this.board.unitX+this.dyMaj*this.dyMaj*this.board.unitY*this.board.unitY),this.dxMaj*=l/i*this.board.unitX,this.dyMaj*=l/i*this.board.unitY,this.dxMin*=c/i*this.board.unitX,this.dyMin*=c/i*this.board.unitY,this.minStyle=a.evaluate(this.visProp.minorheight)<0?"infinite":"finite",this.majStyle=a.evaluate(this.visProp.majorheight)<0?"infinite":"finite"},getZeroCoordinates:function(){var t,e,r,n,l,c,h,u,d=a.evaluate(this.visProp.anchor);return this.line.elementClass===s.OBJECT_CLASS_LINE?this.line.type===s.OBJECT_TYPE_AXIS?i.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(r=this.line.point1.coords.usrCoords[0],t=this.line.point1.coords.usrCoords[1],e=this.line.point1.coords.usrCoords[2],c=this.line.point2.coords.usrCoords[0],n=this.line.point2.coords.usrCoords[1],l=this.line.point2.coords.usrCoords[2],"right"===d?this.line.point2.coords:"middle"===d?new o(s.COORDS_BY_USER,[.5*(r+c),.5*(t+n),.5*(e+l)],this.board):a.isNumber(d)?new o(s.COORDS_BY_USER,[r+(c-r)*d,t+(n-t)*d,e+(l-e)*d],this.board):this.line.point1.coords):(h=this.line.minX(),u=this.line.maxX(),"right"===d?u:"middle"===d?.5*(h+u):a.isNumber(d)?h*(1-d)+u*d:h)},getLowerAndUpperBounds:function(t,r){var n,l,c,h,u,d,p,f,m,b,v=a.evaluate(this.line.visProp.straightfirst),g=a.evaluate(this.line.visProp.straightlast),y=a.evaluate(this.visProp.includeboundaries);return this.line.elementClass===s.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(u=new o(s.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),d=new o(s.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),p=Math.abs(u.usrCoords[0])>=e.eps&&u.scrCoords[1]>=0&&u.scrCoords[1]<=this.board.canvasWidth&&u.scrCoords[2]>=0&&u.scrCoords[2]<=this.board.canvasHeight,f=Math.abs(d.usrCoords[0])>=e.eps&&d.scrCoords[1]>=0&&d.scrCoords[1]<=this.board.canvasWidth&&d.scrCoords[2]>=0&&d.scrCoords[2]<=this.board.canvasHeight,a.exists(r)||"tickdistance"===r?i.calcStraight(this.line,u,d,a.evaluate(this.line.visProp.margin)):i.calcLineDelimitingPoints(this.line,u,d),c=a.evaluate(this.line.visProp.firstarrow),h=a.evaluate(this.line.visProp.lastarrow),(c||h)&&(this.board.renderer.getPositionArrowHead(this.line,u,d,a.evaluate(this.line.visProp.strokewidth)),c&&u.setCoordinates(s.COORDS_BY_SCREEN,[u.scrCoords[1],u.scrCoords[2]]),h&&d.setCoordinates(s.COORDS_BY_SCREEN,[d.scrCoords[1],d.scrCoords[2]])),m=this.getDistanceFromZero(t,u),b=this.getDistanceFromZero(t,d),m<b?(n=m,v||!p||y||(n+=e.eps),l=b,g||!f||y||(l-=e.eps)):b<m?(n=b,g||!f||y||(n+=e.eps),l=m,v||!p||y||(l-=e.eps)):(n=0,l=0),{lower:n,upper:l})},getDistanceFromZero:function(t,i){var r,n,o,a,l;return r=this.line.point1.coords,n=this.line.point2.coords,l=t.distance(s.COORDS_BY_USER,i),o=[n.usrCoords[0]-r.usrCoords[0],n.usrCoords[1]-r.usrCoords[1],n.usrCoords[2]-r.usrCoords[2]],a=[i.usrCoords[0]-t.usrCoords[0],i.usrCoords[1]-t.usrCoords[1],i.usrCoords[2]-t.usrCoords[2]],e.innerProduct(o,a,3)<0&&(l*=-1),l},generateEquidistantTicks:function(t,i){var r,n,o=e.eps,l=this.equidistant?this.ticksFunction(1):this.ticksDelta,c=a.evaluate(this.visProp.insertticks),h=a.evaluate(this.visProp.minorticks);if(this.line.elementClass===s.OBJECT_CLASS_LINE&&(n=this.getXandYdeltas()),l*=a.evaluate(this.visProp.scale),c&&this.minTicksDistance>e.eps?(l=this.adjustTickDistance(l,t,n),l/=h+1):c||(l/=h+1),this.ticksDelta=l,!(l<e.eps)){for(r=0,a.evaluate(this.visProp.drawzero)||(r=l);r<=i.upper+o&&(r>=i.lower-o&&this.processTickPosition(t,r,l,n),r+=l,!(i.upper-r>1e4*l)););for(r=-l;r>=i.lower-o&&(r<=i.upper+o&&this.processTickPosition(t,r,l,n),!((r-=l)-i.lower>1e4*l)););}},adjustTickDistance:function(t,e,i){var r,n,l,c=1,h=a.evaluate(this.visProp.minorticks);if(this.line.elementClass===s.OBJECT_CLASS_CURVE)return t;if(this.getLowerAndUpperBounds(e,"ticksdistance"),r=e.usrCoords[1]+i.x*t,n=e.usrCoords[2]+i.y*t,l=e.distance(s.COORDS_BY_SCREEN,new o(s.COORDS_BY_USER,[r,n],this.board)),0===t)return 0;for(;l/(h+1)<this.minTicksDistance;)t*=1===c?2:5,c*=-1,r=e.usrCoords[1]+i.x*t,n=e.usrCoords[2]+i.y*t,l=e.distance(s.COORDS_BY_SCREEN,new o(s.COORDS_BY_USER,[r,n],this.board));return t},processTickPosition:function(t,e,i,r){var n,l,c,h,u=null;this.line.elementClass===s.OBJECT_CLASS_LINE?(n=t.usrCoords[1]+e*r.x,l=t.usrCoords[2]+e*r.y):(n=this.line.X(t+e),l=this.line.Y(t+e)),c=new o(s.COORDS_BY_USER,[n,l],this.board),this.line.elementClass===s.OBJECT_CLASS_CURVE&&(u=t+e,this.setTicksSizeVariables(u)),c.major=Math.round(e/i)%(a.evaluate(this.visProp.minorticks)+1)==0,h=this.createTickPath(c,c.major),3===h.length&&(this.ticks.push(h),c.major&&a.evaluate(this.visProp.drawlabels)?this.labelsData.push(this.generateLabelData(this.generateLabelText(c,t,u),c,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(t,i){var r,n,l,c,h,u,d,p,f=e.eps,m=a.isArray(this.visProp.labels),b=a.evaluate(this.visProp.drawlabels);for(this.line.elementClass===s.OBJECT_CLASS_LINE&&(p=this.getXandYdeltas()),l=0;l<this.fixedTicks.length;l++)this.line.elementClass===s.OBJECT_CLASS_LINE?(d=this.fixedTicks[l],h=t.usrCoords[1]+d*p.x,u=t.usrCoords[2]+d*p.y):(d=t+this.fixedTicks[l],h=this.line.X(d),u=this.line.Y(d)),r=new o(s.COORDS_BY_USER,[h,u],this.board),this.line.elementClass===s.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(d),c=this.createTickPath(r,!0),3===c.length&&d>=i.lower-f&&d<=i.upper+f&&(this.ticks.push(c),b&&(m||a.exists(this.visProp.labels[l]))?(n=m?a.evaluate(this.visProp.labels[l]):d,this.labelsData.push(this.generateLabelData(this.generateLabelText(r,t,n),r,l))):this.labelsData.push(null))},getXandYdeltas:function(){var t,i,r=this.line.point1.Dist(this.line.point2);return this.line.type===s.OBJECT_TYPE_AXIS?(t=this.line.point1.coords.usrCoords,i=this.line.point2.coords.usrCoords,(t[1]>i[1]||Math.abs(t[1]-i[1])<e.eps&&t[2]>i[2])&&(t=this.line.point2.coords.usrCoords,i=this.line.point1.coords.usrCoords)):(t=this.line.point1.coords.usrCoords,i=this.line.point2.coords.usrCoords),{x:(i[1]-t[1])/r,y:(i[2]-t[2])/r}},_isInsideCanvas:function(t,e,i){var r=this.board.canvasWidth,s=this.board.canvasHeight;return void 0===i&&(i=0),t[0]>=i&&t[0]<=r-i&&e[0]>=i&&e[0]<=s-i||t[1]>=i&&t[1]<=r-i&&e[1]>=i&&e[1]<=s-i},createTickPath:function(t,e){var r,s,n,o,l,c,h,u,d,p,f,m,b,v,g,y=[-2e6,-2e6],_=[-2e6,-2e6];if(r=t.scrCoords,e?(o=this.dxMaj,l=this.dyMaj,d=this.majStyle):(o=this.dxMin,l=this.dyMin,d=this.minStyle),s=[-l*r[1]-o*r[2],l,o],e&&"polar"===a.evaluate(this.visProp.type)){if(b=this.board.getBoundingBox(),v=2*Math.PI,g=v/180,r=t.usrCoords,f=Math.sqrt(r[1]*r[1]+r[2]*r[2]),m=Math.max(Math.sqrt(b[0]*b[0]+b[1]*b[1]),Math.sqrt(b[2]*b[2]+b[3]*b[3])),f<m){for(y=[],_=[],p=0;p<=v;p+=g)y.push(this.board.origin.scrCoords[1]+f*Math.cos(p)*this.board.unitX),_.push(this.board.origin.scrCoords[2]+f*Math.sin(p)*this.board.unitY);return[y,_,e]}}else if("infinite"===d?(n=i.meetLineBoard(s,this.board),y[0]=n[0].scrCoords[1],y[1]=n[1].scrCoords[1],_[0]=n[0].scrCoords[2],_[1]=n[1].scrCoords[2]):(u=">"===a.evaluate(this.visProp.face)?Math.PI/4:"<"===a.evaluate(this.visProp.face)?-Math.PI/4:0,c=Math.cos(u)*o-Math.sin(u)*l,h=Math.sin(u)*o+Math.cos(u)*l,y[0]=r[1]+c*a.evaluate(this.visProp.tickendings[0]),_[0]=r[2]-h*a.evaluate(this.visProp.tickendings[0]),y[1]=r[1],_[1]=r[2],u=-u,c=Math.cos(u)*o-Math.sin(u)*l,h=Math.sin(u)*o+Math.cos(u)*l,y[2]=r[1]-c*a.evaluate(this.visProp.tickendings[1]),_[2]=r[2]+h*a.evaluate(this.visProp.tickendings[1])),this._isInsideCanvas(y,_))return[y,_,e];return[]},formatLabelText:function(t){var e=t.toString(),i=a.evaluate(this.visProp.scalesymbol);return a.isNumber(t)&&((e.length>a.evaluate(this.visProp.maxlabellength)||-1!==e.indexOf("e"))&&(e=t.toPrecision(a.evaluate(this.visProp.precision)).toString()),a.evaluate(this.visProp.beautifulscientificticklabels)&&(e=this.beautifyScientificNotationLabel(e)),e.indexOf(".")>-1&&-1===e.indexOf("e")&&(e=e.replace(/0+$/,""),e=e.replace(/\.$/,""))),i.length>0&&("1"===e?e=i:"-1"===e?e="-"+i:"0"!==e&&(e+=i)),a.evaluate(this.visProp.useunicodeminus)&&(e=e.replace(/-/g,"−")),e},beautifyScientificNotationLabel:function(t){var e;return-1===t.indexOf("e")?t:(e=parseFloat(t.substring(0,t.indexOf("e")))+t.substring(t.indexOf("e")),e=e.replace(/e(.*)$/g,(function(t,e){var i="•10";return i+e.replace(/-/g,"⁻").replace(/\+/g,"").replace(/0/g,"⁰").replace(/1/g,"¹").replace(/2/g,"²").replace(/3/g,"³").replace(/4/g,"⁴").replace(/5/g,"⁵").replace(/6/g,"⁶").replace(/7/g,"⁷").replace(/8/g,"⁸").replace(/9/g,"⁹")})))},generateLabelText:function(t,i,r){var s;if(!a.exists(r)){if(s=this.getDistanceFromZero(i,t),Math.abs(s)<e.eps)return"0";r=s/a.evaluate(this.visProp.scale)}return this.formatLabelText(r)},generateLabelData:function(t,e,i){var r,s,n,o;return o=a.evaluate(this.visProp.label.fontsize),r=[e.scrCoords[1],e.scrCoords[1]],s=[e.scrCoords[2],e.scrCoords[2]],n=void 0===o?12:o,n*=.5,this._isInsideCanvas(r,s,n)?(r=a.evaluate(this.visProp.label.offset[0]),s=a.evaluate(this.visProp.label.offset[1]),{x:e.usrCoords[1]+r/this.board.unitX,y:e.usrCoords[2]+s/this.board.unitY,t:t,i:i}):null},update:function(){return this.needsUpdate&&0!==this.board.canvasWidth&&0!==this.board.canvasHeight&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var t,e,i,r,s,n,o,c;for(i=this.labelsData.length,r=this.labels.length,t=0,e=0;t<i;t++)null!==this.labelsData[t]&&(o=this.labelsData[t],e<r?(n=this.labels[e],n.setText(o.t),n.setCoords(o.x,o.y),e++):(this.labelCounter+=1,s={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,priv:this.visProp.priv},s=a.deepCopy(s,this.visProp.label),s.id=this.id+o.i+"Label"+this.labelCounter,n=l.createText(this.board,[o.x,o.y,o.t],s),n.isDraggable=!1,n.dump=!1,this.labels.push(n)),c=a.evaluate(this.visProp.label.visible),"inherit"===c&&(c=this.visPropCalc.visible),n.prepareUpdate().updateVisibility(c).updateRenderer(),n.distanceX=a.evaluate(this.visProp.label.offset[0]),n.distanceY=a.evaluate(this.visProp.label.offset[1]));for(i=e,e=i;e<r;e++)this.board.renderer.display(this.labels[e],!1),this.labels[e].visProp.visible=this.labels[e].visPropCalc.visible=!1;return this},hideElement:function(){var e;for(t.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),e=0;e<this.labels.length;e++)a.exists(this.labels[e])&&this.labels[e].hideElement();return this},showElement:function(){var e;for(t.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),e=0;e<this.labels.length;e++)a.exists(this.labels[e])&&this.labels[e].showElement();return this}}),t.createTicks=function(e,i,r){var n,o,l=a.copyAttributes(r,e.options,"ticks");if(o=i.length<2?l.ticksdistance:i[1],i[0].elementClass!==s.OBJECT_CLASS_LINE&&i[0].elementClass!==s.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof i[0]+"'.");return n=new t.Ticks(i[0],o,l),a.isFunction(l.generatelabelvalue)&&(n.generateLabelText=l.generatelabelvalue),a.isFunction(l.generatelabeltext)&&(n.generateLabelText=l.generatelabeltext),n.setParents(i[0]),n.isDraggable=!0,n.fullUpdate(i[0].visPropCalc.visible),n},t.createHatchmark=function(t,e,i){var r,n,o,l,c,h,u=[],d=a.copyAttributes(i,t.options,"hatch");if(e[0].elementClass!==s.OBJECT_CLASS_LINE&&e[0].elementClass!==s.OBJECT_CLASS_CURVE||"number"!=typeof e[1])throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof e[0]+"' and '"+typeof e[1]+" and ''"+typeof e[2]+"'.");for(r=e[1],l=d.ticksdistance,c=(r-1)*l,o=.5*-c,n=0;n<r;n++)u[n]=o+n*l;return h=t.create("ticks",[e[0],u],d),h.elType="hatch",h},t.registerElement("ticks",t.createTicks),t.registerElement("hash",t.createHatchmark),t.registerElement("hatch",t.createHatchmark),{Ticks:t.Ticks,createTicks:t.createTicks,createHashmark:t.createHatchmark,createHatchmark:t.createHatchmark}})),define("parser/ca",["jxg","base/constants","base/text","math/math","math/geometry","math/statistics","utils/type","utils/env"],(function(t,e,i,r,s,n,o,a){"use strict";return t.CA=function(t,e,i){this.node=t,this.createNode=e,this.parser=i},t.extend(t.CA.prototype,{findMapNode:function(t,e){var i,r,s;if("op_assign"===e.value&&e.children[0].value===t)return e.children[1];if(e.children)for(r=e.children.length,i=0;i<r;++i)if(null!==(s=this.findMapNode(t,e.children[i])))return s;return null},setMath:function(t){var e,i;if(("node_op"!=t.type||"op_add"!=t.value&&"op_sub"!=t.value&&"op_mul"!=t.value&&"op_div"!=t.value&&"op_neg"!=t.value&&"op_execfun"!=t.value&&"op_exp"!=t.value)&&"node_var"!=t.type&&"node_const"!=t.type||(t.isMath=!0),t.children)for(i=t.children.length,e=0;e<i;++e)this.setMath(t.children[e])},deriveElementary:function(t,e){var i,r=t.children[0].value,s=t.children[1];switch(r){case"abs":i=this.createNode("node_op","op_div",s[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",o.deepCopy(s[0]),o.deepCopy(s[0]))]));break;case"sqrt":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(t.type,t.value,o.deepCopy(t.children[0]),o.deepCopy(t.children[1]))));break;case"sin":i=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),o.deepCopy(s));break;case"cos":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),o.deepCopy(s)));break;case"tan":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),o.deepCopy(s)),this.createNode("node_const",2)));break;case"cot":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),o.deepCopy(s)),this.createNode("node_const",2))));break;case"exp":i=this.createNode(t.type,t.value,o.deepCopy(t.children[0]),o.deepCopy(t.children[1]));break;case"pow":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",o.deepCopy(t.children[0]),o.deepCopy(t.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[1][0],e),this.createNode("node_op","op_div",o.deepCopy(t.children[1][1]),o.deepCopy(t.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1][1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[o.deepCopy(t.children[1][0])]))));break;case"log":case"ln":i=this.createNode("node_op","op_div",this.createNode("node_const",1),o.deepCopy(s[0]));break;case"log2":case"lb":case"ld":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),o.deepCopy(s[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),o.deepCopy(s[0])),this.createNode("node_const",.43429448190325176));break;case"asin":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(s[0]),o.deepCopy(s[0])))]));break;case"acos":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(s[0]),o.deepCopy(s[0])))])));break;case"atan":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(s[0]),o.deepCopy(s[0]))));break;case"acot":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(s[0]),o.deepCopy(s[0])))));break;case"sinh":i=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[o.deepCopy(s[0])]);break;case"cosh":i=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[o.deepCopy(s[0])]);break;case"tanh":i=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[o.deepCopy(s[0])]),this.createNode("node_const",2)));break;case"asinh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",o.deepCopy(s[0]),o.deepCopy(s[0])),this.createNode("node_const",1))]));break;case"acosh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",o.deepCopy(s[0]),o.deepCopy(s[0])),this.createNode("node_const",1))]));break;case"atanh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(s[0]),o.deepCopy(s[0]))));break;default:i=this.createNode("node_const",0),this._error('Derivative of "'+r+'" not yet implemented')}return i},derivative:function(t,e){var i;switch(t.type){case"node_op":switch(t.value){case"op_execfun":i="pow"==t.children[0].value?this.deriveElementary(t,e):this.createNode("node_op","op_mul",this.deriveElementary(t,e),this.derivative(t.children[1][0],e));break;case"op_div":i=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),o.deepCopy(t.children[1])),this.createNode("node_op","op_mul",o.deepCopy(t.children[0]),this.derivative(t.children[1],e))),this.createNode("node_op","op_mul",o.deepCopy(t.children[1]),o.deepCopy(t.children[1])));break;case"op_mul":i=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",o.deepCopy(t.children[0]),this.derivative(t.children[1],e)),this.createNode("node_op","op_mul",this.derivative(t.children[0],e),o.deepCopy(t.children[1])));break;case"op_neg":i=this.createNode("node_op","op_neg",this.derivative(t.children[0],e));break;case"op_add":case"op_sub":i=this.createNode("node_op",t.value,this.derivative(t.children[0],e),this.derivative(t.children[1],e));break;case"op_exp":i=this.createNode("node_op","op_mul",o.deepCopy(t),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),this.createNode("node_op","op_div",o.deepCopy(t.children[1]),o.deepCopy(t.children[0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[o.deepCopy(t.children[0])]))))}break;case"node_var":i=t.value===e?this.createNode("node_const",1):this.createNode("node_const",0);break;case"node_const":i=this.createNode("node_const",0)}return i},expandDerivatives:function(t,e,i){var r,s,n,a,l,c,h,u,d,p,f,m;if(c=0,!t)return c;for(this.line=t.line,this.col=t.col,r=t.children.length,s=0;s<r;++s)if(t.children[s]&&t.children[s].type)t.children[s]=this.expandDerivatives(t.children[s],t,i);else if(o.isArray(t.children[s]))for(n=0;n<t.children[s].length;++n)t.children[s][n]&&t.children[s][n].type&&(t.children[s][n]=this.expandDerivatives(t.children[s][n],t,i));switch(t.type){case"node_op":switch(t.value){case"op_execfun":if(t.children[0]&&"D"===t.children[0].value){if("node_var"==t.children[1][0].type?(d=t.children[1][0].value,a=this.findMapNode(d,i),f=a.children[0],p=t.children[1].length>=2?t.children[1][1].value:a.children[0][0],l=a.children[1]):(l=t.children[1][0],f=["x"],p=t.children[1].length>=2?t.children[1][1].value:"x"),m=t.children[1].length>=3?t.children[1][2].value:1,u=l,m>=1)for(;m>=1;)u=this.derivative(u,p),u=this.removeTrivialNodes(u),m--;h="node_op"==e.type&&"op_assign"==e.value?this.createNode("node_op","op_map",f,u):u,this.setMath(h),t.type=h.type,t.value=h.value,t.children[0]=h.children[0],t.children[1]=h.children[1]}}}return t},removeTrivialNodes:function(t){var e,i,r,s,n;if(o.isArray(t))for(i=t.length,e=0;e<i;++e)t[e]=this.removeTrivialNodes(t[e]);if("node_op"!=t.type||!t.children)return t;for(i=t.children.length,e=0;e<i;++e){this.mayNotBeSimplified=!1;do{t.children[e]=this.removeTrivialNodes(t.children[e])}while(this.mayNotBeSimplified)}switch(t.value){case"op_map":if(r=t.children[0],s=t.children[1],"node_var"==s.type)for(e=0;e<r.length;++e)if(r[e]==s.value){s.isMath=!0;break}break;case"op_add":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&0===r.value)return s;if("node_const"==s.type&&0===s.value)return r;if("node_const"==r.type&&"node_const"==s.type)return r.value+=s.value,r;break;case"op_mul":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&1==r.value)return s;if("node_const"==s.type&&1==s.value)return r;if("node_const"==r.type&&0===r.value)return r;if("node_const"==s.type&&0===s.value)return s;if("node_const"==s.type&&0===s.value)return s;if("node_op"==r.type&&"op_neg"==r.value&&"node_op"==s.type&&"op_neg"==s.value)return t.children=[r.children[0],s.children[0]],this.mayNotBeSimplified=!0,t;if("op_neg"==r.value&&"op_neg"!=s.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",r.children[0],s)],this.mayNotBeSimplified=!0,t;if("op_neg"!=r.value&&"op_neg"==s.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",r,s.children[0])],this.mayNotBeSimplified=!0,t;if("op_div"==r.value&&"node_const"==r.children[0].type&&1==r.children[0].value)return t.type="node_op",t.value="op_div",t.children=[s,r.children[1]],this.mayNotBeSimplified=!0,t;if("op_div"==s.value&&"node_const"==s.children[0].type&&1==s.children[0].value)return t.type="node_op",t.value="op_div",t.children=[r,s.children[1]],this.mayNotBeSimplified=!0,t;if("node_const"!=r.type&&"node_const"==s.type)return t.children=[s,r],this.mayNotBeSimplified=!0,t;if("node_const"!=r.type&&"node_op"==s.type&&"op_neg"==s.value&&"node_const"==s.children[0].type)return t.children=[s,r],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_execfun"!=r.value&&("node_var"==s.type||"node_op"==s.type&&"op_execfun"==s.value))return t.children=[s,r],this.mayNotBeSimplified=!0,t;if("node_op"!=r.type&&"node_op"==s.type&&"op_neg"==s.value&&"node_var"==s.children[0].type)return t.children=[s,r],this.mayNotBeSimplified=!0,t;if("node_const"!=r.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return n=s.children[0],s.children[0]=r,t.children=[n,s],this.mayNotBeSimplified=!0,t;if("node_const"!=s.type&&"node_op"==r.type&&"op_mul"==r.value&&"node_const"==r.children[0].type)return t.children=[r.children[0],this.createNode("node_op","op_mul",r.children[1],s)],this.mayNotBeSimplified=!0,t;if("node_const"==r.type&&"node_const"==s.type)return r.value*=s.value,r;if("node_const"==r.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return s.children[0].value*=r.value,s;if(r.hash=this.parser.compile(r),s.hash=this.parser.compile(s),r.hash===s.hash)return t.value="op_exp",t.children[1]=this.createNode("node_const",2),t;if("node_const"==r.type&&"node_op"==s.type&&("op_mul"==s.value||"op_div"==s.value)&&"node_const"==s.children[0].type)return s.children[0].value*=r.value,s;if("node_op"==s.type&&"op_exp"==s.value&&(r.hash||(r.hash=this.parser.compile(r)),s.children[0].hash||(s.children[0].hash=this.parser.compile(s.children[0])),r.hash===s.children[0].hash))return s.children[1]=this.createNode("node_op","op_add",s.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,s;if("node_op"==r.type&&"op_exp"==r.value&&"node_op"==s.type&&"op_exp"==s.value&&(r.children[0].hash=this.parser.compile(r.children[0]),s.children[0].hash=this.parser.compile(s.children[0]),r.children[0].hash===s.children[0].hash))return r.children[1]=this.createNode("node_op","op_add",r.children[1],s.children[1]),this.mayNotBeSimplified=!0,r;break;case"op_sub":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&0===r.value)return t.value="op_neg",t.children[0]=s,t;if("node_const"==s.type&&0===s.value)return r;if("node_const"==r.type&&"node_const"==s.type&&r.value==s.value)return this.createNode("node_const",0);if("node_var"==r.type&&"node_var"==s.type&&r.value==s.value)return this.createNode("node_const",0);if("node_const"==r.type&&"node_const"==s.type)return r.value-=s.value,r;if("node_op"==r.type&&"op_mul"==r.value&&"node_op"==s.type&&"op_mul"==s.value&&(r.children[1].hash=this.parser.compile(r.children[1]),s.children[1].hash=this.parser.compile(s.children[1]),r.children[1].hash===s.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",r.children[0],s.children[0]),r.children[1]],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_mul"==r.value&&(r.children[1].hash=this.parser.compile(r.children[1]),s.hash=this.parser.compile(s),r.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",r.children[0],this.createNode("node_const",1)),s],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_mul"==s.value&&(s.children[1].hash=this.parser.compile(s.children[1]),r.hash=this.parser.compile(r),s.children[1].hash===r.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),s.children[0]),r],this.mayNotBeSimplified=!0,t;break;case"op_neg":if(r=t.children[0],"node_const"==r.type&&0===r.value)return r;if("node_op"==r.type&&"op_neg"==r.value)return r.children[0];break;case"op_div":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&"node_const"==s.type&&r.value==s.value&&0!==r.value)return r.value=1,r;if("node_const"==r.type&&0===r.value&&"node_const"==s.type&&0!==s.value)return r.value=0,r;if("node_const"==r.type&&0===r.value&&("node_op"==s.type||"node_var"==s.type))return t.type="node_const",t.value=0,t;if("node_var"==r.type&&"node_var"==s.type&&r.value==s.value)return this.createNode("node_const",1);if("node_const"==r.type&&0!==r.value&&"node_const"==s.type&&0===s.value)return r.value>0?r.value=1/0:r.value=-1/0,r;if("node_op"==r.type&&"op_neg"==r.value&&"node_op"==s.type&&"op_neg"==s.value)return t.children=[r.children[0],s.children[0]],this.mayNotBeSimplified=!0,t;if("op_neg"==r.value&&"op_neg"!=s.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",r.children[0],s)],this.mayNotBeSimplified=!0,t;if("op_neg"!=r.value&&"op_neg"==s.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",r,s.children[0])],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_exp"==r.value&&(s.hash||(s.hash=this.parser.compile(s)),r.children[0].hash||(r.children[0].hash=this.parser.compile(r.children[0])),s.hash===r.children[0].hash))return r.children[1]=this.createNode("node_op","op_sub",r.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,r;if("node_const"!=s.type&&"node_op"==r.type&&"op_mul"==r.value&&"node_const"==r.children[0].type)return t.value="op_mul",t.children=[r.children[0],this.createNode("node_op","op_div",r.children[1],s)],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_exp"==r.value&&"node_op"==s.type&&"op_exp"==s.value&&(r.children[0].hash=this.parser.compile(r.children[0]),s.children[0].hash=this.parser.compile(s.children[0]),r.children[0].hash===s.children[0].hash))return r.children[1]=this.createNode("node_op","op_sub",r.children[1],s.children[1]),this.mayNotBeSimplified=!0,r;break;case"op_exp":if(r=t.children[0],s=t.children[1],"node_const"==s.type&&0===s.value)return s.value=1,s;if("node_const"==s.type&&1==s.value)return r;if("node_const"==r.type&&1==r.value)return r;if("node_const"==r.type&&0===r.value&&"node_const"==s.type&&0!==s.value)return r;if("node_op"==r.type&&"op_exp"==r.value)return t.children=[r.children[0],this.createNode("node_op","op_mul",r.children[1],s)],t}switch(t.value){case"op_add":if(r=t.children[0],s=t.children[1],"node_const"==r.type&&"node_const"==s.type&&r.value==s.value)return r.value+=s.value,r;if("node_var"==r.type&&"node_var"==s.type&&r.value==s.value)return t.children[0]=this.createNode("node_const",2),t.value="op_mul",t;if("node_op"==r.type&&"op_neg"==r.value)return t.value="op_sub",t.children[0]=s,t.children[1]=r.children[0],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_neg"==s.value)return t.value="op_sub",t.children[1]=s.children[0],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_mul"==r.value&&"node_op"==s.type&&"op_mul"==s.value&&(r.children[1].hash=this.parser.compile(r.children[1]),s.children[1].hash=this.parser.compile(s.children[1]),r.children[1].hash===s.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",r.children[0],s.children[0]),r.children[1]],this.mayNotBeSimplified=!0,t;if("node_op"==r.type&&"op_mul"==r.value&&(r.children[1].hash=this.parser.compile(r.children[1]),s.hash=this.parser.compile(s),r.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",r.children[0],this.createNode("node_const",1)),s],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_mul"==s.value&&(s.children[1].hash=this.parser.compile(s.children[1]),r.hash=this.parser.compile(r),s.children[1].hash===r.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),s.children[0]),r],this.mayNotBeSimplified=!0,t;break;case"op_sub":if(r=t.children[0],s=t.children[1],"node_op"==s.type&&"op_neg"==s.value)return t.value="op_add",t.children[1]=s.children[0],this.mayNotBeSimplified=!0,t;break;case"op_execfun":return this.simplifyElementary(t)}return t},simplifyElementary:function(t){var e=t.children[0].value,i=t.children[1];if(0==i.length)return t;switch(e){case"sin":case"tan":if("node_const"==i[0].type&&0===i[0].value)return t.type="node_const",t.value=0,t;if("node_var"==i[0].type&&"PI"==i[0].value)return t.type="node_const",t.value=0,t;if("node_op"==i[0].type&&"op_mul"==i[0].value&&"node_const"==i[0].children[0].type&&i[0].children[0].value%1==0&&"node_var"==i[0].children[1].type&&"PI"==i[0].children[1].value)return t.type="node_const",t.value=0,t;break;case"cos":if("node_const"==i[0].type&&0===i[0].value)return t.type="node_const",t.value=1,t;if("node_var"==i[0].type&&"PI"==i[0].value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_const",1)],t;break;case"exp":if("node_const"==i[0].type&&0===i[0].value)return t.type="node_const",t.value=1,t;break;case"pow":if("node_const"==i[1].type&&0===i[1].value)return t.type="node_const",t.value=1,t}return t}}),t.CA})),define("utils/dump",["jxg","utils/type"],(function(t,e){"use strict";return t.Dump={addMarkers:function(t,i,r){var s,n,o;for(s in e.isArray(i)||(i=[i]),e.isArray(r)||(r=[r]),n=Math.min(i.length,r.length),i.length=n,r.length=n,t.objects)if(t.objects.hasOwnProperty(s))for(o=0;o<n;o++)t.objects[s][i[o]]=r[o]},deleteMarkers:function(t,i){var r,s,n;for(r in e.isArray(i)||(i=[i]),s=i.length,i.length=s,t.objects)if(t.objects.hasOwnProperty(r))for(n=0;n<s;n++)delete t.objects[r][i[n]]},str:function(t){return"string"==typeof t&&"function"!==t.substr(0,7)&&(t='"'+t+'"'),t},minimizeObject:function(i,r){var s,n,o,a={},l=e.deepCopy(i),c=[];for(o=1;o<arguments.length;o++)c.push(arguments[o]);for(a=e.deepCopy(a,t.Options.elements,!0),o=c.length;o>0;o--)a=e.deepCopy(a,c[o-1],!0);for(s in a)a.hasOwnProperty(s)&&(n=s.toLowerCase(),"object"!=typeof a[s]&&a[s]===l[n]&&delete l[n]);return l},prepareAttributes:function(e,i){var r,s;for(s in r=this.minimizeObject(i.getAttributes(),t.Options[i.elType]),i.subs)i.subs.hasOwnProperty(s)&&(r[s]=this.minimizeObject(i.subs[s].getAttributes(),t.Options[i.elType][s],t.Options[i.subs[s].elType]),r[s].id=i.subs[s].id,r[s].name=i.subs[s].name);return r.id=i.id,r.name=i.name,r},setBoundingBox:function(t,e,i){return t.push({obj:i,method:"setBoundingBox",params:[e.getBoundingBox(),e.keepaspectratio]}),t},dump:function(t){var i,r,s,n,o=[],a=[],l=[],c=t.objectsList.length;for(this.addMarkers(t,"dumped",!1),i=0;i<c;i++)if(r=t.objectsList[i],s={},!r.dumped&&r.dump){for(s.type=r.getType(),s.parents=r.getParents().slice(),"point"===s.type&&1===s.parents[0]&&(s.parents=s.parents.slice(1)),n=0;n<s.parents.length;n++)e.isString(s.parents[n])&&"'"!==s.parents[n][0]&&'"'!==s.parents[n][0]?s.parents[n]='"'+s.parents[n]+'"':e.isArray(s.parents[n])&&(s.parents[n]="["+s.parents[n].toString()+"]");s.attributes=this.prepareAttributes(t,r),"glider"===s.type&&r.onPolygon&&o.push({obj:r.id,prop:"onPolygon",val:!0}),l.push(s)}return this.deleteMarkers(t,"dumped"),{elements:l,props:o,methods:a}},arrayToParamStr:function(t,e){var i,r=[];for(i=0;i<t.length;i++)r.push(e.call(this,t[i]));return r.join(", ")},toJCAN:function(t){var i,r,s;switch(typeof t){case"object":if(t){if(r=[],e.isArray(t)){for(i=0;i<t.length;i++)r.push(this.toJCAN(t[i]));return"["+r.join(",")+"]"}for(s in t)t.hasOwnProperty(s)&&r.push(s+": "+this.toJCAN(t[s]));return"<<"+r.join(", ")+">> "}return"null";case"string":return"'"+t.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString();case"null":return"null"}},toJessie:function(t){var e,i,r=this.dump(t),s=[];for(r.methods=this.setBoundingBox(r.methods,t,"$board"),i=r.elements,e=0;e<i.length;e++)i[e].attributes.name.length>0&&s.push("// "+i[e].attributes.name),s.push("s"+e+" = "+i[e].type+"("+i[e].parents.join(", ")+") "+this.toJCAN(i[e].attributes).replace(/\n/,"\\n")+";"),s.push("");for(e=0;e<r.methods.length;e++)s.push(r.methods[e].obj+"."+r.methods[e].method+"("+this.arrayToParamStr(r.methods[e].params,this.toJCAN)+");"),s.push("");for(e=0;e<r.props.length;e++)s.push(r.props[e].obj+"."+r.props[e].prop+" = "+this.toJCAN(r.props[e].val)+";"),s.push("");return s.join("\n")},toJavaScript:function(t){var i,r,s=this.dump(t),n=[];for(s.methods=this.setBoundingBox(s.methods,t,"board"),r=s.elements,i=0;i<r.length;i++)n.push('board.create("'+r[i].type+'", ['+r[i].parents.join(", ")+"], "+e.toJSON(r[i].attributes)+");");for(i=0;i<s.methods.length;i++)n.push(s.methods[i].obj+"."+s.methods[i].method+"("+this.arrayToParamStr(s.methods[i].params,e.toJSON)+");"),n.push("");for(i=0;i<s.props.length;i++)n.push(s.props[i].obj+"."+s.props[i].prop+" = "+e.toJSON(s.props[i].val)+";"),n.push("");return n.join("\n")}},t.Dump})),define("element/comb",["jxg","utils/type","base/point"],(function(t,e,i){"use strict";return t.createComb=function(t,r,s){var n,o,a,l,c;if(2!==r.length)throw c=r.map((function(t){return"'"+typeof t+"'"})),new Error("JSXGraph: Can't create comb with parent types "+c.join(", ")+".\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");if(e.isArray(r[0])&&r[0].length>1)l=e.copyAttributes(s,t.options,"comb","point1"),n=t.create("point",r[0],l);else if(e.isString(r[0])||e.isPoint(r[0]))n=t.select(r[0]);else if(e.isFunction(r[0])&&e.isPoint(r[0]()))n=r[0]();else{if(!(e.isFunction(r[0])&&r[0]().length&&r[0]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");l=e.copyAttributes(s,t.options,"comb","point1"),n=i.createPoint(t,r[0](),l)}if(e.isArray(r[1])&&r[1].length>1)l=e.copyAttributes(s,t.options,"comb","point2"),o=t.create("point",r[1],l);else if(e.isString(r[1])||e.isPoint(r[1]))o=t.select(r[1]);else if(e.isFunction(r[1])&&e.isPoint(r[1]()))o=r[1]();else{if(!(e.isFunction(r[1])&&r[1]().length&&r[1]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof r[0]+"' and '"+typeof r[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");l=e.copyAttributes(s,t.options,"comb","point2"),o=i.createPoint(t,r[1](),l)}return l=e.copyAttributes(s,t.options,"comb"),e.merge(l,e.copyAttributes(s,t.options,"comb","curve")),a=t.create("curve",[[0],[0]],l),a.updateDataArray=function(){var t,i,r,s,l,c,h,u,d,p,f=0,m=n.Dist(o),b=n,v=o;for(u=e.evaluate(a.visProp.frequency),d=-e.evaluate(a.visProp.angle),p=e.evaluate(a.visProp.width),e.evaluate(a.visProp.reverse)&&(b=o,v=n,d=-d),t=Math.cos(d),i=Math.sin(d),r=(v.X()-b.X())/m,s=(v.Y()-b.Y())/m,t*=p/Math.abs(i),i*=p/Math.abs(i),this.dataX=[],this.dataY=[];f<m;)l=b.X()+r*f,c=b.Y()+s*f,h=Math.min(t,m-f)/Math.abs(t),i*=h,t*=h,this.dataX.push(l),this.dataY.push(c),this.dataX.push(l+r*t+s*i),this.dataY.push(c-r*i+s*t),this.dataX.push(NaN),this.dataY.push(NaN),f+=u},a},t.registerElement("comb",t.createComb),{createComb:t.createComb}})),define("element/slopetriangle",["jxg","utils/type","base/constants","base/polygon"],(function(t,e,i,r){"use strict";var s={removeSlopeTriangle:function(){r.Polygon.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()}};return t.createSlopeTriangle=function(r,n,o){var a,l,c,h,u,d,p,f,m,b=!1;if(1===n.length&&n[0].type===i.OBJECT_TYPE_TANGENT)l=n[0],c=l.glider;else if(1===n.length&&n[0].type===i.OBJECT_TYPE_GLIDER)c=n[0],m=e.copyAttributes(o,r.options,"slopetriangle","tangent"),l=r.create("tangent",[c],m),b=!0;else{if(2!==n.length||n[0].elementClass!==i.OBJECT_CLASS_LINE||!e.isPoint(n[1]))throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof n[0]+"'.");l=n[0],c=n[1]}return m=e.copyAttributes(o,r.options,"slopetriangle","basepoint"),p=r.create("point",[function(){return[c.X()+1,c.Y()]}],m),m=e.copyAttributes(o,r.options,"slopetriangle","baseline"),d=r.create("line",[c,p],m),m=e.copyAttributes(o,r.options,"slopetriangle","glider"),h=r.create("glider",[c.X()+1,c.Y(),d],m),m=e.copyAttributes(o,r.options,"slopetriangle","toppoint"),u=r.create("point",[function(){return[h.X(),h.Y()+(h.X()-c.X())*l.getSlope()]}],m),m=e.copyAttributes(o,r.options,"slopetriangle"),m.borders=e.copyAttributes(m.borders,r.options,"slopetriangle","borders"),a=r.create("polygon",[c,h,u],m),a.Value=s.Value,a.tangent=l,a._isPrivateTangent=b,a.borders[2].setArrow(!1,!1),m=e.copyAttributes(o,r.options,"slopetriangle","label"),f=r.create("text",[function(){return h.X()+.1},function(){return.5*(h.Y()+u.Y())},function(){return""}],m),f._setText((function(){return e.toFixed(a.Value(),e.evaluate(f.visProp.digits))})),f.fullUpdate(),a.glider=h,a.basepoint=p,a.baseline=d,a.toppoint=u,a.label=f,a.subs={glider:h,basePoint:p,baseLine:d,topPoint:u,label:f},a.inherits.push(h,p,d,u,f),a.methodMap=t.deepCopy(a.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value"}),a.remove=s.removeSlopeTriangle,a},t.registerElement("slopetriangle",t.createSlopeTriangle),{createSlopeTriangle:t.createSlopeTriangle}})),define("element/checkbox",["jxg","utils/env","utils/type"],(function(t,e,i){"use strict";var r={CheckboxChangeEventHandler:function(){this._value=this.rendNodeCheckbox.checked,this.board.update()}};return t.createCheckbox=function(s,n,o){var a,l,c=i.copyAttributes(o,s.options,"checkbox");return l=[n[0],n[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],a=s.create("text",l,c),a.type=i.OBJECT_TYPE_CHECKBOX,a.rendNodeCheckbox=a.rendNode.childNodes[0].childNodes[0],a.rendNodeLabel=a.rendNode.childNodes[0].childNodes[1],a.rendNodeTag=a.rendNodeCheckbox,a.rendNodeTag.disabled=!!c.disabled,a.rendNodeLabel.innerHTML=n[2],a.rendNodeCheckbox.id=a.rendNode.id+"_checkbox",a.rendNodeLabel.id=a.rendNode.id+"_label",a.rendNodeLabel.setAttribute("for",a.rendNodeCheckbox.id),a.visPropOld.fontsize="0px",s.renderer.updateTextStyle(a,!1),a.rendNodeCheckbox.checked=c.checked,a._value=c.checked,a.Value=function(){return this._value},a.update=function(){return this.needsUpdate&&(t.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},e.addEvent(a.rendNodeCheckbox,"change",r.CheckboxChangeEventHandler,a),a},t.registerElement("checkbox",t.createCheckbox),{createCheckbox:t.createCheckbox}})),define("element/input",["jxg","utils/env","utils/type"],(function(t,e,i){"use strict";var r={InputInputEventHandler:function(t){this._value=this.rendNodeInput.value,this.board.update()}};return t.createInput=function(s,n,o){var a,l,c=i.copyAttributes(o,s.options,"input");return l=[n[0],n[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><span></span><input type="text" maxlength="'+c.maxlength+'" style="width:100%"/></span>'],a=s.create("text",l,c),a.type=i.OBJECT_TYPE_INPUT,a.rendNodeLabel=a.rendNode.childNodes[0].childNodes[0],a.rendNodeInput=a.rendNode.childNodes[0].childNodes[1],a.rendNodeLabel.innerHTML=n[3],a.rendNodeInput.value=n[2],a.rendNodeTag=a.rendNodeInput,a.rendNodeTag.disabled=!!c.disabled,a.rendNodeLabel.id=a.rendNode.id+"_label",a.rendNodeInput.id=a.rendNode.id+"_input",a._value=n[2],a.update=function(){return this.needsUpdate&&(t.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},a.Value=function(){return this._value},a.set=function(t){return this._value=t,this.rendNodeInput.value=t,this},e.addEvent(a.rendNodeInput,"input",r.InputInputEventHandler,a),e.addEvent(a.rendNodeInput,"mousedown",(function(t){i.exists(t.stopPropagation)&&t.stopPropagation()}),a),e.addEvent(a.rendNodeInput,"touchstart",(function(t){i.exists(t.stopPropagation)&&t.stopPropagation()}),a),e.addEvent(a.rendNodeInput,"pointerdown",(function(t){i.exists(t.stopPropagation)&&t.stopPropagation()}),a),a.visPropOld.fontsize="0px",s.renderer.updateTextStyle(a,!1),a},t.registerElement("input",t.createInput),{createInput:t.createInput}})),define("element/button",["jxg","utils/env","utils/type"],(function(t,e,i){"use strict";var r={ButtonClickEventHandler:function(){this._handler&&this._handler(),this.board.update()}};return t.createButton=function(s,n,o){var a,l,c=i.copyAttributes(o,s.options,"button");return l=[n[0],n[1],'<button type="button" style="width:100%;"></button>'],a=s.create("text",l,c),a.type=i.OBJECT_TYPE_BUTTON,a.rendNodeButton=a.rendNode.childNodes[0],a.rendNodeButton.id=a.rendNode.id+"_button",a.rendNodeButton.innerHTML=n[2],a.rendNodeTag=a.rendNodeButton,a.rendNodeTag.disabled=!!c.disabled,a.visPropOld.fontsize="0px",s.renderer.updateTextStyle(a,!1),n[3]&&(i.isString(n[3])?(a._jc=new t.JessieCode,a._jc.use(s),a._handler=function(){a._jc.parse(n[3])}):a._handler=n[3]),e.addEvent(a.rendNodeButton,"click",r.ButtonClickEventHandler,a),e.addEvent(a.rendNodeButton,"mousedown",(function(t){i.exists(t.stopPropagation)&&t.stopPropagation()}),a),e.addEvent(a.rendNodeButton,"touchstart",(function(t){i.exists(t.stopPropagation)&&t.stopPropagation()}),a),e.addEvent(a.rendNodeButton,"pointerdown",(function(t){i.exists(t.stopPropagation)&&t.stopPropagation()}),a),a},t.registerElement("button",t.createButton),{createButton:t.createButton}})),define("base/foreignobject",["jxg","base/constants","base/coords","base/element","math/math","utils/type","base/coordselement"],(function(t,e,i,r,s,n,o){"use strict";return t.ForeignObject=function(i,r,s,o,a){this.constructor(i,s,e.OBJECT_TYPE_FOREIGNOBJECT,e.OBJECT_CLASS_OTHER),this.element=this.board.select(s.anchor),this.coordsConstructor(r),this._useUserSize=!1,this.size=[1,1],n.exists(a)&&a.length>0&&(this._useUserSize=!0,this.W=n.createFunction(a[0],this.board,""),this.H=n.createFunction(a[1],this.board,""),this.usrSize=[this.W(),this.H()]),this.content=o,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=t.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},t.ForeignObject.prototype=new r,n.copyPrototypeMethods(t.ForeignObject,o,"coordsConstructor"),t.extend(t.ForeignObject.prototype,{hasPoint:function(t,r){var o,a,l,c,h,u,d,p,f,m=this.transformations.length;return n.isObject(n.evaluate(this.visProp.precision))?(c=this.board._inputDevice,h=n.evaluate(this.visProp.precision[c])):h=this.board.options.precision.hasPoint,0===m?(o=t-this.coords.scrCoords[1],a=this.coords.scrCoords[2]-r,l=h,o>=-l&&o-this.size[0]<=l&&a>=-l&&a-this.size[1]<=l):(u=new i(e.COORDS_BY_SCREEN,[t,r],this.board),u=u.usrCoords,d=[u[0]-this.span[0][0],u[1]-this.span[0][1],u[2]-this.span[0][2]],f=s.innerProduct,0<=(p=f(d,this.span[1]))&&p<=f(this.span[1],this.span[1])&&0<=(p=f(d,this.span[2]))&&p<=f(this.span[2],this.span[2]))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var t=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(t=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[t.width,t.height]),this},updateSpan:function(){var t,e,i=this.transformations.length,r=[];if(0===i)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(r[0]=[this.Z(),this.X(),this.Y()],r[1]=[this.Z(),this.X()+this.W(),this.Y()],r[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<i;t++)for(e=0;e<3;e++)r[e]=s.matVecMult(this.transformations[t].matrix,r[e]);for(e=0;e<3;e++)r[e][1]/=r[e][0],r[e][2]/=r[e][0],r[e][0]/=r[e][0];for(e=1;e<3;e++)r[e][0]-=r[0][0],r[e][1]-=r[0][1],r[e][2]-=r[0][2];this.span=r}return this},addTransform:function(t){var e;if(n.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(t=this.parents),t},setSize:function(t,e){return this.W=n.createFunction(t,this.board,""),this.H=n.createFunction(e,this.board,""),this._useUserSize=!0,this},W:function(){},H:function(){}}),t.createForeignObject=function(e,i,r){var s,a,l=i[0],c=i[1],h=[];if(i.length>=2&&(h=i[2]),s=n.copyAttributes(r,e.options,"foreignobject"),!(a=o.create(t.ForeignObject,e,c,s,l,h)))throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]");return a},t.registerElement("foreignobject",t.createForeignObject),t.registerElement("fo",t.createForeignObject),{ForeignObject:t.ForeignObject,createForeignobject:t.createForeignObject}})),define("../build/core.deps.js",["jxg","utils/env","base/constants","utils/type","utils/xml","utils/event","utils/expect","math/math","math/probfuncs","math/ia","math/extrapolate","math/qdt","math/numerics","math/nlp","math/plot","math/metapost","math/statistics","math/symbolic","math/geometry","math/clip","math/poly","math/complex","renderer/abstract","reader/file","parser/geonext","base/board","options","jsxgraph","base/element","base/coords","base/coordselement","base/point","base/line","base/group","base/circle","element/conic","base/polygon","base/curve","element/arc","element/sector","base/composition","element/composition","element/locus","base/text","base/image","element/slider","element/measure","base/chart","base/transformation","base/turtle","utils/color","base/ticks","utils/zip","utils/base64","utils/uuid","utils/encoding","server/server","parser/datasource","parser/jessiecode","parser/ca","utils/dump","renderer/svg","renderer/vml","renderer/canvas","renderer/no","element/comb","element/slopetriangle","element/checkbox","element/input","element/button","base/foreignobject"],(function(t,e){"use strict";return e.isBrowser?window.JXG=t:e.isNode()&&"object"==typeof module?module.exports=t:e.isWebWorker()&&(self.JXG=t),t})),require("../build/core.deps.js")}))}).call(this,__webpack_require__("c8ba"),__webpack_require__("4362"),__webpack_require__("62e4")(module))},b575:function(t,e,i){var r,s,n,o,a,l,c,h,u=i("da84"),d=i("0366"),p=i("06cf").f,f=i("2cf4").set,m=i("1cdc"),b=i("d4c3"),v=i("a4b4"),g=i("605d"),y=u.MutationObserver||u.WebKitMutationObserver,_=u.document,C=u.process,P=u.Promise,O=p(u,"queueMicrotask"),x=O&&O.value;x||(r=function(){var t,e;g&&(t=C.domain)&&t.exit();while(s){e=s.fn,s=s.next;try{e()}catch(i){throw s?o():n=void 0,i}}n=void 0,t&&t.enter()},m||g||v||!y||!_?!b&&P&&P.resolve?(c=P.resolve(void 0),c.constructor=P,h=d(c.then,c),o=function(){h(r)}):g?o=function(){C.nextTick(r)}:(f=d(f,u),o=function(){f(r)}):(a=!0,l=_.createTextNode(""),new y(r).observe(l,{characterData:!0}),o=function(){l.data=a=!a})),t.exports=x||function(t){var e={fn:t,next:void 0};n&&(n.next=e),s||(s=e,o()),n=e}},b622:function(t,e,i){var r=i("da84"),s=i("5692"),n=i("1a2d"),o=i("90e3"),a=i("4930"),l=i("fdbf"),c=s("wks"),h=r.Symbol,u=h&&h["for"],d=l?h:h&&h.withoutSetter||o;t.exports=function(t){if(!n(c,t)||!a&&"string"!=typeof c[t]){var e="Symbol."+t;a&&n(h,t)?c[t]=h[t]:c[t]=l&&u?u(e):d(e)}return c[t]}},b680:function(t,e,i){"use strict";var r=i("23e7"),s=i("da84"),n=i("e330"),o=i("5926"),a=i("408a"),l=i("1148"),c=i("d039"),h=s.RangeError,u=s.String,d=Math.floor,p=n(l),f=n("".slice),m=n(1..toFixed),b=function(t,e,i){return 0===e?i:e%2===1?b(t,e-1,i*t):b(t*t,e/2,i)},v=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},g=function(t,e,i){var r=-1,s=i;while(++r<6)s+=e*t[r],t[r]=s%1e7,s=d(s/1e7)},y=function(t,e){var i=6,r=0;while(--i>=0)r+=t[i],t[i]=d(r/e),r=r%e*1e7},_=function(t){var e=6,i="";while(--e>=0)if(""!==i||0===e||0!==t[e]){var r=u(t[e]);i=""===i?r:i+p("0",7-r.length)+r}return i},C=c((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!c((function(){m({})}));r({target:"Number",proto:!0,forced:C},{toFixed:function(t){var e,i,r,s,n=a(this),l=o(t),c=[0,0,0,0,0,0],d="",m="0";if(l<0||l>20)throw h("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return u(n);if(n<0&&(d="-",n=-n),n>1e-21)if(e=v(n*b(2,69,1))-69,i=e<0?n*b(2,-e,1):n/b(2,e,1),i*=4503599627370496,e=52-e,e>0){g(c,0,i),r=l;while(r>=7)g(c,1e7,0),r-=7;g(c,b(10,r,1),0),r=e-1;while(r>=23)y(c,1<<23),r-=23;y(c,1<<r),g(c,1,1),y(c,2),m=_(c)}else g(c,0,i),g(c,1<<-e,0),m=_(c)+p("0",l);return l>0?(s=m.length,m=d+(s<=l?"0."+p("0",l-s)+m:f(m,0,s-l)+"."+f(m,s-l))):m=d+m,m}})},b727:function(t,e,i){var r=i("0366"),s=i("e330"),n=i("44ad"),o=i("7b0b"),a=i("07fa"),l=i("65f0"),c=s([].push),h=function(t){var e=1==t,i=2==t,s=3==t,h=4==t,u=6==t,d=7==t,p=5==t||u;return function(f,m,b,v){for(var g,y,_=o(f),C=n(_),P=r(m,b),O=a(C),x=0,E=v||l,w=e?E(f,O):i||d?E(f,0):void 0;O>x;x++)if((p||x in C)&&(g=C[x],y=P(g,x,_),t))if(e)w[x]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:c(w,g)}else switch(t){case 4:return!1;case 7:c(w,g)}return u?-1:s||h?h:w}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},bfbe:function(t,e,i){"use strict";i.d(e,"a",(function(){return T}));var r=i("7a23");function s(t){return{all:t=t||new Map,on:function(e,i){var r=t.get(e);r?r.push(i):t.set(e,[i])},off:function(e,i){var r=t.get(e);r&&(i?r.splice(r.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var r=t.get(e);r&&r.slice().map((function(t){t(i)})),(r=t.get("*"))&&r.slice().map((function(t){t(e,i)}))}}}const n=s(),o=new Map,a={x:["left","center","right"],y:["top","bottom"]},l=(t=>()=>t++)(0),c=t=>"string"!==typeof t?[]:t.split(/\s+/gi).filter(t=>t),h=t=>{"string"===typeof t&&(t=c(t));let e=null,i=null;return t.forEach(t=>{-1!==a.y.indexOf(t)&&(i=t),-1!==a.x.indexOf(t)&&(e=t)}),{x:e,y:i}};class u{constructor(t,e,i){this.remaining=e,this.callback=t,this.notifyItem=i,this.resume()}pause(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}}var d={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:t=>{const e=t.clientHeight;return{height:[e,0],opacity:[1,0]}},leave:{height:0,opacity:[0,1]}}},p=Object(r["k"])({name:"velocity-group",emits:["after-leave","leave","enter"],methods:{enter(t,e){this.$emit("enter",{el:t,complete:e})},leave(t,e){this.$emit("leave",{el:t,complete:e})},afterLeave(){this.$emit("after-leave")}}});function f(t,e,i,s,n,o){return Object(r["s"])(),Object(r["e"])(r["b"],{tag:"span",css:!1,onEnter:t.enter,onLeave:t.leave,onAfterLeave:t.afterLeave},{default:Object(r["F"])(()=>[Object(r["x"])(t.$slots,"default")]),_:3},8,["onEnter","onLeave","onAfterLeave"])}p.render=f,p.__file="src/VelocityGroup.vue";var m=Object(r["k"])({name:"css-group",inheritAttrs:!1,props:{name:{type:String,required:!0}}});function b(t,e,i,s,n,o){return Object(r["s"])(),Object(r["e"])(r["b"],{tag:"span",name:t.name},{default:Object(r["F"])(()=>[Object(r["x"])(t.$slots,"default")]),_:3},8,["name"])}m.render=b,m.__file="src/CssGroup.vue";const v="[-+]?[0-9]*.?[0-9]+",g=[{name:"px",regexp:new RegExp(`^${v}px$`)},{name:"%",regexp:new RegExp(`^${v}%$`)},{name:"px",regexp:new RegExp(`^${v}$`)}],y=t=>{if("auto"===t)return{type:t,value:0};for(let e=0;e<g.length;e++){const i=g[e];if(i.regexp.test(t))return{type:i.name,value:parseFloat(t)}}return{type:"",value:t}},_=t=>{switch(typeof t){case"number":return{type:"px",value:t};case"string":return y(t);default:return{type:"",value:t}}},C={IDLE:0,DESTROYED:2};var P=Object(r["k"])({name:"notifications",components:{VelocityGroup:p,CssGroup:m},props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:d.position},classes:{type:String,default:"vue-notification"},animationType:{type:String,default:"css"},animation:{type:Object,default:d.velocityAnimation},animationName:{type:String,default:d.cssAnimation},speed:{type:Number,default:300},cooldown:{type:Number,default:0},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1}},emits:["click","destroy"],data(){return{list:[],velocity:o.get("velocity"),timerControl:null}},computed:{actualWidth(){return _(this.width)},isVA(){return"velocity"===this.animationType},componentName(){return this.isVA?"velocity-group":"css-group"},styles(){const{x:t,y:e}=h(this.position),i=this.actualWidth.value,r=this.actualWidth.type,s={width:i+r};return e&&(s[e]="0px"),t&&("center"===t?s["left"]=`calc(50% - ${+i/2}${r})`:s[t]="0px"),s},active(){return this.list.filter(t=>t.state!==C.DESTROYED)},botToTop(){return this.styles.hasOwnProperty("bottom")}},mounted(){n.on("add",this.addItem),n.on("close",this.closeItem)},methods:{destroyIfNecessary(t){this.$emit("click",t),this.closeOnClick&&this.destroy(t)},pauseTimeout(){var t;this.pauseOnHover&&(null===(t=this.timerControl)||void 0===t||t.pause())},resumeTimeout(){var t;this.pauseOnHover&&(null===(t=this.timerControl)||void 0===t||t.resume())},addItem(t={}){if(t.group||(t.group=""),t.data||(t.data={}),this.group!==t.group)return;if(t.clean||t.clear)return void this.destroyAll();const e="number"===typeof t.duration?t.duration:this.duration,i="number"===typeof t.speed?t.speed:this.speed,r="boolean"===typeof t.ignoreDuplicates?t.ignoreDuplicates:this.ignoreDuplicates,{title:s,text:n,type:o,data:a,id:c}=t,h={id:c||l(),title:s,text:n,type:o,state:C.IDLE,speed:i,length:e+2*i,data:a};e>=0&&(this.timerControl=new u(()=>this.destroy(h),h.length,h));const d=this.reverse?!this.botToTop:this.botToTop;let p=-1;const f=this.active.some(e=>e.title===t.title&&e.text===t.text),m=!r||!f;m&&(d?(this.list.push(h),this.active.length>this.max&&(p=0)):(this.list.unshift(h),this.active.length>this.max&&(p=this.active.length-1)),-1!==p&&this.destroy(this.active[p]))},closeItem(t){this.destroyById(t)},notifyClass(t){var e;return["vue-notification-template",this.classes,null!==(e=t.type)&&void 0!==e?e:""]},notifyWrapperStyle(t){return this.isVA?void 0:{transition:`all ${t.speed}ms`}},destroy(t){clearTimeout(t.timer),t.state=C.DESTROYED,this.isVA||this.clean(),this.$emit("destroy",t)},destroyById(t){const e=this.list.find(e=>e.id===t);e&&this.destroy(e)},destroyAll(){this.active.forEach(this.destroy)},getAnimation(t,e){var i;const r=null===(i=this.animation)||void 0===i?void 0:i[t];return"function"===typeof r?r.call(this,e):r},enter(t,e){if(!this.isVA)return;const i=this.getAnimation("enter",t);this.velocity(t,i,{duration:this.speed,complete:e})},leave(t,e){if(!this.isVA)return;const i=this.getAnimation("leave",t);this.velocity(t,i,{duration:this.speed,complete:e})},clean(){this.list=this.list.filter(t=>t.state!==C.DESTROYED)}}});function O(t,e,i,s,n,o){return Object(r["s"])(),Object(r["e"])("div",{class:"vue-notification-group",style:t.styles},[(Object(r["s"])(),Object(r["e"])(Object(r["z"])(t.componentName),{name:t.animationName,onEnter:t.enter,onLeave:t.leave,onAfterLeave:t.clean},{default:Object(r["F"])(()=>[(Object(r["s"])(!0),Object(r["e"])(r["a"],null,Object(r["w"])(t.active,i=>(Object(r["s"])(),Object(r["e"])("div",{key:i.id,class:"vue-notification-wrapper",style:t.notifyWrapperStyle(i),"data-id":i.id,onMouseenter:e[1]||(e[1]=(...e)=>t.pauseTimeout&&t.pauseTimeout(...e)),onMouseleave:e[2]||(e[2]=(...e)=>t.resumeTimeout&&t.resumeTimeout(...e))},[Object(r["x"])(t.$slots,"body",{class:[t.classes,i.type],item:i,close:()=>t.destroy(i)},()=>[Object(r["f"])(" Default slot template "),Object(r["j"])("div",{class:t.notifyClass(i),onClick:e=>t.destroyIfNecessary(i)},[i.title?(Object(r["s"])(),Object(r["e"])("div",{key:0,class:"notification-title",innerHTML:i.title},null,8,["innerHTML"])):Object(r["f"])("v-if",!0),Object(r["j"])("div",{class:"notification-content",innerHTML:i.text},null,8,["innerHTML"])],10,["onClick"])])],44,["data-id"]))),128))]),_:3},8,["name","onEnter","onLeave","onAfterLeave"]))],4)}function x(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===i&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}var E="\n.vue-notification-group {\n  display: block;\n  position: fixed;\n  z-index: 5000;\n}\n.vue-notification-wrapper {\n  display: block;\n  overflow: hidden;\n  width: 100%;\n  margin: 0;\n  padding: 0;\n}\n.notification-title {\n  font-weight: 600;\n}\n.vue-notification-template {\n  display: block;\n  box-sizing: border-box;\n  background: white;\n  text-align: left;\n}\n.vue-notification {\n  display: block;\n  box-sizing: border-box;\n  text-align: left;\n  font-size: 12px;\n  padding: 10px;\n  margin: 0 5px 5px;\n\n  color: white;\n  background: #44A4FC;\n  border-left: 5px solid #187FE7;\n}\n.vue-notification.warn {\n  background: #ffb648;\n  border-left-color: #f48a06;\n}\n.vue-notification.error {\n  background: #E54D42;\n  border-left-color: #B82E24;\n}\n.vue-notification.success {\n  background: #68CD86;\n  border-left-color: #42A85F;\n}\n.vn-fade-enter-active, .vn-fade-leave-active, .vn-fade-move  {\n  transition: all .5s;\n}\n.vn-fade-enter-from, .vn-fade-leave-to {\n  opacity: 0;\n}\n\n";x(E),P.render=O,P.__file="src/Notifications.vue";const w=t=>{"string"===typeof t&&(t={title:"",text:t}),"object"===typeof t&&n.emit("add",t)};function S(t,e={}){Object.entries(e).forEach(t=>o.set(...t));const i=e.name||"notify";t.config.globalProperties["$"+i]=w,t.component(e.componentName||"notifications",P)}w.close=function(t){n.emit("close",t)};var T={install:S}},c04e:function(t,e,i){var r=i("da84"),s=i("c65b"),n=i("861d"),o=i("d9b5"),a=i("dc4a"),l=i("485a"),c=i("b622"),h=r.TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!n(t)||o(t))return t;var i,r=a(t,u);if(r){if(void 0===e&&(e="default"),i=s(r,t,e),!n(i)||o(i))return i;throw h("Can't convert object to primitive value")}return void 0===e&&(e="number"),l(t,e)}},c430:function(t,e){t.exports=!1},c65b:function(t,e){var i=Function.prototype.call;t.exports=i.bind?i.bind(i):function(){return i.apply(i,arguments)}},c6b6:function(t,e,i){var r=i("e330"),s=r({}.toString),n=r("".slice);t.exports=function(t){return n(s(t),8,-1)}},c6cd:function(t,e,i){var r=i("da84"),s=i("ce4e"),n="__core-js_shared__",o=r[n]||s(n,{});t.exports=o},c8ba:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(r){"object"===typeof window&&(i=window)}t.exports=i},ca84:function(t,e,i){var r=i("e330"),s=i("1a2d"),n=i("fc6a"),o=i("4d64").indexOf,a=i("d012"),l=r([].push);t.exports=function(t,e){var i,r=n(t),c=0,h=[];for(i in r)!s(a,i)&&s(r,i)&&l(h,i);while(e.length>c)s(r,i=e[c++])&&(~o(h,i)||l(h,i));return h}},cc12:function(t,e,i){var r=i("da84"),s=i("861d"),n=r.document,o=s(n)&&s(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},cca6:function(t,e,i){var r=i("23e7"),s=i("60da");r({target:"Object",stat:!0,forced:Object.assign!==s},{assign:s})},cdf9:function(t,e,i){var r=i("825a"),s=i("861d"),n=i("f069");t.exports=function(t,e){if(r(t),s(e)&&e.constructor===t)return e;var i=n.f(t),o=i.resolve;return o(e),i.promise}},ce4e:function(t,e,i){var r=i("da84"),s=Object.defineProperty;t.exports=function(t,e){try{s(r,t,{value:e,configurable:!0,writable:!0})}catch(i){r[t]=e}return e}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,i){var r=i("da84"),s=i("1626"),n=function(t){return s(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?n(r[t]):r[t]&&r[t][e]}},d16f:function(t,e,i){const r=i("f604");e.parseFont=r,e.createCanvas=function(t,e){return Object.assign(document.createElement("canvas"),{width:t,height:e})},e.createImageData=function(t,e,i){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(t);case 2:return new ImageData(t,e);default:return new ImageData(t,e,i)}},e.loadImage=function(t,e){return new Promise((function(i,r){const s=Object.assign(document.createElement("img"),e);function n(){s.onload=null,s.onerror=null}s.onload=function(){n(),i(s)},s.onerror=function(){n(),r(new Error('Failed to load the image "'+t+'"'))},s.src=t}))}},d1e7:function(t,e,i){"use strict";var r={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,n=s&&!r.call({1:2},1);e.f=n?function(t){var e=s(this,t);return!!e&&e.enumerable}:r},d2bb:function(t,e,i){var r=i("e330"),s=i("825a"),n=i("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{t=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(i,[]),e=i instanceof Array}catch(o){}return function(i,r){return s(i),n(r),e?t(i,r):i.__proto__=r,i}}():void 0)},d3b7:function(t,e,i){var r=i("00ee"),s=i("6eeb"),n=i("b041");r||s(Object.prototype,"toString",n,{unsafe:!0})},d44e:function(t,e,i){var r=i("9bf2").f,s=i("1a2d"),n=i("b622"),o=n("toStringTag");t.exports=function(t,e,i){t&&!i&&(t=t.prototype),t&&!s(t,o)&&r(t,o,{configurable:!0,value:e})}},d4c3:function(t,e,i){var r=i("342f"),s=i("da84");t.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==s.Pebble},d784:function(t,e,i){"use strict";i("ac1f");var r=i("e330"),s=i("6eeb"),n=i("9263"),o=i("d039"),a=i("b622"),l=i("9112"),c=a("species"),h=RegExp.prototype;t.exports=function(t,e,i,u){var d=a(t),p=!o((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),f=p&&!o((function(){var e=!1,i=/a/;return"split"===t&&(i={},i.constructor={},i.constructor[c]=function(){return i},i.flags="",i[d]=/./[d]),i.exec=function(){return e=!0,null},i[d](""),!e}));if(!p||!f||i){var m=r(/./[d]),b=e(d,""[t],(function(t,e,i,s,o){var a=r(t),l=e.exec;return l===n||l===h.exec?p&&!o?{done:!0,value:m(e,i,s)}:{done:!0,value:a(i,e,s)}:{done:!1}}));s(String.prototype,t,b[0]),s(h,d,b[1])}u&&l(h[d],"sham",!0)}},d81d:function(t,e,i){"use strict";var r=i("23e7"),s=i("b727").map,n=i("1dde"),o=n("map");r({target:"Array",proto:!0,forced:!o},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},d9b5:function(t,e,i){var r=i("da84"),s=i("d066"),n=i("1626"),o=i("3a9b"),a=i("fdbf"),l=r.Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=s("Symbol");return n(e)&&o(e.prototype,l(t))}},da84:function(t,e,i){(function(e){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,i("c8ba"))},dc4a:function(t,e,i){var r=i("59ed");t.exports=function(t,e){var i=t[e];return null==i?void 0:r(i)}},df75:function(t,e,i){var r=i("ca84"),s=i("7839");t.exports=Object.keys||function(t){return r(t,s)}},df7c:function(t,e,i){(function(t){function i(t,e){for(var i=0,r=t.length-1;r>=0;r--){var s=t[r];"."===s?t.splice(r,1):".."===s?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,i=0,r=-1,s=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!s){i=e+1;break}}else-1===r&&(s=!1,r=e+1);return-1===r?"":t.slice(i,r)}function s(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}e.resolve=function(){for(var e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var o=n>=0?arguments[n]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return e=i(s(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===n(t,-1);return t=i(s(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(s(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,i){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var i=t.length-1;i>=0;i--)if(""!==t[i])break;return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var s=r(t.split("/")),n=r(i.split("/")),o=Math.min(s.length,n.length),a=o,l=0;l<o;l++)if(s[l]!==n[l]){a=l;break}var c=[];for(l=a;l<s.length;l++)c.push("..");return c=c.concat(n.slice(a)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,r=-1,s=!0,n=t.length-1;n>=1;--n)if(e=t.charCodeAt(n),47===e){if(!s){r=n;break}}else s=!1;return-1===r?i?"/":".":i&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var i=r(t);return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,i=0,r=-1,s=!0,n=0,o=t.length-1;o>=0;--o){var a=t.charCodeAt(o);if(47!==a)-1===r&&(s=!1,r=o+1),46===a?-1===e?e=o:1!==n&&(n=1):-1!==e&&(n=-1);else if(!s){i=o+1;break}}return-1===e||-1===r||0===n||1===n&&e===r-1&&e===i+1?"":t.slice(e,r)};var n="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i("4362"))},e163:function(t,e,i){var r=i("da84"),s=i("1a2d"),n=i("1626"),o=i("7b0b"),a=i("f772"),l=i("e177"),c=a("IE_PROTO"),h=r.Object,u=h.prototype;t.exports=l?h.getPrototypeOf:function(t){var e=o(t);if(s(e,c))return e[c];var i=e.constructor;return n(i)&&e instanceof i?i.prototype:e instanceof h?u:null}},e177:function(t,e,i){var r=i("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,i){"use strict";var r=i("fc6a"),s=i("44d2"),n=i("3f8c"),o=i("69f3"),a=i("9bf2").f,l=i("7dd0"),c=i("c430"),h=i("83ab"),u="Array Iterator",d=o.set,p=o.getterFor(u);t.exports=l(Array,"Array",(function(t,e){d(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,i=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:r,done:!1}:"values"==i?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var f=n.Arguments=n.Array;if(s("keys"),s("values"),s("entries"),!c&&h&&"values"!==f.name)try{a(f,"name",{value:"values"})}catch(m){}},e2cc:function(t,e,i){var r=i("6eeb");t.exports=function(t,e,i){for(var s in e)r(t,s,e[s],i);return t}},e330:function(t,e){var i=Function.prototype,r=i.bind,s=i.call,n=r&&r.bind(s);t.exports=r?function(t){return t&&n(s,t)}:function(t){return t&&function(){return s.apply(t,arguments)}}},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6cf:function(t,e,i){"use strict";var r,s,n,o,a=i("23e7"),l=i("c430"),c=i("da84"),h=i("d066"),u=i("c65b"),d=i("fea9"),p=i("6eeb"),f=i("e2cc"),m=i("d2bb"),b=i("d44e"),v=i("2626"),g=i("59ed"),y=i("1626"),_=i("861d"),C=i("19aa"),P=i("8925"),O=i("2266"),x=i("1c7e"),E=i("4840"),w=i("2cf4").set,S=i("b575"),T=i("cdf9"),N=i("44de"),M=i("f069"),A=i("e667"),R=i("69f3"),k=i("94ca"),L=i("b622"),j=i("6069"),I=i("605d"),B=i("2d00"),D=L("species"),Y="Promise",X=R.getterFor(Y),F=R.set,U=R.getterFor(Y),G=d&&d.prototype,J=d,z=G,H=c.TypeError,V=c.document,$=c.process,q=M.f,W=q,Q=!!(V&&V.createEvent&&c.dispatchEvent),Z=y(c.PromiseRejectionEvent),K="unhandledrejection",tt="rejectionhandled",et=0,it=1,rt=2,st=1,nt=2,ot=!1,at=k(Y,(function(){var t=P(J),e=t!==String(J);if(!e&&66===B)return!0;if(l&&!z["finally"])return!0;if(B>=51&&/native code/.test(t))return!1;var i=new J((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))},s=i.constructor={};return s[D]=r,ot=i.then((function(){}))instanceof r,!ot||!e&&j&&!Z})),lt=at||!x((function(t){J.all(t)["catch"]((function(){}))})),ct=function(t){var e;return!(!_(t)||!y(e=t.then))&&e},ht=function(t,e){if(!t.notified){t.notified=!0;var i=t.reactions;S((function(){var r=t.value,s=t.state==it,n=0;while(i.length>n){var o,a,l,c=i[n++],h=s?c.ok:c.fail,d=c.resolve,p=c.reject,f=c.domain;try{h?(s||(t.rejection===nt&&ft(t),t.rejection=st),!0===h?o=r:(f&&f.enter(),o=h(r),f&&(f.exit(),l=!0)),o===c.promise?p(H("Promise-chain cycle")):(a=ct(o))?u(a,o,d,p):d(o)):p(r)}catch(m){f&&!l&&f.exit(),p(m)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&dt(t)}))}},ut=function(t,e,i){var r,s;Q?(r=V.createEvent("Event"),r.promise=e,r.reason=i,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:i},!Z&&(s=c["on"+t])?s(r):t===K&&N("Unhandled promise rejection",i)},dt=function(t){u(w,c,(function(){var e,i=t.facade,r=t.value,s=pt(t);if(s&&(e=A((function(){I?$.emit("unhandledRejection",r,i):ut(K,i,r)})),t.rejection=I||pt(t)?nt:st,e.error))throw e.value}))},pt=function(t){return t.rejection!==st&&!t.parent},ft=function(t){u(w,c,(function(){var e=t.facade;I?$.emit("rejectionHandled",e):ut(tt,e,t.value)}))},mt=function(t,e,i){return function(r){t(e,r,i)}},bt=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=rt,ht(t,!0))},vt=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw H("Promise can't be resolved itself");var r=ct(e);r?S((function(){var i={done:!1};try{u(r,e,mt(vt,i,t),mt(bt,i,t))}catch(s){bt(i,s,t)}})):(t.value=e,t.state=it,ht(t,!1))}catch(s){bt({done:!1},s,t)}}};if(at&&(J=function(t){C(this,z),g(t),u(r,this);var e=X(this);try{t(mt(vt,e),mt(bt,e))}catch(i){bt(e,i)}},z=J.prototype,r=function(t){F(this,{type:Y,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:et,value:void 0})},r.prototype=f(z,{then:function(t,e){var i=U(this),r=i.reactions,s=q(E(this,J));return s.ok=!y(t)||t,s.fail=y(e)&&e,s.domain=I?$.domain:void 0,i.parent=!0,r[r.length]=s,i.state!=et&&ht(i,!1),s.promise},catch:function(t){return this.then(void 0,t)}}),s=function(){var t=new r,e=X(t);this.promise=t,this.resolve=mt(vt,e),this.reject=mt(bt,e)},M.f=q=function(t){return t===J||t===n?new s(t):W(t)},!l&&y(d)&&G!==Object.prototype)){o=G.then,ot||(p(G,"then",(function(t,e){var i=this;return new J((function(t,e){u(o,i,t,e)})).then(t,e)}),{unsafe:!0}),p(G,"catch",z["catch"],{unsafe:!0}));try{delete G.constructor}catch(gt){}m&&m(G,z)}a({global:!0,wrap:!0,forced:at},{Promise:J}),b(J,Y,!1,!0),v(Y),n=h(Y),a({target:Y,stat:!0,forced:at},{reject:function(t){var e=q(this);return u(e.reject,void 0,t),e.promise}}),a({target:Y,stat:!0,forced:l||at},{resolve:function(t){return T(l&&this===n?J:this,t)}}),a({target:Y,stat:!0,forced:lt},{all:function(t){var e=this,i=q(e),r=i.resolve,s=i.reject,n=A((function(){var i=g(e.resolve),n=[],o=0,a=1;O(t,(function(t){var l=o++,c=!1;a++,u(i,e,t).then((function(t){c||(c=!0,n[l]=t,--a||r(n))}),s)})),--a||r(n)}));return n.error&&s(n.value),i.promise},race:function(t){var e=this,i=q(e),r=i.reject,s=A((function(){var s=g(e.resolve);O(t,(function(t){u(s,e,t).then(i.resolve,r)}))}));return s.error&&r(s.value),i.promise}})},e893:function(t,e,i){var r=i("1a2d"),s=i("56ef"),n=i("06cf"),o=i("9bf2");t.exports=function(t,e,i){for(var a=s(e),l=o.f,c=n.f,h=0;h<a.length;h++){var u=a[h];r(t,u)||i&&r(i,u)||l(t,u,c(e,u))}}},e8b5:function(t,e,i){var r=i("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,i){var r=i("b622"),s=i("3f8c"),n=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||o[n]===t)}},e9c4:function(t,e,i){var r=i("23e7"),s=i("da84"),n=i("d066"),o=i("2ba4"),a=i("e330"),l=i("d039"),c=s.Array,h=n("JSON","stringify"),u=a(/./.exec),d=a("".charAt),p=a("".charCodeAt),f=a("".replace),m=a(1..toString),b=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,g=/^[\uDC00-\uDFFF]$/,y=function(t,e,i){var r=d(i,e-1),s=d(i,e+1);return u(v,t)&&!u(g,s)||u(g,t)&&!u(v,r)?"\\u"+m(p(t,0),16):t},_=l((function(){return'"\\udf06\\ud834"'!==h("\udf06\ud834")||'"\\udead"'!==h("\udead")}));h&&r({target:"JSON",stat:!0,forced:_},{stringify:function(t,e,i){for(var r=0,s=arguments.length,n=c(s);r<s;r++)n[r]=arguments[r];var a=o(h,null,n);return"string"==typeof a?f(a,b,y):a}})},f069:function(t,e,i){"use strict";var r=i("59ed"),s=function(t){var e,i;this.promise=new t((function(t,r){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=r})),this.resolve=r(e),this.reject=r(i)};t.exports.f=function(t){return new s(t)}},f36a:function(t,e,i){var r=i("e330");t.exports=r([].slice)},f5df:function(t,e,i){var r=i("da84"),s=i("00ee"),n=i("1626"),o=i("c6b6"),a=i("b622"),l=a("toStringTag"),c=r.Object,h="Arguments"==o(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(i){}};t.exports=s?o:function(t){var e,i,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=u(e=c(t),l))?i:h?o(e):"Object"==(r=o(e))&&n(e.callee)?"Arguments":r}},f604:function(t,e,i){"use strict";const r="bold|bolder|lighter|[1-9]00",s="italic|oblique",n="small-caps",o="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",a="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",l="'([^']+)'|\"([^\"]+)\"|[\\w\\s-]+",c=new RegExp("("+r+") +","i"),h=new RegExp("("+s+") +","i"),u=new RegExp("("+n+") +","i"),d=new RegExp("("+o+") +","i"),p=new RegExp("([\\d\\.]+)("+a+") *((?:"+l+")( *, *(?:"+l+"))*)"),f={},m=16;t.exports=function(t){if(f[t])return f[t];const e=p.exec(t);if(!e)return;const i={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(e[1]),unit:e[2],family:e[3].replace(/["']/g,"").replace(/ *, */g,",")};let r,s,n,o,a=t.substring(0,e.index);switch((r=c.exec(a))&&(i.weight=r[1]),(s=h.exec(a))&&(i.style=s[1]),(n=u.exec(a))&&(i.variant=n[1]),(o=d.exec(a))&&(i.stretch=o[1]),i.unit){case"pt":i.size/=.75;break;case"pc":i.size*=16;break;case"in":i.size*=96;break;case"cm":i.size*=96/2.54;break;case"mm":i.size*=96/25.4;break;case"%":break;case"em":case"rem":i.size*=m/.75;break;case"q":i.size*=96/25.4/4;break}return f[t]=i}},f772:function(t,e,i){var r=i("5692"),s=i("90e3"),n=r("keys");t.exports=function(t){return n[t]||(n[t]=s(t))}},fc6a:function(t,e,i){var r=i("44ad"),s=i("1d80");t.exports=function(t){return r(s(t))}},fce3:function(t,e,i){var r=i("d039"),s=i("da84"),n=s.RegExp;t.exports=r((function(){var t=n(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},fdbf:function(t,e,i){var r=i("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,i){var r=i("da84");t.exports=r.Promise}}]);
//# sourceMappingURL=chunk-vendors.cf43de9c.js.map